/*!
 * sdk.js v1.26.8
 * 6/24/2024, 12:54:53 AM
 * (c) 2017 mudu.tv
 * 杭州雅顾科技有限公司 版权所有
 * 
 */
!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){n(1),n(2);n(12)},function(e,t,n){var i,r;!function(o,a){"use strict";i=a,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(this,function(){var e,t,n=Array,i=n.prototype,r=Object,o=r.prototype,a=Function,s=a.prototype,u=String,c=u.prototype,l=Number,f=l.prototype,h=i.slice,d=i.splice,p=i.push,v=i.unshift,y=i.concat,g=i.join,m=s.call,_=s.apply,b=Math.max,w=Math.min,k=o.toString,S="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,T=Function.prototype.toString,E=/^\s*class /,x=function(e){try{var t=T.call(e),n=t.replace(/\/\/.*\n/g,""),i=n.replace(/\/\*[.\s\S]*\*\//g,""),r=i.replace(/\n/gm," ").replace(/ {2}/g," ");return E.test(r)}catch(o){return!1}},P=function(e){try{return!x(e)&&(T.call(e),!0)}catch(t){return!1}},C="[object Function]",O="[object GeneratorFunction]",e=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(S)return P(e);if(x(e))return!1;var t=k.call(e);return t===C||t===O},A=RegExp.prototype.exec,M=function(e){try{return A.call(e),!0}catch(t){return!1}},I="[object RegExp]";t=function(e){return"object"==typeof e&&(S?M(e):k.call(e)===I)};var R,D=String.prototype.valueOf,j=function(e){try{return D.call(e),!0}catch(t){return!1}},L="[object String]";R=function(e){return"string"==typeof e||"object"==typeof e&&(S?j(e):k.call(e)===L)};var B=r.defineProperty&&function(){try{var e={};r.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(n){return!1}}(),N=function(e){var t;return t=B?function(e,t,n,i){!i&&t in e||r.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,i){!i&&t in e||(e[t]=n)},function(n,i,r){for(var o in i)e.call(i,o)&&t(n,o,i[o],r)}}(o.hasOwnProperty),U=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},F=l.isNaN||function(e){return e!==e},H={ToInteger:function(e){var t=+e;return F(t)?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(t){var n,i,r;if(U(t))return t;if(i=t.valueOf,e(i)&&(n=i.call(t),U(n)))return n;if(r=t.toString,e(r)&&(n=r.call(t),U(n)))return n;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return r(e)},ToUint32:function(e){return e>>>0}},W=function(){};N(s,{bind:function(t){var n=this;if(!e(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i,o=h.call(arguments,1),s=function(){if(this instanceof i){var e=_.call(n,this,y.call(o,h.call(arguments)));return r(e)===e?e:this}return _.call(n,t,y.call(o,h.call(arguments)))},u=b(0,n.length-o.length),c=[],l=0;l<u;l++)p.call(c,"$"+l);return i=a("binder","return function ("+g.call(c,",")+"){ return binder.apply(this, arguments); }")(s),n.prototype&&(W.prototype=n.prototype,i.prototype=new W,W.prototype=null),i}});var q=m.bind(o.hasOwnProperty),G=m.bind(o.toString),z=m.bind(h),V=_.bind(h),J=m.bind(c.slice),X=m.bind(c.split),Y=m.bind(c.indexOf),$=m.bind(p),K=m.bind(o.propertyIsEnumerable),Q=m.bind(i.sort),Z=n.isArray||function(e){return"[object Array]"===G(e)},ee=1!==[].unshift(0);N(i,{unshift:function(){return v.apply(this,arguments),this.length}},ee),N(n,{isArray:Z});var te=r("a"),ne="a"!==te[0]||!(0 in te),ie=function(e){var t=!0,n=!0,i=!1;if(e)try{e.call("foo",function(e,n,i){"object"!=typeof i&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(r){i=!0}return!!e&&!i&&t&&n};N(i,{forEach:function(t){var n,i=H.ToObject(this),r=ne&&R(this)?X(this,""):i,o=-1,a=H.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in r&&("undefined"==typeof n?t(r[o],o,i):t.call(n,r[o],o,i))}},!ie(i.forEach)),N(i,{map:function(t){var i,r=H.ToObject(this),o=ne&&R(this)?X(this,""):r,a=H.ToUint32(o.length),s=n(a);if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.map callback must be a function");for(var u=0;u<a;u++)u in o&&("undefined"==typeof i?s[u]=t(o[u],u,r):s[u]=t.call(i,o[u],u,r));return s}},!ie(i.map)),N(i,{filter:function(t){var n,i,r=H.ToObject(this),o=ne&&R(this)?X(this,""):r,a=H.ToUint32(o.length),s=[];if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var u=0;u<a;u++)u in o&&(n=o[u],("undefined"==typeof i?t(n,u,r):t.call(i,n,u,r))&&$(s,n));return s}},!ie(i.filter)),N(i,{every:function(t){var n,i=H.ToObject(this),r=ne&&R(this)?X(this,""):i,o=H.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<o;a++)if(a in r&&!("undefined"==typeof n?t(r[a],a,i):t.call(n,r[a],a,i)))return!1;return!0}},!ie(i.every)),N(i,{some:function(t){var n,i=H.ToObject(this),r=ne&&R(this)?X(this,""):i,o=H.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<o;a++)if(a in r&&("undefined"==typeof n?t(r[a],a,i):t.call(n,r[a],a,i)))return!0;return!1}},!ie(i.some));var re=!1;i.reduce&&(re="object"==typeof i.reduce.call("es5",function(e,t,n,i){return i})),N(i,{reduce:function(t){var n=H.ToObject(this),i=ne&&R(this)?X(this,""):n,r=H.ToUint32(i.length);if(!e(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in i){o=i[a++];break}if(++a>=r)throw new TypeError("reduce of empty array with no initial value")}for(;a<r;a++)a in i&&(o=t(o,i[a],a,n));return o}},!re);var oe=!1;i.reduceRight&&(oe="object"==typeof i.reduceRight.call("es5",function(e,t,n,i){return i})),N(i,{reduceRight:function(t){var n=H.ToObject(this),i=ne&&R(this)?X(this,""):n,r=H.ToUint32(i.length);if(!e(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,a=r-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in i){o=i[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return o;do a in i&&(o=t(o,i[a],a,n));while(a--);return o}},!oe);var ae=i.indexOf&&[0,1].indexOf(1,2)!==-1;N(i,{indexOf:function(e){var t=ne&&R(this)?X(this,""):H.ToObject(this),n=H.ToUint32(t.length);if(0===n)return-1;var i=0;for(arguments.length>1&&(i=H.ToInteger(arguments[1])),i=i>=0?i:b(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},ae);var se=i.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;N(i,{lastIndexOf:function(e){var t=ne&&R(this)?X(this,""):H.ToObject(this),n=H.ToUint32(t.length);if(0===n)return-1;var i=n-1;for(arguments.length>1&&(i=w(i,H.ToInteger(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}},se);var ue=function(){var e=[1,2],t=e.splice();return 2===e.length&&Z(t)&&0===t.length}();N(i,{splice:function(e,t){return 0===arguments.length?[]:d.apply(this,arguments)}},!ue);var ce=function(){var e={};return i.splice.call(e,0,0,1),1===e.length}();N(i,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=b(H.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&(n=z(arguments),n.length<2?$(n,this.length-e):n[1]=H.ToInteger(t)),d.apply(this,n)}},!ce);var le=function(){var e=new n(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),fe=function(){var e=256,t=[];return t[e]="a",t.splice(e+1,0,"b"),"a"===t[e]}();N(i,{splice:function(e,t){for(var n,i=H.ToObject(this),r=[],o=H.ToUint32(i.length),a=H.ToInteger(e),s=a<0?b(o+a,0):w(a,o),c=w(b(H.ToInteger(t),0),o-s),l=0;l<c;)n=u(s+l),q(i,n)&&(r[l]=i[n]),l+=1;var f,h=z(arguments,2),d=h.length;if(d<c){l=s;for(var p=o-c;l<p;)n=u(l+c),f=u(l+d),q(i,n)?i[f]=i[n]:delete i[f],l+=1;l=o;for(var v=o-c+d;l>v;)delete i[l-1],l-=1}else if(d>c)for(l=o-c;l>s;)n=u(l+c-1),f=u(l+d-1),q(i,n)?i[f]=i[n]:delete i[f],l-=1;l=s;for(var y=0;y<h.length;++y)i[l]=h[y],l+=1;return i.length=o-c+d,r}},!le||!fe);var he,de=i.join;try{he="1,2,3"!==Array.prototype.join.call("123",",")}catch(pe){he=!0}he&&N(i,{join:function(e){var t="undefined"==typeof e?",":e;return de.call(R(this)?X(this,""):this,t)}},he);var ve="1,2"!==[1,2].join(void 0);ve&&N(i,{join:function(e){var t="undefined"==typeof e?",":e;return de.call(this,t)}},ve);var ye=function(e){for(var t=H.ToObject(this),n=H.ToUint32(t.length),i=0;i<arguments.length;)t[n+i]=arguments[i],i+=1;return t.length=n+i,n+i},ge=function(){var e={},t=Array.prototype.push.call(e,void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!q(e,0)}();N(i,{push:function(e){return Z(this)?p.apply(this,arguments):ye.apply(this,arguments)}},ge);var me=function(){var e=[],t=e.push(void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!q(e,0)}();N(i,{push:ye},me),N(i,{slice:function(e,t){var n=R(this)?X(this,""):this;return V(n,arguments)}},ne);var _e=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),be=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),we=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();N(i,{sort:function(t){if("undefined"==typeof t)return Q(this);if(!e(t))throw new TypeError("Array.prototype.sort callback must be a function");return Q(this,t)}},_e||!we||!be);var ke=!K({toString:null},"toString"),Se=K(function(){},"prototype"),Te=!q("x","0"),Ee=function(e){var t=e.constructor;return t&&t.prototype===e},xe={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},Pe=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!xe["$"+e]&&q(window,e)&&null!==window[e]&&"object"==typeof window[e]&&Ee(window[e])}catch(t){return!0}return!1}(),Ce=function(e){if("undefined"==typeof window||!Pe)return Ee(e);try{return Ee(e)}catch(t){return!1}},Oe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ae=Oe.length,Me=function(e){return"[object Arguments]"===G(e)},Ie=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!Z(t)&&e(t.callee)},Re=Me(arguments)?Me:Ie;N(r,{keys:function(t){var n=e(t),i=Re(t),r=null!==t&&"object"==typeof t,o=r&&R(t);if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var a=[],s=Se&&n;if(o&&Te||i)for(var c=0;c<t.length;++c)$(a,u(c));if(!i)for(var l in t)s&&"prototype"===l||!q(t,l)||$(a,u(l));if(ke)for(var f=Ce(t),h=0;h<Ae;h++){var d=Oe[h];f&&"constructor"===d||!q(t,d)||$(a,d)}return a}});var De=r.keys&&function(){return 2===r.keys(arguments).length}(1,2),je=r.keys&&function(){var e=r.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Le=r.keys;N(r,{keys:function(e){return Le(Re(e)?z(e):e)}},!De||je);var Be,Ne,Ue=0!==new Date((-0xc782b5b342b24)).getUTCMonth(),Fe=new Date((-0x55d318d56a724)),He=new Date(14496624e5),We="Mon, 01 Jan -45875 11:59:59 GMT"!==Fe.toUTCString(),qe=Fe.getTimezoneOffset();qe<-720?(Be="Tue Jan 02 -45875"!==Fe.toDateString(),Ne=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(He.toString())):(Be="Mon Jan 01 -45875"!==Fe.toDateString(),Ne=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(He.toString()));var Ge=m.bind(Date.prototype.getFullYear),ze=m.bind(Date.prototype.getMonth),Ve=m.bind(Date.prototype.getDate),Je=m.bind(Date.prototype.getUTCFullYear),Xe=m.bind(Date.prototype.getUTCMonth),Ye=m.bind(Date.prototype.getUTCDate),$e=m.bind(Date.prototype.getUTCDay),Ke=m.bind(Date.prototype.getUTCHours),Qe=m.bind(Date.prototype.getUTCMinutes),Ze=m.bind(Date.prototype.getUTCSeconds),et=m.bind(Date.prototype.getUTCMilliseconds),tt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],it=function(e,t){return Ve(new Date(t,e,0))};N(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this);return e<0&&ze(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this),t=ze(this);return e<0&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this),t=ze(this),n=Ve(this);if(e<0&&t>11){if(12===t)return n;var i=it(0,e+1);return i-n+1}return n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this);return e<0&&Xe(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this),t=Xe(this);return e<0&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this),t=Xe(this),n=Ye(this);if(e<0&&t>11){if(12===t)return n;var i=it(0,e+1);return i-n+1}return n}},Ue),N(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this),t=Ye(this),n=Xe(this),i=Je(this),r=Ke(this),o=Qe(this),a=Ze(this);return tt[e]+", "+(t<10?"0"+t:t)+" "+nt[n]+" "+i+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"}},Ue||We),N(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear();return tt[e]+" "+nt[n]+" "+(t<10?"0"+t:t)+" "+i}},Ue||Be),(Ue||Ne)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear(),r=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),u=Math.floor(Math.abs(s)/60),c=Math.floor(Math.abs(s)%60);return tt[e]+" "+nt[n]+" "+(t<10?"0"+t:t)+" "+i+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"+(s>0?"-":"+")+(u<10?"0"+u:u)+(c<10?"0"+c:c)},B&&r.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var rt=-621987552e5,ot="-000001",at=Date.prototype.toISOString&&new Date(rt).toISOString().indexOf(ot)===-1,st=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date((-1)).toISOString(),ut=m.bind(Date.prototype.getTime);N(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(ut(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Je(this),t=Xe(this);e+=Math.floor(t/12),t=(t%12+12)%12;var n=[t+1,Ye(this),Ke(this),Qe(this),Ze(this)];e=(e<0?"-":e>9999?"+":"")+J("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var i=0;i<n.length;++i)n[i]=J("00"+n[i],-2);return e+"-"+z(n,0,2).join("-")+"T"+z(n,2).join(":")+"."+J("000"+et(this),-3)+"Z"}},at||st);var ct=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date(rt).toJSON().indexOf(ot)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();ct||(Date.prototype.toJSON=function(t){var n=r(this),i=H.ToPrimitive(n);if("number"==typeof i&&!isFinite(i))return null;var o=n.toISOString;if(!e(o))throw new TypeError("toISOString property is not callable");return o.call(n)});var lt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),ft=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),ht=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(ht||ft||!lt){var dt=Math.pow(2,31)-1,pt=F(new Date(1970,0,1,0,0,0,dt+1).getTime());Date=function(e){var t=function(n,i,r,o,a,s,c){var l,f=arguments.length;if(this instanceof e){var h=s,d=c;if(pt&&f>=7&&c>dt){var p=Math.floor(c/dt)*dt,v=Math.floor(p/1e3);h+=v,d-=1e3*v}l=1===f&&u(n)===n?new e(t.parse(n)):f>=7?new e(n,i,r,o,a,h,d):f>=6?new e(n,i,r,o,a,h):f>=5?new e(n,i,r,o,a):f>=4?new e(n,i,r,o):f>=3?new e(n,i,r):f>=2?new e(n,i):f>=1?new e(n instanceof e?+n:n):new e}else l=e.apply(this,arguments);return U(l)||N(l,{constructor:t},!0),l},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),i=[0,31,59,90,120,151,181,212,243,273,304,334,365],r=function(e,t){var n=t>1?1:0;return i[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)},o=function(t){var n=0,i=t;if(pt&&i>dt){var r=Math.floor(i/dt)*dt,o=Math.floor(r/1e3);n+=o,i-=1e3*o}return l(new e(1970,0,1,0,0,n,i))};for(var a in e)q(e,a)&&(t[a]=e[a]);N(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,N(t.prototype,{constructor:t},!0);var s=function(t){var i=n.exec(t);if(i){var a,s=l(i[1]),u=l(i[2]||1)-1,c=l(i[3]||1)-1,f=l(i[4]||0),h=l(i[5]||0),d=l(i[6]||0),p=Math.floor(1e3*l(i[7]||0)),v=Boolean(i[4]&&!i[8]),y="-"===i[9]?1:-1,g=l(i[10]||0),m=l(i[11]||0),_=h>0||d>0||p>0;return f<(_?24:25)&&h<60&&d<60&&p<1e3&&u>-1&&u<12&&g<24&&m<60&&c>-1&&c<r(s,u+1)-r(s,u)&&(a=60*(24*(r(s,u)+c)+f+g*y),a=1e3*(60*(a+h+m*y)+d)+p,v&&(a=o(a)),-864e13<=a&&a<=864e13)?a:NaN}return e.parse.apply(this,arguments)};return N(t,{parse:s}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var vt=f.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),yt={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,i=t;++n<yt.size;)i+=e*yt.data[n],yt.data[n]=i%yt.base,i=Math.floor(i/yt.base)},divide:function(e){for(var t=yt.size,n=0;--t>=0;)n+=yt.data[t],yt.data[t]=Math.floor(n/e),n=n%e*yt.base},numToString:function(){for(var e=yt.size,t="";--e>=0;)if(""!==t||0===e||0!==yt.data[e]){var n=u(yt.data[e]);""===t?t=n:t+=J("0000000",0,7-n.length)+n}return t},pow:function Lt(e,t,n){return 0===t?n:t%2===1?Lt(e,t-1,n*e):Lt(e*e,t/2,n)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}},gt=function(e){var t,n,i,r,o,a,s,c;if(t=l(e),t=F(t)?0:Math.floor(t),t<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=l(this),F(n))return"NaN";if(n<=-1e21||n>=1e21)return u(n);if(i="",n<0&&(i="-",n=-n),r="0",n>1e-21)if(o=yt.log(n*yt.pow(2,69,1))-69,a=o<0?n*yt.pow(2,-o,1):n/yt.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(yt.multiply(0,a),s=t;s>=7;)yt.multiply(1e7,0),s-=7;for(yt.multiply(yt.pow(10,s,1),0),s=o-1;s>=23;)yt.divide(1<<23),s-=23;yt.divide(1<<s),yt.multiply(1,1),yt.divide(2),r=yt.numToString()}else yt.multiply(0,a),yt.multiply(1<<-o,0),r=yt.numToString()+J("0.00000000000000000000",2,2+t);return t>0?(c=r.length,r=c<=t?i+J("0.0000000000000000000",0,t-c+2)+r:i+J(r,0,c-t)+"."+J(r,c-t)):r=i+r,r};N(f,{toFixed:gt},vt);var mt=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),_t=f.toPrecision;N(f,{toPrecision:function(e){return"undefined"==typeof e?_t.call(this):_t.call(this,e)}},mt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e="undefined"==typeof/()??/.exec("")[1],n=Math.pow(2,32)-1;c.split=function(i,r){var o=String(this);if("undefined"==typeof i&&0===r)return[];if(!t(i))return X(this,i,r);var a,s,u,c,l=[],f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),h=0,d=new RegExp(i.source,f+"g");e||(a=new RegExp("^"+d.source+"$(?!\\s)",f));var v="undefined"==typeof r?n:H.ToUint32(r);for(s=d.exec(o);s&&(u=s.index+s[0].length,!(u>h&&($(l,J(o,h,s.index)),!e&&s.length>1&&s[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<o.length&&p.apply(l,z(s,1)),c=s[0].length,h=u,l.length>=v)));)d.lastIndex===s.index&&d.lastIndex++,s=d.exec(o);return h===o.length?!c&&d.test("")||$(l,""):$(l,J(o,h)),l.length>v?z(l,0,v):l}}():"0".split(void 0,0).length&&(c.split=function(e,t){return"undefined"==typeof e&&0===t?[]:X(this,e,t)});var bt=c.replace,wt=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){$(e,n)}),1===e.length&&"undefined"==typeof e[0]}();wt||(c.replace=function(n,i){var r=e(i),o=t(n)&&/\)[*?]/.test(n.source);if(r&&o){var a=function(e){var t=arguments.length,r=n.lastIndex;n.lastIndex=0;var o=n.exec(e)||[];return n.lastIndex=r,$(o,arguments[t-2],arguments[t-1]),i.apply(this,o)};return bt.call(this,n,a)}return bt.call(this,n,i)});var kt=c.substr,St="".substr&&"b"!=="0b".substr(-1);N(c,{substr:function(e,t){var n=e;return e<0&&(n=b(this.length+e,0)),kt.call(this,n,t)}},St);var Tt="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",Et="​",xt="["+Tt+"]",Pt=new RegExp("^"+xt+xt+"*"),Ct=new RegExp(xt+xt+"*$"),Ot=c.trim&&(Tt.trim()||!Et.trim());N(c,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return u(this).replace(Pt,"").replace(Ct,"")}},Ot);var At=m.bind(String.prototype.trim),Mt=c.lastIndexOf&&"abcあい".lastIndexOf("あい",2)!==-1;N(c,{lastIndexOf:function(e){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var t=u(this),n=u(e),i=arguments.length>1?l(arguments[1]):NaN,r=F(i)?1/0:H.ToInteger(i),o=w(b(r,0),t.length),a=n.length,s=o+a;s>0;){s=b(0,s-a);var c=Y(J(t,s,o+a),n);if(c!==-1)return s+c}return-1}},Mt);var It=c.lastIndexOf;if(N(c,{lastIndexOf:function(e){return It.apply(this,arguments)}},1!==c.lastIndexOf.length),8===parseInt(Tt+"08")&&22===parseInt(Tt+"0x16")||(parseInt=function(e){var t=/^[\-+]?0[xX]/;return function(n,i){var r=At(String(n)),o=l(i)||(t.test(r)?16:10);return e(r,o)}}(parseInt)),1/parseFloat("-0")!==-(1/0)&&(parseFloat=function(e){return function(t){var n=At(String(t)),i=e(n);return 0===i&&"-"===J(n,0,1)?-0:i}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){var Rt=function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;"undefined"==typeof e?e="Error":"string"!=typeof e&&(e=u(e));var t=this.message;return"undefined"==typeof t?t="":"string"!=typeof t&&(t=u(t)),e?t?e+": "+t:e:t};Error.prototype.toString=Rt}if(B){var Dt=function(e,t){if(K(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&(n.enumerable=!1,Object.defineProperty(e,t,n))}};Dt(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Dt(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var jt=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=jt}})},function(e,t,n){var i,r;!function(o,a){"use strict";i=a,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(this,function(){var e,t,n,i,r=Function.call,o=Object.prototype,a=r.bind(o.hasOwnProperty),s=r.bind(o.propertyIsEnumerable),u=r.bind(o.toString),c=a(o,"__defineGetter__");c&&(e=r.bind(o.__defineGetter__),t=r.bind(o.__defineSetter__),n=r.bind(o.__lookupGetter__),i=r.bind(o.__lookupSetter__));var l=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e};Object.getPrototypeOf||(Object.getPrototypeOf=function(e){var t=e.__proto__;return t||null===t?t:"[object Function]"===u(e.constructor)?e.constructor.prototype:e instanceof Object?o:null});var f=function(e){try{return e.sentinel=0,0===Object.getOwnPropertyDescriptor(e,"sentinel").value}catch(t){return!1}};if(Object.defineProperty){var h=f({}),d="undefined"==typeof document||f(document.createElement("div"));if(!d||!h)var p=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||p){var v="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,t){if(l(e))throw new TypeError(v+e);if(p)try{return p.call(Object,e,t)}catch(r){}var u;if(!a(e,t))return u;if(u={enumerable:s(e,t),configurable:!0},c){var f=e.__proto__,h=e!==o;h&&(e.__proto__=o);var d=n(e,t),y=i(e,t);if(h&&(e.__proto__=f),d||y)return d&&(u.get=d),y&&(u.set=y),u}return u.value=e[t],u.writable=!0,u}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var y,g=!({__proto__:null}instanceof Object),m=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(e){return!1}},_=function(){var e,t;t=new ActiveXObject("htmlfile");var n="script";return t.write("<"+n+"></"+n+">"),t.close(),e=t.parentWindow.Object.prototype,t=null,e},b=function(){var e,t=document.createElement("iframe"),n=document.body||document.documentElement;return t.style.display="none",n.appendChild(t),t.src="javascript:",e=t.contentWindow.Object.prototype,n.removeChild(t),t=null,e};y=g||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var e=m()?_():b();delete e.constructor,delete e.hasOwnProperty,delete e.propertyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf;var t=function(){};return t.prototype=e,y=function(){return new t},new t},Object.create=function(e,t){var n,i=function(){};if(null===e)n=y();else{if(null!==e&&l(e))throw new TypeError("Object prototype may only be an Object or null");i.prototype=e,n=new i,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}}var w=function(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){return!1}};if(Object.defineProperty){var k=w({}),S="undefined"==typeof document||w(document.createElement("div"));if(!k||!S)var T=Object.defineProperty,E=Object.defineProperties}if(!Object.defineProperty||T){var x="Property description must be an object: ",P="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(r,a,s){if(l(r))throw new TypeError(P+r);if(l(s))throw new TypeError(x+s);if(T)try{return T.call(Object,r,a,s)}catch(u){}if("value"in s)if(c&&(n(r,a)||i(r,a))){var f=r.__proto__;r.__proto__=o,delete r[a],r[a]=s.value,r.__proto__=f}else r[a]=s.value;else{var h="get"in s,d="set"in s;if(!c&&(h||d))throw new TypeError(C);h&&e(r,a,s.get),d&&t(r,a,s.set)}return r}}Object.defineProperties&&!E||(Object.defineProperties=function(e,t){if(E)try{return E.call(Object,e,t)}catch(n){}return Object.keys(t).forEach(function(n){"__proto__"!==n&&Object.defineProperty(e,n,t[n])}),e}),Object.seal||(Object.seal=function(e){if(Object(e)!==e)throw new TypeError("Object.seal can only be called on Objects.");return e}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(O){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(e){if(Object(e)!==e)throw new TypeError("Object.preventExtensions can only be called on Objects.");return e}),Object.isSealed||(Object.isSealed=function(e){if(Object(e)!==e)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(e){if(Object(e)!==e)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var t="";a(e,t);)t+="?";e[t]=!0;var n=a(e,t);return delete e[t],n})})},,,,,,,,,function(e,t,n){var i,r;/*!
	 * jQuery JavaScript Library v1.12.4
	 * http://jquery.com/
	 *
	 * Includes Sizzle.js
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2016-05-20T17:17Z
	 */
!function(t,n){"object"==typeof e&&"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,function(n,o){function a(e){var t=!!e&&"length"in e&&e.length,n=ge.type(e);return"function"!==n&&!ge.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function s(e,t,n){if(ge.isFunction(t))return ge.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ge.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(Pe.test(t))return ge.filter(t,e,n);t=ge.filter(t,e)}return ge.grep(e,function(e){return ge.inArray(e,t)>-1!==n})}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function c(e){var t={};return ge.each(e.match(Re)||[],function(e,n){t[n]=!0}),t}function l(){se.addEventListener?(se.removeEventListener("DOMContentLoaded",f),n.removeEventListener("load",f)):(se.detachEvent("onreadystatechange",f),n.detachEvent("onload",f))}function f(){(se.addEventListener||"load"===n.event.type||"complete"===se.readyState)&&(l(),ge.ready())}function h(e,t,n){if(void 0===n&&1===e.nodeType){var i="data-"+t.replace(Ne,"-$1").toLowerCase();if(n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Be.test(n)?ge.parseJSON(n):n)}catch(r){}ge.data(e,t,n)}else n=void 0}return n}function d(e){var t;for(t in e)if(("data"!==t||!ge.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function p(e,t,n,i){if(Le(e)){var r,o,a=ge.expando,s=e.nodeType,u=s?ge.cache:e,c=s?e[a]:e[a]&&a;if(c&&u[c]&&(i||u[c].data)||void 0!==n||"string"!=typeof t)return c||(c=s?e[a]=ae.pop()||ge.guid++:a),u[c]||(u[c]=s?{}:{toJSON:ge.noop}),"object"!=typeof t&&"function"!=typeof t||(i?u[c]=ge.extend(u[c],t):u[c].data=ge.extend(u[c].data,t)),o=u[c],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[ge.camelCase(t)]=n),"string"==typeof t?(r=o[t],null==r&&(r=o[ge.camelCase(t)])):r=o,r}}function v(e,t,n){if(Le(e)){var i,r,o=e.nodeType,a=o?ge.cache:e,s=o?e[ge.expando]:ge.expando;if(a[s]){if(t&&(i=n?a[s]:a[s].data)){ge.isArray(t)?t=t.concat(ge.map(t,ge.camelCase)):t in i?t=[t]:(t=ge.camelCase(t),t=t in i?[t]:t.split(" ")),r=t.length;for(;r--;)delete i[t[r]];if(n?!d(i):!ge.isEmptyObject(i))return}(n||(delete a[s].data,d(a[s])))&&(o?ge.cleanData([e],!0):ve.deleteExpando||a!=a.window?delete a[s]:a[s]=void 0)}}}function y(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return ge.css(e,t,"")},u=s(),c=n&&n[3]||(ge.cssNumber[t]?"":"px"),l=(ge.cssNumber[t]||"px"!==c&&+u)&&Fe.exec(ge.css(e,t));if(l&&l[3]!==c){c=c||l[3],n=n||[],l=+u||1;do o=o||".5",l/=o,ge.style(e,t,l+c);while(o!==(o=s()/u)&&1!==o&&--a)}return n&&(l=+l||+u||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=c,i.start=l,i.end=r)),r}function g(e){var t=Xe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function m(e,t){var n,i,r=0,o="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(i=n[r]);r++)!t||ge.nodeName(i,t)?o.push(i):ge.merge(o,m(i,t));return void 0===t||t&&ge.nodeName(e,t)?ge.merge([e],o):o}function _(e,t){for(var n,i=0;null!=(n=e[i]);i++)ge._data(n,"globalEval",!t||ge._data(t[i],"globalEval"))}function b(e){Ge.test(e.type)&&(e.defaultChecked=e.checked)}function w(e,t,n,i,r){for(var o,a,s,u,c,l,f,h=e.length,d=g(t),p=[],v=0;v<h;v++)if(a=e[v],a||0===a)if("object"===ge.type(a))ge.merge(p,a.nodeType?[a]:a);else if($e.test(a)){for(u=u||d.appendChild(t.createElement("div")),c=(ze.exec(a)||["",""])[1].toLowerCase(),f=Ye[c]||Ye._default,u.innerHTML=f[1]+ge.htmlPrefilter(a)+f[2],o=f[0];o--;)u=u.lastChild;if(!ve.leadingWhitespace&&Je.test(a)&&p.push(t.createTextNode(Je.exec(a)[0])),!ve.tbody)for(a="table"!==c||Ke.test(a)?"<table>"!==f[1]||Ke.test(a)?0:u:u.firstChild,o=a&&a.childNodes.length;o--;)ge.nodeName(l=a.childNodes[o],"tbody")&&!l.childNodes.length&&a.removeChild(l);for(ge.merge(p,u.childNodes),u.textContent="";u.firstChild;)u.removeChild(u.firstChild);u=d.lastChild}else p.push(t.createTextNode(a));for(u&&d.removeChild(u),ve.appendChecked||ge.grep(m(p,"input"),b),v=0;a=p[v++];)if(i&&ge.inArray(a,i)>-1)r&&r.push(a);else if(s=ge.contains(a.ownerDocument,a),u=m(d.appendChild(a),"script"),s&&_(u),n)for(o=0;a=u[o++];)Ve.test(a.type||"")&&n.push(a);return u=null,d}function k(){return!0}function S(){return!1}function T(){try{return se.activeElement}catch(e){}}function E(e,t,n,i,r,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)E(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=S;else if(!r)return e;return 1===o&&(a=r,r=function(e){return ge().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ge.guid++)),e.each(function(){ge.event.add(this,t,r,i,n)})}function x(e,t){return ge.nodeName(e,"table")&&ge.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function P(e){return e.type=(null!==ge.find.attr(e,"type"))+"/"+e.type,e}function C(e){var t=ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function O(e,t){if(1===t.nodeType&&ge.hasData(e)){var n,i,r,o=ge._data(e),a=ge._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;i<r;i++)ge.event.add(t,n,s[n][i])}a.data&&(a.data=ge.extend({},a.data))}}function A(e,t){var n,i,r;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ve.noCloneEvent&&t[ge.expando]){r=ge._data(t);for(i in r.events)ge.removeEvent(t,i,r.handle);t.removeAttribute(ge.expando)}"script"===n&&t.text!==e.text?(P(t).text=e.text,C(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ve.html5Clone&&e.innerHTML&&!ge.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ge.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function M(e,t,n,i){t=ce.apply([],t);var r,o,a,s,u,c,l=0,f=e.length,h=f-1,d=t[0],p=ge.isFunction(d);if(p||f>1&&"string"==typeof d&&!ve.checkClone&&st.test(d))return e.each(function(r){var o=e.eq(r);p&&(t[0]=d.call(this,r,o.html())),M(o,t,n,i)});if(f&&(c=w(t,e[0].ownerDocument,!1,e,i),r=c.firstChild,1===c.childNodes.length&&(c=r),r||i)){for(s=ge.map(m(c,"script"),P),a=s.length;l<f;l++)o=c,l!==h&&(o=ge.clone(o,!0,!0),a&&ge.merge(s,m(o,"script"))),n.call(e[l],o,l);if(a)for(u=s[s.length-1].ownerDocument,ge.map(s,C),l=0;l<a;l++)o=s[l],Ve.test(o.type||"")&&!ge._data(o,"globalEval")&&ge.contains(u,o)&&(o.src?ge._evalUrl&&ge._evalUrl(o.src):ge.globalEval((o.text||o.textContent||o.innerHTML||"").replace(ct,"")));c=r=null}return e}function I(e,t,n){for(var i,r=t?ge.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||ge.cleanData(m(i)),i.parentNode&&(n&&ge.contains(i.ownerDocument,i)&&_(m(i,"script")),i.parentNode.removeChild(i));return e}function R(e,t){var n=ge(t.createElement(e)).appendTo(t.body),i=ge.css(n[0],"display");return n.detach(),i}function D(e){var t=se,n=dt[e];return n||(n=R(e,t),"none"!==n&&n||(ht=(ht||ge("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(ht[0].contentWindow||ht[0].contentDocument).document,t.write(),t.close(),n=R(e,t),ht.detach()),dt[e]=n),n}function j(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function L(e){if(e in Ct)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=Pt.length;n--;)if(e=Pt[n]+t,e in Ct)return e}function B(e,t){for(var n,i,r,o=[],a=0,s=e.length;a<s;a++)i=e[a],i.style&&(o[a]=ge._data(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&We(i)&&(o[a]=ge._data(i,"olddisplay",D(i.nodeName)))):(r=We(i),(n&&"none"!==n||!r)&&ge._data(i,"olddisplay",r?n:ge.css(i,"display"))));for(a=0;a<s;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function N(e,t,n){var i=Tt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function U(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=ge.css(e,n+He[o],!0,r)),i?("content"===n&&(a-=ge.css(e,"padding"+He[o],!0,r)),"margin"!==n&&(a-=ge.css(e,"border"+He[o]+"Width",!0,r))):(a+=ge.css(e,"padding"+He[o],!0,r),"padding"!==n&&(a+=ge.css(e,"border"+He[o]+"Width",!0,r)));return a}function F(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=mt(e),a=ve.boxSizing&&"border-box"===ge.css(e,"boxSizing",!1,o);if(r<=0||null==r){if(r=_t(e,t,o),(r<0||null==r)&&(r=e.style[t]),vt.test(r))return r;i=a&&(ve.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+U(e,t,n||(a?"border":"content"),i,o)+"px"}function H(e,t,n,i,r){return new H.prototype.init(e,t,n,i,r)}function W(){return n.setTimeout(function(){Ot=void 0}),Ot=ge.now()}function q(e,t){var n,i={height:e},r=0;for(t=t?1:0;r<4;r+=2-t)n=He[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function G(e,t,n){for(var i,r=(J.tweeners[t]||[]).concat(J.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function z(e,t,n){var i,r,o,a,s,u,c,l,f=this,h={},d=e.style,p=e.nodeType&&We(e),v=ge._data(e,"fxshow");n.queue||(s=ge._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,u=s.empty.fire,s.empty.fire=function(){s.unqueued||u()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,ge.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],c=ge.css(e,"display"),l="none"===c?ge._data(e,"olddisplay")||D(e.nodeName):c,"inline"===l&&"none"===ge.css(e,"float")&&(ve.inlineBlockNeedsLayout&&"inline"!==D(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ve.shrinkWrapBlocks()||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],Mt.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!v||void 0===v[i])continue;p=!0}h[i]=v&&v[i]||ge.style(e,i)}else c=void 0;if(ge.isEmptyObject(h))"inline"===("none"===c?D(e.nodeName):c)&&(d.display=c);else{v?"hidden"in v&&(p=v.hidden):v=ge._data(e,"fxshow",{}),o&&(v.hidden=!p),p?ge(e).show():f.done(function(){ge(e).hide()}),f.done(function(){var t;ge._removeData(e,"fxshow");for(t in h)ge.style(e,t,h[t])});for(i in h)a=G(p?v[i]:0,i,f),i in v||(v[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function V(e,t){var n,i,r,o,a;for(n in e)if(i=ge.camelCase(n),r=t[i],o=e[n],ge.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=ge.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function J(e,t,n){var i,r,o=0,a=J.prefilters.length,s=ge.Deferred().always(function(){delete u.elem}),u=function(){if(r)return!1;for(var t=Ot||W(),n=Math.max(0,c.startTime+c.duration-t),i=n/c.duration||0,o=1-i,a=0,u=c.tweens.length;a<u;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),o<1&&u?n:(s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:ge.extend({},t),opts:ge.extend(!0,{specialEasing:{},easing:ge.easing._default},n),originalProperties:t,originalOptions:n,startTime:Ot||W(),duration:n.duration,tweens:[],createTween:function(t,n){var i=ge.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(i),i},stop:function(t){var n=0,i=t?c.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(V(l,c.opts.specialEasing);o<a;o++)if(i=J.prefilters[o].call(c,e,l,c.opts))return ge.isFunction(i.stop)&&(ge._queueHooks(c.elem,c.opts.queue).stop=ge.proxy(i.stop,i)),i;return ge.map(l,G,c),ge.isFunction(c.opts.start)&&c.opts.start.call(e,c),ge.fx.timer(ge.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function X(e){return ge.attr(e,"class")||""}function Y(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(Re)||[];if(ge.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function $(e,t,n,i){function r(s){var u;return o[s]=!0,ge.each(e[s]||[],function(e,s){var c=s(t,n,i);return"string"!=typeof c||a||o[c]?a?!(u=c):void 0:(t.dataTypes.unshift(c),r(c),!1)}),u}var o={},a=e===nn;return r(t.dataTypes[0])||!o["*"]&&r("*")}function K(e,t){var n,i,r=ge.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&ge.extend(!0,e,n),e}function Q(e,t,n){for(var i,r,o,a,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){u.unshift(a);break}if(u[0]in n)o=u[0];else{for(a in n){if(!u[0]||e.converters[a+" "+u[0]]){o=a;break}i||(i=a)}o=o||i}if(o)return o!==u[0]&&u.unshift(o),n[o]}function Z(e,t,n,i){var r,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(r in c)if(s=r.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[r]:c[r]!==!0&&(o=s[0],l.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}function ee(e){return e.style&&e.style.display||ge.css(e,"display")}function te(e){if(!ge.contains(e.ownerDocument||se,e))return!0;for(;e&&1===e.nodeType;){if("none"===ee(e)||"hidden"===e.type)return!0;e=e.parentNode}return!1}function ne(e,t,n,i){var r;if(ge.isArray(t))ge.each(t,function(t,r){n||un.test(e)?i(e,r):ne(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==ge.type(t))i(e,t);else for(r in t)ne(e+"["+r+"]",t[r],n,i)}function ie(){try{return new n.XMLHttpRequest}catch(e){}}function re(){try{return new n.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function oe(e){return ge.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var ae=[],se=n.document,ue=ae.slice,ce=ae.concat,le=ae.push,fe=ae.indexOf,he={},de=he.toString,pe=he.hasOwnProperty,ve={},ye="1.12.4",ge=function(e,t){return new ge.fn.init(e,t)},me=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,_e=/^-ms-/,be=/-([\da-z])/gi,we=function(e,t){return t.toUpperCase()};ge.fn=ge.prototype={jquery:ye,constructor:ge,selector:"",length:0,toArray:function(){return ue.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:ue.call(this)},pushStack:function(e){var t=ge.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return ge.each(this,e)},map:function(e){return this.pushStack(ge.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(ue.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:le,sort:ae.sort,splice:ae.splice},ge.extend=ge.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||ge.isFunction(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(r=arguments[s]))for(i in r)e=a[i],n=r[i],a!==n&&(c&&n&&(ge.isPlainObject(n)||(t=ge.isArray(n)))?(t?(t=!1,o=e&&ge.isArray(e)?e:[]):o=e&&ge.isPlainObject(e)?e:{},a[i]=ge.extend(c,o,n)):void 0!==n&&(a[i]=n));return a},ge.extend({expando:"jQuery"+(ye+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ge.type(e)},isArray:Array.isArray||function(e){return"array"===ge.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){var t=e&&e.toString();return!ge.isArray(e)&&t-parseFloat(t)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ge.type(e)||e.nodeType||ge.isWindow(e))return!1;try{if(e.constructor&&!pe.call(e,"constructor")&&!pe.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(!ve.ownFirst)for(t in e)return pe.call(e,t);for(t in e);return void 0===t||pe.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?he[de.call(e)]||"object":typeof e},globalEval:function(e){e&&ge.trim(e)&&(n.execScript||function(e){n.eval.call(n,e)})(e)},camelCase:function(e){return e.replace(_e,"ms-").replace(be,we)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,i=0;if(a(e))for(n=e.length;i<n&&t.call(e[i],i,e[i])!==!1;i++);else for(i in e)if(t.call(e[i],i,e[i])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(me,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(a(Object(e))?ge.merge(n,"string"==typeof e?[e]:e):le.call(n,e)),n},inArray:function(e,t,n){var i;if(t){if(fe)return fe.call(t,e,n);for(i=t.length,n=n?n<0?Math.max(0,i+n):n:0;n<i;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;)e[r++]=t[i++];if(n!==n)for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;o<a;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,n){var i,r,o=0,s=[];if(a(e))for(i=e.length;o<i;o++)r=t(e[o],o,n),null!=r&&s.push(r);else for(o in e)r=t(e[o],o,n),null!=r&&s.push(r);return ce.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;if("string"==typeof t&&(r=e[t],t=e,e=r),ge.isFunction(e))return n=ue.call(arguments,2),i=function(){return e.apply(t||this,n.concat(ue.call(arguments)))},i.guid=e.guid=e.guid||ge.guid++,i},now:function(){return+new Date},support:ve}),"function"==typeof Symbol&&(ge.fn[Symbol.iterator]=ae[Symbol.iterator]),ge.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){he["[object "+t+"]"]=t.toLowerCase()});var ke=/*!
	 * Sizzle CSS Selector Engine v2.2.1
	 * http://sizzlejs.com/
	 *
	 * Copyright jQuery Foundation and other contributors
	 * Released under the MIT license
	 * http://jquery.org/license
	 *
	 * Date: 2015-10-17
	 */
function(e){function t(e,t,n,i){var r,o,a,s,u,c,f,d,p=t&&t.ownerDocument,v=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==v&&9!==v&&11!==v)return n;if(!i&&((t?t.ownerDocument||t:F)!==I&&M(t),t=t||I,D)){if(11!==v&&(c=ge.exec(e)))if(r=c[1]){if(9===v){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(p&&(a=p.getElementById(r))&&N(t,a)&&a.id===r)return n.push(a),n}else{if(c[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((r=c[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(r)),n}if(w.qsa&&!z[e+" "]&&(!j||!j.test(e))){if(1!==v)p=t,d=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(_e,"\\$&"):t.setAttribute("id",s=U),f=E(e),o=f.length,u=he.test(s)?"#"+s:"[id='"+s+"']";o--;)f[o]=u+" "+h(f[o]);d=f.join(","),p=me.test(e)&&l(t.parentNode)||t}if(d)try{return Q.apply(n,p.querySelectorAll(d)),n}catch(y){}finally{s===U&&t.removeAttribute("id")}}}return P(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>k.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[U]=!0,e}function r(e){var t=I.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)k.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||J)-(~e.sourceIndex||J);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function u(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function l(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function h(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function d(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=W++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,u,c,l=[H,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(c=t[U]||(t[U]={}),u=c[t.uniqueID]||(c[t.uniqueID]={}),(s=u[i])&&s[0]===H&&s[1]===o)return l[2]=s[2];if(u[i]=l,l[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function v(e,n,i){for(var r=0,o=n.length;r<o;r++)t(e,n[r],i);return i}function y(e,t,n,i,r){for(var o,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),c&&t.push(s)));return a}function g(e,t,n,r,o,a){return r&&!r[U]&&(r=g(r)),o&&!o[U]&&(o=g(o,a)),i(function(i,a,s,u){var c,l,f,h=[],d=[],p=a.length,g=i||v(t||"*",s.nodeType?[s]:s,[]),m=!e||!i&&t?g:y(g,h,e,s,u),_=n?o||(i?e:p||r)?[]:a:m;if(n&&n(m,_,s,u),r)for(c=y(_,d),r(c,[],s,u),l=c.length;l--;)(f=c[l])&&(_[d[l]]=!(m[d[l]]=f));if(i){if(o||e){if(o){for(c=[],l=_.length;l--;)(f=_[l])&&c.push(m[l]=f);o(null,_=[],c,u)}for(l=_.length;l--;)(f=_[l])&&(c=o?ee(i,f):h[l])>-1&&(i[c]=!(a[c]=f))}}else _=y(_===a?_.splice(p,_.length):_),o?o(null,a,_,u):Q.apply(a,_)})}function m(e){for(var t,n,i,r=e.length,o=k.relative[e[0].type],a=o||k.relative[" "],s=o?1:0,u=d(function(e){return e===t},a,!0),c=d(function(e){return ee(t,e)>-1},a,!0),l=[function(e,n,i){var r=!o&&(i||n!==C)||((t=n).nodeType?u(e,n,i):c(e,n,i));return t=null,r}];s<r;s++)if(n=k.relative[e[s].type])l=[d(p(l),n)];else{if(n=k.filter[e[s].type].apply(null,e[s].matches),n[U]){for(i=++s;i<r&&!k.relative[e[i].type];i++);return g(s>1&&p(l),s>1&&h(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,s<i&&m(e.slice(s,i)),i<r&&m(e=e.slice(i)),i<r&&h(e))}l.push(n)}return p(l)}function _(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,u,c){var l,f,h,d=0,p="0",v=i&&[],g=[],m=C,_=i||o&&k.find.TAG("*",c),b=H+=null==m?1:Math.random()||.1,w=_.length;for(c&&(C=a===I||a||c);p!==w&&null!=(l=_[p]);p++){if(o&&l){for(f=0,a||l.ownerDocument===I||(M(l),s=!D);h=e[f++];)if(h(l,a||I,s)){u.push(l);break}c&&(H=b)}r&&((l=!h&&l)&&d--,i&&v.push(l))}if(d+=p,r&&p!==d){for(f=0;h=n[f++];)h(v,g,a,s);if(i){if(d>0)for(;p--;)v[p]||g[p]||(g[p]=$.call(u));g=y(g)}Q.apply(u,g),c&&!i&&g.length>0&&d+n.length>1&&t.uniqueSort(u)}return c&&(H=b,C=m),v};return r?i(a):a}var b,w,k,S,T,E,x,P,C,O,A,M,I,R,D,j,L,B,N,U="sizzle"+1*new Date,F=e.document,H=0,W=0,q=n(),G=n(),z=n(),V=function(e,t){return e===t&&(A=!0),0},J=1<<31,X={}.hasOwnProperty,Y=[],$=Y.pop,K=Y.push,Q=Y.push,Z=Y.slice,ee=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),le=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(oe),he=new RegExp("^"+ie+"$"),de={ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,me=/[+~]/,_e=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},ke=function(){M()};try{Q.apply(Y=Z.call(F.childNodes),F.childNodes),Y[F.childNodes.length].nodeType}catch(Se){Q={apply:Y.length?function(e,t){K.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},T=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},M=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:F;return i!==I&&9===i.nodeType&&i.documentElement?(I=i,R=I.documentElement,D=!T(I),(n=I.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(I.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ye.test(I.getElementsByClassName),w.getById=r(function(e){return R.appendChild(e).id=U,!I.getElementsByName||!I.getElementsByName(U).length}),w.getById?(k.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&D){var n=t.getElementById(e);return n?[n]:[]}},k.filter.ID=function(e){var t=e.replace(be,we);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(be,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),k.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},k.find.CLASS=w.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&D)return t.getElementsByClassName(e)},L=[],j=[],(w.qsa=ye.test(I.querySelectorAll))&&(r(function(e){R.appendChild(e).innerHTML="<a id='"+U+"'></a><select id='"+U+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&j.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||j.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+U+"-]").length||j.push("~="),e.querySelectorAll(":checked").length||j.push(":checked"),e.querySelectorAll("a#"+U+"+*").length||j.push(".#.+[+~]")}),r(function(e){var t=I.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&j.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||j.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),j.push(",.*:")})),(w.matchesSelector=ye.test(B=R.matches||R.webkitMatchesSelector||R.mozMatchesSelector||R.oMatchesSelector||R.msMatchesSelector))&&r(function(e){w.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),L.push("!=",oe)}),j=j.length&&new RegExp(j.join("|")),L=L.length&&new RegExp(L.join("|")),t=ye.test(R.compareDocumentPosition),N=t||ye.test(R.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},V=t?function(e,t){if(e===t)return A=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===I||e.ownerDocument===F&&N(F,e)?-1:t===I||t.ownerDocument===F&&N(F,t)?1:O?ee(O,e)-ee(O,t):0:4&n?-1:1)}:function(e,t){if(e===t)return A=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],u=[t];if(!r||!o)return e===I?-1:t===I?1:r?-1:o?1:O?ee(O,e)-ee(O,t):0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;s[i]===u[i];)i++;return i?a(s[i],u[i]):s[i]===F?-1:u[i]===F?1:0},I):I},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==I&&M(e),n=n.replace(le,"='$1']"),w.matchesSelector&&D&&!z[n+" "]&&(!L||!L.test(n))&&(!j||!j.test(n)))try{var i=B.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(r){}return t(n,I,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==I&&M(e),N(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==I&&M(e);var n=k.attrHandle[t.toLowerCase()],i=n&&X.call(k.attrHandle,t.toLowerCase())?n(e,t,!D):void 0;return void 0!==i?i:w.attributes||!D?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(A=!w.detectDuplicates,O=!w.sortStable&&e.slice(0),e.sort(V),A){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return O=null,e},S=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=S(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=S(t);return n},k=t.selectors={cacheLength:50,createPseudo:i,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,we),e[3]=(e[3]||e[4]||e[5]||"").replace(be,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&q(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,u){var c,l,f,h,d,p,v=o!==a?"nextSibling":"previousSibling",y=t.parentNode,g=s&&t.nodeName.toLowerCase(),m=!u&&!s,_=!1;if(y){if(o){for(;v;){for(h=t;h=h[v];)if(s?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?y.firstChild:y.lastChild],a&&m){for(h=y,f=h[U]||(h[U]={}),l=f[h.uniqueID]||(f[h.uniqueID]={}),c=l[e]||[],d=c[0]===H&&c[1],_=d&&c[2],h=d&&y.childNodes[d];h=++d&&h&&h[v]||(_=d=0)||p.pop();)if(1===h.nodeType&&++_&&h===t){l[e]=[H,d,_];break}}else if(m&&(h=t,f=h[U]||(h[U]={}),l=f[h.uniqueID]||(f[h.uniqueID]={}),c=l[e]||[],d=c[0]===H&&c[1],_=d),_===!1)for(;(h=++d&&h&&h[v]||(_=d=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++_||(m&&(f=h[U]||(h[U]={}),l=f[h.uniqueID]||(f[h.uniqueID]={}),l[e]=[H,_]),h!==t)););return _-=r,_===i||_%i===0&&_/i>=0}}},PSEUDO:function(e,n){var r,o=k.pseudos[e]||k.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[U]?o(n):o.length>1?(r=[e,e,"",n],k.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=ee(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=x(e.replace(se,"$1"));return r[U]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(be,we),function(t){return(t.textContent||t.innerText||S(t)).indexOf(e)>-1}}),lang:i(function(e){return he.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,we).toLowerCase(),function(t){var n;do if(n=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===R},focus:function(e){return e===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!k.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[n<0?n+t:n]}),even:c(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e})}},k.pseudos.nth=k.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})k.pseudos[b]=u(b);return f.prototype=k.filters=k.pseudos,k.setFilters=new f,E=t.tokenize=function(e,n){var i,r,o,a,s,u,c,l=G[e+" "];if(l)return n?0:l.slice(0);for(s=e,u=[],c=k.preFilter;s;){i&&!(r=ue.exec(s))||(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),i=!1,(r=ce.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),s=s.slice(i.length));for(a in k.filter)!(r=de[a].exec(s))||c[a]&&!(r=c[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):G(e,u).slice(0)},x=t.compile=function(e,t){var n,i=[],r=[],o=z[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=m(t[n]),o[U]?i.push(o):r.push(o);o=z(e,_(r,i)),o.selector=e}return o},P=t.select=function(e,t,n,i){var r,o,a,s,u,c="function"==typeof e&&e,f=!i&&E(e=c.selector||e);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&D&&k.relative[o[1].type]){if(t=(k.find.ID(a.matches[0].replace(be,we),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=de.needsContext.test(e)?0:o.length;r--&&(a=o[r],!k.relative[s=a.type]);)if((u=k.find[s])&&(i=u(a.matches[0].replace(be,we),me.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&h(o),!e)return Q.apply(n,i),n;break}}return(c||x(e,f))(i,t,!D,n,!t||me.test(e)&&l(t.parentNode)||t),n},w.sortStable=U.split("").sort(V).join("")===U,w.detectDuplicates=!!A,M(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(I.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;if(!n)return e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(n);ge.find=ke,ge.expr=ke.selectors,ge.expr[":"]=ge.expr.pseudos,ge.uniqueSort=ge.unique=ke.uniqueSort,ge.text=ke.getText,ge.isXMLDoc=ke.isXML,ge.contains=ke.contains;var Se=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&ge(e).is(n))break;i.push(e)}return i},Te=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},Ee=ge.expr.match.needsContext,xe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Pe=/^.[^:#\[\.,]*$/;ge.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?ge.find.matchesSelector(i,e)?[i]:[]:ge.find.matches(e,ge.grep(t,function(e){return 1===e.nodeType}))},ge.fn.extend({find:function(e){var t,n=[],i=this,r=i.length;if("string"!=typeof e)return this.pushStack(ge(e).filter(function(){for(t=0;t<r;t++)if(ge.contains(i[t],this))return!0}));for(t=0;t<r;t++)ge.find(e,i[t],n);return n=this.pushStack(r>1?ge.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&Ee.test(e)?ge(e):e||[],!1).length}});var Ce,Oe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Ae=ge.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||Ce,"string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:Oe.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof ge?t[0]:t,ge.merge(this,ge.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),xe.test(i[1])&&ge.isPlainObject(t))for(i in t)ge.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}if(r=se.getElementById(i[2]),r&&r.parentNode){if(r.id!==i[2])return Ce.find(e);this.length=1,this[0]=r}return this.context=se,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ge.isFunction(e)?"undefined"!=typeof n.ready?n.ready(e):e(ge):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ge.makeArray(e,this))};Ae.prototype=ge.fn,Ce=ge(se);var Me=/^(?:parents|prev(?:Until|All))/,Ie={children:!0,contents:!0,next:!0,prev:!0};ge.fn.extend({has:function(e){var t,n=ge(e,this),i=n.length;return this.filter(function(){for(t=0;t<i;t++)if(ge.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=Ee.test(e)||"string"!=typeof e?ge(e,t||this.context):0;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ge.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ge.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?ge.inArray(this[0],ge(e)):ge.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ge.uniqueSort(ge.merge(this.get(),ge(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ge.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Se(e,"parentNode")},parentsUntil:function(e,t,n){return Se(e,"parentNode",n)},next:function(e){return u(e,"nextSibling")},prev:function(e){return u(e,"previousSibling")},nextAll:function(e){return Se(e,"nextSibling")},prevAll:function(e){return Se(e,"previousSibling")},nextUntil:function(e,t,n){return Se(e,"nextSibling",n)},prevUntil:function(e,t,n){return Se(e,"previousSibling",n)},siblings:function(e){return Te((e.parentNode||{}).firstChild,e)},children:function(e){return Te(e.firstChild)},contents:function(e){return ge.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ge.merge([],e.childNodes)}},function(e,t){ge.fn[e]=function(n,i){var r=ge.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=ge.filter(i,r)),this.length>1&&(Ie[e]||(r=ge.uniqueSort(r)),Me.test(e)&&(r=r.reverse())),this.pushStack(r)}});var Re=/\S+/g;ge.Callbacks=function(e){e="string"==typeof e?c(e):ge.extend({},e);var t,n,i,r,o=[],a=[],s=-1,u=function(){for(r=e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)o[s].apply(n[0],n[1])===!1&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},l={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function i(t){ge.each(t,function(t,n){ge.isFunction(n)?e.unique&&l.has(n)||o.push(n):n&&n.length&&"string"!==ge.type(n)&&i(n)})}(arguments),n&&!t&&u()),this},remove:function(){return ge.each(arguments,function(e,t){for(var n;(n=ge.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--}),this},has:function(e){return e?ge.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=!0,n||l.disable(),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},ge.extend({Deferred:function(e){var t=[["resolve","done",ge.Callbacks("once memory"),"resolved"],["reject","fail",ge.Callbacks("once memory"),"rejected"],["notify","progress",ge.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ge.Deferred(function(n){ge.each(t,function(t,o){var a=ge.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ge.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ge.extend(e,i):i}},r={};return i.pipe=i.then,ge.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=ue.call(arguments),a=o.length,s=1!==a||e&&ge.isFunction(e.promise)?a:0,u=1===s?e:ge.Deferred(),c=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?ue.call(arguments):r,i===t?u.notifyWith(n,i):--s||u.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);r<a;r++)o[r]&&ge.isFunction(o[r].promise)?o[r].promise().progress(c(r,n,t)).done(c(r,i,o)).fail(u.reject):--s;return s||u.resolveWith(i,o),u.promise()}});var De;ge.fn.ready=function(e){return ge.ready.promise().done(e),this},ge.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ge.readyWait++:ge.ready(!0)},ready:function(e){(e===!0?--ge.readyWait:ge.isReady)||(ge.isReady=!0,e!==!0&&--ge.readyWait>0||(De.resolveWith(se,[ge]),ge.fn.triggerHandler&&(ge(se).triggerHandler("ready"),ge(se).off("ready"))))}}),ge.ready.promise=function(e){if(!De)if(De=ge.Deferred(),"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll)n.setTimeout(ge.ready);else if(se.addEventListener)se.addEventListener("DOMContentLoaded",f),n.addEventListener("load",f);else{se.attachEvent("onreadystatechange",f),n.attachEvent("onload",f);var t=!1;try{t=null==n.frameElement&&se.documentElement}catch(i){}t&&t.doScroll&&!function r(){if(!ge.isReady){try{t.doScroll("left")}catch(e){return n.setTimeout(r,50)}l(),ge.ready()}}()}return De.promise(e)},ge.ready.promise();var je;for(je in ge(ve))break;ve.ownFirst="0"===je,ve.inlineBlockNeedsLayout=!1,ge(function(){var e,t,n,i;n=se.getElementsByTagName("body")[0],n&&n.style&&(t=se.createElement("div"),i=se.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ve.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(i))}),function(){var e=se.createElement("div");ve.deleteExpando=!0;try{delete e.test}catch(t){ve.deleteExpando=!1}e=null}();var Le=function(e){var t=ge.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||t!==!0&&e.getAttribute("classid")===t)},Be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/([A-Z])/g;ge.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?ge.cache[e[ge.expando]]:e[ge.expando],!!e&&!d(e)},data:function(e,t,n){return p(e,t,n)},removeData:function(e,t){return v(e,t)},_data:function(e,t,n){return p(e,t,n,!0)},_removeData:function(e,t){return v(e,t,!0)}}),ge.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=ge.data(o),1===o.nodeType&&!ge._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=ge.camelCase(i.slice(5)),h(o,i,r[i])));ge._data(o,"parsedAttrs",!0)}return r}return"object"==typeof e?this.each(function(){ge.data(this,e)}):arguments.length>1?this.each(function(){ge.data(this,e,t)}):o?h(o,e,ge.data(o,e)):void 0},removeData:function(e){return this.each(function(){ge.removeData(this,e)})}}),ge.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=ge._data(e,t),n&&(!i||ge.isArray(n)?i=ge._data(e,t,ge.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=ge.queue(e,t),i=n.length,r=n.shift(),o=ge._queueHooks(e,t),a=function(){ge.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ge._data(e,n)||ge._data(e,n,{empty:ge.Callbacks("once memory").add(function(){ge._removeData(e,t+"queue"),ge._removeData(e,n)})})}}),ge.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ge.queue(this[0],e):void 0===t?this:this.each(function(){var n=ge.queue(this,e,t);ge._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ge.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ge.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=ge.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=ge._data(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}}),function(){var e;ve.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,i;return n=se.getElementsByTagName("body")[0],n&&n.style?(t=se.createElement("div"),i=se.createElement("div"),i.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(i).appendChild(t),"undefined"!=typeof t.style.zoom&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(se.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(i),e):void 0}}();var Ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Fe=new RegExp("^(?:([+-])=|)("+Ue+")([a-z%]*)$","i"),He=["Top","Right","Bottom","Left"],We=function(e,t){return e=t||e,"none"===ge.css(e,"display")||!ge.contains(e.ownerDocument,e)},qe=function(e,t,n,i,r,o,a){var s=0,u=e.length,c=null==n;if("object"===ge.type(n)){r=!0;for(s in n)qe(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,ge.isFunction(i)||(a=!0),c&&(a?(t.call(e,i),t=null):(c=t,t=function(e,t,n){return c.call(ge(e),n)})),t))for(;s<u;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:c?t.call(e):u?t(e[0],n):o},Ge=/^(?:checkbox|radio)$/i,ze=/<([\w:-]+)/,Ve=/^$|\/(?:java|ecma)script/i,Je=/^\s+/,Xe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video";!function(){var e=se.createElement("div"),t=se.createDocumentFragment(),n=se.createElement("input");e.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ve.leadingWhitespace=3===e.firstChild.nodeType,ve.tbody=!e.getElementsByTagName("tbody").length,ve.htmlSerialize=!!e.getElementsByTagName("link").length,ve.html5Clone="<:nav></:nav>"!==se.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),ve.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",ve.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),n=se.createElement("input"),n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),ve.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ve.noCloneEvent=!!e.addEventListener,e[ge.expando]=1,ve.attributes=!e.getAttribute(ge.expando)}();var Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ve.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]};Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td;var $e=/<|&#?\w+;/,Ke=/<tbody/i;!function(){var e,t,i=se.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})t="on"+e,(ve[e]=t in n)||(i.setAttribute(t,"t"),ve[e]=i.attributes[t].expando===!1);i=null}();var Qe=/^(?:input|select|textarea)$/i,Ze=/^key/,et=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,tt=/^(?:focusinfocus|focusoutblur)$/,nt=/^([^.]*)(?:\.(.+)|)/;
ge.event={global:{},add:function(e,t,n,i,r){var o,a,s,u,c,l,f,h,d,p,v,y=ge._data(e);if(y){for(n.handler&&(u=n,n=u.handler,r=u.selector),n.guid||(n.guid=ge.guid++),(a=y.events)||(a=y.events={}),(l=y.handle)||(l=y.handle=function(e){return"undefined"==typeof ge||e&&ge.event.triggered===e.type?void 0:ge.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(Re)||[""],s=t.length;s--;)o=nt.exec(t[s])||[],d=v=o[1],p=(o[2]||"").split(".").sort(),d&&(c=ge.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,c=ge.event.special[d]||{},f=ge.extend({type:d,origType:v,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&ge.expr.match.needsContext.test(r),namespace:p.join(".")},u),(h=a[d])||(h=a[d]=[],h.delegateCount=0,c.setup&&c.setup.call(e,i,p,l)!==!1||(e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l))),c.add&&(c.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,f):h.push(f),ge.event.global[d]=!0);e=null}},remove:function(e,t,n,i,r){var o,a,s,u,c,l,f,h,d,p,v,y=ge.hasData(e)&&ge._data(e);if(y&&(l=y.events)){for(t=(t||"").match(Re)||[""],c=t.length;c--;)if(s=nt.exec(t[c])||[],d=v=s[1],p=(s[2]||"").split(".").sort(),d){for(f=ge.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,h=l[d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=h.length;o--;)a=h[o],!r&&v!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(h.splice(o,1),a.selector&&h.delegateCount--,f.remove&&f.remove.call(e,a));u&&!h.length&&(f.teardown&&f.teardown.call(e,p,y.handle)!==!1||ge.removeEvent(e,d,y.handle),delete l[d])}else for(d in l)ge.event.remove(e,d+t[c],n,i,!0);ge.isEmptyObject(l)&&(delete y.handle,ge._removeData(e,"events"))}},trigger:function(e,t,i,r){var o,a,s,u,c,l,f,h=[i||se],d=pe.call(e,"type")?e.type:e,p=pe.call(e,"namespace")?e.namespace.split("."):[];if(s=l=i=i||se,3!==i.nodeType&&8!==i.nodeType&&!tt.test(d+ge.event.triggered)&&(d.indexOf(".")>-1&&(p=d.split("."),d=p.shift(),p.sort()),a=d.indexOf(":")<0&&"on"+d,e=e[ge.expando]?e:new ge.Event(d,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:ge.makeArray(t,[e]),c=ge.event.special[d]||{},r||!c.trigger||c.trigger.apply(i,t)!==!1)){if(!r&&!c.noBubble&&!ge.isWindow(i)){for(u=c.delegateType||d,tt.test(u+d)||(s=s.parentNode);s;s=s.parentNode)h.push(s),l=s;l===(i.ownerDocument||se)&&h.push(l.defaultView||l.parentWindow||n)}for(f=0;(s=h[f++])&&!e.isPropagationStopped();)e.type=f>1?u:c.bindType||d,o=(ge._data(s,"events")||{})[e.type]&&ge._data(s,"handle"),o&&o.apply(s,t),o=a&&s[a],o&&o.apply&&Le(s)&&(e.result=o.apply(s,t),e.result===!1&&e.preventDefault());if(e.type=d,!r&&!e.isDefaultPrevented()&&(!c._default||c._default.apply(h.pop(),t)===!1)&&Le(i)&&a&&i[d]&&!ge.isWindow(i)){l=i[a],l&&(i[a]=null),ge.event.triggered=d;try{i[d]()}catch(v){}ge.event.triggered=void 0,l&&(i[a]=l)}return e.result}},dispatch:function(e){e=ge.event.fix(e);var t,n,i,r,o,a=[],s=ue.call(arguments),u=(ge._data(this,"events")||{})[e.type]||[],c=ge.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(a=ge.event.handlers.call(this,e,u),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((ge.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,u=e.target;if(s&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!=this;u=u.parentNode||this)if(1===u.nodeType&&(u.disabled!==!0||"click"!==e.type)){for(i=[],n=0;n<s;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?ge(r,this).index(u)>-1:ge.find(r,this,null,[u]).length),i[r]&&i.push(o);i.length&&a.push({elem:u,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[ge.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=et.test(r)?this.mouseHooks:Ze.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new ge.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=o.srcElement||se),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=e.target.ownerDocument||se,r=i.documentElement,n=i.body,e.pageX=t.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ge.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return ge.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n){var i=ge.extend(new ge.Event,n,{type:e,isSimulated:!0});ge.event.trigger(i,null,t),i.isDefaultPrevented()&&n.preventDefault()}},ge.removeEvent=se.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)}:function(e,t,n){var i="on"+t;e.detachEvent&&("undefined"==typeof e[i]&&(e[i]=null),e.detachEvent(i,n))},ge.Event=function(e,t){return this instanceof ge.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?k:S):this.type=e,t&&ge.extend(this,t),this.timeStamp=e&&e.timeStamp||ge.now(),void(this[ge.expando]=!0)):new ge.Event(e,t)},ge.Event.prototype={constructor:ge.Event,isDefaultPrevented:S,isPropagationStopped:S,isImmediatePropagationStopped:S,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=k,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=k,e&&!this.isSimulated&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=k,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ge.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ge.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||ge.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ve.submit||(ge.event.special.submit={setup:function(){return!ge.nodeName(this,"form")&&void ge.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ge.nodeName(t,"input")||ge.nodeName(t,"button")?ge.prop(t,"form"):void 0;n&&!ge._data(n,"submit")&&(ge.event.add(n,"submit._submit",function(e){e._submitBubble=!0}),ge._data(n,"submit",!0))})},postDispatch:function(e){e._submitBubble&&(delete e._submitBubble,this.parentNode&&!e.isTrigger&&ge.event.simulate("submit",this.parentNode,e))},teardown:function(){return!ge.nodeName(this,"form")&&void ge.event.remove(this,"._submit")}}),ve.change||(ge.event.special.change={setup:function(){return Qe.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(ge.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._justChanged=!0)}),ge.event.add(this,"click._change",function(e){this._justChanged&&!e.isTrigger&&(this._justChanged=!1),ge.event.simulate("change",this,e)})),!1):void ge.event.add(this,"beforeactivate._change",function(e){var t=e.target;Qe.test(t.nodeName)&&!ge._data(t,"change")&&(ge.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ge.event.simulate("change",this.parentNode,e)}),ge._data(t,"change",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ge.event.remove(this,"._change"),!Qe.test(this.nodeName)}}),ve.focusin||ge.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ge.event.simulate(t,e.target,ge.event.fix(e))};ge.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=ge._data(i,t);r||i.addEventListener(e,n,!0),ge._data(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=ge._data(i,t)-1;r?ge._data(i,t,r):(i.removeEventListener(e,n,!0),ge._removeData(i,t))}}}),ge.fn.extend({on:function(e,t,n,i){return E(this,e,t,n,i)},one:function(e,t,n,i){return E(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,ge(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=S),this.each(function(){ge.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ge.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ge.event.trigger(e,t,n,!0)}});var it=/ jQuery\d+="(?:null|\d+)"/g,rt=new RegExp("<(?:"+Xe+")[\\s/>]","i"),ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,at=/<script|<style|<link/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,ut=/^true\/(.*)/,ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,lt=g(se),ft=lt.appendChild(se.createElement("div"));ge.extend({htmlPrefilter:function(e){return e.replace(ot,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s,u=ge.contains(e.ownerDocument,e);if(ve.html5Clone||ge.isXMLDoc(e)||!rt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(ft.innerHTML=e.outerHTML,ft.removeChild(o=ft.firstChild)),!(ve.noCloneEvent&&ve.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ge.isXMLDoc(e)))for(i=m(o),s=m(e),a=0;null!=(r=s[a]);++a)i[a]&&A(r,i[a]);if(t)if(n)for(s=s||m(e),i=i||m(o),a=0;null!=(r=s[a]);a++)O(r,i[a]);else O(e,o);return i=m(o,"script"),i.length>0&&_(i,!u&&m(e,"script")),i=s=r=null,o},cleanData:function(e,t){for(var n,i,r,o,a=0,s=ge.expando,u=ge.cache,c=ve.attributes,l=ge.event.special;null!=(n=e[a]);a++)if((t||Le(n))&&(r=n[s],o=r&&u[r])){if(o.events)for(i in o.events)l[i]?ge.event.remove(n,i):ge.removeEvent(n,i,o.handle);u[r]&&(delete u[r],c||"undefined"==typeof n.removeAttribute?n[s]=void 0:n.removeAttribute(s),ae.push(r))}}}),ge.fn.extend({domManip:M,detach:function(e){return I(this,e,!0)},remove:function(e){return I(this,e)},text:function(e){return qe(this,function(e){return void 0===e?ge.text(this):this.empty().append((this[0]&&this[0].ownerDocument||se).createTextNode(e))},null,e,arguments.length)},append:function(){return M(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.appendChild(e)}})},prepend:function(){return M(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=x(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return M(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ge.cleanData(m(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ge.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ge.clone(this,e,t)})},html:function(e){return qe(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(it,""):void 0;if("string"==typeof e&&!at.test(e)&&(ve.htmlSerialize||!rt.test(e))&&(ve.leadingWhitespace||!Je.test(e))&&!Ye[(ze.exec(e)||["",""])[1].toLowerCase()]){e=ge.htmlPrefilter(e);try{for(;n<i;n++)t=this[n]||{},1===t.nodeType&&(ge.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(r){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return M(this,arguments,function(t){var n=this.parentNode;ge.inArray(this,e)<0&&(ge.cleanData(m(this)),n&&n.replaceChild(t,this))},e)}}),ge.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ge.fn[e]=function(e){for(var n,i=0,r=[],o=ge(e),a=o.length-1;i<=a;i++)n=i===a?this:this.clone(!0),ge(o[i])[t](n),le.apply(r,n.get());return this.pushStack(r)}});var ht,dt={HTML:"block",BODY:"block"},pt=/^margin/,vt=new RegExp("^("+Ue+")(?!px)[a-z%]+$","i"),yt=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r},gt=se.documentElement;!function(){function e(){var e,l,f=se.documentElement;f.appendChild(u),c.style.cssText="-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",t=r=s=!1,i=a=!0,n.getComputedStyle&&(l=n.getComputedStyle(c),t="1%"!==(l||{}).top,s="2px"===(l||{}).marginLeft,r="4px"===(l||{width:"4px"}).width,c.style.marginRight="50%",i="4px"===(l||{marginRight:"4px"}).marginRight,e=c.appendChild(se.createElement("div")),e.style.cssText=c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",c.style.width="1px",a=!parseFloat((n.getComputedStyle(e)||{}).marginRight),c.removeChild(e)),c.style.display="none",o=0===c.getClientRects().length,o&&(c.style.display="",c.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c.childNodes[0].style.borderCollapse="separate",e=c.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",o=0===e[0].offsetHeight,o&&(e[0].style.display="",e[1].style.display="none",o=0===e[0].offsetHeight)),f.removeChild(u)}var t,i,r,o,a,s,u=se.createElement("div"),c=se.createElement("div");c.style&&(c.style.cssText="float:left;opacity:.5",ve.opacity="0.5"===c.style.opacity,ve.cssFloat=!!c.style.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ve.clearCloneStyle="content-box"===c.style.backgroundClip,u=se.createElement("div"),u.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",c.innerHTML="",u.appendChild(c),ve.boxSizing=""===c.style.boxSizing||""===c.style.MozBoxSizing||""===c.style.WebkitBoxSizing,ge.extend(ve,{reliableHiddenOffsets:function(){return null==t&&e(),o},boxSizingReliable:function(){return null==t&&e(),r},pixelMarginRight:function(){return null==t&&e(),i},pixelPosition:function(){return null==t&&e(),t},reliableMarginRight:function(){return null==t&&e(),a},reliableMarginLeft:function(){return null==t&&e(),s}}))}();var mt,_t,bt=/^(top|right|bottom|left)$/;n.getComputedStyle?(mt=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},_t=function(e,t,n){var i,r,o,a,s=e.style;return n=n||mt(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||ge.contains(e.ownerDocument,e)||(a=ge.style(e,t)),n&&!ve.pixelMarginRight()&&vt.test(a)&&pt.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o),void 0===a?a:a+""}):gt.currentStyle&&(mt=function(e){return e.currentStyle},_t=function(e,t,n){var i,r,o,a,s=e.style;return n=n||mt(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),vt.test(a)&&!bt.test(t)&&(i=s.left,r=e.runtimeStyle,o=r&&r.left,o&&(r.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"});var wt=/alpha\([^)]*\)/i,kt=/opacity\s*=\s*([^)]*)/i,St=/^(none|table(?!-c[ea]).+)/,Tt=new RegExp("^("+Ue+")(.*)$","i"),Et={position:"absolute",visibility:"hidden",display:"block"},xt={letterSpacing:"0",fontWeight:"400"},Pt=["Webkit","O","Moz","ms"],Ct=se.createElement("div").style;ge.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_t(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ve.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=ge.camelCase(t),u=e.style;if(t=ge.cssProps[s]||(ge.cssProps[s]=L(s)||s),a=ge.cssHooks[t]||ge.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:u[t];if(o=typeof n,"string"===o&&(r=Fe.exec(n))&&r[1]&&(n=y(e,t,r),o="number"),null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(ge.cssNumber[s]?"":"px")),ve.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,i)))))try{u[t]=n}catch(c){}}},css:function(e,t,n,i){var r,o,a,s=ge.camelCase(t);return t=ge.cssProps[s]||(ge.cssProps[s]=L(s)||s),a=ge.cssHooks[t]||ge.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=_t(e,t,i)),"normal"===o&&t in xt&&(o=xt[t]),""===n||n?(r=parseFloat(o),n===!0||isFinite(r)?r||0:o):o}}),ge.each(["height","width"],function(e,t){ge.cssHooks[t]={get:function(e,n,i){if(n)return St.test(ge.css(e,"display"))&&0===e.offsetWidth?yt(e,Et,function(){return F(e,t,i)}):F(e,t,i)},set:function(e,n,i){var r=i&&mt(e);return N(e,n,i?U(e,t,i,ve.boxSizing&&"border-box"===ge.css(e,"boxSizing",!1,r),r):0)}}}),ve.opacity||(ge.cssHooks.opacity={get:function(e,t){return kt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,r=ge.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ge.trim(o.replace(wt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||i&&!i.filter)||(n.filter=wt.test(o)?o.replace(wt,r):o+" "+r)}}),ge.cssHooks.marginRight=j(ve.reliableMarginRight,function(e,t){if(t)return yt(e,{display:"inline-block"},_t,[e,"marginRight"])}),ge.cssHooks.marginLeft=j(ve.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_t(e,"marginLeft"))||(ge.contains(e.ownerDocument,e)?e.getBoundingClientRect().left-yt(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}):0))+"px"}),ge.each({margin:"",padding:"",border:"Width"},function(e,t){ge.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+He[i]+t]=o[i]||o[i-2]||o[0];return r}},pt.test(e)||(ge.cssHooks[e+t].set=N)}),ge.fn.extend({css:function(e,t){return qe(this,function(e,t,n){var i,r,o={},a=0;if(ge.isArray(t)){for(i=mt(e),r=t.length;a<r;a++)o[t[a]]=ge.css(e,t[a],!1,i);return o}return void 0!==n?ge.style(e,t,n):ge.css(e,t)},e,t,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){We(this)?ge(this).show():ge(this).hide()})}}),ge.Tween=H,H.prototype={constructor:H,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||ge.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(ge.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.options.duration?this.pos=t=ge.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ge.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ge.fx.step[e.prop]?ge.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ge.cssProps[e.prop]]&&!ge.cssHooks[e.prop]?e.elem[e.prop]=e.now:ge.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ge.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ge.fx=H.prototype.init,ge.fx.step={};var Ot,At,Mt=/^(?:toggle|show|hide)$/,It=/queueHooks$/;ge.Animation=ge.extend(J,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return y(n.elem,e,Fe.exec(t),n),n}]},tweener:function(e,t){ge.isFunction(e)?(t=e,e=["*"]):e=e.match(Re);for(var n,i=0,r=e.length;i<r;i++)n=e[i],J.tweeners[n]=J.tweeners[n]||[],J.tweeners[n].unshift(t)},prefilters:[z],prefilter:function(e,t){t?J.prefilters.unshift(e):J.prefilters.push(e)}}),ge.speed=function(e,t,n){var i=e&&"object"==typeof e?ge.extend({},e):{complete:n||!n&&t||ge.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ge.isFunction(t)&&t};return i.duration=ge.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in ge.fx.speeds?ge.fx.speeds[i.duration]:ge.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){ge.isFunction(i.old)&&i.old.call(this),i.queue&&ge.dequeue(this,i.queue)},i},ge.fn.extend({fadeTo:function(e,t,n,i){return this.filter(We).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=ge.isEmptyObject(e),o=ge.speed(t,n,i),a=function(){var t=J(this,ge.extend({},e),o);(r||ge._data(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=ge.timers,a=ge._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&It.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||ge.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=ge._data(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=ge.timers,a=i?i.length:0;for(n.finish=!0,ge.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),ge.each(["toggle","show","hide"],function(e,t){var n=ge.fn[t];ge.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(q(t,!0),e,i,r)}}),ge.each({slideDown:q("show"),slideUp:q("hide"),slideToggle:q("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ge.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),ge.timers=[],ge.fx.tick=function(){var e,t=ge.timers,n=0;for(Ot=ge.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||ge.fx.stop(),Ot=void 0},ge.fx.timer=function(e){ge.timers.push(e),e()?ge.fx.start():ge.timers.pop()},ge.fx.interval=13,ge.fx.start=function(){At||(At=n.setInterval(ge.fx.tick,ge.fx.interval))},ge.fx.stop=function(){n.clearInterval(At),At=null},ge.fx.speeds={slow:600,fast:200,_default:400},ge.fn.delay=function(e,t){return e=ge.fx?ge.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=n.setTimeout(t,e);i.stop=function(){n.clearTimeout(r)}})},function(){var e,t=se.createElement("input"),n=se.createElement("div"),i=se.createElement("select"),r=i.appendChild(se.createElement("option"));n=se.createElement("div"),n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],t.setAttribute("type","checkbox"),n.appendChild(t),e=n.getElementsByTagName("a")[0],e.style.cssText="top:1px",ve.getSetAttribute="t"!==n.className,ve.style=/top/.test(e.getAttribute("style")),ve.hrefNormalized="/a"===e.getAttribute("href"),ve.checkOn=!!t.value,ve.optSelected=r.selected,ve.enctype=!!se.createElement("form").enctype,i.disabled=!0,ve.optDisabled=!r.disabled,t=se.createElement("input"),t.setAttribute("value",""),ve.input=""===t.getAttribute("value"),t.value="t",t.setAttribute("type","radio"),ve.radioValue="t"===t.value}();var Rt=/\r/g,Dt=/[\x20\t\r\n\f]+/g;ge.fn.extend({val:function(e){var t,n,i,r=this[0];{if(arguments.length)return i=ge.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,ge(this).val()):e,null==r?r="":"number"==typeof r?r+="":ge.isArray(r)&&(r=ge.map(r,function(e){return null==e?"":e+""})),t=ge.valHooks[this.type]||ge.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))});if(r)return t=ge.valHooks[r.type]||ge.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(Rt,""):null==n?"":n)}}}),ge.extend({valHooks:{option:{get:function(e){var t=ge.find.attr(e,"value");return null!=t?t:ge.trim(ge.text(e)).replace(Dt," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||r<0,a=o?null:[],s=o?r+1:i.length,u=r<0?s:o?r:0;u<s;u++)if(n=i[u],(n.selected||u===r)&&(ve.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ge.nodeName(n.parentNode,"optgroup"))){if(t=ge(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=ge.makeArray(t),a=r.length;a--;)if(i=r[a],ge.inArray(ge.valHooks.option.get(i),o)>-1)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(e.selectedIndex=-1),r}}}}),ge.each(["radio","checkbox"],function(){ge.valHooks[this]={set:function(e,t){if(ge.isArray(t))return e.checked=ge.inArray(ge(e).val(),t)>-1}},ve.checkOn||(ge.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var jt,Lt,Bt=ge.expr.attrHandle,Nt=/^(?:checked|selected)$/i,Ut=ve.getSetAttribute,Ft=ve.input;ge.fn.extend({attr:function(e,t){return qe(this,ge.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ge.removeAttr(this,e)})}}),ge.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?ge.prop(e,t,n):(1===o&&ge.isXMLDoc(e)||(t=t.toLowerCase(),r=ge.attrHooks[t]||(ge.expr.match.bool.test(t)?Lt:jt)),void 0!==n?null===n?void ge.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ge.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ve.radioValue&&"radio"===t&&ge.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(Re);if(o&&1===e.nodeType)for(;n=o[r++];)i=ge.propFix[n]||n,ge.expr.match.bool.test(n)?Ft&&Ut||!Nt.test(n)?e[i]=!1:e[ge.camelCase("default-"+n)]=e[i]=!1:ge.attr(e,n,""),e.removeAttribute(Ut?n:i)}}),Lt={set:function(e,t,n){return t===!1?ge.removeAttr(e,n):Ft&&Ut||!Nt.test(n)?e.setAttribute(!Ut&&ge.propFix[n]||n,n):e[ge.camelCase("default-"+n)]=e[n]=!0,n}},ge.each(ge.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Bt[t]||ge.find.attr;Ft&&Ut||!Nt.test(t)?Bt[t]=function(e,t,i){var r,o;return i||(o=Bt[t],Bt[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,Bt[t]=o),r}:Bt[t]=function(e,t,n){if(!n)return e[ge.camelCase("default-"+t)]?t.toLowerCase():null}}),Ft&&Ut||(ge.attrHooks.value={set:function(e,t,n){return ge.nodeName(e,"input")?void(e.defaultValue=t):jt&&jt.set(e,t,n)}}),Ut||(jt={set:function(e,t,n){var i=e.getAttributeNode(n);if(i||e.setAttributeNode(i=e.ownerDocument.createAttribute(n)),i.value=t+="","value"===n||t===e.getAttribute(n))return t}},Bt.id=Bt.name=Bt.coords=function(e,t,n){var i;if(!n)return(i=e.getAttributeNode(t))&&""!==i.value?i.value:null},ge.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:jt.set},ge.attrHooks.contenteditable={set:function(e,t,n){jt.set(e,""!==t&&t,n)}},ge.each(["width","height"],function(e,t){ge.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),ve.style||(ge.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Ht=/^(?:input|select|textarea|button|object)$/i,Wt=/^(?:a|area)$/i;ge.fn.extend({prop:function(e,t){return qe(this,ge.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ge.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),ge.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ge.isXMLDoc(e)||(t=ge.propFix[t]||t,r=ge.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=ge.find.attr(e,"tabindex");return t?parseInt(t,10):Ht.test(e.nodeName)||Wt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),ve.hrefNormalized||ge.each(["href","src"],function(e,t){ge.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ve.optSelected||(ge.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ge.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ge.propFix[this.toLowerCase()]=this}),ve.enctype||(ge.propFix.enctype="encoding");var qt=/[\t\r\n\f]/g;ge.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,u=0;if(ge.isFunction(e))return this.each(function(t){ge(this).addClass(e.call(this,t,X(this)))});if("string"==typeof e&&e)for(t=e.match(Re)||[];n=this[u++];)if(r=X(n),i=1===n.nodeType&&(" "+r+" ").replace(qt," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=ge.trim(i),r!==s&&ge.attr(n,"class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,u=0;if(ge.isFunction(e))return this.each(function(t){ge(this).removeClass(e.call(this,t,X(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(Re)||[];n=this[u++];)if(r=X(n),i=1===n.nodeType&&(" "+r+" ").replace(qt," ")){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=ge.trim(i),r!==s&&ge.attr(n,"class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ge.isFunction(e)?this.each(function(n){ge(this).toggleClass(e.call(this,n,X(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=ge(this),o=e.match(Re)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=X(this),t&&ge._data(this,"__className__",t),ge.attr(this,"class",t||e===!1?"":ge._data(this,"__className__")||""));
})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+X(n)+" ").replace(qt," ").indexOf(t)>-1)return!0;return!1}}),ge.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ge.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ge.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});var Gt=n.location,zt=ge.now(),Vt=/\?/,Jt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ge.parseJSON=function(e){if(n.JSON&&n.JSON.parse)return n.JSON.parse(e+"");var t,i=null,r=ge.trim(e+"");return r&&!ge.trim(r.replace(Jt,function(e,n,r,o){return t&&n&&(i=0),0===i?e:(t=r||n,i+=!o-!r,"")}))?Function("return "+r)():ge.error("Invalid JSON: "+e)},ge.parseXML=function(e){var t,i;if(!e||"string"!=typeof e)return null;try{n.DOMParser?(i=new n.DOMParser,t=i.parseFromString(e,"text/xml")):(t=new n.ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(r){t=void 0}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length||ge.error("Invalid XML: "+e),t};var Xt=/#.*$/,Yt=/([?&])_=[^&]*/,$t=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Kt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Qt=/^(?:GET|HEAD)$/,Zt=/^\/\//,en=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,tn={},nn={},rn="*/".concat("*"),on=Gt.href,an=en.exec(on.toLowerCase())||[];ge.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:on,type:"GET",isLocal:Kt.test(an[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":rn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ge.parseJSON,"text xml":ge.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?K(K(e,ge.ajaxSettings),t):K(ge.ajaxSettings,e)},ajaxPrefilter:Y(tn),ajaxTransport:Y(nn),ajax:function(e,t){function i(e,t,i,r){var o,f,m,_,w,S=t;2!==b&&(b=2,u&&n.clearTimeout(u),l=void 0,s=r||"",k.readyState=e>0?4:0,o=e>=200&&e<300||304===e,i&&(_=Q(h,k,i)),_=Z(h,_,k,o),o?(h.ifModified&&(w=k.getResponseHeader("Last-Modified"),w&&(ge.lastModified[a]=w),w=k.getResponseHeader("etag"),w&&(ge.etag[a]=w)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=_.state,f=_.data,m=_.error,o=!m)):(m=S,!e&&S||(S="error",e<0&&(e=0))),k.status=e,k.statusText=(t||S)+"",o?v.resolveWith(d,[f,S,k]):v.rejectWith(d,[k,S,m]),k.statusCode(g),g=void 0,c&&p.trigger(o?"ajaxSuccess":"ajaxError",[k,h,o?f:m]),y.fireWith(d,[k,S]),c&&(p.trigger("ajaxComplete",[k,h]),--ge.active||ge.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,a,s,u,c,l,f,h=ge.ajaxSetup({},t),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?ge(d):ge.event,v=ge.Deferred(),y=ge.Callbacks("once memory"),g=h.statusCode||{},m={},_={},b=0,w="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!f)for(f={};t=$t.exec(s);)f[t[1].toLowerCase()]=t[2];t=f[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=_[n]=_[n]||e,m[e]=t),this},overrideMimeType:function(e){return b||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)g[t]=[g[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||w;return l&&l.abort(t),i(0,t),this}};if(v.promise(k).complete=y.add,k.success=k.done,k.error=k.fail,h.url=((e||h.url||on)+"").replace(Xt,"").replace(Zt,an[1]+"//"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=ge.trim(h.dataType||"*").toLowerCase().match(Re)||[""],null==h.crossDomain&&(r=en.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===an[1]&&r[2]===an[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(an[3]||("http:"===an[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ge.param(h.data,h.traditional)),$(tn,h,t,k),2===b)return k;c=ge.event&&h.global,c&&0===ge.active++&&ge.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Qt.test(h.type),a=h.url,h.hasContent||(h.data&&(a=h.url+=(Vt.test(a)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=Yt.test(a)?a.replace(Yt,"$1_="+zt++):a+(Vt.test(a)?"&":"?")+"_="+zt++)),h.ifModified&&(ge.lastModified[a]&&k.setRequestHeader("If-Modified-Since",ge.lastModified[a]),ge.etag[a]&&k.setRequestHeader("If-None-Match",ge.etag[a])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&k.setRequestHeader("Content-Type",h.contentType),k.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+rn+"; q=0.01":""):h.accepts["*"]);for(o in h.headers)k.setRequestHeader(o,h.headers[o]);if(h.beforeSend&&(h.beforeSend.call(d,k,h)===!1||2===b))return k.abort();w="abort";for(o in{success:1,error:1,complete:1})k[o](h[o]);if(l=$(nn,h,t,k)){if(k.readyState=1,c&&p.trigger("ajaxSend",[k,h]),2===b)return k;h.async&&h.timeout>0&&(u=n.setTimeout(function(){k.abort("timeout")},h.timeout));try{b=1,l.send(m,i)}catch(S){if(!(b<2))throw S;i(-1,S)}}else i(-1,"No Transport");return k},getJSON:function(e,t,n){return ge.get(e,t,n,"json")},getScript:function(e,t){return ge.get(e,void 0,t,"script")}}),ge.each(["get","post"],function(e,t){ge[t]=function(e,n,i,r){return ge.isFunction(n)&&(r=r||i,i=n,n=void 0),ge.ajax(ge.extend({url:e,type:t,dataType:r,data:n,success:i},ge.isPlainObject(e)&&e))}}),ge._evalUrl=function(e){return ge.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})},ge.fn.extend({wrapAll:function(e){if(ge.isFunction(e))return this.each(function(t){ge(this).wrapAll(e.call(this,t))});if(this[0]){var t=ge(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ge.isFunction(e)?this.each(function(t){ge(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ge(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ge.isFunction(e);return this.each(function(n){ge(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ge.nodeName(this,"body")||ge(this).replaceWith(this.childNodes)}).end()}}),ge.expr.filters.hidden=function(e){return ve.reliableHiddenOffsets()?e.offsetWidth<=0&&e.offsetHeight<=0&&!e.getClientRects().length:te(e)},ge.expr.filters.visible=function(e){return!ge.expr.filters.hidden(e)};var sn=/%20/g,un=/\[\]$/,cn=/\r?\n/g,ln=/^(?:submit|button|image|reset|file)$/i,fn=/^(?:input|select|textarea|keygen)/i;ge.param=function(e,t){var n,i=[],r=function(e,t){t=ge.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ge.ajaxSettings&&ge.ajaxSettings.traditional),ge.isArray(e)||e.jquery&&!ge.isPlainObject(e))ge.each(e,function(){r(this.name,this.value)});else for(n in e)ne(n,e[n],t,r);return i.join("&").replace(sn,"+")},ge.fn.extend({serialize:function(){return ge.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ge.prop(this,"elements");return e?ge.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ge(this).is(":disabled")&&fn.test(this.nodeName)&&!ln.test(e)&&(this.checked||!Ge.test(e))}).map(function(e,t){var n=ge(this).val();return null==n?null:ge.isArray(n)?ge.map(n,function(e){return{name:t.name,value:e.replace(cn,"\r\n")}}):{name:t.name,value:n.replace(cn,"\r\n")}}).get()}}),ge.ajaxSettings.xhr=void 0!==n.ActiveXObject?function(){return this.isLocal?re():se.documentMode>8?ie():/^(get|post|head|put|delete|options)$/i.test(this.type)&&ie()||re()}:ie;var hn=0,dn={},pn=ge.ajaxSettings.xhr();n.attachEvent&&n.attachEvent("onunload",function(){for(var e in dn)dn[e](void 0,!0)}),ve.cors=!!pn&&"withCredentials"in pn,pn=ve.ajax=!!pn,pn&&ge.ajaxTransport(function(e){if(!e.crossDomain||ve.cors){var t;return{send:function(i,r){var o,a=e.xhr(),s=++hn;if(a.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)a[o]=e.xhrFields[o];e.mimeType&&a.overrideMimeType&&a.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(o in i)void 0!==i[o]&&a.setRequestHeader(o,i[o]+"");a.send(e.hasContent&&e.data||null),t=function(n,i){var o,u,c;if(t&&(i||4===a.readyState))if(delete dn[s],t=void 0,a.onreadystatechange=ge.noop,i)4!==a.readyState&&a.abort();else{c={},o=a.status,"string"==typeof a.responseText&&(c.text=a.responseText);try{u=a.statusText}catch(l){u=""}o||!e.isLocal||e.crossDomain?1223===o&&(o=204):o=c.text?200:404}c&&r(o,u,c,a.getAllResponseHeaders())},e.async?4===a.readyState?n.setTimeout(t):a.onreadystatechange=dn[s]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ge.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ge.globalEval(e),e}}}),ge.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ge.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=se.head||ge("head")[0]||se.documentElement;return{send:function(i,r){t=se.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||r(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var vn=[],yn=/(=)\?(?=&|$)|\?\?/;ge.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=vn.pop()||ge.expando+"_"+zt++;return this[e]=!0,e}}),ge.ajaxPrefilter("json jsonp",function(e,t,i){var r,o,a,s=e.jsonp!==!1&&(yn.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&yn.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=ge.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(yn,"$1"+r):e.jsonp!==!1&&(e.url+=(Vt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||ge.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=n[r],n[r]=function(){a=arguments},i.always(function(){void 0===o?ge(n).removeProp(r):n[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,vn.push(r)),a&&ge.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),ge.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||se;var i=xe.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=w([e],t,r),r&&r.length&&ge(r).remove(),ge.merge([],i.childNodes))};var gn=ge.fn.load;ge.fn.load=function(e,t,n){if("string"!=typeof e&&gn)return gn.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=ge.trim(e.slice(s,e.length)),e=e.slice(0,s)),ge.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&ge.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?ge("<div>").append(ge.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},ge.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ge.fn[t]=function(e){return this.on(t,e)}}),ge.expr.filters.animated=function(e){return ge.grep(ge.timers,function(t){return e===t.elem}).length},ge.offset={setOffset:function(e,t,n){var i,r,o,a,s,u,c,l=ge.css(e,"position"),f=ge(e),h={};"static"===l&&(e.style.position="relative"),s=f.offset(),o=ge.css(e,"top"),u=ge.css(e,"left"),c=("absolute"===l||"fixed"===l)&&ge.inArray("auto",[o,u])>-1,c?(i=f.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(u)||0),ge.isFunction(t)&&(t=t.call(e,n,ge.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+r),"using"in t?t.using.call(e,h):f.css(h)}},ge.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ge.offset.setOffset(this,e,t)});var t,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return t=o.documentElement,ge.contains(t,r)?("undefined"!=typeof r.getBoundingClientRect&&(i=r.getBoundingClientRect()),n=oe(o),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):i},position:function(){if(this[0]){var e,t,n={top:0,left:0},i=this[0];return"fixed"===ge.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ge.nodeName(e[0],"html")||(n=e.offset()),n.top+=ge.css(e[0],"borderTopWidth",!0),n.left+=ge.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ge.css(i,"marginTop",!0),left:t.left-n.left-ge.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&!ge.nodeName(e,"html")&&"static"===ge.css(e,"position");)e=e.offsetParent;return e||gt})}}),ge.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ge.fn[e]=function(i){return qe(this,function(e,i,r){var o=oe(e);return void 0===r?o?t in o?o[t]:o.document.documentElement[i]:e[i]:void(o?o.scrollTo(n?ge(o).scrollLeft():r,n?r:ge(o).scrollTop()):e[i]=r)},e,i,arguments.length,null)}}),ge.each(["top","left"],function(e,t){ge.cssHooks[t]=j(ve.pixelPosition,function(e,n){if(n)return n=_t(e,t),vt.test(n)?ge(e).position()[t]+"px":n})}),ge.each({Height:"height",Width:"width"},function(e,t){ge.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){ge.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return qe(this,function(t,n,i){var r;return ge.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?ge.css(t,n,a):ge.style(t,n,i,a)},t,o?i:void 0,o,null)}})}),ge.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),ge.fn.size=function(){return this.length},ge.fn.andSelf=ge.fn.addBack,i=[],r=function(){return ge}.apply(t,i),!(void 0!==r&&(e.exports=r));var mn=n.jQuery,_n=n.$;return ge.noConflict=function(e){return n.$===ge&&(n.$=_n),e&&n.jQuery===ge&&(n.jQuery=mn),ge},o||(n.jQuery=n.$=ge),ge})},function(e,t,n){n(1),n(2);n(13),n(16),n(20);var i=n(190);switch(window.IS_IFRAME=window.self!==window.top,window.MUDU_SERVER_ENV){case"UAT":window.NAT_SERVERS=["wss://mdl-ws-msg.uat.mudu.tv"],window.IM_SERVER="wss://mdl-live-msg.uat.mudu.tv/sub";break;case"TEST":window.NAT_SERVERS=["wss://mdl-ws-msg.test.mudu.tv"],window.IM_SERVER="wss://testsvc-3.mudu.tv/sub";break;case"TX_PROD":case"PROD":default:window.NAT_SERVERS=["wss://msg-ws.mudu.tv"],window.IM_SERVER="wss://live-msg.mudu.tv/sub"}n(191),(0,i.createNatsClient)(),"undefined"==typeof window.Mudu&&(window.Mudu=_scope.Entry)},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Utils=n(14)}).call(t,function(){return this}())},function(e,t,n){var i=(n(1),n(2),n(15));t.SetCookie=function(e,t){var n=30,i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),document.cookie="muduapi_"+e+"="+encodeURIComponent(t)+";expires="+i.toGMTString()+";path=/"},t.GetCookie=function(e){var t=document.cookie.match(new RegExp("(^| )muduapi_"+e+"=([^;]*)(;|$)"));return null!=t?decodeURIComponent(t[2]):null},t.DelCookie=function(e){var n=new Date;n.setTime(n.getTime()-1);var i=t.GetCookie(e);null!=i&&(document.cookie="muduapi_"+e+"="+i+";expires="+n.toGMTString())},t.GetRandomNum=function(e,t){var n=e-t,i=Math.random();return t+Math.round(i*n)},t.Guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()},t.GetAbsoluteUrl=function(e){var t=e.url,n=e.domain,i=e.https,r=e.http;return i=i||!1,r=r||!1,n=n||"",0===t.indexOf("//")||0===t.indexOf("http")?t:r?"http://"+n+t:i?"https://"+n+t:"//"+n+t},t.GetPrimarySocialLoginType=function(e){var n=t.GetSocialLoginTypeByEnvor();return n||e},t.GetSocialLoginTypeByEnvor=function(){return i.isWechat()?"weixin":i.isQQ()?"qq":"weibo"},t.addEventListener=function(e,t,n){window.addEventListener?e.addEventListener(t,n):window.attachEvent&&e.attachEvent(t,n)},t.transformTimeStrToNumber=function(e){return"number"==typeof e?e:"string"==typeof e&&e.indexOf(":")!==-1?e.split(":").reduce(function(e,t,n){return e+ +t*Math.pow(60,2-n)},0):0},t.getPlayUrl=function(e){var t,n,i,r,o,a,s=e.play_set;return s&&s.length>0&&s.forEach(function(e){"1080P"===e.resolution&&(t=e.url),"720P"===e.resolution&&(n=e.url),"480P"===e.resolution&&(i=e.url),"360P"===e.resolution&&(r=e.url),"240P"===e.resolution&&(o=e.url),"origin"===e.resolution.toLowerCase()&&(a=e.url)}),a||t||n||i||r||o||e.video_url||e.url}},function(e,t,n){n(1),n(2);t.isWindowsWechat=function(){return/windowswechat/i.test(navigator.userAgent)},t.isWechat=function(){return/micromessenger/i.test(navigator.userAgent)},t.isMobile=function(){return/(mobile|android|iphone|symbianos|ipad|ipod|windows phone)/i.test(navigator.userAgent)},t.isMobileWechat=function(){return t.isWechat()&&t.isMobile()},t.isQQ=function(){var e=navigator.userAgent;return/sq/i.test(e)&&/qq/i.test(e)&&!t.isWechat()},t.isDingding=function(){return/dingtalk/i.test(navigator.userAgent)}},function(e,t,n){(function(t){e.exports=t.JSON=n(17)}).call(t,function(){return this}())},function(e,t,n){var i;(function(e,r){(function(){function o(e,t){function n(e){if(n[e]!==y)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,l="function"==typeof c&&_;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===c(0)&&"0"===c(new i)&&'""'==c(new r)&&c(m)===y&&c(y)===y&&c()===y&&"1"===c(a)&&"[1]"==c([a])&&"[null]"==c([y])&&"null"==c(null)&&"[null,null,null]"==c([y,m,null])&&c({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,a)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==c(new u((-1)))}catch(f){l=!1}}o=l}if("json-parse"==e){var h=t.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){a=h(s);var d=5==a.a.length&&1===a.a[0];if(d){try{d=!h('"\t"')}catch(f){}if(d)try{d=1!==h("01")}catch(f){}if(d)try{d=1!==h("1.")}catch(f){}}}}catch(f){d=!1}o=d}}return n[e]=!!o}e||(e=c.Object()),t||(t=c.Object());var i=e.Number||c.Number,r=e.String||c.String,a=e.Object||c.Object,u=e.Date||c.Date,l=e.SyntaxError||c.SyntaxError,f=e.TypeError||c.TypeError,h=e.Math||c.Math,d=e.JSON||c.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var p,v,y,g=a.prototype,m=g.toString,_=new u((-0xc782b5b800cec));try{_=_.getUTCFullYear()==-109252&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(b){}if(!n("json")){var w="[object Function]",k="[object Date]",S="[object Number]",T="[object String]",E="[object Array]",x="[object Boolean]",P=n("bug-string-char-index");if(!_)var C=h.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return O[t]+365*(e-1970)+C((e-1969+(t=+(t>1)))/4)-C((e-1901+t)/100)+C((e-1601+t)/400)};if((p=g.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=m?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),v=function(e,t){var n,i,r,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(r in i)p.call(i,r)&&o++;return n=i=null,o?v=2==o?function(e,t){var n,i={},r=m.call(e)==w;for(n in e)r&&"prototype"==n||p.call(i,n)||!(i[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,i,r=m.call(e)==w;for(n in e)r&&"prototype"==n||!p.call(e,n)||(i="constructor"===n)||t(n);(i||p.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],v=function(e,t){var n,r,o=m.call(e)==w,a=!o&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)o&&"prototype"==n||!a.call(e,n)||t(n);for(r=i.length;n=i[--r];a.call(e,n)&&t(n));}),v(e,t)},!n("json-stringify")){var M={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I="000000",R=function(e,t){return(I+(t||0)).slice(-e)},D="\\u00",j=function(e){for(var t='"',n=0,i=e.length,r=!P||i>10,o=r&&(P?e.split(""):e);n<i;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=M[a];break;default:if(a<32){t+=D+R(2,a.toString(16));break}t+=r?o[n]:e.charAt(n)}}return t+'"'},L=function(e,t,n,i,r,o,a){var s,u,c,l,h,d,g,_,b,w,P,O,M,I,D,B;try{s=t[e]}catch(N){}if("object"==typeof s&&s)if(u=m.call(s),u!=k||p.call(s,"toJSON"))"function"==typeof s.toJSON&&(u!=S&&u!=T&&u!=E||p.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(A){for(h=C(s/864e5),c=C(h/365.2425)+1970-1;A(c+1,0)<=h;c++);for(l=C((h-A(c,0))/30.42);A(c,l+1)<=h;l++);h=1+h-A(c,l),d=(s%864e5+864e5)%864e5,g=C(d/36e5)%24,_=C(d/6e4)%60,b=C(d/1e3)%60,w=d%1e3}else c=s.getUTCFullYear(),l=s.getUTCMonth(),h=s.getUTCDate(),g=s.getUTCHours(),_=s.getUTCMinutes(),b=s.getUTCSeconds(),w=s.getUTCMilliseconds();s=(c<=0||c>=1e4?(c<0?"-":"+")+R(6,c<0?-c:c):R(4,c))+"-"+R(2,l+1)+"-"+R(2,h)+"T"+R(2,g)+":"+R(2,_)+":"+R(2,b)+"."+R(3,w)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if(u=m.call(s),u==x)return""+s;if(u==S)return s>-1/0&&s<1/0?""+s:"null";if(u==T)return j(""+s);if("object"==typeof s){for(I=a.length;I--;)if(a[I]===s)throw f();if(a.push(s),P=[],D=o,o+=r,u==E){for(M=0,I=s.length;M<I;M++)O=L(M,s,n,i,r,o,a),P.push(O===y?"null":O);B=P.length?r?"[\n"+o+P.join(",\n"+o)+"\n"+D+"]":"["+P.join(",")+"]":"[]"}else v(i||s,function(e){var t=L(e,s,n,i,r,o,a);t!==y&&P.push(j(e)+":"+(r?" ":"")+t)}),B=P.length?r?"{\n"+o+P.join(",\n"+o)+"\n"+D+"}":"{"+P.join(",")+"}":"{}";return a.pop(),B}};t.stringify=function(e,t,n){var i,r,o,a;if(s[typeof t]&&t)if((a=m.call(t))==w)r=t;else if(a==E){o={};for(var u,c=0,l=t.length;c<l;u=t[c++],a=m.call(u),(a==T||a==S)&&(o[u]=1));}if(n)if((a=m.call(n))==S){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else a==T&&(i=n.length<=10?n:n.slice(0,10));return L("",(u={},u[""]=e,u),r,o,i,"",[])}}if(!n("json-parse")){var B,N,U=r.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},H=function(){throw B=N=null,l()},W=function(){for(var e,t,n,i,r,o=N,a=o.length;B<a;)switch(r=o.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=P?o.charAt(B):o[B],B++,e;case 34:for(e="@",B++;B<a;)if(r=o.charCodeAt(B),r<32)H();else if(92==r)switch(r=o.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[r],B++;break;case 117:for(t=++B,n=B+4;B<n;B++)r=o.charCodeAt(B),r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||H();e+=U("0x"+o.slice(t,B));break;default:H()}else{if(34==r)break;for(r=o.charCodeAt(B),t=B;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++B);e+=o.slice(t,B)}if(34==o.charCodeAt(B))return B++,e;H();default:if(t=B,45==r&&(i=!0,r=o.charCodeAt(++B)),r>=48&&r<=57){for(48==r&&(r=o.charCodeAt(B+1),r>=48&&r<=57)&&H(),i=!1;B<a&&(r=o.charCodeAt(B),r>=48&&r<=57);B++);if(46==o.charCodeAt(B)){for(n=++B;n<a&&(r=o.charCodeAt(n),r>=48&&r<=57);n++);n==B&&H(),B=n}if(r=o.charCodeAt(B),101==r||69==r){for(r=o.charCodeAt(++B),43!=r&&45!=r||B++,n=B;n<a&&(r=o.charCodeAt(n),r>=48&&r<=57);n++);n==B&&H(),B=n}return+o.slice(t,B)}if(i&&H(),"true"==o.slice(B,B+4))return B+=4,!0;if("false"==o.slice(B,B+5))return B+=5,!1;if("null"==o.slice(B,B+4))return B+=4,null;H()}return"$"},q=function(e){var t,n;if("$"==e&&H(),"string"==typeof e){if("@"==(P?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=W(),"]"!=e;n||(n=!0))n&&(","==e?(e=W(),"]"==e&&H()):H()),","==e&&H(),t.push(q(e));return t}if("{"==e){for(t={};e=W(),"}"!=e;n||(n=!0))n&&(","==e?(e=W(),"}"==e&&H()):H()),","!=e&&"string"==typeof e&&"@"==(P?e.charAt(0):e[0])&&":"==W()||H(),t[e.slice(1)]=q(W());return t}H()}return e},G=function(e,t,n){var i=z(e,t,n);i===y?delete e[t]:e[t]=i},z=function(e,t,n){var i,r=e[t];if("object"==typeof r&&r)if(m.call(r)==E)for(i=r.length;i--;)G(r,i,n);else v(r,function(e){G(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,i;return B=0,N=""+e,n=q(W()),"$"!=W()&&H(),B=N=null,t&&m.call(t)==w?z((i={},i[""]=n,i),"",t):n}}}return t.runInContext=o,t}var a=n(19),s={"function":!0,object:!0},u=s[typeof t]&&t&&!t.nodeType&&t,c=s[typeof window]&&window||this,l=u&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(c=l),u&&!a)o(c,u);else{var f=c.JSON,h=c.JSON3,d=!1,p=o(c,c.JSON3={noConflict:function(){return d||(d=!0,c.JSON=f,c.JSON3=h,f=h=null),p}});c.JSON={parse:p.parse,stringify:p.stringify}}a&&(i=function(){return p}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)))}).call(this)}).call(t,n(18)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Entry=n(21)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}n(1),n(2);n(22),n(24),n(122),n(124),n(126),n(128),n(146),n(165),n(167),n(169),n(171),n(173),n(175),n(178),n(180),n(182),n(184),n(186),n(188);var r=n(141),o=i(r);e.exports={MsgBus:_scope.MsgBus,Player:_scope.Player,DB:_scope.DB,Utils:_scope.Utils,GetVersion:function(){return o["default"]},Init:function(e,t){var n=void 0,i=void 0;if("string"==typeof e){var r=e.split("_");2===r.length&&"n"===r[0]&&(n=+r[1]),2===r.length&&"s"===r[0]&&(i=r[1])}n||i||(n=+e),"undefined"==typeof _scope.Entry&&(_scope.Entry={}),_scope.Feature.EventBus(_scope.Entry),_scope.MsgBus.OnMultiOnce(["Room.Init.Over","PPT.Inited.Over","User.Init.Over","Tracker.Init.Over","Comment.Init.Over"],function(){if(_scope.MsgBus.Pub("Room.User.Over"),"function"==typeof t)try{t()}catch(e){console.warn(e)}}),_scope.MsgBus.Sub("Room.Init.Error",function(){if("function"==typeof t)try{t()}catch(e){console.warn(e)}});var o=new _scope.User({}),a=new _scope.Room({roomId:n,roomHashId:i}),s=new _scope.LuckyDraw,u=new _scope.Barrage,c=new _scope.Redpack;_scope.MsgBus.Pub("SendObj.User",o),_scope.MsgBus.Pub("SendObj.LuckyDraw",s),_scope.MsgBus.Pub("SendObj.Barrage",u),_scope.MsgBus.Pub("SendObj.Room",a),_scope.MsgBus.Pub("SendObj.Redpack",c),a.Init(),_scope.Entry.Room=a},Destroy:function(){_scope.MsgBus.UnSubAll("SendObj.User"),_scope.MsgBus.UnSubAll("Room.Init.Over"),_scope.MsgBus.UnSubAll("SendObj.LuckyDraw"),_scope.MsgBus.UnSubAll("SendObj.Barrage"),_scope.MsgBus.UnSubAll("SendObj.Room"),_scope.MsgBus.UnSubAll("SendObj.Redpack"),_scope.MsgBus.Pub("Destroy"),_scope.Entry.Room={},_scope.MsgBus.Clear()}}},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.MsgBus=n(23)}).call(t,function(){return this}())},function(e,t,n){var i=(n(1),n(2),{}),r={};r.Sub=function(e,t){if("function"!=typeof t)return void console.log("cant sub topic ,because cb is not a function(topic,data)");"undefined"==typeof i[e]&&(i[e]={});var n=_scope.Utils.Guid();return i[e][n]=t,{id:n,topic:e}},r.On=function(e,t){return r.Sub.call(this,e,t)},r.OnMultiOnce=function(e,t){var n=this,i=0;if(e instanceof Array){var o=e.length;e.map(function(e){var a=r.Sub.call(n,e,function(){i++,r.UnSub(a),i==o&&"function"==typeof t&&t()})})}},r.Pub=function(e,t){if("undefined"!=typeof i[e])for(var n in i[e])i[e][n](t,e)},r.UnSub=function(e){"undefined"!=typeof i[e.topic]&&"undefined"!=typeof i[e.topic][e.id]&&delete i[e.topic][e.id]},r.UnSubAll=function(e){delete i[e]},r.Clear=function(){i={}},e.exports=r},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Player=n(25)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(26)),o=i(r),a=n(83),s=i(a),u=n(103),c=i(u),l=n(110),f=i(l),h=n(111),d=i(h),p=n(115),v=n(116),y=n(14),g=n(117),m=n(118);e.exports=function(){function e(t){var n=this;(0,f["default"])(this,e),_scope.Feature.EventBus(this),this.id=t.containerId,this.useFakeUrl=!1,this.playerErrorCoverDom=null,this._appendErrorCover();var i=this._getUserInArrearsCode();return i&&i.hasLiveErrcode&&i.hasTrailerErrcode?void this._displayErrorCover():(this.version=t.version,this.x5Layer=t.x5Layer||!1,this.x5Inline=t.x5Inline||!1,t.src&&!t.file&&(t.file=t.src),this.retryWhenLiveError=t.retryWhenLiveError,this.param=t,this.timer=new _scope.Timer("User.WatchTime",(0,c["default"])({},this.param,{timegap:6e4,getPlayer:function(){return n.player}})),this.player=null,this.init(t),_scope.MsgBus.Pub("timer.stop",function(e){return e.param.containerId==n.param.containerId&&e!=n.timer}),void this._listenBrowserEvent())}return(0,d["default"])(e,[{key:"init",value:function(){var e=this;this.player=p(this.id);var t=this.x5Layer,n=this.x5Inline;this.isLivePlaying=!1,"live"===this.param.type&&(this.param.isLive=!0,this.param.type=void 0);var i=(0,c["default"])({preload:"none",autoplay:this.param.autoplay||this.param.autostart,contextMenus:[],plugin:{x5:{inline:t,layer:n}}},this.param);if(delete i.x5Layer,delete i.x5Inline,delete i.version,this._msgbusDestroy(),!this.param.isLive&&this.param.video_id){var r="",o=_scope.DB.Get("trailerInfo")||{};this.param.video_id===o.video_id&&(r=o.resolution),this._getVideoInfo(this.param.video_id,r).then(function(t){i.playlist=e._getPlayOrigin((0,c["default"])({},e.param,{image:i.image||"",file:t.url,bookmarks:t.bookmarks||[]})),e._setupPlayer(i)})}else i.playlist=this._getPlayOrigin(this.param),i.isLive&&(delete i.src,delete i.file),this._setupPlayer(i);this.delegatesMethod(),this._subPlayerEvents()}},{key:"_setupPlayer",value:function(e){var t=this;this._setupPlayerConfig=e;try{this.player.setup(e).then(function(){t._appendErrorCover(),_scope.MsgBus.Pub("Player.Ready",t),t.useFakeUrl&&(t.player.stop(),t.player.setControls(!1)),t.pptTimer=new _scope.Timer("Player.pptTimer",{player:t.player,timegap:1e3,getPosition:function(){return t.player.getPosition()},getPlayFile:function(){var e=t.player.getPlaylistItem(0);return e&&e.sources}}),t.pptTimer.start()},function(e){_scope.MsgBus.Pub("Player.SetupError",e),t._getUserInArrearsCode().code&&(t._appendErrorCover(),t._displayErrorCover())})}catch(n){return console.warn(n),void _scope.MsgBus.Pub("Player.SetupError",n)}}},{key:"_appendErrorCover",value:function(){var e=document.getElementById(this.id);e&&(this.playerErrorCoverDom=document.createElement("div"),this.playerErrorCoverDom.className="mudu-reset extra-error-cover",this.playerErrorCoverDom.style="display: none; position: absolute; inset: 0px; background: #000; opacity: 0.8; font-size: 18px; color: #fff;  text-align: center; white-space: break-spaces; padding-top: 20%; line-height: 1.3",e.appendChild(this.playerErrorCoverDom))}},{key:"_displayErrorCover",value:function(){var e=this._getUserInArrearsCode();
this.playerErrorCoverDom.innerText="因管理员调试(代码"+e.code+")\r\n节目暂时无法观看，请稍候",this.playerErrorCoverDom.style.display="block",this.player&&this.player.stop()}},{key:"_hideErrorCover",value:function(){this.playerErrorCoverDom.style.display="none"}},{key:"_subPlayerEvents",value:function(){var e=this;try{this.player.on("play",function(){e.timer.start(),_scope.MsgBus.Pub("Player.Play",e)})}catch(t){console.warn(t),this.player.stop(),_scope.MsgBus.Pub("Player.PlayError",t)}this.player.on("buffer",function(){_scope.MsgBus.Pub("Player.Waiting",e)}),this.player.on("pause",function(){e.timer.stop(),_scope.MsgBus.Pub("Player.Stoped",e)}),this.player.on("complete",function(){e.timer.stop(),_scope.MsgBus.Pub("Player.Ended",e)}),this.player.on("switchQuality",function(){_scope.MsgBus.Pub("Player.SwitchQuality",e)}),this.player.on("error",function(){_scope.MsgBus.Pub("Player.Error",e);var t=_scope.DB.Get("listLiveConfig"),n=_scope.DB.Get("Room").live_status;return t.isLiving&&n&&e.isLivePlaying?void setTimeout(function(){e.play()},2e3):e.isLivePlaying&&e.retryWhenLiveError&&n?void(e._liveRetryTimer=setTimeout(function(){return _scope.DB.Get("Room").live_status?e._lastLoadPlayerConfig&&e._lastLoadPlayerConfig.param?void e.load([e._lastLoadPlayerConfig.param],e._lastLoadPlayerConfig.autoPlay):e._setupPlayerConfig.isLive?void e.load([e._setupPlayerConfig],e._setupPlayerConfig.autoplay):void e.load([{isLive:!0}],!0):void(e.isLivePlaying&&setTimeout(function(){e.stop()},0))},2e3)):void e.stop()})}},{key:"_getUserInArrearsCode",value:function(){return _scope.DB.Get("User.Arrears.Status")||{}}},{key:"_listenBrowserEvent",value:function(){var e=this,t=function(){e.timer.task&&e.timer.start()};_scope.Utils.addEventListener(window,"beforeunload",t),_scope.Utils.addEventListener(window,"pagehide",t),_scope.Utils.addEventListener(window,"pageshow",t),_scope.Utils.addEventListener(document,"visibilitychange",t),_scope.Utils.addEventListener(window,"unload",t)}},{key:"_getVideoInfo",value:function(e,t){var n=this,i=_scope.DB.Get("requestHeader").token;return new s["default"](function(r,o){if(e){var a=Date.parse((new Date).toString())/1e3;return Fetcher.Get(g.API_DOMAIN+"/videos/view/act/"+n.actHashId+"/video?video_id="+e+"&timestamp="+a+"&resolution="+(t||""),function(e){var t=JSON.parse(e);1e3===t.errcode?r(t.data):o("error")},(0,c["default"])({},i,{sign:m(i.authorization.split(" ")[1]+a)}))}})}},{key:"load",value:function(e,t){var n=this,i=(0,o["default"])(e,1),r=i[0];if(this._lastLoadPlayerConfig={param:r,autoPlay:t},r.video_id){var a="",s=_scope.DB.Get("trailerInfo")||{};return r.video_id===s.video_id&&(a=s.resolution),this._getVideoInfo(r.video_id,a).then(function(e){return n.player.load(n._getPlayOrigin((0,c["default"])({},r,{file:e.url,bookmarks:e.bookmarks}))).then(function(){n.useFakeUrl?(n.player.stop(),n.player.setControls(!1)):n.player.setControls("undefined"==typeof r.controls||r.controls)})})}var u=this._getPlayOrigin(r),l=!this.useFakeUrl&&(t||r.autoPlay);return this.player.load(u,l).then(function(){n.useFakeUrl?(n.player.stop(),n.player.setControls(!1)):n.player.setControls("undefined"==typeof r.controls||r.controls)})}},{key:"_getPlayerConfigIsLive",value:function(){var e=!1;try{var t=this.player._config&&this.player._config.playlist.filter(function(e){return!!e.active})[0];e=t&&t.isLive}catch(n){}return e}},{key:"play",value:function(){var e=this._getPlayerConfigIsLive(),t=_scope.DB.Get("listLiveConfig");e&&t&&(t.isLiving||t.address)?this.load([{isLive:!0}],!0):(this.timer.start(),this.player.play(),_scope.MsgBus.Pub("Player.Play",this))}},{key:"stop",value:function(){this.player&&(this.timer.stop(),this.player.stop(),_scope.MsgBus.Pub("Player.Stoped",this))}},{key:"pause",value:function(){this.timer.stop(),this.player.pause(),_scope.MsgBus.Pub("Player.Paused",this)}},{key:"setPlayerSize",value:function(e,t){return this.player.resize(e,t)}},{key:"remove",value:function(){this.timer&&this.timer.stop(),this.pptTimer&&this.pptTimer.stop(),this.player.remove()}},{key:"_transformVideoInfoToPlay",value:function(e){var t=e.highlights||[];return!t.length&&e.bookmarks&&(t=e.bookmarks.map(function(e){return{time:y.transformTimeStrToNumber(e.time),text:e.desc||""}})),[{file:e.m3u8||e.file,image:e.trailer_img||e.image||"",isLive:!1,highlights:t,controls:"undefined"==typeof e.draggable||e.draggable,isHideProgress:"undefined"!=typeof e.isHideProgress&&!e.triple_speed}]}},{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.Sub("Destroy",function(){e.remove(),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"_getFakePlayParam",value:function(e){return this.useFakeUrl=!0,delete e.file,delete e.src,delete e.playlist,delete e.isLive,[(0,c["default"])({file:"https://myun-hw-s3.myun.tv/melj80jz/fake123.m3u8",autoplay:!1,isLive:!1,image:_scope.DB.Get("liveAddrList")[0].image||""},e)]}},{key:"_getLiveParam",value:function(e){delete e.file,delete e.src,delete e.playlist;var t=_scope.DB.Get("listLiveConfig");if(console.log(t.isLiving),t&&t.isLiving)return[(0,c["default"])({},e,{file:t.address})];var n=_scope.DB.Get("liveAddrList")[0];return[(0,c["default"])({},n,e)]}},{key:"_getPlayOrigin",value:function(e){this.useFakeUrl=!1;var t=this._getUserInArrearsCode()||{};if(e.isLive)return t.hasLiveErrcode?(this.isLivePlaying=!1,this._displayErrorCover(),this._getFakePlayParam(e)):(this.isLivePlaying=!0,this._hideErrorCover(),this._getLiveParam(e));if(this.isLivePlaying=!1,t.hasTrailerErrcode)return this._displayErrorCover(),this._getFakePlayParam(e);if(this._hideErrorCover(),!e.isLive&&!e.file){var n=_scope.DB.Get("trailerInfo")||{};if(n.open)return this._transformVideoInfoToPlay(n)}var i=e.file||e.src;if(i){var r=_scope.DB.Get("CUSTOM_FORCE_HIGHLIGHT")||[];return this._transformVideoInfoToPlay((0,c["default"])({bookmarks:r},e,{file:i}))}return this._getFakePlayParam(e)}},{key:"delegatesMethod",value:function(){v(this,"player").method("seek").method("on").method("getPlaylist").method("getPlaylistItem").method("getState").method("getPosition").method("getMute").method("setMute").method("setVolume").method("getFullscreen").method("getHeight").method("getWidth").method("resize").method("switchQuality").method("getControls").method("setControls").method("playAd")}}]),e}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(27),o=i(r),a=n(79),s=i(a);t["default"]=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,u=(0,s["default"])(e);!(i=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(c){r=!0,o=c}finally{try{!i&&u["return"]&&u["return"]()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o["default"])(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={"default":n(28),__esModule:!0}},function(e,t,n){n(29),n(75),e.exports=n(77)},function(e,t,n){n(30);for(var i=n(41),r=n(45),o=n(33),a=n(72)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=i[c],f=l&&l.prototype;f&&!f[a]&&r(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var i=n(31),r=n(32),o=n(33),a=n(34);e.exports=n(38)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports={}},function(e,t,n){var i=n(35),r=n(37);e.exports=function(e){return i(r(e))}},function(e,t,n){var i=n(36);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var i=n(39),r=n(40),o=n(55),a=n(45),s=n(56),u=n(33),c=n(57),l=n(71),f=n(73),h=n(72)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",y="values",g=function(){return this};e.exports=function(e,t,n,m,_,b,w){c(n,t,m);var k,S,T,E=function(e){if(!d&&e in O)return O[e];switch(e){case v:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",P=_==y,C=!1,O=e.prototype,A=O[h]||O[p]||_&&O[_],M=A||E(_),I=_?P?E("entries"):M:void 0,R="Array"==t?O.entries||A:A;if(R&&(T=f(R.call(new e)),T!==Object.prototype&&T.next&&(l(T,x,!0),i||s(T,h)||a(T,h,g))),P&&A&&A.name!==y&&(C=!0,M=function(){return A.call(this)}),i&&!w||!d&&!C&&O[h]||a(O,h,M),u[t]=M,u[x]=g,_)if(k={values:P?M:E(y),keys:b?M:E(v),entries:I},w)for(S in k)S in O||o(O,S,k[S]);else r(r.P+r.F*(d||C),t,k);return k}},function(e,t){e.exports=!0},function(e,t,n){var i=n(41),r=n(42),o=n(43),a=n(45),s="prototype",u=function(e,t,n){var c,l,f,h=e&u.F,d=e&u.G,p=e&u.S,v=e&u.P,y=e&u.B,g=e&u.W,m=d?r:r[t]||(r[t]={}),_=m[s],b=d?i:p?i[t]:(i[t]||{})[s];d&&(n=t);for(c in n)l=!h&&b&&void 0!==b[c],l&&c in m||(f=l?b[c]:n[c],m[c]=d&&"function"!=typeof b[c]?n[c]:y&&l?o(f,i):g&&b[c]==f?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[s]=e[s],t}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&_&&!_[c]&&a(_,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(44);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var i=n(46),r=n(54);e.exports=n(50)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(47),r=n(49),o=n(53),a=Object.defineProperty;t.f=n(50)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var i=n(48);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(50)&&!n(51)(function(){return 7!=Object.defineProperty(n(52)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=!n(51)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t,n){var i=n(48),r=n(41).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){var i=n(48);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){e.exports=n(45)},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";var i=n(58),r=n(54),o=n(71),a={};n(45)(a,n(72)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(47),r=n(59),o=n(69),a=n(66)("IE_PROTO"),s=function(){},u="prototype",c=function(){var e,t=n(52)("iframe"),i=o.length,r="<",a=">";for(t.style.display="none",n(70).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),c=e.F;i--;)delete c[u][o[i]];return c()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[u]=i(e),n=new s,s[u]=null,n[a]=e):n=c(),void 0===t?n:r(n,t)}},function(e,t,n){var i=n(46),r=n(47),o=n(60);e.exports=n(50)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,u=0;s>u;)i.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var i=n(61),r=n(69);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t,n){var i=n(56),r=n(34),o=n(62)(!1),a=n(66)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),u=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;t.length>u;)i(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var i=n(34),r=n(63),o=n(65);e.exports=function(e){return function(t,n,a){var s,u=i(t),c=r(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var i=n(64),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(64),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(67)("keys"),r=n(68);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(41),r="__core-js_shared__",o=i[r]||(i[r]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var i=n(41).document;e.exports=i&&i.documentElement},function(e,t,n){var i=n(46).f,r=n(56),o=n(72)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){var i=n(67)("wks"),r=n(68),o=n(41).Symbol,a="function"==typeof o,s=e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))};s.store=i},function(e,t,n){var i=n(56),r=n(74),o=n(66)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(37);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";var i=n(76)(!0);n(38)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var i=n(64),r=n(37);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),u=i(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(e,t,n){var i=n(78),r=n(72)("iterator"),o=n(33);e.exports=n(42).isIterable=function(e){var t=Object(e);return void 0!==t[r]||"@@iterator"in t||o.hasOwnProperty(i(t))}},function(e,t,n){var i=n(36),r=n(72)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(n){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),r))?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={"default":n(80),__esModule:!0}},function(e,t,n){n(29),n(75),e.exports=n(81)},function(e,t,n){var i=n(47),r=n(82);e.exports=n(42).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return i(t.call(e))}},function(e,t,n){var i=n(78),r=n(72)("iterator"),o=n(33);e.exports=n(42).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){e.exports={"default":n(84),__esModule:!0}},function(e,t,n){n(85),n(75),n(29),n(86),n(101),n(102),e.exports=n(42).Promise},function(e,t){},function(e,t,n){"use strict";var i,r,o,a,s=n(39),u=n(41),c=n(43),l=n(78),f=n(40),h=n(48),d=n(44),p=n(87),v=n(88),y=n(91),g=n(92).set,m=n(94)(),_=n(95),b=n(96),w=n(97),k="Promise",S=u.TypeError,T=u.process,E=u[k],x="process"==l(T),P=function(){},C=r=_.f,O=!!function(){try{var e=E.resolve(1),t=(e.constructor={})[n(72)("species")]=function(e){e(P,P)};return(x||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(i){}}(),A=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var i=e._v,r=1==e._s,o=0,a=function(t){var n,o,a=r?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(r||(2==e._h&&D(e),e._h=1),a===!0?n=i:(c&&c.enter(),n=a(i),c&&c.exit()),n===t.promise?u(S("Promise-chain cycle")):(o=A(n))?o.call(n,s,u):s(n)):u(i)}catch(l){u(l)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(u,function(){var t,n,i,r=e._v,o=R(e);if(o&&(t=b(function(){x?T.emit("unhandledRejection",r,e):(n=u.onunhandledrejection)?n({promise:e,reason:r}):(i=u.console)&&i.error&&i.error("Unhandled promise rejection",r)}),e._h=x||R(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,i=0;n.length>i;)if(t=n[i++],t.fail||!R(t.promise))return!1;return!0},D=function(e){g.call(u,function(){var t;x?T.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},j=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw S("Promise can't be resolved itself");(t=A(e))?m(function(){var i={_w:n,_d:!1};try{t.call(e,c(L,i,1),c(j,i,1))}catch(r){j.call(i,r)}}):(n._v=e,n._s=1,M(n,!1))}catch(i){j.call({_w:n,_d:!1},i)}}};O||(E=function(e){p(this,E,k,"_h"),d(e),i.call(this);try{e(c(L,this,1),c(j,this,1))}catch(t){j.call(this,t)}},i=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(98)(E.prototype,{then:function(e,t){var n=C(y(this,E));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=x?T.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},"catch":function(e){return this.then(void 0,e)}}),o=function(){var e=new i;this.promise=e,this.resolve=c(L,e,1),this.reject=c(j,e,1)},_.f=C=function(e){return e===E||e===a?new o(e):r(e)}),f(f.G+f.W+f.F*!O,{Promise:E}),n(71)(E,k),n(99)(k),a=n(42)[k],f(f.S+f.F*!O,k,{reject:function(e){var t=C(this),n=t.reject;return n(e),t.promise}}),f(f.S+f.F*(s||!O),k,{resolve:function(e){return w(s&&this===a?E:this,e)}}),f(f.S+f.F*!(O&&n(100)(function(e){E.all(e)["catch"](P)})),k,{all:function(e){var t=this,n=C(t),i=n.resolve,r=n.reject,o=b(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(e){var t=this,n=C(t),i=n.reject,r=b(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(e,t){e.exports=function(e,t,n,i){if(!(e instanceof t)||void 0!==i&&i in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var i=n(43),r=n(89),o=n(90),a=n(47),s=n(63),u=n(82),c={},l={},t=e.exports=function(e,t,n,f,h){var d,p,v,y,g=h?function(){return e}:u(e),m=i(n,f,t?2:1),_=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(d=s(e.length);d>_;_++)if(y=t?m(a(p=e[_])[0],p[1]):m(e[_]),y===c||y===l)return y}else for(v=g.call(e);!(p=v.next()).done;)if(y=r(v,m,p.value,t),y===c||y===l)return y};t.BREAK=c,t.RETURN=l},function(e,t,n){var i=n(47);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(o){var a=e["return"];throw void 0!==a&&i(a.call(e)),o}}},function(e,t,n){var i=n(33),r=n(72)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(47),r=n(44),o=n(72)("species");e.exports=function(e,t){var n,a=i(e).constructor;return void 0===a||void 0==(n=i(a)[o])?t:r(n)}},function(e,t,n){var i,r,o,a=n(43),s=n(93),u=n(70),c=n(52),l=n(41),f=l.process,h=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,y=0,g={},m="onreadystatechange",_=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){_.call(e.data)};h&&d||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++y]=function(){s("function"==typeof e?e:Function(e),t)},i(y),y},d=function(e){delete g[e]},"process"==n(36)(f)?i=function(e){f.nextTick(a(_,e,1))}:v&&v.now?i=function(e){v.now(a(_,e,1))}:p?(r=new p,o=r.port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(i=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):i=m in c("script")?function(e){u.appendChild(c("script"))[m]=function(){u.removeChild(this),_.call(e)}}:function(e){setTimeout(a(_,e,1),0)}),e.exports={set:h,clear:d}},function(e,t){e.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var i=n(41),r=n(92).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,u="process"==n(36)(a);e.exports=function(){var e,t,n,c=function(){var i,r;for(u&&(i=a.domain)&&i.exit();e;){r=e.fn,e=e.next;try{r()}catch(o){throw e?n():t=void 0,o}}t=void 0,i&&i.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();n=function(){h.then(c)}}else n=function(){r.call(i,c)};return function(i){var r={fn:i,next:void 0};t&&(t.next=r),e||(e=r,n()),t=r}}},function(e,t,n){"use strict";function i(e){var t,n;this.promise=new e(function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i}),this.resolve=r(t),this.reject=r(n)}var r=n(44);e.exports.f=function(e){return new i(e)}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(t){return{e:!0,v:t}}}},function(e,t,n){var i=n(47),r=n(48),o=n(95);e.exports=function(e,t){if(i(e),r(t)&&t.constructor===e)return t;var n=o.f(e),a=n.resolve;return a(t),n.promise}},function(e,t,n){var i=n(45);e.exports=function(e,t,n){for(var r in t)n&&e[r]?e[r]=t[r]:i(e,r,t[r]);return e}},function(e,t,n){"use strict";var i=n(41),r=n(42),o=n(46),a=n(50),s=n(72)("species");e.exports=function(e){var t="function"==typeof r[e]?r[e]:i[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var i=n(72)("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(a){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(s){}return n}},function(e,t,n){"use strict";var i=n(40),r=n(42),o=n(41),a=n(91),s=n(97);i(i.P+i.R,"Promise",{"finally":function(e){var t=a(this,r.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var i=n(40),r=n(95),o=n(96);i(i.S,"Promise",{"try":function(e){var t=r.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(104),o=i(r);t["default"]=o["default"]||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t,n){e.exports={"default":n(105),__esModule:!0}},function(e,t,n){n(106),e.exports=n(42).Object.assign},function(e,t,n){var i=n(40);i(i.S+i.F,"Object",{assign:n(107)})},function(e,t,n){"use strict";var i=n(60),r=n(108),o=n(109),a=n(74),s=n(35),u=Object.assign;e.exports=!u||n(51)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=i})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=r.f,f=o.f;u>c;)for(var h,d=s(arguments[c++]),p=l?i(d).concat(l(d)):i(d),v=p.length,y=0;v>y;)f.call(d,h=p[y++])&&(n[h]=d[h]);return n}:u},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(112),o=i(r);t["default"]=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),(0,o["default"])(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()},function(e,t,n){e.exports={"default":n(113),__esModule:!0}},function(e,t,n){n(114);var i=n(42).Object;e.exports=function(e,t,n){return i.defineProperty(e,t,n)}},function(e,t,n){var i=n(40);i(i.S+i.F*!n(50),"Object",{defineProperty:n(46).f})},function(e,t,n){(function(t){/*!
	* mudu-player.js v0.39.10
	* commit: d6d276a8
	* Copyright © 目睹 http://mudu.tv
	*/
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function h(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=u(e),null!==e););return e}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=h(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function p(e){return v(e)||y(e)||g()}function v(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function y(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function g(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function m(e){return function(){return Ht(e)}}function _(){var e=pn();return!!e}function b(){var e=pn();return!!(e&&e>="5.0.2-15")}function w(e,t){var n,i,r,o;return e.chrome?n=t.indexOf("Chrome")!==-1?t.substring(t.indexOf("Chrome")+7):t.substring(t.indexOf("CriOS")+6):e.safari?n=t.substring(t.indexOf("Version")+8):e.firefox?n=t.substring(t.indexOf("Firefox")+8):e.edge?n=t.substring(t.indexOf("Edge")+5):e.ie&&(t.indexOf("rv:")!==-1?n=t.substring(t.indexOf("rv:")+3):t.indexOf("MSIE")!==-1&&(n=t.substring(t.indexOf("MSIE")+5))),n&&((o=n.indexOf(";"))!==-1&&(n=n.substring(0,o)),(o=n.indexOf(" "))!==-1&&(n=n.substring(0,o)),(o=n.indexOf(")"))!==-1&&(n=n.substring(0,o)),i=parseInt(n,10),r=parseInt(n.split(".")[1],10)),{version:n,major:i,minor:r}}function k(e,t){if(e&&e.length>t)return e[t]}function S(e,t){var n,i,r;if(e.windows)switch(n=k(/Windows(?: NT|)? ([._\d]+)/.exec(t),1)){case"6.1":n="7.0";break;case"6.2":n="8.0";break;case"6.3":n="8.1"}else e.android?n=k(/Android ([._\d]+)/.exec(t),1):e.iOS?n=k(/OS ([._\d]+)/.exec(t),1):e.mac&&(n=k(/Mac OS X (10[._\d]+)/.exec(t),1));if(n){i=parseInt(n,10);var o=n.split(/[._]/);o&&(r=parseInt(o[1],10))}return{version:n,major:i,minor:r}}function T(e,t,n){if(e+="",t-=e.length,t<=0)return e;if(n||0===n||(n=" "),n+=""," "===n&&t<10)return En[t]+e;for(var i="";;){if(1&t&&(i+=n),t>>=1,!t)break;n+=n}return i+e}function E(e,t){function n(){o&&(o=!1,e()),a&&r()}function i(){On(n)}function r(){var e=Date.now();if(o){if(e-s<An)return;a=!0}else o=!0,a=!1,setTimeout(i,t);s=e}var o=!1,a=!1,s=0;return r}function x(e){return parseFloat(e)||0}function P(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){var i=e["border-"+n+"-width"];return t+x(i)},0)}function C(e){for(var t=["top","right","bottom","left"],n={},i=0,r=t;i<r.length;i++){var o=r[i],a=e["padding-"+o];n[o]=x(a)}return n}function O(e){var t=e.getBBox();return D(0,0,t.width,t.height)}function A(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Bn;var i=Ln(e).getComputedStyle(e),r=C(i),o=r.left+r.right,a=r.top+r.bottom,s=x(i.width),u=x(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==t&&(s-=P(i,"left","right")+o),Math.round(u+a)!==n&&(u-=P(i,"top","bottom")+a)),!M(e)){var c=Math.round(s+o)-t,l=Math.round(u+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(l)&&(u-=l)}return D(r.left,r.top,s,u)}function M(e){return e===Ln(e).document.documentElement}function I(e){return Pn?Nn(e)?O(e):A(e):Bn}function R(e){var t=e.x,n=e.y,i=e.width,r=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return jn(a,{x:t,y:n,width:i,height:r,top:n,right:t+i,bottom:r+n,left:t}),a}function D(e,t,n,i){return{x:e,y:t,width:n,height:i}}function j(e,t){for(var n=[],i=[],r=0;r<e.length;r++){var o=t(e[r],r,e);n.indexOf(o)>=0||(i.push(e[r]),n.push(o))}return i}function L(e,t){var n=Object.prototype.toString.call(t);return"[object ".concat(e.toLowerCase(),"]")===n.toLowerCase()}function B(e){return L("number",e)?e<=0?0:e<=1?100*e+"%":e+"px":e}function N(){}function U(e){var t=[];for(var n in e)t.push(n);return t}function F(e){var t={connection:"",stream:""};if(!e)return t;var n,i=e.search(/&(?!\w+=)/);return i!==-1?n=i:(i=n=e.lastIndexOf("/"),0===i&&(i=n=e.length)),t.connection=e.substring(0,i),t.stream=e.substring(n+1,e.length),t}function H(e){var t=e<0;t&&(e=-e);var n=function(e){return e<10?"0"+e:""+e},i=Math.floor(e/3600),r=Math.floor((e-3600*i)/60),o=Math.floor(e-3600*i-60*r),a=(i>0?[i,r,o]:[r,o]).map(n).join(":");return t?"-"+a:a}function W(e){var t=0,n=0;do t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:n}}function q(e){return window.getComputedStyle?window.getComputedStyle(e):e.currentStyle?e.currentStyle:{}}function G(e){var t=ee(e);if(t.left)return t.left;var n=e.offsetLeft,i=e.offsetParent,r=document.body.scrollLeft+document.documentElement.scrollLeft;if(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement)for(;null!==i&&i!==e;)n+=i.offsetLeft,i=i.offsetParent;else for(;null!==i;)n+=i.offsetLeft,i=i.offsetParent;return n-r}function z(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return document.addEventListener?e.addEventListener.apply(e,n):e.attachEvent("on"+n[0],n[1])}function V(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return document.removeEventListener?e.removeEventListener.apply(e,n):e.detachEvent("on"+n[0],n[1])}function J(e){function t(e){a.push(e),o()}function n(e){var t;t=L("RegExp",e)?function(t){return!t.match(e)}:function(t){return t!==e},a=a.filter(t),o()}function i(e){var i=r(e);i?n(e):t(e)}function r(e){return a.indexOf(e)>=0}function o(){a=j(a,function(e){return e}),e.className=a.join(" ")}var a=e.className.split(" ").filter(function(e){return""!==e.replace(" ","")});return{add:t,remove:n,toggle:i,contains:r}}function X(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild}function Y(e){function t(t){t=t||"YYYY-MM-DD HH:mm:ss.SSS";var n=e.getFullYear(),i=Tn(e.getMonth()+1,2,"0"),r=Tn(e.getDate(),2,0),o=Tn(e.getHours(),2,0),a=Tn(e.getMinutes(),2,0),s=Tn(e.getSeconds(),2,0),u=Tn(e.getMilliseconds(),3,0),c=t.replace("YYYY",n).replace("MM",i).replace("DD",r).replace("HH",o).replace("mm",a).replace("ss",s).replace("SSS",u);return c}return e=e||new Date,{format:t}}function $(e){e=e||new Date;var t=e.getFullYear(),n=Tn(e.getMonth()+1,2,"0"),i=Tn(e.getDate(),2,0),r=Tn(e.getHours(),2,0),o=Tn(e.getMinutes(),2,0),a=Tn(e.getSeconds(),2,0),s=1e6*e.getMilliseconds(),u=-e.getTimezoneOffset(),c=Math.abs(e.getTimezoneOffset()),l=Tn(Math.floor(c/60),2,0),f=Tn(Math.floor(c%60),2,0),h=u<0?"-":"+",d="".concat(t,"-").concat(n,"-").concat(i),p=0===s?"":".".concat(s),v="".concat(r,":").concat(o,":").concat(a).concat(p),y=0===u?"":"".concat(h).concat(l,":").concat(f),g="".concat(v).concat(y),m="".concat(d,"T").concat(g);return m}function K(){var e=Y().format("HHmmss"),t=ie(3);return e+t}function Q(){var e=Y().format("MMDDHHmmss"),t=ie(5);return e+t}function Z(e){var t=U(e),n=t.map(function(t){var n="string"!=typeof e[t]?ne(e[t]):e[t];return"".concat(t,"=").concat(encodeURIComponent(n))});return n.join("&")}function ee(e){var t={width:e.offsetWidth,height:e.offsetHeight},n=e.getBoundingClientRect(),i={};return U(n).forEach(function(e){i[e]=n[e]}),a({},t,i)}function te(e){var t='<div class="mudu-reset mudu-tooltip-text-wrap">'+'<span class="mudu-reset mudu-tooltip-text">'.concat(e,"</span>")+"</div>";return t}function ne(t){var n=[];return JSON.stringify(t,function(t,i){if("object"===e(i)&&null!==i){if(n.indexOf(i)!==-1)return;n.push(i)}return i})}function ie(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=t.toLowerCase(),i="0123456789",r=t+n+i,o="",a=0;a<e;a++)o+=r[re(0,62)];return o}function re(e,t){if(e=+e||0,t="number"==typeof+t&&+t?+t:100,e=Math.floor(e),t=Math.floor(t),e===t)return e;var n=Math.abs(e-t);return e>t&&(e=t),e+Math.floor(Math.random()*n)}function oe(){return{width:window.screen.width,height:window.screen.height}}function ae(e){return!!L("number",e)&&(!isNaN(e)&&(e!==1/0&&e!==-(1/0)))}function se(e){return!!L("number",e)&&!isNaN(e)}function ue(e,t){if(e instanceof HTMLElement&&L("object",t))for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])}function ce(e,t){var n=new Gn(function(e){t(e)});return n.observe(e),function(){n.disconnect()}}function le(e,t,n){return Math.min(Math.max(e,t),n)}function fe(e){var t=e.split(/\/?\?/);return"//".concat(t[0].split("//")[1],".m3u8?").concat(t[1])}function he(e,t){"auto"===e&&(e=tn());var n=e.split("-")[0],i=U(t),r=i.filter(function(t){return t===e})[0];return r||(r=i.filter(function(e){return 0===e.indexOf(n)})[0]),r||"en"}function de(){for(var e,t=0;t<this._config.playlist.length;t++){var n=this._config.playlist[t];if(n.active){e=n;break}}for(var i,r=0;r<e.sources.length;r++){var o=e.sources[r];if(o.active){i=o;break}}var a=i.file,s=ni(a),u=ii(s),c=i.type||u,l=i.mineType||ri(c),f=e.isLive,h=e.image,d=e.alwaysDisplayImage,p=e.title,v=e.highlights,y=e.playbackMessages,g=i.isTimeShift,m="undefined"==typeof e.reloadAfterPausing?!!i.reloadAfterPausing:e.reloadAfterPausing,_="undefined"==typeof e.reloadAfterPausingTime?i.reloadAfterPausingTime:e.reloadAfterPausingTime,b=e.isHideProgress;return{file:a,absoluteFile:s,mineType:l,type:c,isLive:f,image:h,alwaysDisplayImage:d,title:p,highlights:v,playbackMessages:y,item:e,source:i,isTimeShift:g,reloadAfterPausing:m,reloadAfterPausingTime:_,isHideProgress:b}}function pe(e){var t,n=this._config.playlist,i=n.length,r=0;return L("number",e)&&e<i?t=n[e]:(n.forEach(function(n,i){n.defaultPlay&&(t=n,e=i)}),t||(t=n[0],e=0)),t.sources.forEach(function(e,t){e.defaultPlay&&(r=t)}),ve.call(this,e,r)}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._config.playlist,i=!!n[e];if(!i)return i;for(var r=0;r<n.length;r++){n[r].active=r===e;for(var o=0;o<n[r].sources.length;o++)n[r].sources[o]=a({},n[r].sources[o],{active:o===t})}return i}function ye(){for(var e,t=0;t<this._config.playlist.length;t++){var n=this._config.playlist[t];if(n.active){e=n;break}}return e.sources}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._config.playbackRates,n=!!t[e];if(!n&&"null"!==e)return n;for(var i=0;i<t.length;i++)t[i].active=!1,t[i].active=i===e;return n}function me(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=p(n?ai:oi);if(i.filter(function(t){return e===t.name}).length>0)return void console.warn("provider [".concat(e,"] is existed, so it will not be register twice, you can change a name and retry"));var r=t.isHTML5(),a=t.isFlash(),s=t.isPlaybackRateSupported();if(!r&&!a)throw new TypeError("registerProvider(name, Provider): Provider should extends HTML5Provider or FlashProvider");i.push({name:e,html5:r,flash:a,isPlaybackRateSupported:s,Provider:t}),n?(De({extraProvider:o({},e,t.defaultOptions)}),ai=i):(De({provider:o({},e,t.defaultOptions)}),oi=i)}function _e(e,t){me(e,t,!0)}function be(){return oi}function we(){return ai}function ke(e){for(var t=0;t<oi.length;t++){var n=oi[t];if(n.name===e)return n}}function Se(e){var t=ai.filter(function(t){return t.name===e});if(1===t.length)return t[0]}function Te(){return be().filter(function(e){return e.Provider.isSupported()})}function Ee(){return we().filter(function(e){return e.Provider.isSupported()})}function xe(e,t){var n=t.length,i=t.indexOf("html5"),r=t.indexOf("flash"),o=e.map(function(e){var o=t.indexOf(e.name),a=0,s=0;o>=0&&(a+=n-o),i>=0&&e.html5&&(s+=n-i),r>=0&&e.flash&&(s+=n-r);var u=Math.max(a,s);return a>0&&s>0&&(u+=.5),{p:e,name:e.name,w:u}});return o.sort(function(e,t){return t.w-e.w}),o.map(function(e){return e.p})}function Pe(e){var t=e.type,n=e.mineType,i=e.url,r=e.isLive,o=e.isTimeShift,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=a.filter(function(e){return"vr"!==e}),u=Te(),c=u.filter(function(e){var a=e.Provider,s=a.canPlay({file:i,type:t,mimeType:n,isLive:r,isTimeShift:o});return!!s}),l=xe(c,s);return l[0]}function Ce(e,t){var n=e.type,i=e.mineType,r=e.url,o=e.isLive,a=e.isTimeShift,s=Ee(),u=s.filter(function(e){var t=e.Provider,s=t.canPlay({file:r,type:n,mimeType:i,isLive:o,isTimeShift:a});return!!s});return u}function Oe(e,t){var n=a({},e,t);L("array",t.playbackRates)&&(n.playbackRates=t.playbackRates,n.playbackRatesLabel=t.playbackRatesLabel||n.playbackRatesLabel),n.playlist=t.playlist,n.providerOrder=(L("array",t.providerOrder)?t.providerOrder:e.providerOrder).slice();var i=L("object",t.skin)?t.skin:{};n.skin=a({},e.skin,i);var r=L("object",t.logo)?t.logo:{};n.logo=a({},e.logo,r);var o=L("object",t.recordRestrict)?t.recordRestrict:{};n.recordRestrict=a({},e.recordRestrict,o),n.localization=a({},e.localization),U(t.localization||{}).forEach(function(i){L("object",t.localization[i])&&(n.localization[i]=a({},n.localization.en,e.localization[i]||{},t.localization[i]))});var s=L("object",t.videoAttributes)?t.videoAttributes:{};n.videoAttributes=a({},e.videoAttributes,s);var u=e.contextMenus,c=t.contextMenus;if(L("function",c)?n.contextMenus=c(u):L("array",t.contextMenus)?n.contextMenus=c:n.contextMenus=u,L("object",t.plugin)){var l=e.plugin||{};for(var f in t.plugin){var h=l[f]||{},d=t.plugin[f]||{};l[f]=a({},h,d)}n.plugin=l}if(L("object",t.provider)){var p=e.provider||{};for(var v in t.provider){var y=p[v]||{},g=t.provider[v]||{};p[v]=a({},y,g)}n.provider=p}return n}function Ae(e){if(L("array",e)){var t=[];if(e.forEach(function(e){var n={};Ie(n,e,["isLive","image","alwaysDisplayImage","isHideProgress","description","title","mediaid","defaultPlay","reloadAfterPausing","reloadAfterPausingTime","highlights","playbackMessages"]),L("string",e.file)&&""!==e.file?(n.sources=[{file:e.file,type:e.type,mineType:e.mineType}],Ie(n.sources[0],e,["type"]),t.push(n)):L("array",e.sources)&&L("object",e.sources[0])&&L("string",e.sources[0].file)&&""!==e.sources[0].file&&(n.sources=[],e.sources.forEach(function(e,t){if(L("string",e.file)&&""!==e.file){var i={file:e.file,index:t};Ie(i,e,["type","mineType","label","isTimeShift","defaultPlay","reloadAfterPausing","reloadAfterPausingTime","path","path_name"]),n.sources.push(i)}}),t.push(n))}),L("array",t)&&L("object",t[0])&&L("array",t[0].sources)&&L("object",t[0].sources[0])&&L("string",t[0].sources[0].file)&&""!==t[0].sources[0].file)return t=t.map(function(e){e.allSources=e.sources.map(function(e){return a({},e)});var t=e.sources.filter(function(t){var n=t.file,i=ni(n),r=ii(i),o=t.type||r,a=t.mineType||ri(o),s=e.isLive,u=e.isTimeShift,c=Pe({type:o,mineType:a,url:n,isLive:s,isTimeShift:u},[]);return!!c});return 0!==t.length&&(e.sources=t),e})}}function Me(e){var t=["type","mineType","isLive","file","image","description","title","playlist","highlights"],n={};for(var i in e)t.indexOf(i)<0&&void 0!==e&&(n[i]=e[i]);if(L("array",e.playlist))n.playlist=Ae(e.playlist);else if(L("string",e.file)&&e.file){var r={};Ie(r,e,["isLive","image","alwaysDisplayImage","description","isHideProgress","highlights"]);var o={file:e.file,type:e.type,mineType:e.mineType,label:"default",isTimeShift:!!e.isTimeShift||!1,reloadAfterPausing:!!e.reloadAfterPausing,reloadAfterPausingTime:e.reloadAfterPausingTime};r.sources=[o],n.playlist=[r]}return n}function Ie(e,t,n){n.forEach(function(n){L("undefined",t[n])||(e[n]=t[n])})}function Re(){return si}function De(e){si=Oe(si,Me(e))}function je(){var e=this,t=this._container,n=this.dom;J(t).add(vo);var i=this._config.skin,r=new Vo(i.url,(!0));r.load().then(function(){J(t).remove(vo),e.trigger(na)});var o=Be(this._status.localization,this._config.fileCdnPath);t.innerHTML=o,J(t).add(qo),J(t).add(Zr),J(t).add(yo),J(t).add("".concat(fo,"-").concat(i.name)),un()&&J(t).add(ho),n.container=t,n.baseLayer=t.querySelector(".".concat(Ii)),n.aspect=t.querySelector(".".concat(bi)),n.fullscreen=t.querySelector(".".concat(Bo)),n.caption=t.querySelector(".".concat(jo)),n.video=t.querySelector("video"),n.videoWrap=t.querySelector(".".concat(ki)),n.controllerWrap=t.querySelector(".".concat(Ri)),n.controller=t.querySelector(".".concat(Bi)),n.controllerMask=t.querySelector(".".concat(Di)),n.controllerBlank=t.querySelector(".".concat(ji)),n.controllerRightIcons=t.querySelector(".".concat(mr)),n.leftPlayBtn=t.querySelector(".".concat(No)),n.volumeWrap=t.querySelector(".".concat(zi)),n.volumeButton=t.querySelector(".".concat(Uo)),n.volumeBar=t.querySelector(".".concat(Xi)),n.volumeBarWrap=t.querySelector(".".concat(Ji)),n.volumeBarWrapWrap=t.querySelector(".".concat(Vi)),n.playedBar=t.querySelector(".".concat(hr)),n.loadedBar=t.querySelector(".".concat(fr)),n.playedBarWrap=t.querySelector(".".concat(Zi)),n.barPopup=t.querySelector(".".concat(tr)),n.barImg=t.querySelector(".".concat(ir)),n.barTime=n.playedBarTime=t.querySelector(".".concat(ur)),n.barText=t.querySelector(".".concat(or)),n.barTextTime=t.querySelector(".".concat(ar)),n.barTextText=t.querySelector(".".concat(sr)),n.ptime=t.querySelector(".".concat(Ki)),n.dtime=t.querySelector(".".concat(Qi)),n.logoWrap=t.querySelector(".".concat(xi)),n.logoImg=t.querySelector(".".concat(xi," img")),n.logoLink=t.querySelector(".".concat(Ei)),n.bezelWrap=t.querySelector(".".concat(Mi)),n.bezel=t.querySelector(".".concat(Io)),n.background=t.querySelector(".".concat(Or)),n.watermark=t.querySelector(".".concat(Mr)),n.title=t.querySelector(".".concat(Pi)),n.settingBtn=t.querySelector(".".concat(Lo)),n.errorWrap=t.querySelector(".".concat(xr)),n.errorText=t.querySelector(".".concat(Er)),n.highlight=t.querySelector(".".concat(dr)),n.flashTip=t.querySelector(".".concat(kr)),n.flash=t.querySelector(".".concat(wr)),n.notice=t.querySelector(".".concat($r)),n.switchQuality=t.querySelector(".".concat(qi)),n.switchPath=t.querySelector(".".concat(Gi)),n.bigPlayBtn=t.querySelector(".".concat(Li)),n.recordRestrict360=t.querySelector(".".concat(Cr)),n.liveBadge=t.querySelector(".".concat(yr)),n.playbackRate=t.querySelector(".".concat(wo)),n.pathSelectWrap=t.querySelector(".".concat(Jr)),this.trigger(Xo)}function Le(){this._container.innerHTML="",J(this._container).remove(/mudu-.*/),J(this._container).remove("mudu")}function Be(e,t,n){var i="<style>"+".mudu.".concat(vo," {background: #000;}")+".mudu.".concat(vo," div {display: none !important;}")+".mudu.".concat(vo," span {display: none !important;}")+".mudu.".concat(vo," button {display: none !important;}")+"@font-face{font-family:'mudu-icons';src:url(\"".concat(t,'/fonts/mudu-icons.eot?yyls80");src:url("').concat(t,'/fonts/mudu-icons.eot?yyls80#iefix") format("embedded-opentype"),url("').concat(t,'/fonts/mudu-icons.ttf?yyls80") format("truetype"),url("').concat(t,'/fonts/mudu-icons.woff?yyls80") format("woff"),url("').concat(t,'/fonts/mudu-icons.svg?yyls80#mudu-icons") format("svg");font-weight:normal;font-style:normal}')+"</style>"+'<div class="'.concat(qo," ").concat(bi,'"></div>')+'<div class="'.concat(qo," ").concat(wi,'"></div>')+'<div class="'.concat(qo," ").concat(ki,'">')+'<div class="'.concat(qo," ").concat(wr,'"></div>')+'<div class="'.concat(qo," ").concat(Or,'"></div>')+'<div class="'.concat(qo," ").concat(Mr,'"></div>')+'<div class="'.concat(qo," ").concat(Mi,'">')+'<span class="'.concat(qo," ").concat(Io,'"></span>')+"</div></div>"+'<div class="'.concat(qo," ").concat(Ii,'"></div>')+'<div class="'.concat(qo," ").concat(xi,'">')+'<a class="'.concat(qo," ").concat(Ei,'" target="_blank"><img style="display: none;" /></a>')+"</div>"+'<div class="'.concat(qo," ").concat(Ci,'"></div>')+'<div class="'.concat(qo," ").concat(xr,'">')+'<div class="'.concat(qo," ").concat(Pr,'">')+'<div class="'.concat(qo," ").concat(Tr,'"><span class="').concat(qo," ").concat(mi,'"></span></div>')+'<div class="'.concat(qo," ").concat(Er,'">There is some error: </div>')+"</div></div>"+'<div class="'.concat(qo," ").concat(Ri,'">')+'<div class="'.concat(qo," ").concat(ji,'"></div>')+'<div class="'.concat(qo," ").concat(Pi,'"></div>')+'<div class="'.concat(qo," ").concat(Li,'">')+'<button type="button" class="'.concat(qo," ").concat(Fi," ").concat(ui,'"></button>')+"</div>"+'<div class="'.concat(Oi,'">')+"</div>"+'<div class="'.concat(qo," ").concat(Di,'"></div>')+'<div class="'.concat(qo," ").concat(Bi,'">')+'<div class="'.concat(qo," ").concat(Ni," ").concat(Ui,'">')+'<button type="button" class="'.concat(qo," ").concat(Fi," ").concat(No,'">')+"</button>"+'<div class="'.concat(qo," ").concat(zi,'">')+'<button type="button" class="'.concat(qo," ").concat(Fi," ").concat(Uo,'" mudu-tooltip placement="top" tooltip-title="').concat(e.Mute,'">')+"</button>"+'<div class="'.concat(qo," ").concat(Vi,'">')+'<div class="'.concat(qo," ").concat(Ji,'">')+'<div class="'.concat(qo," ").concat(Xi,'">')+'<span class="'.concat(qo," ").concat(Yi,'" style="background: #b7daff;">')+"</span></div></div></div></div>"+'<span class="'.concat(qo," ").concat(yr,'" mudu-tooltip placement="top" tooltip-title="').concat(e["Skip ahead to live broadcast"],'">')+'<span class="'.concat(qo," ").concat(gr,'"></span>')+"Live</span>"+'<span class="'.concat(qo," ").concat($i,'">')+'<span class="'.concat(qo," ").concat(Ki,'"></span>')+" / "+'<span class="'.concat(qo," ").concat(Qi,'"></span>')+"</span></div>"+'<div class="'.concat(qo," ").concat(Ni," ").concat(mr,'">')+'<span role="button" class="'.concat(qo," ").concat(Hi," ").concat(Gi,'"></span>')+'<span role="button" class="'.concat(qo," ").concat(Hi," ").concat(qi,'"></span>')+'<span role="button" class="'.concat(qo," ").concat(Hi," ").concat(wo," ").concat(Wi,'"></span>')+'<button type="button" class="'.concat(qo," ").concat(Fi," ").concat(jo,'"></button>')+'<button type="button" class="'.concat(qo," ").concat(Fi," ").concat(Lo," ").concat(vi,'"></button>')+'<button type="button" class="'.concat(qo," ").concat(Fi," ").concat(Bo,'" mudu-tooltip placement="top" tooltip-title="').concat(e["Full screen"],'"></button>')+'<span type="button" class="'.concat(qo," ").concat(Fi," ").concat(Fo,'"></span>')+"</div>"+'<div class="'.concat(qo," ").concat(Zi,'">')+'<div class="'.concat(qo," ").concat(tr," ").concat(br,'">')+'<div class="'.concat(qo," ").concat(er,'">')+'<div class="'.concat(qo," ").concat(ir,'"></div>')+'<div class="'.concat(qo," ").concat(cr,'">')+'<div class="'.concat(qo," ").concat(ur,'"></div>')+"</div></div>"+'<div class="'.concat(qo," ").concat(rr,'">')+'<div class="'.concat(qo," ").concat(or,'">')+'<span class="'.concat(qo," ").concat(ar,'"></span>')+'<span class="'.concat(qo," ").concat(sr,'"></span>')+"</div></div></div>"+'<div class="'.concat(qo," ").concat(lr,'">')+'<div class="'.concat(qo," ").concat(fr,'"></div>')+'<div class="'.concat(qo," ").concat(hr,'" style="background: #f00;">')+'<span class="'.concat(qo," ").concat(Yi,'" style="background: #f00;"></span>')+"</div>"+'<div class="'.concat(qo," ").concat(dr,'"></div>')+"</div></div></div></div>"+'<div class="'.concat(qo," ").concat(kr,'">')+'<div class="'.concat(qo," ").concat(Sr,'"><a href="http://www.adobe.com/go/getflash" target="_blank">检测到您还未安装flash, 请点击这里安装</a></div>')+"</div>"+'<div class="'.concat(qo," ").concat($r," ").concat(Ho,'"></div>')+'<div class="'.concat(qo," ").concat(Cr," ").concat(Ho,'"></div>');return i}function Ne(e,t){return this instanceof Ne?(this.proto=e,void(this.target=t)):new Ne(e,t)}function Ue(e){e[Za.requestFullscreen]()}function Fe(){document[Za.exitFullscreen]()}function He(){return Boolean(document[Za.fullscreenEnabled])}function We(e){z(document,Za.fullscreenchange,e)}function qe(e){V(document,Za.fullscreenchange,e)}function Ge(){return document[Za.fullscreenElement]}function ze(){z(document,"mouseover",function(e){var t=e.target||e.srcElement;Ye(t)&&ns.trigger("mouseover",e,t)}),z(document,"mouseout",function(e){var t=e.target||e.srcElement;Ye(t)&&ns.trigger("mouseout",e,t)}),z(document,"click",function(e){var t=e.target||e.srcElement;return Ve()?void Xe():void(Ye(t)&&ns.trigger("click",e,t))})}function Ve(){return is.filter(function(e){return e.isShow()}).length>0}function Je(e){return is.filter(function(t){return t.isShow()&&t.getConfig()["class"]===e}).length>0}function Xe(){is.forEach(function(e){return e.hide()})}function Ye(e){return e&&""===e.getAttribute("mudu-tooltip")}function $e(t){function n(){p=!1,h()}function i(){p=!0}function r(){var e=document.createElement("div");return d.container.appendChild(e),e.setAttribute("class","mudu-reset "+d["class"]),z(e,"click",function(e){d.wrapClick&&d.wrapClick(e),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}),e.style.cssText="position: absolute; top: 0; left: ".concat(ts,"; opacity: 0; visibility: hidden;"),e}function o(){return v&&v.style.left!==ts}function s(){var e=is.indexOf(b);e<0||(ns.off("mouseover",y),ns.off("mouseout",g),ns.off("click",m),v.parentElement.removeChild(v),t&&t.removeAttribute("mudu-tooltip"),is.splice(e,1))}function u(t){"string"==typeof t&&(v.innerHTML=t),"object"===e(t)&&(v.innerHTML="",v.appendChild(t))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.left,i=e.top;if(l(),void 0===n&&void 0===i&&"top"===d.placement){var r=ee(d.container),o=ee(v),a=ee(t),s=d.distance;n=a.left+a.width/2-o.width/2-r.left,i=a.top-o.height-s-r.top,n+o.width>r.right&&(n=r.right-o.width),n<0&&(n=r.left)}v.style.left=n+"px",v.style.top=i+"px",v.style.visibility="visible",v.style.opacity=1}function l(){var e=ee(d.container),t=d.getMaxHeight(e);v.style.maxHeight=B(t)}function f(){return v}function h(){v&&(v.style.left=ts,v.style.opacity=0,v.style.visibility="hidden")}var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t="string"==typeof t&&t?document.querySelector(t):t,d=a({},es,d),t&&t.setAttribute("mudu-tooltip","");var p=!0,v=r();u(d.content);var y=ns.on("mouseover",function(e,n){n===t&&"hover"===d.trigger&&p&&c()}),g=ns.on("mouseout",function(e,n){n===t&&"hover"===d.trigger&&h()}),m=ns.on("click",function(e,n){n===t&&"click"===d.trigger&&p&&c()}),_=function(){return a({},d)},b={hide:h,isShow:o,destroy:s,getTooltipContainer:f,updateContent:u,show:c,getConfig:_,disable:n,enable:i};return is.push(b),b}function Ke(t,n,i,r,o,a,s,u,c,l){var f=n,h={success:!1,id:f};if(!(fs&&fs<312)&&t&&n&&i&&r&&o){Qe(f,!1);var d=function(){i+="",r+="";var a={};if(c&&"object"===e(c))for(var d in c)a[d]=c[d];a.data=t,a.width=i,a.height=r;var p={};if(u&&"object"===e(u))for(var v in u)p[v]=u[v];if(s&&"object"===e(s))for(var y in s)if(s.hasOwnProperty(y)){var g=y,m=s[y];"undefined"!=typeof p.flashvars?p.flashvars+="&"+g+"="+m:p.flashvars=g+"="+m}if(Ze(o)){var _=et(a,p,n);a.id===f&&Qe(f,!0),h.success=!0,h.ref=_,h.id=_.id}else Qe(f,!0);l&&l(h)};d()}else l&&l(h)}function Qe(e,t){var n=t?"visible":"hidden",i=document.getElementById(e);i.style.visibility=n}function Ze(e){return e=parseFloat(e),cs>=e}function et(e,t,n){var i,r=document.getElementById(n);if(fs&&fs<312)return i;if(r){var o,a,s,u=ls?document.createElement("div"):document.createElement("object");"undefined"==typeof e.id&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&nt(u,s,t[s]);ls&&(u=tt(e.data,u.innerHTML));for(o in e)e.hasOwnProperty(o)&&(a=o.toLowerCase(),"styleclass"===a?u.setAttribute("class",e[o]):"classid"!==a&&"data"!==a&&u.setAttribute(o,e[o]));ls?us[us.length]=e.id:(u.setAttribute("type",ss),u.setAttribute("data",e.data)),r.parentNode.replaceChild(u,r),i=u}return i}function tt(e,t){var n=document.createElement("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function nt(e,t,n){var i=document.createElement("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function it(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"muduPlayer";return this instanceof it?void(this.storeKey=e):new it(e)}function rt(){var e=this;try{ot.call(this)}catch(t){console.error("destroy provider",t)}console.log("initProvider");var n=de.call(this),i=n.file,r=n.type,o=n.mineType,s=n.isLive,u=n.absoluteFile,c=n.image,l=n.alwaysDisplayImage,f=n.isTimeShift,h=n.reloadAfterPausing,d=n.reloadAfterPausingTime,p=n.isHideProgress,v=r,y=i,g=o;"webrtc"===r&&this._config.trtcFallback&&(!gs.isSupported()||on()&&sn()||an()&&sn())&&(v="m3u8",y=fe(i),g=ri("m3u8"),this.trigger(Ma,{from:{type:"webrtc",url:i},to:{type:"m3u8",url:y},mineType:ri("m3u8")}));var m=Pe({type:v,mineType:g,url:y,isLive:s,isTimeShift:f},this._config.providerOrder);if(console.log(v),console.log(y),console.log(g),!m){var t="File type not supported";return this.trigger(xa,{message:t,fatal:!0,errorId:K()}),Promise.reject(new TypeError(t))}var _=new m.Provider(this,this._config.provider[m.name]);this._provider=a({},m,{instance:_});var b=this;return _.loadFiles().then(function(){if(!_.removed){var e=_.getMediaElement();if(!e){var t=_.createMediaElement();if(!t)throw new Error(vs.Error.NotAllowedError);b.dom.videoWrap.insertBefore(t,b.dom.background)}}}).then(function(){if(!_.removed)return console.log("instance setup"),_.setup({isLive:s,file:y,image:c,absoluteFile:u,type:v,mineType:o})}).then(function(){console.log("provider setup 成功  "),e.trigger(Ko,{isLive:s,file:i,absoluteFile:u,type:r,mineType:o,image:c,alwaysDisplayImage:l,isTimeShift:f,reloadAfterPausing:h,reloadAfterPausingTime:d,isHideProgress:p})})["catch"](function(t){throw console.error("provider setup 错误",t),e.trigger(xa,{error:t,message:t.message,column:t.columnNumber,fileName:t.fileName,lineNumber:t.lineNumber,name:t.name,stack:t.stack,errorId:K()}),t})}function ot(){console.log("destroyProvider");var e=this._provider&&this._provider.instance;e&&(this._provider=null,e.remove(),this.trigger(Qo))}function at(){var e=this;try{st.call(this)}catch(t){console.error("destroy extra provider",t)}console.log("add extra provider");var n=de.call(this),i=n.file,r=n.type,o=n.mineType,s=n.isLive,u=n.absoluteFile,c=n.image,l=n.isTimeShift,f=Ce({type:r,mineType:o,url:i,isLive:s,isTimeShift:l},this._config);Promise.all(f.map(function(t){if(!t){var n="".concat(t.name," cannot support file type");e.trigger(xa,{message:n,fatal:!0,errorId:K()}),Promise.reject(new TypeError(n))}if(e._config.extraProvider[t.name].use){var l=new t.Provider(e,e._config.extraProvider[t.name]);e._extraProviders[t.name]=a({},t,{instance:l});var f=e;return l.loadFiles().then(function(){var e=l.getMediaElement();if(!e){var t=l.createMediaElement();if(!t)throw new Error(vs.Error.NotAllowedError);f.dom.videoWrap.insertBefore(t,f.dom.background)}}).then(function(){return console.log("instance setup"),l.setup({isLive:s,file:i,image:c,absoluteFile:u,type:r,mineType:o})}).then(function(){console.log("extra provider setup 成功  ");
})["catch"](function(t){throw console.error("extra provider setup 错误",t),e.trigger(xa,{error:t,message:t.message,column:t.columnNumber,fileName:t.fileName,lineNumber:t.lineNumber,name:t.name,stack:t.stack,errorId:K()}),t})}}))}function st(){var e=this;console.log("destroyExtraProvider");var t=[];for(var n in this._extraProviders)Object.prototype.hasOwnProperty.call(this._extraProviders,n)&&t.push(this._extraProviders[n]);t.length>0&&t.forEach(function(t,n){t.instance&&(t.instance.remove(),t.removed=!0,delete e._extraProviders[t.name])})}function ut(e,t){return t={exports:{}},e(t,t.exports),t.exports}function ct(e){var t=qs.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}function lt(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)lu.call(n,i)&&(e[i]=n[i])}return e}function ft(e,t){for(var n=0;n<e.length;n++)t(e[n])}function ht(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function dt(e,t,n){var i=e;return Ws(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=cu(t,{uri:e}),i.callback=n,i}function pt(e,t,n){return t=dt(e,t,n),vt(t)}function vt(e){function t(){4===s.readyState&&setTimeout(r,0)}function n(){var e=void 0;if(e=s.response?s.response:s.responseText||yt(s),y)try{e=JSON.parse(e)}catch(t){}return e}function i(e){return clearTimeout(l),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,a(e,g)}function r(){if(!c){var t;clearTimeout(l),t=e.useXDR&&void 0===s.status?200:1223===s.status?204:s.status;var i=g,r=null;return 0!==t?(i={body:n(),statusCode:t,method:h,headers:{},url:f,rawRequest:s},s.getAllResponseHeaders&&(i.headers=uu(s.getAllResponseHeaders()))):r=new Error("Internal XMLHttpRequest Error"),a(r,i,i.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var o=!1,a=function(t,n,i){o||(o=!0,e.callback(t,n,i))},s=e.xhr||null;s||(s=e.cors||e.useXDR?new pt.XDomainRequest:new pt.XMLHttpRequest);var u,c,l,f=s.url=e.uri||e.url,h=s.method=e.method||"GET",d=e.body||e.data,p=s.headers=e.headers||{},v=!!e.sync,y=!1,g={body:void 0,headers:{},statusCode:0,method:h,url:f,rawRequest:s};if("json"in e&&e.json!==!1&&(y=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),d=JSON.stringify(e.json===!0?d:e.json))),s.onreadystatechange=t,s.onload=r,s.onerror=i,s.onprogress=function(){},s.onabort=function(){c=!0},s.ontimeout=i,s.open(h,f,!v,e.username,e.password),v||(s.withCredentials=!!e.withCredentials),!v&&e.timeout>0&&(l=setTimeout(function(){if(!c){c=!0,s.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),s.setRequestHeader)for(u in p)p.hasOwnProperty(u)&&s.setRequestHeader(u,p[u]);else if(e.headers&&!ht(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(s.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(s),s.send(d||null),s}function yt(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(n){}return null}function gt(){}function mt(e,t){var n=$(),i=U(t),r={time:n};i.forEach(function(e){r[e]=ne(t[e])});try{fu({url:e+"?time="+decodeURIComponent(n),method:"POST",body:ne(r),headers:{"Content-Type":"application/json"}},N)}catch(o){}}function _t(e,t){var n=Z(a({},t,{time:$()}));fu("".concat(e,"?").concat(n),N)}function bt(e,t){var n,i,r=e.width/e.height,o=t.width/t.height;return r>o?(n=e.width,i=e.width/o):(n=e.height*o,i=e.height),{width:n,height:i}}function wt(e,t){var n,i,r=e.width/e.height,o=t.width/t.height;return r<o?(n=e.width,i=e.width/o):(n=e.height*o,i=e.height),{width:n,height:i}}function kt(e){return e}function St(e){return e}function Tt(e,t){return t.width>e.width||t.height>e.height?wt(e,t):St(e)}function Et(){return{designWidth:750,type:"text",data:"",placement:"repeat",opacity:.5,fontSize:16,fontFamily:"PingFang SC",color:"#FFFFFF",rotate:-25,marginTop:8,marginRight:8,marginBottom:8,marginLeft:8,cellSize:{width:250,height:140.625},imageSize:null,autoRandom:5e3}}function xt(e,t){var n=null,i=function r(){var i=e.getMetrics()||{};i.videoWidth>1&&i.videoWidth>1?t(i):n=setTimeout(r,100)};return i(),function(){return n&&clearTimeout(n)}}function Pt(){this.model.fullscreen=new rs(this),this.model.video=new _s(this),this.model.progress=new ws(this),this.model.controls=new ks(this),this.model.volume=new Ss(this),this.model.playlist=new Ts(this),this.model.hotkeys=new xs(this),this.model.resize=new Ps(this),this.model.stretch=new Cs(this),this.model.logo=new Os(this),this.model.focus=new As(this),this.model.bezel=new Ms(this),this.model.background=new Is(this),this.model.dom=new Rs(this),this.model.title=new Ds(this),this.model.contextMenu=new js(this),this.model.error=new Bs(this),this.model.progressPopup=new Ls(this),this.model.notice=new Ns(this),this.model.qualitySwitch=new Us(this),this.model.perf=new du(this),this.model.textTrack=new pu(this),this.model.subtitle=new vu(this),this.model.myunSync=new mu(this),this.model.orientation=new bu(this),this.model.recordRestrict=new wu(this),this.model.liveEndDetect=new ku(this),this.model.playbackMessage=new Su(this),this.model.playbackRate=new Tu(this),this.model.watermark=new Eu(this),this.trigger(Yo)}function Ct(){for(var e in this.model)this.model[e].remove()}function Ot(){var e=this;this.timer={};var t=this._config.bufferDetectGap;(!L("number",t)||isNaN(t)||t<=0)&&(t=200),this.timer.loading=new hs({type:"loading",gap:t}),this.timer.raf=new hs({type:"raf",isRaf:!0});var n=0,i=0,r=!1;this.timer.loading.on("tick",function(t){var o=t.isStop;if(!o){i=e.model.progress.getPosition();var a=e.model.video.getState(),s="playing"===a||"buffering"===a;if(!r&&i===n&&s){var u=e.getDuration();!fn()&&se(u)&&u>0&&(r=!0,e.trigger("internal_buffer",!0))}r&&i>n&&s&&(r=!1,e.trigger("internal_buffer",!1)),n=i}});var o=-1;this.timer.raf.on("tick",function(t){var n=t.isStop;if(!n){var i=e.model.resize.getWidth(),r=J(e.dom.container).contains(mo);i<350?!r&&J(e.dom.container).add(mo):r&&J(e.dom.container).remove(mo),o!==i&&(e.model.subtitle._setSubtitleSize(i),e.model.subtitle._updateSubtitleStyle()),o=i;var a=+q(e.dom.container).fontSize.replace(/[^\d]+/,"");e._status.containerFontSize=a<16?16:a,e.model.playbackMessage._onTick()}}),this.timer.raf.start()}function At(){this.timer.loading.stop(),this.timer.raf.stop()}function Mt(e,t){return xu[e]?void console.warn("provider [".concat(e,"] is existed, so it will not be register twice, you can change a name and retry")):(xu[e]={name:e,Plugin:t},void De({plugin:o({},e,t.defaultOptions)}))}function It(){return xu}function Rt(e){return xu[e]||null}function Dt(){var e=It();for(var t in e){var n=e[t];n.Plugin.isSupported()&&(this.plugin[t]=new n.Plugin(this,this._config.plugin[t]))}this.trigger($o)}function jt(){if(this.plugin)for(var e in this.plugin)this.plugin[e]&&this.plugin[e].remove()}function Lt(){var e=function(e){function t(){return n(this,t),f(this,u(t).apply(this,arguments))}return s(t,e),r(t,[{key:"loadInternal",value:function(){var e,t=this.context;e=this.loader=new window.XMLHttpRequest;var n=this.stats;n.tfirst=0,n.loaded=0;var i=this.xhrSetup,r="https:"===window.location.protocol?t.url.replace(/^http:/,"https:"):t.url;try{if(i)try{i(e,r)}catch(o){e.open("GET",r,!0),i(e,r)}e.readyState||e.open("GET",r,!0)}catch(o){return void this.callbacks.onError({code:e.status,text:o.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()}}]),t}(window.Hls.DefaultConfig.loader);return{XHRLoader:e}}function Bt(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}function Nt(e,t){var n,i,r,o,a,s,u=!1;t||(t={}),n=t.debug||!1;try{r=Nu(),o=document.createRange(),a=document.getSelection(),s=document.createElement("span"),s.textContent=e,s.style.all="unset",s.style.position="fixed",s.style.top=0,s.style.clip="rect(0, 0, 0, 0)",s.style.whiteSpace="pre",s.style.webkitUserSelect="text",s.style.MozUserSelect="text",s.style.msUserSelect="text",s.style.userSelect="text",document.body.appendChild(s),o.selectNode(s),a.addRange(o);var c=document.execCommand("copy");if(!c)throw new Error("copy command was unsuccessful");u=!0}catch(l){n&&console.error("unable to copy using execCommand: ",l),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),u=!0}catch(l){n&&console.error("unable to copy using clipboardData: ",l),n&&console.error("falling back to prompt"),i=Bt("message"in t?t.message:Uu),window.prompt(i,e)}}finally{a&&("function"==typeof a.removeRange?a.removeRange(o):a.removeAllRanges()),s&&document.body.removeChild(s),r()}return u}function Ut(e){var t=document.getElementById(e);if(!t)throw new Error("muduPlayer(container): container should be an id of a div in the body, but not found");if(Gu[e]&&Gu[e]._status)return Gu[e];qu++;var n=new Pu(e);return Gu[e]=n,n._status.index=qu,n}var Ft=navigator.userAgent,Ht=function(e){return null!==Ft.match(e)},Wt=m(/gecko\//i),qt=m(/trident\/.+rv:\s*11/i),Gt=m(/iP(hone|od)/i),zt=m(/iPad/i),Vt=m(/Macintosh/i),Jt=m(/FBAV/i),Xt=function(){return Ht(/\sEdge\/\d+/i)},Yt=function(){return Ht(/msie/i)},$t=function(){return Ht(/\s(?:(?:Headless)?Chrome|CriOS)\//i)&&!Xt()&&!Ht(/UCBrowser/i)},Kt=function(){return Xt()||qt()||Yt()},Qt=function(){return Ht(/safari/i)&&!Ht(/(?:Chrome|CriOS|chromium|android|phantom)/i)},Zt=function(){return Ht(/iP(hone|ad|od)/i)},en=function(){return window.location.href.indexOf("playerdebug")>=0},tn=function(){return navigator.language||navigator.userLanguage||navigator.browserLanguage||navigator.systemLanguage},nn=function(){return!(Ht(/chrome\/[123456789]/i)&&!Ht(/chrome\/18/i)&&!Wt())&&sn()},rn=function(){var e=Ft.toLowerCase();return!!/webkit/.test(e)&&parseFloat(e.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1"))},on=function(){return Ht(/UCBrowser/i)},an=function(){return Ht(/MQQBrowser/i)},sn=function(){return Ht(/Android/i)&&!Ht(/Windows Phone/i)},un=function(){return Zt()||sn()||Ht(/Windows Phone/i)},cn=function(){return Ht("Windows")>-1},ln=function(){try{return window.self!==window.top}catch(e){return!0}},fn=function(){return hn()||dn()},hn=function(){var e=Ft,t=/tbs\/(\d+) /gi.exec(e),n=/wechat|micromessenger/gi.test(e);return!!sn()&&(!(!t&&!n)&&(n||(t[1]||"")>"036849"))},dn=function(){var e=Ft,t=/MQQBrowser\/([\d+.]+) /gi.exec(e);return!!sn()&&(!!t&&+(t[1]||"")>=7.1)},pn=function(){if(sn())return 0;var e,t=navigator.plugins;if(t&&(e=t["Shockwave Flash"],e&&e.description))return parseFloat(e.description.replace(/\D+(\d+\.?\d*).*/,"$1"));if("undefined"!=typeof window.ActiveXObject){try{if(e=new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return parseFloat(e.GetVariable("$version").split(" ")[1].replace(/\s*,\s*/,"."))}catch(n){return 0}return e}return 0},vn=navigator.userAgent,yn={chrome:$t(),edge:Xt(),firefox:Wt(),ie:Kt(),msie:Yt(),safari:Qt()};yn.version=w(yn,vn);var gn={android:sn(),iOS:Zt(),mobile:un(),mac:Vt(),iPad:zt(),iPhone:Gt(),windows:cn()};gn.version=S(gn,vn);var mn={flashInstalled:_(),flashSupported:b(),flashVersion:pn(),iframe:ln()},_n={browser:yn,os:gn,others:mn},bn=yn.version,wn=gn.version,kn=function(){return JSON.parse(JSON.stringify(_n))},Sn=Object.freeze({__proto__:null,browserVersion:bn,osVersion:wn,getEnvor:kn,isFlashInstalled:_,isFlashSupported:b,isFF:Wt,isIETrident:qt,isIPod:Gt,isIPad:zt,isOSX:Vt,isFacebook:Jt,isEdge:Xt,isMSIE:Yt,isChrome:$t,isIE:Kt,isSafari:Qt,isIOS:Zt,isDebugMode:en,getLanguage:tn,isAndroidNative:nn,getWebkitVersion:rn,isUC:on,isMQQBrowser:an,isAndroid:sn,isMobile:un,isWindows:cn,isIframe:ln,isX5Layer:fn,isWxLayer:hn,isQQLayer:dn,flashVersion:pn}),Tn=T,En=[""," ","  ","   ","    ","     ","      ","       ","        ","         "],xn=function(){function e(e,t){var n=-1;return e.some(function(e,i){return e[0]===t&&(n=i,!0)}),n}return"undefined"!=typeof Map?Map:function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype["delete"]=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];e.call(t,r[1],r[0])}},t}()}(),Pn="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Cn=function(){return"undefined"!=typeof t&&t.Math===Math?t:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")()}(),On=function(){return"function"==typeof requestAnimationFrame?requestAnimationFrame.bind(Cn):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),An=2,Mn=20,In=["top","right","bottom","left","width","height","size","weight"],Rn="undefined"!=typeof MutationObserver,Dn=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=E(this.refresh.bind(this),Mn)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){Pn&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Rn?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Pn&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t,i=In.some(function(e){return!!~n.indexOf(e)});i&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),jn=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n++){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},Ln=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Cn},Bn=D(0,0,0,0),Nn=function(){return"undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof Ln(e).SVGGraphicsElement}:function(e){return e instanceof Ln(e).SVGElement&&"function"==typeof e.getBBox}}(),Un=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=D(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=I(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),Fn=function(){function e(e,t){var n=R(t);jn(this,{target:e,contentRect:n})}return e}(),Hn=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new xn,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Ln(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new Un(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof Ln(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t["delete"](e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new Fn(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),Wn="undefined"!=typeof WeakMap?new WeakMap:new xn,qn=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Dn.getInstance(),i=new Hn(t,n,this);Wn.set(this,i)}return e}();["observe","unobserve","disconnect"].forEach(function(e){qn.prototype[e]=function(){var t;return(t=Wn.get(this))[e].apply(t,arguments)}});var Gn=function(){return"undefined"!=typeof Cn.ResizeObserver?Cn.ResizeObserver:qn}(),zn=function(){return!0},Vn=function(){return!1},Jn=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),Xn=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCanelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){window.clearTimeout(e)}}(),Yn=0,$n=function(){function e(){n(this,e),this._listeners={}}return r(e,[{key:"on",value:function(e,t){var n=++Yn;return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push({id:n,listener:t,once:!1}),n}},{key:"once",value:function(e,t){var n=++Yn;return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push({id:n,listener:t,once:!0}),n}},{key:"off",value:function(e,t){this._listeners[e]=this._listeners[e]||[];for(var n=0;n<this._listeners[e].length;n++){var i=this._listeners[e][n];if(i.id===t||i.listener===t){this._listeners[e].splice(n,1);break}}}},{key:"trigger",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this._listeners[e]=this._listeners[e]||[];var r=p(this._listeners[e]);en()&&console.log("[event] ".concat(this.constructor.name," ").concat(e," "),ne([].slice.call(arguments)));for(var o=this._listeners[e].length-1;o>=0;o--){var a=this._listeners[e][o];try{a.listener.apply(a,n)}catch(s){throw console.error(s),s}a.once&&r.splice(o,1)}this._listeners[e]=r,"all"!==e&&this.trigger.apply(this,["all",e].concat(n))}},{key:"clear",value:function(){this._listeners={}}}]),e}(),Kn={Pause:"暂停",Normal:"正常",Settings:"设置","Full screen":"全屏","Exit full screen":"退出全屏","You can try":"你可以尝试","Switch to Flash":"切换到Flash","Switch to HTML5":"切换到HTML5",Reload:"重新加载","Unknown Error":"未知错误","Network Error":"网络错误","Media Error":"编解码错误",Mute:"静音",Unmute:"取消静音",Quality:"画质",Live:"直播",Autoplay:"自动播放",Captions:"字幕","Copy debug info":"复制排错日志","Upload debug info":"上传排错日志","Skip ahead to live broadcast":"直接跳到现场直播",Line:"线路",Speed:"倍速"},Qn={Pause:"暫停",Normal:"正常",Settings:"設置","Full screen":"全螢幕","Exit full screen":"結束全螢幕","You can try":"妳可以嘗試","Switch to Flash":"切換到Flash","Switch to HTML5":"切換到HTML5",Reload:"重新加載","Unknown Error":"未知錯誤","Network Error":"網路錯誤","Media Error":"編解碼錯誤",Mute:"靜音",Unmute:"解除靜音",Quality:"畫質",Live:"直播",Autoplay:"自動播放",Captions:"字幕","Copy debug info":"複製偵錯資訊","Upload debug info":"上傳偵錯資訊","Skip ahead to live broadcast":"直接跳到現場直播",Line:"線路",Speed:"倍速"},Zn={};for(var ei in Kn)Zn[ei]=ei;var ti={"zh-CN":Kn,"zh-TW":Qn,en:Zn},ni=function(e){var t=document.createElement("a");return t.setAttribute("href",e),t.href},ii=function(e){var t=e.match(/^https?:[^?]+(\.(\w+))\??(?![.\w/])/),n=e.match(/^([a-zA-Z]+):.*/),i=e.match(/^webrtc:[^?]+(\.(\w+))\??(?![.\w/])/);return t?t[2]:n?n[1]:i?"webrtc":""},ri=function(e){var t={aac:"audio/mp4",mp4:"video/mp4",f4v:"video/mp4",m4v:"video/mp4",mov:"video/mp4",mp3:"audio/mpeg",mpeg:"audio/mpeg",ogv:"video/ogg",ogg:"video/ogg",oga:"video/ogg",vorbis:"video/ogg",webm:"video/webm",f4a:"video/aac",m3u8:"application/vnd.apple.mpegurl",m3u:"application/vnd.apple.mpegurl",hls:"application/vnd.apple.mpegurl",flv:"video/x-flv",rtmp:"rtmp/flv",dash:"application/dash+xml",mpd:"application/dash+xml"};return t[e]||""},oi=[],ai=[],si={mute:!1,autoplay:!1,repeat:!1,playbackRatesLabel:"",playbackRates:[],trtcFallback:!0,controls:!0,videoLayerControl:!0,aspectratio:"",height:270,width:480,displaytitle:!0,displaydescription:!0,stretching:"contain",qualityLabels:"",renderLoading:"",preload:"none",playlist:[],skin:{name:"default",url:"https://static.mudu.tv/mudu-player/0.39.10/mudu-player.css"},logo:{file:"",hide:!1,link:"",marginw:"3%",marginh:"6%",width:"15%",height:"10%",opacity:1,position:"top-right"},providerOrder:["html5","hlsjs"],plugin:{},provider:{flvjs:{"flv.js":{fixAudioTimestampGap:!0}}},extraProvider:{vr:{use:!1}},fileCdnPath:"https://static.mudu.tv/mudu-player/0.39.10/assets",videoAttributes:a({"x5-video-player-type":"h5-page","webkit-playsinline":"true",playsinline:"","x-webkit-airplay":"allow","mtt-playsinline":!0},fn()?{loop:!0}:{}),contextMenus:[{key:"version",text:"v0.39.10"}],errorLogUrl:"",perfLogUrl:"",renderError:null,language:"auto",localization:ti,showSubtitle:!1,myunSyncTextTrackLabel:"ppt_sync",uniqId:"",enableErrorRetry:!1,errorMaxRetry:10,errorMaxRetryTimeout:15e3,errorRetryDelay:3e3,recordRestrict:{enable360LoneWindowCloseStream:!1},bufferDetectGap:200,textTrackDisable:!1},ui="mudu-icon-play",ci="mudu-icon-pause",li="mudu-icon-volume-up",fi="mudu-icon-volume-down",hi="mudu-icon-volume-off",di="mudu-icon-fullscreen",pi="mudu-icon-fullscreen-off",vi="mudu-icon-setting",yi="mudu-icon-load",gi="mudu-icon-check",mi="mudu-icon-error",_i=/mudu-icon-[\w-]+/,bi="mudu-aspect",wi="mudu-mask",ki="mudu-video-wrap",Si="mudu-video",Ti="mudu-hide-video",Ei="mudu-logo-link",xi="mudu-logo",Pi="mudu-video-title",Ci="mudu-video-danmaku",Oi="mudu-subtitle",Ai="mudu-subtitle-item",Mi="mudu-bezel",Ii="mudu-base-layer",Ri="mudu-controller-wrap",Di="mudu-controller-mask",ji="mudu-controller-blank",Li="mudu-big-play-btn",Bi="mudu-controller",Ni="mudu-icons",Ui="mudu-icons-left",Fi="mudu-icon",Hi="mudu-switch-text",Wi="mudu-switch-speed",qi="mudu-switch-quality",Gi="mudu-switch-path",zi="mudu-volume",Vi="mudu-volume-bar-wrap",Ji="mudu-volume-bar",Xi="mudu-volume-bar-inner",Yi="mudu-thumb",$i="mudu-time",Ki="mudu-ptime",Qi="mudu-dtime",Zi="mudu-bar-wrap",er="mudu-bar-preview",tr="mudu-bar-popup",nr="mudu-bar-popup-text",ir="mudu-bar-img",rr="mudu-bar-text-wrap",or="mudu-bar-text",ar="mudu-bar-text-time",sr="mudu-bar-text-text",ur="mudu-bar-time",cr="mudu-bar-time-wrap",lr="mudu-bar",fr="mudu-loaded",hr="mudu-played",dr="mudu-highlight",pr="mudu-dot",vr="mudu-panel",yr="mudu-live-badge",gr="mudu-live-dot",mr="mudu-icons-right",_r="mudu-bezel-transition",br="hidden",wr="mudu-flash",kr="mudu-flash-tip",Sr="mudu-flash-tip-inner",Tr="mudu-error-icon",Er="mudu-error-text",xr="mudu-error-wrap",Pr="mudu-error-inner",Cr="mudu-restrict-360",Or="mudu-background",Ar="mudu-always-display-bg",Mr="mudu-watermark",Ir="mudu-menuitem",Rr="mudu-menuitem-label",Dr="mudu-contextmenu-panel",jr="mudu-panel-menu",Lr="mudu-menuitem-label",Br="mudu-play-back-rate-panel",Nr="mudu-play-back-rate-panel-mobile",Ur="mudu-quality-wrap",Fr="mudu-path-wrap",Hr="mudu-quality-menu",Wr="mudu-quality-menu-item",qr="mudu-quality-menu-item-tip",Gr="mudu-quality-item-name",zr="mudu-path-multi",Vr="mudu-quality-menu-item-wrap",Jr="mudu-path-select-wrap",Xr="mudu-path-select-menu",Yr="mudu-path-select-menu-item",$r="mudu-notice",Kr="mudu-live",Qr="mudu-playback",Zr="mudu",eo="mudu-fullscreen",to="mudu-aspect-mode",no="mudu-normal-mode",io="mudu-hide-controller",ro="mudu-hide-time",oo="mudu-state-idle",ao="mudu-state-error",so="mudu-stretch",uo="mudu-provider-flash",co="mudu-provider-html5",lo="mudu-provider-ready",fo="mudu-skin",ho="mudu-mobile",po="mudu-flash-disabled",vo="mudu-hide-everything",yo="mudu-hide-setting",go="mudu-flag-dragging",mo="mudu-flag-small-player",_o="mudu-duration-valid",bo="mudu-time-shift",wo="mudu-play-back-rate",ko="mudu-play-back-rate-hide",So="mudu-play-back-rate-show",To="mudu-player-vr-mode",Eo="mudu-hide-progress",xo="mudu-hide-custom-control",Po="mudu-time-shift-live",Co=/mudu-state-\w+/,Oo=/mudu-stretch-\w+/,Ao=/mudu-provider-\w+/,Mo=/mudu-play-back-rate-\w+/,Io="mudu-bezel-icon",Ro="mudu-loading-icon",Do="mudu-extra-loading-icon",jo="mudu-caption-icon",Lo="mudu-setting-icon",Bo="mudu-fullscreen-icon",No="mudu-play-icon",Uo="mudu-volume-icon",Fo="mudu-icon-custom-control",Ho="mudu-hide",Wo="mudu-active",qo="mudu-reset",Go={},zo={NEW:0,LOADING:1,ERROR:2,COMPLETE:3},Vo=function(e){function t(e){var i,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n(this,t),i=f(this,u(t).call(this)),i.url=e,i.isStyle=r,i.status=zo.NEW,i}return s(t,e),r(t,[{key:"getElement",value:function(){if(this.isStyle){var e=document.createElement("link");return e.type="text/css",e.rel="stylesheet",e.href=this.url,e}var t=document.createElement("script");return t.src=this.url,t}},{key:"getStatus",value:function(){return this.status}},{key:"load",value:function(){var e=this;this.status!==zo.NEW&&Promise.reject(new Error("loader.load can only call once"));var t=Go[this.url];if(t&&t.isStyle===this.isStyle){var n=t.loader.getStatus();if(n===zo.COMPLETE)return setTimeout(function(){e.trigger("done")},0),Promise.resolve()}var i=document.getElementsByTagName("head")[0]||document.documentElement,r=this.getElement(),o=this;return new Promise(function(e,t){var n=!1;r.onload=r.onreadystatechange=function(t){n||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(r.onload=r.onreadystatechange=null),n=!0,setTimeout(function(){o.trigger("done"),o.status=zo.COMPLETE,e()},0)},r.onerror=function(e){o.trigger("error"),t(e)},i.insertBefore(r,i.firstChild),o.status=zo.LOADING,Go[o.url]={isStyle:o.isStyle,loader:o}})}}]),t}($n),Jo="internal_option_merged",Xo="internal_dom_inited",Yo="internal_model_inited",$o="internal_plugin_inited",Ko="internal_provider_inited",Qo="internal_provider_removed",Zo="internal_plugin_init",ea="internal_status_formated",ta="internal_key_down",na="internal_style_loaded",ia="contextMenuClick",ra="play",oa="pause",aa="videoLayerControl",sa="controls",ua="controlsVisible",ca="fullscreen",la="complete",fa="playlistComplete",ha="playlist",da="playlistItem",pa="switchQuality",va="time",ya="duration",ga="resize",ma="buffer",_a="idle",ba="beforePlay",wa="mute",ka="volume",Sa="canSeek",Ta="seek",Ea="seeked",xa="error",Pa="textTrackChange",Ca="textTrackAdd",Oa="textTrackCueChange",Aa="liveEndDetect",Ma="trtc:fallback",Ia="trtc:autoplayFail",Ra="xp2p:rollback",Da="ended",ja="bufferchange",La="timeupdate",Ba="duration",Na="stageclick",Ua="stagedoubleclick",Fa="play",Ha="pause",Wa="mute",qa="volume",Ga="seeked",za="seek",Va="error",Ja="loadeddata",Xa="waiting",Ya="texttrackadd",$a="texttrackchange",Ka="cuechange";Ne.prototype.method=function(e){var t=this.proto,n=this.target;return t[e]=function(){return en()&&console.log("[delegates]: (".concat(t.constructor.name," | ").concat(n.constructor.name,").").concat(e," --"),ne([].slice.call(arguments))),"model"===n.TAG&&this.trigger("delegate-model",{fn:e,args:[].slice.call(arguments)}),n[e].apply(n,arguments)},this};var Qa=function(){function e(t){n(this,e),this.player=t,this.lang=t._status.localization,this.m_player_events=[],this.m_dom_events=[],this.m_provider_events=[],this.m_removed=!1,this.TAG="model"}return r(e,[{key:"provider",value:function(){return this.player._provider&&this.player._provider.instance}},{key:"remove",value:function(){var e=this;this.m_removed=!0,this.m_player_events.forEach(function(t){return e.player.off(t.evt,t.fn)}),this.m_dom_events.forEach(function(e){return V(e.ele,e.evt,e.fn)}),this.m_provider_events.forEach(function(t){e.provider()&&e.provider().off(t.evt,t.fn)})}},{key:"onPlayer",value:function(e,t){this.player.on(e,t),this.m_player_events.push({evt:e,fn:t})}},{key:"oncePlayer",value:function(e,t){this.player.once(e,t),this.m_player_events.push({evt:e,fn:t})}},{key:"onDom",value:function(e,t,n){z(e,t,n),e===this.player.dom.container&&this.m_dom_events.push({ele:e,evt:t,fn:n})}},{key:"onProvider",value:function(e,t){this.provider()&&(this.provider().on(e,t),this.m_provider_events.push({evt:e,fn:t}))}},{key:"onceProvider",value:function(e,t){this.provider()&&(this.provider().once(e,t),this.m_provider_events.push({evt:e,fn:t}))}}]),e}(),Za=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=t.length,r={};n<i;n++)if(e=t[n],e&&e[1]in document){for(n=0;n<e.length;n++)r[t[0][n]]=e[n];return r}return!1}(),es={trigger:"hover",placement:"top",container:document.body,distance:10,content:"",getMaxHeight:function(){return"none"},"class":"mudu-tooltip"},ts="-20000px",ns=new $n,is=[];$e.isAnyShow=Ve,$e.hideAll=Xe,$e.isAnyClassShow=Je,ze();var rs=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.isFullscreen=!1,i.subEvents(),Ne(i.player,l(l(i))).method("getFullscreen").method("setFullscreen"),J(i.player.dom.fullscreen).add(di),i.fullTip=$e(i.player.dom.fullscreen,{content:te(i.lang["Full screen"]),container:i.player.dom.container}),i}return s(t,e),r(t,[{key:"subEvents",value:function(){var e=this;this.onDom(this.player.dom.fullscreen,"click",function(){e.setFullscreen(!e.isFullscreen)}),this.onPlayer(Ko,function(){e.onProvider(Ua,function(){e.setFullscreen(!e.isFullscreen)})}),this.handleFullscreenChange=function(t){var n=Ge();
un()&&(!n&&!e.isFullscreen||n&&"VIDEO"===n.nodeName)||(n&&n===e.player.dom.container&&!e.isFullscreen||!n&&e.isFullscreen)&&(e.isFullscreen=n===e.player.dom.container,e.onAfterFullScreen())},He()&&We(this.handleFullscreenChange),un()||this.onDom(this.player.dom.videoWrap,"dblclick",function(){e.player._provider&&e.player._provider.flash||e.player.getControls()&&e.toggle()})}},{key:"onAfterFullScreen",value:function(){var e=this.player.dom;this.player.trigger(ca,{type:ca,fullscreen:this.isFullscreen}),J(e.container).toggle(eo),J(e.fullscreen).remove(_i),J(e.fullscreen).add(this.isFullscreen?pi:di),this.fullTip.updateContent(te(this.isFullscreen?this.lang["Exit full screen"]:this.lang["Full screen"]))}},{key:"toggle",value:function(){this.setFullscreen(!this.getFullscreen())}},{key:"getFullscreen",value:function(){return this.isFullscreen}},{key:"remove",value:function(){He()&&qe(this.handleFullscreenChange),d(u(t.prototype),"remove",this).call(this)}},{key:"setFullscreen",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.player.dom.container,n=this.isFullscreen,i=this.player.dom.container.querySelector(".".concat(Si)),r=this.player._config.extraProvider.vr.use&&this.player.dom.videoWrap.querySelector("canvas"),o=this.player._extraProviders.vr,a=o&&r;a||He()?e?!n&&Ue(t):n&&Fe():un()&&i.webkitSupportsFullscreen?e?i.webkitEnterFullScreen():i.webkitExitFullScreen():(this.isFullscreen=e,this.onAfterFullScreen())}}]),t}(Qa),os=function(){return new Error("method should be override")},as=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this)),r.player=e,r.option=i,r.p_player_events=[],r.p_dom_events=[],r.p_self_events=[],r.TAG="Provider",r}return s(t,e),r(t,[{key:"loadFiles",value:function(){return Promise.resolve()}},{key:"getMediaElement",value:function(){}},{key:"createMediaElement",value:function(){}},{key:"setup",value:function(){return Promise.reject(os())}},{key:"remove",value:function(){var e=this;this.p_player_events.forEach(function(t){return e.player.off(t.evt,t.fn)}),this.p_dom_events.forEach(function(e){return V(e.ele,e.evt,e.fn)}),this.p_self_events.forEach(function(t){return e.off(t.evt,t.fn)})}},{key:"getVolume",value:function(){}},{key:"setVolume",value:function(){}},{key:"getMute",value:function(){}},{key:"setMute",value:function(){}},{key:"getWidth",value:function(){return-1}},{key:"getHeight",value:function(){return-1}},{key:"getMetrics",value:function(){return{}}},{key:"getBuffer",value:function(){return[]}},{key:"getCurrentTime",value:function(){}},{key:"getDuration",value:function(){}},{key:"setStretching",value:function(){}},{key:"getStretching",value:function(){}},{key:"getMetadata",value:function(){}},{key:"play",value:function(){}},{key:"pause",value:function(){}},{key:"seek",value:function(){}},{key:"getPlaybackRate",value:function(){}},{key:"setPlaybackRate",value:function(){}},{key:"getTextTracks",value:function(){return[]}},{key:"setTextTrackActive",value:function(e){}},{key:"onPlayer",value:function(e,t){this.player.on(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"oncePlayer",value:function(e,t){this.player.once(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"onDom",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];z(e,t,n),i&&this.p_dom_events.push({ele:e,evt:t,fn:n})}},{key:"onSelf",value:function(e,t){this.on(e,t),this.p_self_events.push({evt:e,fn:t})}},{key:"onceSelf",value:function(e,t){this.once(e,t),this.p_self_events.push({evt:e,fn:t})}}]),t}($n);as.defaultOptions={},as.canPlay=N,as.isSupported=N,as.isPlaybackRateSupported=N,as.isFlash=N,as.isHTML5=N;var ss="application/x-shockwave-flash",us=[],cs=pn(),ls=Yt(),fs=rn(),hs=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this)),i.options=e||{},i.gap=+i.options.gap||1e3,i.isRaf=!!i.options.isRaf,i.task=null,i.dotTime=(new Date).getTime(),i}return s(t,e),r(t,[{key:"start",value:function(){this.trigger("start",{options:this.options}),this.stop(),this._startTimer()}},{key:"tick",value:function(){var e=this._passedTime();this.task&&(this._clearTimer(),e>0&&this.trigger("tick",{options:this.options,duration:e,isStop:!1}),this._startTimer())}},{key:"stop",value:function(){var e=this._passedTime();this.task&&(this._clearTimer(),e>0&&this.trigger("tick",{options:this.options,duration:e,isStop:!0}),this.trigger("stop",{options:this.options}))}},{key:"_internalF",value:function(){var e=this._passedTime();e>0&&this.trigger("tick",{options:this.options,duration:e,isStop:!1}),this._startTimer()}},{key:"_clearTimer",value:function(){this.isRaf?Xn(this.task):clearTimeout(this.task),this.task=null}},{key:"_startTimer",value:function(){var e=this;this.isRaf?this.task=Jn(function(){return e._internalF()}):this.task=setTimeout(function(){return e._internalF()},this.gap)}},{key:"_passedTime",value:function(){var e=(new Date).getTime(),t=e-this.dotTime;return this.dotTime=e,t}}]),t}($n);it.prototype.get=function(e){var t=this._getData();return t[e]},it.prototype.set=function(e,t){var n=this._getData();n[e]=t,this._setData(n)},it.prototype._getData=function(){var e={};try{e=localStorage.getItem(this.storeKey),e=JSON.parse(e)}catch(t){e={},console.error("muduplayer: cannot read localstorage")}return e||{}},it.prototype._setData=function(e){try{localStorage.setItem(this.storeKey,ne(e))}catch(t){console.error("muduplayer: cannot set localstorage")}};var ds=function(e){function t(){return n(this,t),f(this,u(t).apply(this,arguments))}return s(t,e),r(t,[{key:"onError",value:function(){this.trigger.apply(this,["onError"].concat(Array.prototype.slice.call(arguments)))}},{key:"onEvent",value:function(){this.trigger.apply(this,["onEvent"].concat(Array.prototype.slice.call(arguments)))}},{key:"onReady",value:function(){this.trigger.apply(this,["onReady"].concat(Array.prototype.slice.call(arguments)))}}]),t}($n),ps=new ds,vs=function(t){function i(e,t){var r;return n(this,i),r=f(this,u(i).call(this,e,a({},i.defaultOptions,t))),r.object=null,r._prevPos=null,r.flashUtilListener=[],r._commandQueue=[],r.currentTimer=null,r.commandQueueTimer=null,r.lastVolume=it().get("volume"),window.muduPlayer=window.muduPlayer||{},window.muduPlayer.flashUtil=window.muduPlayer.flashUtil||ps,r.renderCustomTip(),r.initCommandQueueTimer(),r.removed=!1,r}return s(i,t),r(i,[{key:"loadFiles",value:function(){return this.removed?Promise.reject(new TypeError("flash provider removed")):d(u(i.prototype),"loadFiles",this).call(this)}},{key:"getMediaElement",value:function(){return this.player.dom.videoWrap.querySelector("object")}},{key:"createMediaElement",value:function(){var e=this;this.id=this.player._config.containerId+"-flash",this.player.dom.flash.id=this.id;var t={autoplay:!1,preload:this.player._config.preload,hls_seekmode:"ACCURATE",debug:!1,connectTimeout:this.option.connectTimeout||3},n={id:this.id,name:this.id,"class":Si,style:"position: absolute; display: block; left: 0; right: 0; top: 0; bottom: 0; pointer-events:auto;"},i={wmode:"opaque",allowScriptAccess:"always",bgcolor:"#000000"};return Ke(this.player._config.fileCdnPath+"/mudu-player.swf",this.id,"100%","100%","10.3","",t,i,n,function(t){t.success===!1&&J(e.player.dom.container).add(po)}),this.getMediaElement()}},{key:"remove",value:function(){d(u(i.prototype),"remove",this).call(this),this.removed=!0,this.currentTimer&&this.currentTimer.stop(),this.commandQueueTimer&&this.commandQueueTimer.stop(),this.flashUtilListener.forEach(function(e){return ps.off(e.event,e.id)}),this.triggerFlash("mudu_stop"),this.object=null}},{key:"setup",value:function(e){var t=this,n=e.type,r=e.absoluteFile,o=e.isLive;if(this.removed)return void console.log("setup: plash provider removed");var a=function(){t.player._status.flashReady=!0,t.object=t.getMediaElement(),t.id=t.player._config.containerId+"-flash";var e="",i=(new Date).getTime();if(e=r.indexOf("?")>=0?"&safari".concat(i,"=").concat(i):"?safari".concat(i,"=").concat(i),"rtmp"===n){var a=F(r);t.triggerFlash("mudu_setProperty","rtmpConnection",a.connection),t.triggerFlash("mudu_setProperty","rtmpStream",a.stream)}else"auto"===t.player._config.preload?Qt()&&o?t.triggerFlash("mudu_src",r+e):t.triggerFlash("mudu_src",r):t.oncePlayer("beforePlay",function(){Qt()&&o?t.triggerFlash("mudu_src",r+e):t.triggerFlash("mudu_src",r)});t._subEvents(),t._updateCurrentTime()};if(this.player._status.flashReady)return a(),Promise.resolve();var s=new Promise(function(e,n){var r=!1,o=ps.on("onReady",function(n){n===t.id&&null===t.object&&(r=!0,a(),e())});t.flashUtilListener.push({event:"onReady",id:o}),Wt()&&setTimeout(function(){r||(J(t.player.dom.container).add(po),n(new Error(i.Error.NotAllowedError)))},5e3)});return s}},{key:"initCommandQueueTimer",value:function(){var e=this;this.commandQueueTimer=new hs({gap:200}),this.commandQueueTimer.on("tick",function(t){var n=t.isStop;n||(0===e._commandQueue.length?e.commandQueueTimer.stop():e._apiAvailable()&&(e._commandQueue.forEach(function(t){if(e.object[t.fn]){var n;(n=e.object)[t.fn].apply(n,p(t.args))}}),e._commandQueue=[]))})}},{key:"renderCustomTip",value:function(){var t=this.option.renderTip(),n=this.player.dom.flashTip,i=function(){n.innerHTML=""};"string"==typeof t&&(i(),n.innerHTML=t),"object"===e(t)&&(i(),n.appendChild(t))}},{key:"triggerFlash",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.object&&this.object[e]){var r;return(r=this.object)[e].apply(r,n)}this._commandQueue.push({fn:e,args:n}),this.commandQueueTimer.start()}},{key:"_subEvents",value:function(){var e=this,t=ps.on("onEvent",function(t,n){if(t===e.id&&null!==e.object)switch(e.trigger(n),n){case"playing":e.trigger("play");break;case"durationchange":e.trigger("duration");break;case"volumechange":var i=e.getVolume();e.trigger("volume",{type:"volume",volume:i})}}),n=ps.on("onError",function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t===e.id&&null!==e.object&&e.trigger(Va,{message:i.join(),data:i,fatal:!0})});this.flashUtilListener.push({event:"onEvent",id:t}),this.flashUtilListener.push({event:"onError",id2:n})}},{key:"_updateCurrentTime",value:function(){var e=this;this.currentTimer=new hs({gap:500,name:"flash update time"}),this.currentTimer.on("tick",function(){if(e.object){var t=e.getPosition();t!==e._prevPos&&e.trigger("timeupdate"),e._prevPos=t}}),this.currentTimer.start()}},{key:"getWidth",value:function(){return this._get("videoWidth",-1)}},{key:"getHeight",value:function(){return this._get("videoHeight",-1)}},{key:"getMetrics",value:function(){return this._apiAvailable()?{videoHeight:this.getHeight(),videoWidth:this.getWidth(),fps:this.getFPS(),bps:this.getBPS()}:{}}},{key:"getFPS",value:function(){return this._get("currentFPS",-1)}},{key:"getBPS",value:function(){return this._get("currentBPS",-1)}},{key:"getBuffer",value:function(){if(this._apiAvailable()){var e=this._get("buffered",[]);if(e.length>=1){var t=e.map(function(e){return{start:e[0],end:e[1]}});return t}}return[]}},{key:"getVolume",value:function(){return this._apiAvailable()?this._get("volume"):1}},{key:"setVolume",value:function(e){if(this.object){var t=this.getMute();L("number",e)&&(e<0&&(e=0),e>1&&(e=1),this.triggerFlash("mudu_setProperty","volume",e),t&&e>0&&this.setMute(!1),t||0!==e||this.setMute(!0))}}},{key:"setMute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._apiAvailable()&&(e||0!==this.getVolume()||this.setVolume(.5),this.object.mudu_setProperty("muted",!!e),this.trigger("mute",{type:"mute",mute:!!e}))}},{key:"getMute",value:function(){return!!this._apiAvailable()&&this._get("muted")}},{key:"setStretching",value:function(e){if(this._apiAvailable())switch(e){case"none":case"contain":case"fill":case"cover":case"scale-down":this.object.mudu_setProperty("stretching",e);break;default:this.object.mudu_setProperty("stretching","contain")}}},{key:"getStretching",value:function(){return this._apiAvailable()?this._get("stretching"):"contain"}},{key:"getPosition",value:function(){if(this._apiAvailable())return this._get("currentTime")||0}},{key:"getDuration",value:function(){if(this._apiAvailable())return this._get("duration")}},{key:"setStretch",value:function(){}},{key:"getMetadata",value:function(){}},{key:"play",value:function(){if(this.object)if(this._get){var e=this._get("ended");e?(this.object.mudu_play(),this.seek(0)):this.object.mudu_play()}else this.triggerFlash("mudu_play");return Promise.resolve()}},{key:"pause",value:function(){return this.object&&this.triggerFlash("mudu_pause"),Promise.resolve()}},{key:"seek",value:function(e){if(this._apiAvailable()){var t=this._get("currentTime");this.object.mudu_setProperty("currentTime",e),this.trigger("seek",{type:"seek",position:t,offset:e})}}},{key:"getPlaybackRate",value:function(){return 1}},{key:"setPlaybackRate",value:function(){}},{key:"_apiAvailable",value:function(){return this.object&&this.object.mudu_getProperty}},{key:"_get",value:function(e,t){try{return this.object.mudu_getProperty(e)}catch(n){if(L("undefined",t))throw n;return t}}}]),i}(as);vs.types=["flv","rtmp","hls","m3u8","mp4"],vs.canPlay=function(e){var t=e.type;return vs.types.indexOf(t)>=0},vs.canPlayMineType=N,vs.isSupported=function(){return!un()},vs.isPlaybackRateSupported=function(){return!1},vs.isFlash=function(e){return!0},vs.isHTML5=function(e){return!1},vs.version="5.0.2-15",vs.defaultOptions={renderTip:N},vs.Error={NotAllowedError:"Media element cannot be created, probably flash is not allowed"};var ys=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r._onVideoEvents=r._onVideoEvents.bind(l(l(r))),r._onTextTracksAdd=r._onTextTracksAdd.bind(l(l(r))),r._onTextTracksChange=r._onTextTracksChange.bind(l(l(r))),r._onTextTracksRemove=r._onTextTracksRemove.bind(l(l(r))),r._onTextTrackCueChange=r._onTextTrackCueChange.bind(l(l(r))),r.TAG="HTML5Provider",r.video_error_report=!0,r}return s(t,e),r(t,[{key:"setup",value:function(e){var t=this,n=e.file;e.image;this._setupEvents(),this._duration=0,this.video.src=n;var i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";this.video.setAttribute("poster",i),this.oncePlayer("play",function(){t.oncePlayer("canSeek",function(){var e=!0;t.oncePlayer("seek",function(){e=!1}),t.oncePlayer("time",function(t){var n=t.position;0!==n&&(e=!1)}),setTimeout(function(){var n=t.getPosition();"HTML5Provider"===t.TAG&&e&&0===n&&t.seek(.01)},50)})})}},{key:"getMediaElement",value:function(){var e=this.player.dom.videoWrap.querySelector("video");if(e){var t=e.textTracks;if(t&&t.length){try{e.parentNode.removeChild(e)}catch(n){console.error("remove video element error")}return null}}return this.video=e,e}},{key:"createMediaElement",value:function(){var e=document.createElement("video"),t=this.player._config.preload;e.setAttribute("class",Si),e.setAttribute("preload",t),Zt()&&delete this.player._config.videoAttributes.loop;for(var n in this.player._config.videoAttributes){var i=this.player._config.videoAttributes[n];e.setAttribute(n,i)}return this.video=e,e}},{key:"play",value:function(){if(this.video){this.video.setAttribute("preload","auto");try{var e=this.video.play();if(e)return e["catch"](function(e){return console.warn(e)})}catch(t){throw new Error("player cannot play")}}return Promise.resolve()}},{key:"pause",value:function(){return this.video&&this.video.pause(),Promise.resolve()}},{key:"remove",value:function(){if(this._removeEvents(),this.video){try{this.video.parentNode.removeChild(this.video)}catch(e){}this.video=null}d(u(t.prototype),"remove",this).call(this)}},{key:"seek",value:function(e){if(this.video){var t=this.getPosition();this.video.currentTime=e,this.trigger("seek",{type:"seek",position:t,offset:e})}}},{key:"getPlaybackRate",value:function(){return this.video?this.video.playbackRate:1}},{key:"setPlaybackRate",value:function(e){this.video&&(this.video.playbackRate=e,this.trigger("playbackrate",{type:"playbackrate",playbackRate:e}))}},{key:"getDuration",value:function(){return this._duration}},{key:"getPosition",value:function(){return this.video?this.video.currentTime:0}},{key:"getVolume",value:function(){return this.video?this.getMute()?0:this.video.volume:1}},{key:"getWidth",value:function(){return this.video?this.video.videoWidth:-1}},{key:"getHeight",value:function(){return this.video?this.video.videoHeight:-1}},{key:"setVolume",value:function(e){if(this.video){var t=this.video.muted;L("number",e)&&(e<0&&(e=0),e>1&&(e=1),this.video.volume=e,this.trigger("volume",{type:"volume",volume:e}),t&&e>0&&this.setMute(!1),t||0!==e||this.setMute(!0))}}},{key:"setMute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.video&&(this.video.muted=!!e,this.trigger("mute",{type:"mute",mute:!!e}))}},{key:"getMute",value:function(){return!!this.video&&this.video.muted}},{key:"setStretching",value:function(e){if(this.video)switch(e){case"none":case"contain":case"fill":case"cover":case"scale-down":this.video.style.objectFit=e;break;default:this.video.style.objectFit="contain"}}},{key:"getStretching",value:function(){return this.video.style.objectFit}},{key:"getBuffer",value:function(){if(!this.video)return[];for(var e=this.video,t=e.buffered,n=[],i=0;i<t.length;i++)n.push({start:t.start(i),end:t.end(i)});return n.sort(function(e,t){var n=e.start-t.start;return n?n:t.end-e.end})}},{key:"getMetrics",value:function(){var e=this.video;return e?{videoHeight:e.videoHeight,videoWidth:e.videoWidth,mozParsedFrames:e.mozParsedFrames,mozDecodedFrames:e.mozDecodedFrames,mozPresentedFrames:e.mozPresentedFrames,mozPaintedFrames:e.mozPaintedFrames,mozFrameDelay:e.mozFrameDelay,mozHasAudio:e.mozHasAudio,networkState:e.networkState,msHorizontalMirror:e.msHorizontalMirror,msInsertVideoEffect:e.msInsertVideoEffect,msIsStereo3D:e.msIsStereo3D,webkitAudioDecodedByteCount:e.webkitAudioDecodedByteCount,webkitVideoDecodedByteCount:e.webkitVideoDecodedByteCount,webkitDecodedFrameCount:e.webkitDecodedFrameCount,webkitDroppedFrameCount:e.webkitDroppedFrameCount}:d(u(t.prototype),"getMetrics",this).call(this)}},{key:"getTextTracks",value:function(){var e=this;if(!this.video)return[];var t=[].slice.call(this.video.textTracks).map(function(t){e._addCustomTrack(t);var n=t.customTrack;return n});return t}},{key:"setTextTrackEnable",value:function(e){var t=this.video&&this.video.textTracks,n=t&&t[e];n&&(n.customTrack||this._addCustomTrack(n),n.customTrack.mode="hidden",n.mode="hidden")}},{key:"setTextTrackDisable",value:function(e){var t=this.video&&this.video.textTracks,n=t&&t[e];n&&(n.customTrack||this._addCustomTrack(n),n.customTrack.mode="disabled",n.mode="disabled")}},{key:"getTextTrackCues",value:function(e){var t=this,n=this.video&&this.video.textTracks,i=n&&n[e];if(i){var r=[].slice.call(i.cues||[]).map(function(e){return t._addCustomCue(e),e.customCue});return r}}},{key:"getTextTrackActiveCues",value:function(e){var t=this,n=this.video&&this.video.textTracks,i=n&&n[e];if(i){var r=[].slice.call(i.activeCues||[]).map(function(e){return t._addCustomCue(e),e.customCue});return r}}},{key:"_setupEvents",value:function(){var e=this;t.mediaEvents.forEach(function(t){z(e.video,t,e._onVideoEvents)}),this.video.textTracks&&(z(this.video.textTracks,"change",this._onTextTracksChange),z(this.video.textTracks,"addtrack",this._onTextTracksAdd),z(this.video.textTracks,"removetrack",this._onTextTracksRemove))}},{key:"_removeEvents",value:function(){var e=this;if(this.video){t.mediaEvents.forEach(function(t){V(e.video,t,e._onVideoEvents)});for(var n=0;n<this.video.textTracks.length;n++)V(this.video.textTracks[n],"cuechange",this._onTextTrackCueChange);V(this.video.textTracks,"change",this._onTextTracksChange),V(this.video.textTracks,"addtrack",this._onTextTracksAdd),V(this.video.textTracks,"removetrack",this._onTextTracksRemove)}}},{key:"_onTextTracksChange",value:function(){this.video&&this.trigger($a,this.getTextTracks())}},{key:"_onTextTracksAdd",value:function(e){if(this.video){var t=e.track;this._addCustomTrack(t),this.trigger(Ya,t.customTrack),z(t,"cuechange",this._onTextTrackCueChange)}}},{key:"_onTextTracksRemove",value:function(e){}},{key:"_onTextTrackCueChange",value:function(e){if(this.video){var t=e.target,n=this._getIndexByTrack(t);this.trigger(Ka,{cues:this.getTextTrackCues(n),activeCues:this.getTextTrackActiveCues(n),track:t.customTrack})}}},{key:"_getIndexByTrack",value:function(e){for(var t=this.video.textTracks,n=t.length,i=0;i<n;i++)if(t[i]===e)return i;return-1}},{key:"_addCustomTrack",value:function(e){e.customTrack=e.customTrack||{};var t=e.customTrack;t.id=e.id,t.kind=e.kind,t.label=e.label,t.language=e.language,t.mode=e.mode}},{key:"_addCustomCue",value:function(e){e.customCue=e.customCue||{};var t=e.customCue;t.startTime=e.startTime,t.endTime=e.endTime,t.text=e.text}},{key:"_onVideoEvents",value:function(e){var t=e.type;switch(t){case"error":var n=this.video.error||{},i=n.message,r=n.code,o=this.video.networkState;if(3===r&&"HTML5Provider"===this.TAG&&fn())return console.log("x5 layer error"),void this.play();i||3!==o||(i="networkError"),this.video_error_report&&this.trigger("error",{message:i,code:r,networkState:o,fatal:r>1});break;case"playing":this.trigger("play",e),this.trigger(t,e);break;case"durationchange":1!==this.video.duration&&(this._duration=this.video.duration,this.trigger("duration")),this.trigger(t,e);break;default:this.trigger(t,e)}}}]),t}(as);ys.mediaEvents=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","mozaudioavailable","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],ys.canPlay=function(e){var t=e.mimeType,n=document.createElement("video");return n.canPlayType(t)},ys.isSupported=function(){return!Kt()||Kt()&&bn.major>8},ys.isPlaybackRateSupported=function(){return!0},ys.isHTML5=function(e){return!0},ys.isFlash=function(e){return!1},ys.version="0.39.10";var gs=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r.player=e,r._onVideoEvents=r._onVideoEvents.bind(l(l(r))),r.TAG="TcPlayerLiteProvider",r.video_error_report=!0,r}return s(t,e),r(t,[{key:"loadFiles",value:function(){var e=new Vo(this.player._config.fileCdnPath+"/tc-player-lite.js");return e.load()}},{key:"setup",value:function(e){var t=this;this._setupEvents(),this.onPlayer(Ko,function(){t.video&&(un()&&Zt()&&t.onDom(t.video,"webkitendfullscreen",function(){t.tcPlayer&&t.tcPlayer.pause()}),t.onDom(t.video,"pause",function(){t.tcPlayer&&t.tcPlayer.pause()}))});var n=this.player._config;this.tcPlayer=new window.TcPlayer(this.player._container.id,{webrtc:e.file,autoplay:n.autoplay,listener:function(e){t.video.srcObject||"loadedmetadata"!==e.type&&"webrtcstatupdate"!==e.type||(t.video.srcObject=e.src.el.srcObject,e.src.owner.style.display="none",t.play()),"error"===e.type&&(2005===e.detail.code?t.player.trigger(Ia,{message:e.detail.reason,data:e.detail}):t.trigger(xa,{message:e.detail.reason,data:e.detail,fatal:!1}))}})}},{key:"getMediaElement",value:function(){return!1}},{key:"play",value:function(){if(this.tcPlayer){this.video.setAttribute("preload","auto");try{this.tcPlayer.play();var e=this.video.play();if(e)return e["catch"](function(e){return console.warn(e)})}catch(t){throw new Error("player cannot play")}}return Promise.resolve()}},{key:"pause",value:function(){return this.tcPlayer&&(this.tcPlayer.pause(),this.video.pause()),Promise.resolve()}},{key:"setVolume",value:function(e){if(this.video){var t=this.video.muted;L("number",e)&&(e<0&&(e=0),e>1&&(e=1),this.video.volume=e,this.tcPlayer.volume(e),this.trigger("volume",{type:"volume",volume:e}),t&&e>0&&this.setMute(!1),t||0!==e||this.setMute(!0))}}},{key:"setMute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.video&&(this.video.muted=!!e,this.tcPlayer.mute(!!e),this.trigger("mute",{type:"mute",mute:!!e}))}},{key:"getMute",value:function(){return!!this.video&&this.video.muted}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.tcPlayer&&this.tcPlayer.destroy()}}]),t}(ys);gs.type=["webrtc"],gs.canPlay=function(e){var t=e.type;return gs.type.indexOf(t)>-1},gs.isSupported=function(){return window.RTCPeerConnection||window.webkitRTCPeerConnection||window.mozRTCPeerConnection},gs.isFlash=function(e){return!1},gs.isHTML5=function(e){return!0};var ms,_s=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),Ne(i.player,l(l(i))).method("play").method("pause").method("toggle").method("getState").method("getPlaybackRate").method("setPlaybackRate"),i.subEvents(),i.setPlayBtnIcon(ui),i.initPlayButton(),i._lastPausedTimeStamp=0,i}return s(t,e),r(t,[{key:"changeStateClass",value:function(){var e=this.getState();J(this.player.dom.container).remove(Co),J(this.player.dom.container).add("mudu-state-".concat(e))}},{key:"subEvents",value:function(){var e=this;this.onPlayer(Ko,function(){e.subProvider(),J(e.player.dom.container).add(oo)}),this.onPlayer(Zo,function(){J(e.player.dom.container).remove(Co)}),this.onPlayer(Qo,function(){e.player.timer.loading.stop(),J(e.player.dom.container).remove(Co),J(e.player.dom.container).remove(Ao),e._triggerStateEvt(_a,"idle"),e.setPlayBtnIcon(ui),e.changeStateClass()}),this.onPlayer("internal_buffer",function(t){if(t){if(e._isErrorState())return;e._triggerStateEvt("buffer","buffering"),e.changeStateClass()}else e._triggerStateEvt("play","playing"),e.changeStateClass()}),this.onPlayer(ta,this._onInternalKeyDown.bind(this))}},{key:"subProvider",value:function(){var e=this;this.onProvider(Fa,function(){e.player.timer.loading.start();var t=e.getState();"playing"!==e.getState()&&(e._triggerStateEvt(ra,"playing"),e.setPlayBtnIcon(ci),"buffering"!==t&&"playing"!==t&&e.player.model.bezel["switch"](ui),e.changeStateClass())}),this.onProvider(Ha,function(){e._lastPausedTimeStamp=Date.now(),e.player.timer.loading.stop(),e._triggerStateEvt(Ha,"paused"),e.setPlayBtnIcon(ui),e.player.model.bezel["switch"](ci),!e._isErrorState()&&e.changeStateClass()}),this.onProvider(Da,function(){e.player.timer.loading.stop(),e._triggerStateEvt(_a),e.changeStateClass()}),this.onProvider(Ga,function(){e.player.trigger(Ea)}),this.onProvider(za,function(t){e.player.trigger(Ta,t)}),this.onProvider(Na,function(){var t=$e.isAnyClassShow("mudu-popup");t?$e.hideAll():e.player.getControls()&&e.player.toggle()})}},{key:"_triggerStateEvt",value:function(e,t){t=t||e;var n=this.player._status.state;this.player._status.state=t,this.player.trigger(e,{type:e,oldState:n,newState:t})}},{key:"_isErrorState",value:function(){return J(this.player.dom.container).contains(ao)}},{key:"initPlayButton",value:function(){var e=this;this.onDom(this.player.dom.leftPlayBtn,"click",function(){e.player.toggle()}),this.onDom(this.player.dom.bigPlayBtn,"click",function(){e.player.toggle()}),un()||this.onDom(this.player.dom.videoWrap,"click",function(t){if(!e.player._provider||!e.player._provider.flash){var n=$e.isAnyClassShow("mudu-popup");!n&&e.player.getControls()&&e.player.toggle()}})}},{key:"setPlayBtnIcon",value:function(e){var t=this.player.dom.leftPlayBtn;J(t).remove(_i),J(t).add(e)}},{key:"toggle",value:function(){console.log(de.call(this.player));var e=this.player._status.state;return"paused"===e||"idle"===e?this.play():this.pause()}},{key:"play",value:function(){var e=this,t=this.player._status.state,n=de.call(this.player),i=n.reloadAfterPausing,r=n.reloadAfterPausingTime;if(i&&this._lastPausedTimeStamp&&"paused"===t){var o=Date.now();r=L("undefined",r)?3e3:r;var a=o-this._lastPausedTimeStamp>r;if(a)return void this.player.replay()}return this.provider()?(this.player.trigger(ba,{type:ba}),this.provider().play()):rt.call(this.player).then(function(){at.call(e.player);try{e.play()}catch(t){console.warn(t)}})}},{key:"pause",value:function(){return this.provider()?this.provider().pause():Promise.resolve()}},{key:"getPlaybackRate",value:function(){return this.provider()?this.provider().getPlaybackRate():1}},{key:"setPlaybackRate",value:function(e){if(this.provider())return this.provider().setPlaybackRate(e)}},{key:"getState",value:function(){return this.player._status.state}},{key:"_onInternalKeyDown",value:function(e){var t=J(this.player.dom.container).contains(Kr),n=J(this.player.dom.container).contains(Eo);t||n||32===e&&this.toggle()}}]),t}(Qa),bs={nameMap:{dragStart:un()?"touchstart":"mousedown",dragMove:un()?"touchmove":"mousemove",dragEnd:un()?"touchend":"mouseup"}},ws=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.player.dom.ptime.innerHTML="00:00",i.prevDragX=null,i._latest10tsLength=[],i._lastDuration=0,i.onPlayer(Ko,i._onProviderInited.bind(l(l(i)))),i.onPlayer(Qo,i._onProviderRemoved.bind(l(l(i)))),i.onPlayer(ta,i._onInternalKeyDown.bind(l(l(i)))),i.initPlayedBar(),i.initTimeShiftSeek(),Ne(i.player,l(l(i))).method("seek").method("getPosition").method("getDuration").method("getBuffer").method("setProgressVisible").method("getProgressVisible"),i}return s(t,e),r(t,[{key:"setBarWidth",value:function(e){this.player.dom.playedBar.style.width=B(e)}},{key:"getBarWidth",value:function(){return parseFloat(this.player.dom.playedBar.style.width)/100}},{key:"getDuration",value:function(){return this.provider()?this.provider().getDuration():1}},{key:"getPosition",value:function(){return this.provider()?this.provider().getPosition():0}},{key:"getBufferPercentage",value:function(){if(!this.provider())return 0;var e=this.getBuffer(),t=e.pop(),n=t&&t.end||0,i=this.getDuration(),r=n/i||0;return r}},{key:"getBuffer",value:function(){return this.provider()?this.provider().getBuffer():[]}},{key:"seek",value:function(e){if(this.provider()){this.provider().seek(e);var t=this.getDuration();e=Math.max(e,0),t&&(e=Math.min(e,t)),this.setBarWidth(this.getPlayedBarPercentage(e)),this.player.dom.ptime.innerHTML=H(e)}}},{key:"computeDragDirec",value:function(e){if(null===this.prevDragX)return this.prevDragX=e,"";var t=e>this.prevDragX?"right":"left";return this.prevDragX=e,t}},{key:"initPlayedBar",value:function(){var e=this,t=function(t){if(e.getProgressVisible()){J(e.player.dom.container).add(go);var n=(t.clientX||t.changedTouches[0].clientX)-G(e.player.dom.playedBarWrap);e.player.model.progressPopup.dragMove(n,e.computeDragDirec(n)),e.player.model.progressPopup.show();var i=n/e.player.dom.playedBarWrap.clientWidth;i=Math.max(i,0),i=Math.min(i,1),e.setBarWidth(i),e.player.dom.ptime.innerHTML=H(i*e.getDuration())}},n=function i(n){if(e.prevDragX=null,e.player.model.progressPopup.hide(),e.player.model.progressPopup.dragEnd(),e.player._status.dragging=!1,e.player.model.controls.setAutoHide(),V(document,bs.nameMap.dragEnd,i),V(document,bs.nameMap.dragMove,t),e.getProgressVisible()){var r=((n.clientX||n.changedTouches[0].clientX)-G(e.player.dom.playedBarWrap))/e.player.dom.playedBarWrap.clientWidth;r=Math.max(r,0),r=Math.min(r,1),e.setBarWidth(r),e.seekByPercentage(r)}};z(this.player.dom.playedBarWrap,bs.nameMap.dragStart,function(){e.player._status.dragging=!0,z(document,bs.nameMap.dragMove,t),z(document,bs.nameMap.dragEnd,n)})}},{key:"initTimeShiftSeek",value:function(){var e=this,t=this.player.dom.liveBadge;t.addEventListener("click",function(){e.seekTimeShiftLive()})}},{key:"_onProviderInited",value:function(e){var t=e.isLive,n=e.isTimeShift,i=e.isHideProgress;this.onProvider(ja,this._onBufferChange.bind(this)),this.onProvider(Ba,this._onDuration.bind(this)),this.onProvider(La,this._onTimeUpdate.bind(this)),this.onProvider(La,this._onBufferChange.bind(this)),this.onceProvider(Ja,this._onLoadedData.bind(this)),J(this.player.dom.container).add(ro),t?(J(this.player.dom.container).add(Kr),J(this.player.dom.container).remove(Qr)):(J(this.player.dom.container).remove(Kr),J(this.player.dom.container).add(Qr)),n?J(this.player.dom.container).add(bo):(J(this.player.dom.container).remove(bo),J(this.player.dom.container).remove(Po)),
this.setProgressVisible(!i),this._latest10tsLength=[]}},{key:"_onProviderRemoved",value:function(){J(this.player.dom.container).add(ro)}},{key:"_onBufferChange",value:function(){var e=this.player.dom.loadedBar,t=this.getBufferPercentage()*this.getDuration(),n=this.getPlayedBarPercentage(t);e.style.width=B(n)}},{key:"_onDuration",value:function(){var e=this.player.dom.dtime,t=this.getDuration()||0;ae(t)&&t>0&&(e.innerHTML=H(t),this.player.trigger(ya,{type:ya,duration:t}),J(this.player.dom.container).remove(ro),J(this.player.dom.container).add(_o));var n=1,i=t-this._lastDuration;if(0!==this._lastDuration&&i>=n){var r=this._latest10tsLength;r.unshift(i),r.length>10&&r.pop()}this._lastDuration=t,this._updateTimeShiftLiveBadge()}},{key:"_onTimeUpdate",value:function(){var e=this.player.dom.ptime,t=this.getPosition();this.player._status.dragging||(this.setBarWidth(this.getPlayedBarPercentage(t)),e.innerHTML=H(this.getPosition())),this.player.trigger(va,{type:va,position:t}),this._updateTimeShiftLiveBadge()}},{key:"_onLoadedData",value:function(){var e=this,t=this.getDuration();ae(t)&&t>0?this.player.trigger(Sa):this.onceProvider(Ba,function(){e.player.trigger(Sa)})}},{key:"_onInternalKeyDown",value:function(e){var t=this._isLive(),n=!this.getProgressVisible();if(!t&&!n)switch(e){case 37:this.seek(this.getPosition()-5);break;case 39:this.seek(this.getPosition()+5)}}},{key:"_isLive",value:function(){return J(this.player.dom.container).contains(Kr)}},{key:"_updateTimeShiftLiveBadge",value:function(){var e=this.isTimeShiftLive(),t=this.player.dom.container;e?J(t).add(Po):J(t).remove(Po)}},{key:"seekTimeShiftLive",value:function(){if(this.isTimeShift()){var e=this.getDuration(),t=this._latest10tsLength;if(t.length<3){var n=e-20;n>0&&this.seek(n)}else{var i=e-t[0]-t[1];this.seek(i)}}}},{key:"getPositionByPercentage",value:function(e){var t=this.getDuration();if(this.isTimeShift()){var n=this.getTimeShiftGap();return(n-t)*(1-e)}return t?e*t:0}},{key:"seekByPercentage",value:function(e){var t,n=this.getDuration();if(this.isTimeShift()){var i=this.getTimeShiftGap();t=(n-i)*e}else t=e*n;this.seek(t)}},{key:"isTimeShiftLive",value:function(){var e=this.getDuration(),t=this.getPosition(),n=this._latest10tsLength;if(n.length<3)return e-t<30;var i=n[0]+n[1]+n[2];return e-t<i}},{key:"isTimeShift",value:function(){var e=this.getDuration(),t=ae(e)&&e>0,n=J(this.player.dom.container).contains(bo);return t&&n}},{key:"getTimeShiftGap",value:function(){var e=this._latest10tsLength,t=this.getDuration(),n=this.getPosition();if(e.length<3){var i=t-n;return i<30?30-i:30}var r=e[0]+e[1]+e[2];return r}},{key:"getPlayedBarPercentage",value:function(e){var t=this.getDuration();if(this.isTimeShift()){var n=this.getTimeShiftGap(),i=e/(t-n);return i>1?1:i}return e/t}},{key:"setProgressVisible",value:function(e){e?J(this.player.dom.container).remove(Eo):(J(this.player.dom.container).add(Eo),this.player._status.dragging=!1);var t=this.player._config.playlist;if(t&&t.length>0)for(var n=0;n<t.length;n++)t[n].isHideProgress=!e}},{key:"getProgressVisible",value:function(){return!this._isLive()&&!J(this.player.dom.container).contains(Eo)}}]),t}(Qa),ks=function(t){function i(e){var t;return n(this,i),t=f(this,u(i).call(this,e)),t.isMobile=un(),t.autoHideTimer=null,t._controlsVisible=!!e._config.controls,t._videoLayerControl=!!e._config.videoLayerControl,Ne(t.player,l(l(t))).method("setControls").method("getControls").method("setVideoLayerControl").method("getVideoLayerControl").method("setCustomControl"),t.setControls(!!e._config.controls),t.setVideoLayerControl(!!e._config.videoLayerControl),t.setMobileToggle(),t.setPcToggle(),t.setCustomControl(e._config.customControl),t}return s(i,t),r(i,[{key:"setPcToggle",value:function(){var e=this;if(!this.isMobile){var t=function(){e.show(),e.setAutoHide()},n=function(e){var n=e.oldState;"buffering"!==n&&"playing"!==n&&t()};this.onDom(this.player.dom.container,"mousemove",t),this.onDom(this.player.dom.container,"click",t),this.onPlayer(ra,n),this.onPlayer(oa,t)}}},{key:"setMobileToggle",value:function(){var e=this;if(this.isMobile){var t=function(t){t.stopPropagation(),e.toggle()};this.onDom(this.player.dom.videoWrap,"click",t),this.onPlayer(ra,function(){e.setAutoHide()})}}},{key:"setAutoHide",value:function(){var e=this;clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){var t=e.isMobile?"mudu-popup ".concat(ho):"mudu-popup";$e.isAnyClassShow(t)||e.player._status.dragging||e.hide()},3e3)}},{key:"show",value:function(){J(this.player.dom.container).remove(io),this._triggerControlsVisible(this.getControls())}},{key:"hide",value:function(){var e=this.player.model.video.getState();"paused"!==e&&"idle"!==e&&(J(this.player.dom.container).add(io),this._triggerControlsVisible(!1))}},{key:"isShow",value:function(){return!J(this.player.dom.container).contains(io)}},{key:"_triggerControlsVisible",value:function(e){e!==this._controlsVisible&&(this._controlsVisible=e,this.player.trigger(ua,{type:ua,visible:this._controlsVisible}))}},{key:"toggle",value:function(){var e=this.isShow();e?this.hide():this.show(),this.setAutoHide()}},{key:"setVideoLayerControl",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!un()){this._videoLayerControl=!!e;var t=this._videoLayerControl?"none":"block";this.player.dom.baseLayer.style.display=t,this.player.trigger(aa,{type:aa,videoLayerControl:this._videoLayerControl})}}},{key:"setControls",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._showControls=!!e;var t=this._showControls?"block":"none";this.player.dom.controllerWrap.style.display=t,this.player.trigger(sa,{type:sa,controls:this._showControls}),this._triggerControlsVisible(this._showControls&&this.isShow())}},{key:"setCustomControl",value:function(t){this.customControl=t;var n=this.player.dom.controllerWrap.querySelector(".".concat(Fo));n.innerHTML=null,"string"==typeof this.customControl?n.innerText=this.customControl:"object"===e(this.customControl)?n.appendChild(this.customControl):n.innerText=this.customControl||"",this.customControl?J(n).remove(xo):J(n).add(xo)}},{key:"getControls",value:function(){return this._showControls}},{key:"getVideoLayerControl",value:function(){return this._videoLayerControl}},{key:"remove",value:function(){d(u(i.prototype),"remove",this).call(this),clearTimeout(this.autoHideTimer)}}]),i}(Qa),Ss=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),Ne(i.player,l(l(i))).method("getMute").method("setMute").method("getVolume").method("setVolume"),i.initVolumeButton(),i.subEvents(),i.volumeTip=$e(i.player.dom.volumeButton,{content:"",container:i.player.dom.container}),un()&&(i.player.dom.volumeWrap.style.display="none"),i}return s(t,e),r(t,[{key:"subEvents",value:function(){var e=this;this.onPlayer(Ko,function(){e.subProviderEvents();var t=it().get("volume")||1,n=it().get("mute")||!1;un()?e.setVolume(1):(e.setVolume(t),e.setMute(n))}),this.onPlayer(ta,this._onInternalKeyDown.bind(this))}},{key:"updateTipText",value:function(){var e=this.getMute()?this.lang.Unmute:this.lang.Mute,t=te(e);this.volumeTip.updateContent(t)}},{key:"subProviderEvents",value:function(){var e=this;this.onProvider(Wa,function(t){e.player.trigger(wa,t),e.switchVolumeIcon(),e.setBarWidth(B(e.getVolume())),e.cacheVolume(),e.updateTipText()}),this.onProvider(qa,function(t){e.player.trigger(ka,t),e.switchVolumeIcon(),e.setBarWidth(B(e.getVolume())),e.cacheVolume()})}},{key:"cacheVolume",value:function(){it().set("volume",this.getVolume()),it().set("mute",this.getMute())}},{key:"initVolumeButton",value:function(){var e=this;this.setBarWidth("100%"),this.switchVolumeIcon();var t=function(t){var n=t||window.event,i=e.player._status.containerFontSize/16,r=45*i,o=((n.clientX||n.changedTouches[0].clientX)-G(e.player.dom.volumeBarWrap))/r;e.setVolume(o)},n=function i(){V(document,bs.nameMap.dragEnd,i),V(document,bs.nameMap.dragMove,t)};z(this.player.dom.volumeBarWrapWrap,"click",function(t){var n=e.player._status.containerFontSize/16,i=45*n,r=t||window.event,o=((r.clientX||r.changedTouches[0].clientX)-G(e.player.dom.volumeBarWrap))/i;e.player.setVolume(o)}),z(this.player.dom.volumeBarWrapWrap,bs.nameMap.dragStart,function(){z(document,bs.nameMap.dragMove,t),z(document,bs.nameMap.dragEnd,n)}),z(this.player.dom.volumeButton,"click",function(){e.setMute(!e.getMute()),Jn(function(){e.updateTipText(),e.volumeTip.show()})})}},{key:"getMute",value:function(){return!!this.provider()&&this.provider().getMute()}},{key:"setMute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.provider())return e||0!==this.getVolume()||this.setVolume(.5),this.provider().setMute(e)}},{key:"getVolume",value:function(){return this.provider()?this.provider().getVolume():1}},{key:"setVolume",value:function(e){this.provider()&&this.provider().setVolume(e)}},{key:"setBarWidth",value:function(e){this.player.dom.volumeBar.style.width=e}},{key:"switchVolumeIcon",value:function(e){var t=this.player.dom.volumeButton;return J(t).remove(_i),e?void J(t).add(e):void(this.getVolume()>=.95?J(t).add(li):this.getVolume()>0?J(t).add(fi):J(t).add(hi))}},{key:"_onInternalKeyDown",value:function(e){switch(e){case 38:this.setVolume(this.getVolume()+.1);break;case 40:this.setVolume(this.getVolume()-.1)}}}]),t}(Qa),Ts=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),Ne(i.player,l(l(i))).method("getPlaylist").method("getPlaylistItem").method("getPlaylistIndex").method("load").method("reload").method("next").method("prev").method("replay").method("setQuality").method("switchQuality").method("switchListItem").method("setRepeat").method("getRepeat"),i._subEvent(),i._retryStartTime=new Date,i._retryTimes=0,i._retryTimer=null,e._config.enableErrorRetry&&(i.onPlayer("delegate-model",i._onDelegateModel.bind(l(l(i)))),i.onPlayer(xa,i._onOuterError.bind(l(l(i))))),i}return s(t,e),r(t,[{key:"_onDelegateModel",value:function(e){var t=e.fn;switch(t){case"load":case"reload":case"next":case"prev":case"replay":case"setQuality":case"switchQuality":case"switchListItem":this._retryStartTime=new Date,this._retryTimes=0,clearTimeout(this._retryTimer)}}},{key:"_onOuterError",value:function(e){var t=this,n=e.fatal,i=this.player._config,r=i.errorMaxRetry,o=i.errorMaxRetryTimeout,a=i.errorRetryDelay,s=new Date;n&&(r>this._retryTimes||s.getTime()<this._retryStartTime.getTime()+o)&&(clearTimeout(this._retryTimer),this._retryTimer=setTimeout(function(){t.m_removed||(t._retryTimes++,t.replay())},a))}},{key:"_subEvent",value:function(){var e=this,t=this.player;this.onPlayer(Ko,function(){if(t._provider){var n=t._provider.html5,i=t.dom.container;J(i).remove(Ao),J(i).add(lo),n?J(i).add(co):J(i).add(uo),e.onProvider(Da,function(){t.trigger(la);var n=e.getPlaylistIndex()===e.getPlaylist().length-1;n?t._config.repeat?e.reload():t.trigger(fa):e.next()})}})}},{key:"load",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};delete n.playlist,this.player._config=a({},this.player._config,n);var i=Ae(e);return i?(this.player._config.playlist=i,this.player.trigger(ha,{type:ha,playlist:i}),this.reload(t)):Promise.reject(new Error("muduPlayer().load(`playlist`): the format of `playlist` is illegel"))}},{key:"reload",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return pe.call(this.player),rt.call(this.player).then(function(){at.call(e.player);try{if(t)return e.player.play()}catch(n){console.warn(n)}})}},{key:"replay",value:function(){var e=this;return rt.call(this.player).then(function(){at.call(e.player);try{return e.player.play()}catch(t){console.warn(t)}})}},{key:"switchListItem",value:function(e,t){var n=this;if(!L("number",e))return Promise.resolve(!1);var i=this.player._config.playlist[e];return i?L("number",t)&!i.sources[t]?Promise.resolve(!1):(L("number",t)?ve.call(this.player,e,t):pe.call(this.player,e),this.player.trigger(da,{type:da,index:e,item:this.getPlaylistItem(e)}),rt.call(this.player).then(function(){return n.player.play()}).then(function(){return!0})):Promise.resolve(!1)}},{key:"next",value:function(){var e=this.getPlaylistIndex()+1;return this.switchListItem(e)}},{key:"prev",value:function(){var e=this.getPlaylistIndex()-1;return this.switchListItem(e)}},{key:"getPlaylist",value:function(){return this.player._config.playlist}},{key:"getPlaylistItem",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.player._config.playlist[e]}},{key:"getPlaylistIndex",value:function(){for(var e=0;e<this.player._config.playlist.length;e++){var t=this.player._config.playlist[e];if(t.active)return e}return-1}},{key:"setQualityActive",value:function(e){var t=this.getPlaylistIndex();return ve.call(this.player,t,e)}},{key:"getQuality",value:function(e){for(var t=this.getPlaylistIndex(),n=this.player._config.playlist,i=0;i<n[t].sources.length;i++)if(e===i)return n[t].sources[i]}},{key:"setQuality",value:function(e){return console.warn("player.setQuality will be removed after v1.0.0, please use player.switchQuality instead"),this.switchQuality(e)}},{key:"switchQuality",value:function(e){var t=this.getQuality(e);return t?(this.setQualityActive(e),this.player.trigger(pa,{index:e,item:t}),this.replay()):Promise.resolve()}},{key:"setRepeat",value:function(e){this.player._config.repeat=!!e}},{key:"getRepeat",value:function(){return this.player._config.repeat}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),clearTimeout(this._retryTimer)}}]),t}(Qa),Es=Wt()?"keyup":"keydown",xs=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.subEvent(),i}return s(t,e),r(t,[{key:"subEvent",value:function(){var e=this.player;this.onKeyUp=function(t){if(e._status.focus){var n=document.activeElement,i=n.tagName.toUpperCase(),r=n.getAttribute("contenteditable");if("INPUT"!==i&&"TEXTAREA"!==i&&""!==r&&"true"!==r){var o=t||window.event;switch(o.keyCode){case 32:case 37:case 39:case 38:case 40:o.preventDefault(),e.trigger(ta,o.keyCode,o)}}}},z(document,Es,this.onKeyUp)}},{key:"remove",value:function(){V(document,Es,this.onKeyUp)}}]),t}(Qa),Ps=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),Ne(i.player,l(l(i))).method("getWidth").method("getHeight").method("resize").method("getRect"),i.setWidth(),i.setHeight(),i.setAspect()||i.setHeight(),i}return s(t,e),r(t,[{key:"getWidth",value:function(){return this.getRect().width}},{key:"getHeight",value:function(){return this.getRect().height}},{key:"getRect",value:function(){return ee(this.player.dom.container)}},{key:"resize",value:function(e,t){e=this.setWidth(e),t=this.setHeight(t),this.removeAspect(),this.player.trigger(ga,{type:ga,width:e,height:t})}},{key:"setWidth",value:function(e){var t=e=e||this.player._config.width;return this.player.dom.container.style.width=B(t),e}},{key:"setHeight",value:function(e){var t=e=e||this.player._config.height;return this.player.dom.container.style.height=B(t),e}},{key:"setAspect",value:function(){var e=this.player._config.aspectratio,t=(e+"").split(":").map(function(e){return+e}).filter(function(e){return!!e&&e>0});if(2===t.length){var n=t[1]/t[0]*100+"%";return this.player.dom.aspect.style.paddingTop=n,J(this.player.dom.container).add(to),this.setHeight("auto"),!0}return J(this.player.dom.container).add(no),!1}},{key:"removeAspect",value:function(){this.player.dom.aspect.style.paddingTop=0,J(this.player.dom.container).remove(to)}}]),t}(Qa),Cs=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.onPlayer(Ko,i._onProviderInited.bind(l(l(i)))),i}return s(t,e),r(t,[{key:"_onProviderInited",value:function(){var e=this.player._config.stretching;this.provider()&&this.provider().setStretching(e)}}]),t}(Qa),Os=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i._onImgLoad=i._onImgLoad.bind(l(l(i))),i._onStyleLoaded=i._onStyleLoaded.bind(l(l(i))),i.setLogoStyle(),i.oncePlayer(na,i._onStyleLoaded),i}return s(t,e),r(t,[{key:"_onStyleLoaded",value:function(){this.setLogoVisible()}},{key:"_onImgLoad",value:function(){var e=this.player.dom,t=e.logoWrap,n=e.logoImg,i=ee(n),r=ee(t),o=r.width/r.height,a=i.width/i.height;o>a?n.style.height="100%":n.style.width="100%",n.style.opacity=this.player._config.logo.opacity+""}},{key:"setLogoVisible",value:function(){var e=this.player._config.logo,t=this.player.dom.logoImg;z(t,"load",this._onImgLoad),t.style.display="inline-block",t.src=e.file}},{key:"setLogoStyle",value:function(){var e=this.player._config.logo,t=this.player.dom,n=t.logoWrap,i=t.logoImg,r=t.logoLink;if(e.file){if(this.resetPosition(),n.style.width=B(e.width),n.style.height=B(e.height),"control-bar"!==e.position){var o=e.position.split("-");o.forEach(function(t){"top"!==t&&"bottom"!==t||(n.style[t]=B(e.marginh)),"left"!==t&&"right"!==t||(n.style[t]=B(e.marginw))}),o.forEach(function(e){i.style[e]="0"})}r.href=e.link?e.link:"javascript:void(0);",r.target=e.link?"_blank":"_self",r.style.cursor=e.link?"pointer":"default"}}},{key:"resetPosition",value:function(){var e=this.player.dom.logoWrap;e.style.cssText="position: absolute;"}},{key:"remove",value:function(){V(this.player.dom.logoImg,"load",this._onImgLoad),d(u(t.prototype),"remove",this).call(this)}}]),t}(Qa),As=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.init(),i}return s(t,e),r(t,[{key:"init",value:function(){var e=this.player;this.setTrue=function(){e._status.focus=!0},this.setFalse=function(){e._status.focus=!1},z(document,"click",this.setFalse,!0),z(e.dom.container,"click",this.setTrue,!0)}},{key:"remove",value:function(){V(document,"click",this.setFalse,!0),V(this.player.dom.container,"click",this.setTrue,!0)}}]),t}(Qa),Ms=function(e){function t(e){var i;n(this,t),i=f(this,u(t).call(this,e)),Ne(i.player,l(l(i))).method("setLoadingForced");var r=i.player.dom.bezel,o=i.player.dom.bezelWrap,a=i.player._config.renderLoading;return a?(i.renderLoadingString="string"==typeof a?X(a):a,i.renderLoadingString.className+="".concat(qo," ").concat(Do),o.appendChild(i.renderLoadingString)):(i.renderLoadingString=X('<span class="'.concat(qo," ").concat(Ro," ").concat(yi,'"></span>')),o.appendChild(i.renderLoadingString)),i.onDom(r,"animationend",function(){J(r).remove(_r)}),i}return s(t,e),r(t,[{key:"setLoadingForced",value:function(e){this.renderLoadingString.style.display=e?"block":""}},{key:"switch",value:function(e){var t=this.player.dom.bezel;J(t).remove(_i),J(t).add(e),J(t).add(_r)}}]),t}(Qa),Is=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),Ne(i.player,l(l(i))).method("setImageDisplay"),i.subEvents(),i}return s(t,e),r(t,[{key:"setImageDisplay",value:function(e){var t=this.player.dom.background;switch(e){case"show":t.style.display="block";break;case"hidden":t.style.display="none";break;case"auto":t.style.display=""}}},{key:"subEvents",value:function(){var e=this;this.onPlayer(Ko,function(t){var n=t.image,i=t.alwaysDisplayImage,r=e.player.dom.background,o=e.player.dom.container;J(o).remove(Oo),J(o).add(so+"-"+e.player._config.stretching),n?r.style.backgroundImage="url(".concat(n,")"):r.style.backgroundImage="none",i?J(r).add(Ar):J(r).remove(Ar)})}}]),t}(Qa),Rs=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),Ne(i.player,l(l(i))).method("appendRightControllerButton"),i}return s(t,e),r(t,[{key:"appendRightControllerButton",value:function(e){e instanceof window.HTMLElement&&this.player.dom.controllerRightIcons.appendChild(e)}}]),t}(Qa),Ds=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.onPlayer(Ko,function(){var t=de.call(e),n=t.title;n?e.dom.title.innerText=n:e.dom.title.style.display="none"}),i}return s(t,e),t}(Qa),js=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.player._config.contextMenus.length>0&&(i.dom=null,i.createDom(),i.tip=$e("",{container:e.dom.container,content:i.dom,"class":"mudu-popup",getMaxHeight:function(e){var t=e.height;return t}}),i._subEvents()),i}return s(t,e),r(t,[{key:"generateDom",value:function(){this.createDom()}},{key:"_subEvents",value:function(){var e=this;this.handleContextMenu=function(t){if(e.tip.isShow())return void e.tip.hide();var n=e.getStyle(t);n&&($e.hideAll(),e.tip.show(n),t.preventDefault&&t.preventDefault())},this.onDom(this.player.dom.container,"contextmenu",this.handleContextMenu)}},{key:"getStyle",value:function(e){var t=ee(this.player.dom.container),n=ee(this.player.dom.container.querySelector(".".concat(vr)));if(!(t.width<n.width||t.height<n.height)){var i=e.clientX,r=e.clientY,o=t.height-n.height,a=t.width-n.width,s=i-t.left,u=r-t.top;return u=u>o?o:u,s=s>a?a:s,{left:s,top:u}}}},{key:"createDom",value:function(){for(var e=this.player._config.contextMenus,t=e.map(function(e){var t='<a class="'.concat(qo," ").concat(Ir,'" target="_blank" menuKey="').concat(e.key,'" menuText="').concat(e.text,'">')+'<div class="'.concat(qo," ").concat(Rr,'">').concat(e.text,"</div>")+"</a>";return t}),n='<div class="'.concat(qo," ").concat(vr," ").concat(Dr,'">')+'<div class="'.concat(qo," ").concat(jr,'">').concat(t.join(""),"</div>")+"</div>",i=X(n),r=i.querySelectorAll(".".concat(Ir)),o=this,a=0;a<r.length;a++)r[a].onclick=function(){var e=this.getAttribute("menuKey"),t=this.getAttribute("menuText");o.tip.hide(),o.player.trigger(ia,{key:e,text:t,type:ia})};this.dom=i}}]),t}(Qa),Ls=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.highlights=[],i.autoHideTimer=null,i.subEvents(),i}return s(t,e),r(t,[{key:"subEvents",value:function(){var e=this;this.onPlayer(ya,function(){e.setHightLights()}),this.onPlayer(Qo,function(){e.clearHightLights()}),this.onDom(this.player.dom.playedBarWrap,"mousemove",function(t){e.show(),e.handleMouseMove(t),un()&&e.setAutohide()}),un()||(this.onDom(this.player.dom.playedBarWrap,"mouseenter",function(t){e.show()}),this.onDom(this.player.dom.playedBarWrap,"mouseleave",function(t){e.hide()}),this.onDom(this.player.dom.playedBarWrap,"mouseover",function(t){e.handleDotEnter(t)}),this.onDom(this.player.dom.playedBarWrap,"mouseout",function(t){e.handleDotLeave(t)}))}},{key:"setAutohide",value:function(){var e=this;clearTimeout(this.autoHideTimer),this.autoHideTimer=setTimeout(function(){e.hide()},300)}},{key:"handleMouseMove",value:function(e){var t=W(this.player.dom.playedBarWrap).left,n=(e.clientX||e.chhegdTouches[0].clientX)-t;n<0||n>this.player.dom.playedBarWrap.offsetWidth||this.move(n)}},{key:"handleDotEnter",value:function(e){var t=e.target||e.srcElement;if(t&&J(t).contains(pr)){var n=t.getAttribute("text");this.setDotActive(t,!0),this.setPopText(n),this.setPopTextVisible(!0),this.handleMouseMove(e)}}},{key:"handleDotLeave",value:function(e){var t=e.target||e.srcElement;t&&J(t).contains(pr)&&(this.setDotActive(t,!1),this.setPopText(""),this.setPopTextVisible(!1),this.handleMouseMove(e))}},{key:"setPopText",value:function(e){this.player.dom.barTextText.innerHTML=e}},{key:"setPopTextVisible",value:function(e){var t=J(this.player.dom.barPopup);e?t.add(nr):t.remove(nr)}},{key:"isPopTextVisible",value:function(){return J(this.player.dom.barPopup).contains(nr)}},{key:"setDotActive",value:function(e,t){var n=J(e);t?n.add(Wo):n.remove(Wo)}},{key:"show",value:function(){J(this.player.dom.barPopup).remove("hidden")}},{key:"hide",value:function(){J(this.player.dom.barPopup).add("hidden")}},{key:"move",value:function(e){var t=(this.player.model.progress.getDuration(),this.player.dom.playedBarWrap.offsetWidth);e<0&&(e=0),e>t&&(e=t);var n=e/t,i=this.player.model.progress.getPositionByPercentage(n),r=H(i);this.player.dom.barTime.innerHTML=r,this.player.dom.barTextTime.innerHTML=r,this.setPosition(!1,this.isPopTextVisible(),e,t)}},{key:"dragMove",value:function(e,t){var n=this,i=this.getDotFromDrag(e,t),r=this.highlights.indexOf(i),o=this.player.dom.highlight.querySelectorAll(".".concat(pr)),a=o[r];[].slice.call(o).forEach(function(e){return n.setDotActive(e,e===a)}),a?(this.setPopText(i.text),this.setPopTextVisible(!0)):(this.setPopText(""),this.setPopTextVisible(!1)),this.move(e)}},{key:"dragEnd",value:function(){var e=this,t=this.player.dom.highlight.querySelectorAll(".".concat(pr));[].slice.call(t).forEach(function(t){return e.setDotActive(t,!1)})}},{key:"getDotFromDrag",value:function(e,t){var n=this.player.dom.playedBarWrap.offsetWidth,i=6,r=this.player.model.progress.getDuration(),o=e/n*r,a=i/2/n*r,s=this.highlights.filter(function(e){return e.time>o-a&&e.time<o+a});return s.length<=1?s[0]:"left"===t?s[0]:"right"===t?s.pop():s[0]}},{key:"setPosition",value:function(e,t,n,i){var r,o=168*this.player._status.containerFontSize/16;r=e||t?!e&&t?this.player.dom.barText.offsetWidth:o:this.player.dom.barTime.offsetWidth;var a=-(o-r)/2,s=i-(o/2+r/2),u=n-o/2;u<a&&(u=a),u>s&&(u=s),this.player.dom.barPopup.style.left="".concat(u,"px")}},{key:"setHightLights",value:function(){var e=de.call(this.player),t=e.highlights,n=this.player.dom.highlight,i=this.player.model.progress.getDuration();this.highlights=L("array",t)?t:[],this.highlights=this.highlights.slice().sort(function(e,t){return e.time>=t.time});var r=this.highlights.map(function(e){var t=e.time/i;return'<div class="'.concat(qo," ").concat(pr,'" text="').concat(e.text,'" style="left: ').concat(B(t),'"></div>')});n.innerHTML=r.join("")}},{key:"clearHightLights",value:function(){this.player.dom.highlight.innerHTML="",this.highlights=[]}}]),t}(Qa),Bs=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i._tryDom=i.geneTryDom(),i.renderError=L("function",i.player._config.renderError)?i.player._config.renderError:i.defaultRenderError.bind(l(l(i))),i.onPlayer(Ko,function(){i.onProvider(Va,function(e){e.message="provider_".concat(i.player._provider.name,"_").concat(e.message),e.errorId=K(),i.player._status.state="error",i.player.trigger(xa,e)})}),i.onPlayer(xa,function(e){var t={errorId:e.errorId,message:i.filterErrorMsg(e.message),detail:e.message};if(e.fatal){var n=i.renderError(t);n&&(L("string",n)||n instanceof HTMLElement)||(n=i.defaultRenderError(t)),L("string",n)?i.player.dom.errorWrap.innerHTML=n:(i.player.dom.errorWrap.innerHTML="",i.player.dom.errorWrap.appendChild(n)),J(i.player.dom.container).add(ao)}}),i}return s(t,e),r(t,[{key:"geneTryDom",value:function(){var e=this,t='<a href="javascript:void(0)" action="reload" style="color: blue;">'.concat(this.lang.Reload,"</a>"),n="<div>".concat(this.lang["You can try"]," ").concat(t,"</div>"),i=X(n);return i.onclick=function(t){t=t||window.event;var n=t.target||t.srcElement;"reload"===n.getAttribute("action")&&e.player.replay()},i}},{key:"defaultRenderError",value:function(e){var t=e.message,n=(e.detail,e.errorId),i='<div class="'.concat(qo," ").concat(Pr,'">')+'<div class="'.concat(qo," ").concat(Tr,'"><span class="').concat(qo," ").concat(mi,'"></span></div>')+'<div class="'.concat(qo," ").concat(Er,'">')+"<div>".concat(t,"(").concat(n,")</div>")+"</div></div>",r=X(i);return r.querySelector(".".concat(Er)).appendChild(this._tryDom),r}},{key:"filterErrorMsg",value:function(e){if(!e)return this.lang["Unknown Error"];var t=e.toLowerCase(),n=function(e){return t.indexOf(e)>=0};return n("network")?this.lang["Network Error"]:n("media")||n("parse")||n("demux")||n("remux")||n("decode")?this.lang["Media Error"]:e}},{key:"hideError",value:function(){J(this.player.dom.container).remove(ao)}}]),t}(Qa),Ns=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.nt=i.player.dom.notice,i._t=null,Ne(i.player,l(l(i))).method("notice"),i}return s(t,e),r(t,[{key:"notice",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setContent(e),t>0&&this.autoHide(t)}},{key:"hide",value:function(){this.setVisible(!1)}},{key:"show",value:function(){this.setVisible(!0)}},{key:"autoHide",value:function(e){var t=this;this.show(),this._t&&(clearTimeout(this._t),this._t=null),setTimeout(function(){return t.hide()},e)}},{key:"setContent",value:function(e){this.nt.innerHTML=e}},{key:"setVisible",value:function(e){e?J(this.nt).remove(Ho):J(this.nt).add(Ho)}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this._t&&clearTimeout(this._t)}}]),t}(Qa),Us=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.isMobile=un(),i.onPlayer(Ko,function(){i.onProviderInited(e)}),i}return s(t,e),r(t,[{key:"onProviderInited",value:function(){var e=ye.call(this.player),t=this.getActiveSource(e),n=this.getPathListBySources(e);this.init(),e.length>1&&(this.isMobile?this.initMobile(n,e,t):this.initQuality(n,e,t))}},{key:"init",value:function(){this.mobilePopup&&this.mobilePopup.destroy(),this.qsPopup&&this.qsPopup.destroy(),this.psPopup&&this.psPopup.destroy(),this.player.dom.switchPath.style.display="none",this.player.dom.switchQuality.innerHTML=""}},{key:"initMobile",value:function(e,t,n){var i=this.player.dom,r=i.container,o=i.switchQuality,a=this.getSourcesByPath(n.path,t),s=this.createMobileMenuitem(a,e,n.path);this.mobilePopup=this.createTooltip(r,o,s),s.addEventListener("click",this.mobilePopup.hide),this.addEventClick(s.querySelectorAll('[type="path"]'),this.switchPath),this.addEventClick(s.querySelectorAll('[type="quality"]'),this.switchQuality),n&&(this.player.dom.switchQuality.innerHTML=a.length>1?n.label:n.path_name)}},{key:"initQuality",value:function(e,t,n){var i=this.player.dom,r=i.container,o=i.switchQuality,a=this.getSourcesByPath(n.path,t),s=this.createQualityMenuitem(a,e,n);this.addEventClick(s.querySelectorAll('[type="quality"]'),this.switchQuality),this.addEventClick(s.querySelectorAll('[type="path"]'),this.switchPath);var u=s.querySelector(".".concat(Jr)),c=s.querySelector(".".concat(Xr));this.qsPopup=this.createTooltip(r,o,s,function(){c&&(c.style.visibility="hidden")}),z(u,"click",function(e){var t="hidden";if("visible"!==c.style.visibility){var n=ee(s).height-48;c.style.maxHeight=B(n),t="visible"}c.style.visibility=t,e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}),z(document,"click",function(e){c.style.visibility="hidden"}),n&&(this.player.dom.switchQuality.innerHTML=a.length>1?n.label:n.path_name)}},{key:"initPath",value:function(e,t){var n=this.player.dom,i=n.container,r=n.switchPath,o=this.getPathListBySources(e),a=this.createPathMenuitem(t.path,o);this.addEventClick(a.querySelectorAll('[type="path"]'),this.switchPath),this.psPopup=this.createTooltip(i,r,a),t&&(this.player.dom.switchPath.innerHTML=t.path_name)}},{key:"addEventClick",value:function(e,t){var n=this;e.forEach(function(e){e.onclick=function(){return t.call(n,e)}})}},{key:"getActiveSource",value:function(e){return e.filter(function(e){return e.active})[0]}},{key:"switchQuality",value:function(e){if(this.isMobile?this.mobilePopup.hide():this.qsPopup.hide(),!J(e).contains(Wo)){var t=Number(e.getAttribute("value"));this.player.switchQuality(t)}}},{key:"switchPath",value:function(e){if(!J(e).contains(Wo)){var t=ye.call(this.player),n=e.getAttribute("value"),i=this.getActiveSource(t),r=t.filter(function(e){return e.path===n}),o=r.find(function(e){return e.label===i.label});o||(o=r[0]),this.player.switchQuality(Number(o.index)),this.isMobile?this.mobilePopup.hide():this.qsPopup.hide()}}},{key:"getSourcesByPath",value:function(e,t){return t.filter(function(t){return t.path===e})}},{key:"getPathListBySources",value:function(e){var t=e.filter(function(e){return e.path&&e.path_name}),n=[];return t.forEach(function(e){var t=n.findIndex(function(t){return t.path===e.path})>-1;t||n.push({path:e.path,path_name:e.path_name})}),n}},{key:"createMobileMenuitem",value:function(e,t,n){var i=this,r=t.map(function(e,t){return'<div class="'.concat(Wr," ").concat(n===e.path?Wo:"",'" type="path" value="').concat(e.path,'">\n         ').concat(0===t?'<div class="'.concat(qo," ").concat(qr,'">').concat(i.lang.Line,"</div>"):"",'\n         <span class="').concat(Gr,'">').concat(e.path_name,"</span>\n       </div>");
}).join(""),o=e.map(function(e,t){return'<div class="'.concat(Wr," ").concat(e.active?Wo:"",'" type="quality" value="').concat(e.index,'">\n        ').concat(0===t?'<div class="'.concat(qo," ").concat(qr,'">').concat(i.lang.Quality,"</div>"):"",'\n         <span class="').concat(Gr,'">').concat(e.label,"</span>\n       </div>")}).join(""),a='<div class="'.concat(Ur,'">\n                   <div class="').concat(Hr,'">\n                    <div style="display: ').concat(t.length>1?"flex":"none",'">\n                       <div class="').concat(Vr,'">').concat(r,'</div>\n                     </div>\n                     <div style="display: ').concat(e.length>1?"flex":"none",'">\n                       <div class="').concat(Vr,'">').concat(o,"</div>\n                     </div>\n                   </div>\n                 </div>");return X(a)}},{key:"createQualityMenuitem",value:function(e,t,n){var i="",r="";e.length>1&&t.length>1?(i=e.map(function(e){return'<div class="'.concat(Wr," ").concat(e.active?Wo:"",'" type="quality" value="').concat(e.index,'">\n           <span class="').concat(Gr,'">').concat(e.label,"</span>\n         </div>")}).join(""),r=t.map(function(e){return'<div title="'.concat(e.path_name,'" class="').concat(Yr," ").concat(n.path===e.path?Wo:"",'" type="path" value="').concat(e.path,'">').concat(e.path_name,"</div>")}).join("")):i=t.length>1&&e.length<=1?t.map(function(e){return'<div class="'.concat(Wr," ").concat(n.path===e.path?Wo:"",'" type="path" value="').concat(e.path,'">\n           <span class="').concat(Gr,'">').concat(e.path_name,"</span>\n         </div>")}).join(""):e.map(function(e){return'<div class="'.concat(Wr," ").concat(e.active?Wo:"",'" type="quality" value="').concat(e.index,'">\n           <span class="').concat(Gr,'">').concat(e.label,"</span>\n         </div>")}).join("");var o='<div class="'.concat(Ur,'">\n      <div class="').concat(Jr,'" style="display: ').concat(t.length>1&&e.length>1?"block":"none",'">\n        <div>\n          ').concat(n.path_name,'\n          <span></span>\n        </div>\n        <div class="').concat(qo," ").concat(Xr,'">\n          ').concat(r,'\n        </div>\n      </div>\n      <div class="').concat(Hr,'">').concat(i,"</div>\n    </div>");return X(o)}},{key:"createPathMenuitem",value:function(e,t){var n=t.length>4&&!this.mobile,i=t.map(function(t){return'<div title="'.concat(t.path_name,'" class="').concat(Wr," ").concat(e===t.path?Wo:"",'" type="path" value="').concat(t.path,'">\n         <span class="').concat(Gr,'">').concat(t.path_name,"</span>\n       </div>")}).join("");return X('<div class="'.concat(Fr," ").concat(n?zr:"",'">\n                                <div class="').concat(Hr,'">').concat(i,"</div>\n                              </div>"))}},{key:"createTooltip",value:function(e,t,n,i){var r=this,o=$e(t,{trigger:"click",content:n,container:e,distance:0,"class":this.isMobile?"mudu-popup ".concat(ho):"mudu-popup",getMaxHeight:function(e){var t=e.height;return r.isMobile?t:t-70},wrapClick:i});return this.onPlayer(Qo,o.destroy),o}}]),t}(Qa),Fs="undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};ms="undefined"!=typeof window?window:"undefined"!=typeof Fs?Fs:"undefined"!=typeof self?self:{};var Hs=ms,Ws=ct,qs=Object.prototype.toString,Gs=ut(function(e,t){function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}}),zs=(Gs.left,Gs.right,Function.prototype.toString),Vs=/^\s*class\b/,Js=function(e){try{var t=zs.call(e);return Vs.test(t)}catch(n){return!1}},Xs=function(e){try{return!Js(e)&&(zs.call(e),!0)}catch(t){return!1}},Ys=Object.prototype.toString,$s="[object Function]",Ks="[object GeneratorFunction]",Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Zs=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(Qs)return Xs(e);if(Js(e))return!1;var t=Ys.call(e);return t===$s||t===Ks},eu=Object.prototype.toString,tu=Object.prototype.hasOwnProperty,nu=function(e,t,n){for(var i=0,r=e.length;i<r;i++)tu.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))},iu=function(e,t,n){for(var i=0,r=e.length;i<r;i++)null==n?t(e.charAt(i),i,e):t.call(n,e.charAt(i),i,e)},ru=function(e,t,n){for(var i in e)tu.call(e,i)&&(null==n?t(e[i],i,e):t.call(n,e[i],i,e))},ou=function(e,t,n){if(!Zs(t))throw new TypeError("iterator must be a function");var i;arguments.length>=3&&(i=n),"[object Array]"===eu.call(e)?nu(e,t,i):"string"==typeof e?iu(e,t,i):ru(e,t,i)},au=ou,su=function(e){return"[object Array]"===Object.prototype.toString.call(e)},uu=function(e){if(!e)return{};var t={};return au(Gs(e).split("\n"),function(e){var n=e.indexOf(":"),i=Gs(e.slice(0,n)).toLowerCase(),r=Gs(e.slice(n+1));"undefined"==typeof t[i]?t[i]=r:su(t[i])?t[i].push(r):t[i]=[t[i],r]}),t},cu=lt,lu=Object.prototype.hasOwnProperty,fu=pt,hu=pt;pt.XMLHttpRequest=Hs.XMLHttpRequest||gt,pt.XDomainRequest="withCredentials"in new pt.XMLHttpRequest?pt.XMLHttpRequest:Hs.XDomainRequest,ft(["get","put","post","patch","head","delete"],function(e){pt["delete"===e?"del":e]=function(t,n,i){return n=dt(t,n,i),n.method=e.toUpperCase(),vt(n)}}),fu["default"]=hu;var du=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.perfLogUrl=e._config.perfLogUrl,i.buffer_records=[],i.metric_records=[],i.provider_is_html5=!1,i.provider_name="",i.stream_url="",i.perf_id="",i.perf_paused=!0,Ne(i.player,l(l(i))).method("getMediaHeight").method("getMediaWidth").method("getMetrics"),i.perfLogUrl?fn()?f(i,l(l(i))):(i.calcTimer=new hs({gap:3e3}),i.recordTimer=new hs({gap:800}),i.onPlayer(Ko,i._onProviderInited.bind(l(l(i)))),i.onPlayer(Qo,i._onProviderRemoved.bind(l(l(i)))),i.recordTimer.on("tick",i._onRecordTimerTick.bind(l(l(i)))),i.recordTimer.on("start",i._onRecordTimerTick.bind(l(l(i)))),i.calcTimer.on("tick",i._onCalcTimerTick.bind(l(l(i)))),i):f(i,l(l(i)))}return s(t,e),r(t,[{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.recordTimer&&this.recordTimer.stop(),this.calcTimer&&this.calcTimer.stop()}},{key:"getMediaHeight",value:function(){return this.provider()?this.provider().getHeight():-1}},{key:"getMeidaWidth",value:function(){return this.provider()?this.provider().getWidth():-1}},{key:"getMetrics",value:function(){return this.provider()?this.provider().getMetrics():null}},{key:"recordMetrics",value:function(){this.metric_records.push(a({time:this._getTs(),pos:this.player.model.progress.getPosition()},this.getMetrics()))}},{key:"calcBufferTimes",value:function(){var e=this._getTs(),t=this.buffer_records.filter(function(t){return t.time>=e-3e3&&t.time<e});return this.buffer_records=this.buffer_records.filter(function(t){return t.time<e-3e4}),{times:t.filter(function(e){return"waiting"===e.type}).length,records:t}}},{key:"calcBuffer",value:function(){var e=this.player.model.progress.getBuffer(),t=e.reduce(function(e,t){return e+(t.end-t.start)},0);return{buffer:e,length:t}}},{key:"calcMetrics",value:function(){var e=this._getTs(),t=this.metric_records.filter(function(t){return t.time>=e-3e3&&t.time<=e});if(this.metric_records=this.metric_records.filter(function(t){return t.time<e-3e3}),0!==t.length){var n,i={},r=t[0];return L("undefined",r.fps)?L("undefined",r.mozParsedFrames)?L("undefined",r.webkitAudioDecodedByteCount)?n="other":(n="webkit",i=this._calcWebkitMetrics(t)):(n="moz",i=this._calcMozMetrics(t)):(n="flash",i=this._calcFlashMetrics(t)),a({},i,{type:n,records:t})}}},{key:"_calcFlashMetrics",value:function(e){var t={fps:0,bps:0},n=e.map(function(e){return e.fps}).filter(function(e){return e>0}),i=e.map(function(e){return e.bps}).filter(function(e){return e>0}),r=n.length,o=i.length;return n.forEach(function(e){t.fps+=e/r}),i.forEach(function(e){t.bps+=e/o}),t}},{key:"_calcWebkitMetrics",value:function(e){var t={fps:0,bps:0,decodedFps:0,droppedFps:0,audioBps:0,videoBps:0,recordsLength:e.length};if(1===e.length)return t;var n=e.map(function(e,t,n){return 0===t?{time:0}:{time:n[t].time-n[t-1].time,audioDecodedBytes:n[t].webkitAudioDecodedByteCount-n[t-1].webkitAudioDecodedByteCount,videoDecodedBytes:n[t].webkitVideoDecodedByteCount-n[t-1].webkitVideoDecodedByteCount,decodedFrames:n[t].webkitDecodedFrameCount-n[t-1].webkitDecodedFrameCount,droppedFrames:n[t].webkitDroppedFrameCount-n[t-1].webkitDroppedFrameCount}}).filter(function(e){return 0!==e.time}),i=n.map(function(e){var t=e.time/1e3,n={decodedFps:e.decodedFrames/t,droppedFps:e.droppedFrames/t,audioBps:e.audioDecodedBytes/t,videoBps:e.videoDecodedBytes/t,time:t};return n.fps=n.decodedFps+n.droppedFps,n.bps=n.audioBps+n.videoBps,n}),r=i.reduce(function(e,t){return e+t.time},0);return i.forEach(function(e){t.decodedFps=e.decodedFps*e.time/r+t.decodedFps,t.droppedFps=e.droppedFps*e.time/r+t.droppedFps,t.audioBps=e.audioBps*e.time/r+t.audioBps,t.videoBps=e.videoBps*e.time/r+t.videoBps}),t.fps=t.decodedFps+t.droppedFps,t.bps=t.audioBps+t.videoBps,t}},{key:"_calcMozMetrics",value:function(e){var t={fps:0,parsedFps:0,decodedFps:0,presentedFps:0,paintedFps:0,recordsLength:e.length};if(1===e.length)return t;var n=e.map(function(e,t,n){return 0===t?{time:0}:{time:n[t].time-n[t-1].time,parsedFrames:n[t].mozParsedFrames-n[t-1].mozParsedFrames,decodedFrames:n[t].mozDecodedFrames-n[t-1].mozDecodedFrames,presentedFrames:n[t].mozPresentedFrames-n[t-1].mozPresentedFrames,paintedFrames:n[t].mozPaintedFrames-n[t-1].mozPaintedFrames}}).filter(function(e){return 0!==e.time}),i=n.map(function(e){var t=e.time/1e3,n={parsedFps:e.parsedFrames/t,decodedFps:e.decodedFrames/t,presentedFps:e.presentedFrames/t,paintedFps:e.paintedFrames/t,time:t};return n.fps=n.parsedFps,n}),r=i.reduce(function(e,t){return e+t.time},0);return i.forEach(function(e){t.parsedFps=e.parsedFps*e.time/r+t.parsedFps,t.decodedFps=e.decodedFps*e.time/r+t.decodedFps,t.presentedFps=e.presentedFps*e.time/r+t.presentedFps,t.paintedFps=e.paintedFps*e.time/r+t.paintedFps}),t.fps=t.parsedFps,t}},{key:"_onProviderInited",value:function(e){var t=e.file;this.stream_url=t,this.provider_is_html5=this.player._provider.html5,this.provider_name=this.player._provider.name,this.perf_id=this.player._status.uniqId+"_"+ie(2),this.buffer_records=[],this.metric_records=[],this.onProvider(Xa,this._onWaiting.bind(this)),this.onProvider(Fa,this._onPlay.bind(this)),this.onProvider(Ha,this._onPause.bind(this))}},{key:"_onProviderRemoved",value:function(){this.stream_url="",this.provider_name="",this.buffer_records=[],this.metric_records=[],this.calcTimer&&this.calcTimer.stop(),this.recordTimer&&this.recordTimer.stop()}},{key:"_onCalcTimerTick",value:function(e){var t=e.isStop;e.duration;if(!t){var n=this.calcMetrics();if(n){var i=this.calcBufferTimes(),r=this.calcBuffer(),o=n.records[0],a=n.records[n.records.length-1],s=o&&o.pos,u=a&&a.pos-o.pos,c={fps:n.fps,bps:n.bps,waiting_times:i.times,buffer_length:r.length,decoded_fps:L("number",n.decodedFps)?n.decodedFps:-1,dropped_fps:L("number",n.droppedFps)?n.droppedFps:-1,audio_bps:L("number",n.audioBps)?n.audioBps:-1,video_bps:L("number",n.videoBps)?n.videoBps:-1,records_count:n.records.length,record_pos:s,record_time:u,metric_type:n.type,buffer_detail:JSON.stringify(r.buffer),metrics_detail:JSON.stringify(n),stream_url:this.stream_url,metric_id:this.perf_id,user_agent:navigator.userAgent,refer:window.location.href};_t(this.perfLogUrl,c)}}}},{key:"_onRecordTimerTick",value:function(e){var t=e.isStop;!t&&this.recordMetrics()}},{key:"_onWaiting",value:function(){this.buffer_records.push({type:"waiting",pos:this.player.model.progress.getPosition(),time:this._getTs()})}},{key:"_onPlay",value:function(){this.buffer_records.push({type:"play",pos:this.player.model.progress.getPosition(),time:this._getTs()}),this.recordTimer.start(),this.calcTimer.start()}},{key:"_onPause",value:function(){this.recordTimer.tick(),this.recordTimer.stop(),this.calcTimer.tick(),this.calcTimer.stop()}},{key:"_getTs",value:function(){return(new Date).getTime()}}]),t}(Qa),pu=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.onPlayer(Ko,i._onProviderInited.bind(l(l(i)))),Ne(i.player,l(l(i))).method("getTextTracks").method("setTextTrackEnable").method("setTextTrackDisable").method("getTextTrackCues").method("getTextTrackActiveCues"),i}return s(t,e),r(t,[{key:"getTextTracks",value:function(){return this.provider()?this.provider().getTextTracks():[]}},{key:"getTextTrackCues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.provider()?this.provider().getTextTrackCues(e):[]}},{key:"getTextTrackActiveCues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.provider()?this.provider().getTextTrackActiveCues(e):[]}},{key:"setTextTrackEnable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.provider())return this.provider().setTextTrackEnable(e)}},{key:"setTextTrackDisable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.provider())return this.provider().setTextTrackDisable(e)}},{key:"_onProviderInited",value:function(){this.player._config.textTrackDisable||(this.onProvider(Ya,this._onTexttrackAdd.bind(this)),this.onProvider($a,this._onTexttrackChange.bind(this)),this.onProvider(Ka,this._onCueChange.bind(this)))}},{key:"_onCueChange",value:function(e){var t=e.track,n=e.cues,i=e.activeCues;this.player.trigger(Oa,{track:t,cues:n,activeCues:i,type:Oa})}},{key:"_onTexttrackAdd",value:function(e){this.player.trigger(Ca,{track:e,type:Ca})}},{key:"_onTexttrackChange",value:function(e){this.player.trigger(Pa,{tracks:e,type:Pa})}}]),t}(Qa),vu=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i._fontSize=0,i._borderRadius=0,i._subtitleTrackIdx=-1,i._showSubtitles=e._config.showSubtitle,Ne(i.player,l(l(i))).method("getShowSubtitle").method("setShowSubtitle").method("setShowingTextTrackIndex").method("getShowingTextTrackIndex"),i.onPlayer(Qo,i._onProviderRemoved.bind(l(l(i)))),i.onPlayer(Ca,i._onTextTrackAdd.bind(l(l(i)))),i.onPlayer(Oa,i._onCueChange.bind(l(l(i)))),i}return s(t,e),r(t,[{key:"setShowSubtitle",value:function(e){e=!!e,e&&!this._isShowingSubtitles()&&this._showRandomSubtitle(),!e&&this._isShowingSubtitles()&&(this._clearShowingCues(),this._subtitleTrackIdx=-1),this._showSubtitles=e}},{key:"getShowSubtitle",value:function(){return this._showSubtitles}},{key:"setShowingTextTrackIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.player.model.textTrack.getTextTracks(),n=t[e];e!==this._subtitleTrackIdx&&n&&(this._subtitleTrackIdx>=0&&this.player.model.textTrack.setTextTrackDisable(this._subtitleTrackIdx),this._subtitleTrackIdx=e,this.player.model.textTrack.setTextTrackEnable(e))}},{key:"getShowingTextTrackIndex",value:function(){return this._subtitleTrackIdx}},{key:"_onCueChange",value:function(e){var t=e.track,n=e.activeCues,i=this.player.model.textTrack.getTextTracks(),r=i.indexOf(t);r===this._subtitleTrackIdx&&this._showActiveCues(n)}},{key:"_onTextTrackAdd",value:function(e){e.track;this._showSubtitles&&this._subtitleTrackIdx===-1&&this._showRandomSubtitle()}},{key:"_updateSubtitleStyle",value:function(){var e=this,t=[].slice.call(document.querySelectorAll(".".concat(Ai)));t.forEach(function(t){t.style.fontSize=e._fontSize+"px",t.style.borderRadius=e._borderRadius+"px"})}},{key:"_onProviderRemoved",value:function(){this._clearShowingCues(),this._subtitleTrackIdx=-1}},{key:"_isShowingSubtitles",value:function(){return this._showSubtitles&&this._subtitleTrackIdx!==-1}},{key:"_selectSubtitleTrack",value:function(){for(var e,t,n=this.player.model.textTrack.getTextTracks(),i=0;i<n.length;i++)"subtitles"!==n[i].kind&&"captions"!==n[i].kind||(e||(e={index:i,track:n[i]}),"hidden"!==n[i].mode||t||(t={index:i,track:n[i]}));return t||e||{index:-1,track:null}}},{key:"_clearShowingCues",value:function(){var e=document.querySelector(".".concat(Oi));e.innerHTML=""}},{key:"_showActiveCues",value:function(e){if(!e.length)return this._clearShowingCues();e.sort(function(e,t){var n=e.startTime-t.startTime;return n?n:t.endTime-e.endTime});var t="font-size: ".concat(this._fontSize,"px; border-radius: ").concat(this._borderRadius,"px"),n=e.map(function(e){var n='<span class="'.concat(Ai,'" style="').concat(t,'">&nbsp;').concat(e.text,"&nbsp;</span>");return n}),i=document.querySelector(".".concat(Oi));i.innerHTML=n.join("<br>")}},{key:"_setSubtitleSize",value:function(e){var t=.003125,n=.025,i=14,r=40,o=1.5;this._fontSize=Math.max(e*n,i),this._fontSize=Math.min(this._fontSize,r),this._borderRadius=Math.max(e*t,o)}},{key:"_showRandomSubtitle",value:function(){var e=this._selectSubtitleTrack(),t=e.index;return t!==-1&&(this.setShowingTextTrackIndex(t,!0),!0)}}]),t}(Qa),yu="myunSyncAvailable",gu="myunSyncMessage",mu=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i._available=!1,i._textTrackLabel=e._config.myunSyncTextTrackLabel,i._myunSyncTrack=null,i._myunMsgCue=null,i.onPlayer(Qo,i._onProviderRemoved.bind(l(l(i)))),i.onPlayer(Ca,i._onTextTrackAdd.bind(l(l(i)))),i.onPlayer(Oa,i._onCueChange.bind(l(l(i)))),Ne(i.player,l(l(i))).method("getMyunSyncAvailable"),i}return s(t,e),r(t,[{key:"getMyunSyncAvailable",value:function(){return this._available}},{key:"_onProviderRemoved",value:function(){this._myunSyncTrack=null,this._available=!1,this._myunMsgCue=null,this.player.trigger(yu,{type:yu,available:!1})}},{key:"_onTextTrackAdd",value:function(e){var t=e.track;if(t.label===this._textTrackLabel&&"subtitles"===t.kind){var n=this.player.model.textTrack.getTextTracks(),i=n.indexOf(t);this.player.model.textTrack.setTextTrackEnable(i),this._myunSyncTrack=t,this._available=!0,this.player.trigger(yu,{type:yu,available:!0})}}},{key:"_onCueChange",value:function(e){var t=this,n=e.activeCues,i=e.cues,r=e.track,o={};if(r===this._myunSyncTrack){if(0!==n.length)o=n.pop();else{if(!Zt())return;var a=Math.floor(this.player._container.querySelector("video").currentTime);if(o=i.find(function(e){return a===Math.floor(e.startTime)}),!o||o.startTime!==o.endTime)return}if(o!==this._myunMsgCue){this._myunMsgCue=o;var s=JSON.parse(o.text);Array.isArray(s)&&s[0].ts_ms&&s[0].content?s.forEach(function(e){setTimeout(function(){return t.player.trigger(gu,{type:gu,message:e.content||""})},e.ts_ms)}):this.player.trigger(gu,{type:gu,message:o.text,cue:o,cues:i})}}}}]),t}(Qa),_u={isAvailable:function(){return!(!window.screen||!window.screen.orientation)},lock:function(e){var t=window.screen.orientation.lock(e);return t},unlock:function(){window.screen.orientation.unlock()},getType:function(){return window.screen.orientation.type},getAngle:function(){return window.screen.orientation.angle},getOrientationObj:function(){return window.screen.orientation}},bu=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i._onFullscreen=i._onFullscreen.bind(l(l(i))),i._available=_u.isAvailable(),i._available&&i.onPlayer(ca,i._onFullscreen),i}return s(t,e),r(t,[{key:"_onFullscreen",value:function(e){var t=e.fullscreen;if(t){if(this.provider()){var n=this.provider().getWidth(),i=this.provider().getHeight(),r=oe(),o="";if(n&&i){var a=n/i,s=r.width/r.height;o=a>s?"landscape":"portrait",_u.lock(o)["catch"](N)}}}else _u.unlock()}}]),t}(Qa),wu=function(e){function t(e){var i;n(this,t),i=f(this,u(t).call(this,e)),i._is360loneWindow=!1,i._timer=0;var r=e._config.recordRestrict.enable360LoneWindowCloseStream,o=r&&($t()||Kt());return o&&i.oncePlayer(Ko,function(){e.timer.raf.on("tick",function(e){var t=e.isStop;t||i._onTimerTick()})}),i}return s(t,e),r(t,[{key:"_onTimerTick",value:function(){var e=this,t=this._detect360loneWindow(),n=this.player;this._is360loneWindow!==t&&(this._is360loneWindow=t,this._is360loneWindow?(clearTimeout(this._timer),this._timer=setTimeout(function(){e._showRecordRestrict360(),n.stop(),e._removeProviderElement()},20)):this._hideRecordREstrict360()),this._is360loneWindow&&(n.dom.controllerWrap.style.display="none")}},{key:"_showRecordRestrict360",value:function(){var e=this.player.dom.recordRestrict360,t="position:absolute;top:0;left:0;right:0;bottom:0;background-color:#000;z-index:9999;",n=Kt()?"":"top:50%;margin-top:-0.75em;";e.setAttribute("style",t),e.innerHTML='<div class="'.concat(qo,'" style="position:absolute;').concat(n,'width:100%;text-align:center;color:#fff;font-size:1.25em;line-height:1.5em;">视频禁止在小窗口播放，请退出小窗后刷新页面继续观看</div>')}},{key:"_hideRecordREstrict360",value:function(){var e=this.player.dom.recordRestrict360;e.setAttribute("style","")}},{key:"_detect360loneWindow",value:function(){var e=this.player._provider,t=this.player.dom,n=t.container;if(e){if(e.html5){var i=n.querySelector("div"),r=i.getAttribute("style")||"",o=r.indexOf("visibility:hidden")>=0&&r.indexOf("opacity:0")>=0;return o}if(e.flash){var a=document.querySelector("object"),s=a.style.width;return!!s}}return this._is360loneWindow}},{key:"_removeProviderElement",value:function(){var e=this.player.dom.videoWrap,t=e.querySelector("video"),n=e.querySelector("object");t&&e.removeChild(t),n&&e.removeChild(n)}},{key:"remove",value:function(){clearTimeout(this._timer),d(u(t.prototype),"remove",this).call(this)}}]),t}(Qa),ku=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i._enableDetect=!1,i._isLive=!1,i._streamType="",Ne(i.player,l(l(i))).method("setLiveEndDetect").method("getLiveEndDetect"),i.onPlayer(Ko,i._onProviderInit.bind(l(l(i)))),i.onPlayer(_a,i._onIdle.bind(l(l(i)))),i.onPlayer(xa,i._onError.bind(l(l(i)))),i.onPlayer(ma,i._onBuffer.bind(l(l(i)))),fn()&&i.onPlayer(va,i._onTime.bind(l(l(i)))),i}return s(t,e),r(t,[{key:"setLiveEndDetect",value:function(e){this._enableDetect=!!e}},{key:"getLiveEndDetect",value:function(){return this._enableDetect}},{key:"_onProviderInit",value:function(e){var t=e.isLive,n=e.type;this._isLive=t,this._streamType=n}},{key:"_shouldDetect",value:function(e){return e?this._enableDetect&&this._isLive&&this._streamType===e:this._enableDetect&&this._isLive}},{key:"_triggerEvt",value:function(){this.player.trigger(Aa,{type:Aa,liveEnd:!0})}},{key:"_onIdle",value:function(){(this._shouldDetect("flv")||this._shouldDetect("hls")||this._shouldDetect("m3u8"))&&this._triggerEvt()}},{key:"_onError",value:function(e){var t=e.fatal;(this._shouldDetect("m3u8")||this._shouldDetect("hls"))&&t&&this._triggerEvt()}},{key:"_onBuffer",value:function(){(this._shouldDetect("rtmp")||this._shouldDetect("hls")||this._shouldDetect("m3u8"))&&this._triggerEvt()}},{key:"_onTime",value:function(e){e.position;this._shouldDetect("")&&this._triggerEvt()}}]),t}(Qa),Su=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.onPlayer(Ko,i._onProviderInited.bind(l(l(i)))),i.onPlayer(Qo,i._onProviderRemoved.bind(l(l(i)))),i.msgList=null,i.lastMsgIdx=-2,i}return s(t,e),r(t,[{key:"_onTick",value:function(){if(this.msgList){for(var e,t=this.player.model.progress.getPosition(),n=0;n<this.msgList.length;n++){var i=this.msgList[n];if(t<i.time){e=n-1;break}}void 0===e&&(e=this.msgList.length-1),e!==this.lastMsgIdx&&(this.lastMsgIdx=e,this.player.trigger("playbackMessage",{type:"playbackMessage",prev:this.msgList[e]||null,next:this.msgList[e+1]||null}))}}},{key:"_onProviderInited",value:function(){var e=de.call(this.player);this.msgList=L("array",e.playbackMessages)?e.playbackMessages:null,this.msgList&&this.msgList.sort(function(e,t){return e.time-t.time})}},{key:"_onProviderRemoved",value:function(){this.msgList=null,this.lastMsgIdx=-2}}]),t}(Qa),Tu=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.isMobile=un(),i.dom=null,i.createDom(),i._playbackRate=1,i._init=null,i.setPlaybackRates(e._config.playbackRates),i.onPlayer(Ko,function(){null!==i._init&&(i._init=!0),i.initPlaybackRates()}),i.onPlayer(Qo,function(){i.resetState()}),i.onPlayer(ba,function(){i._init&&i.player.setPlaybackRate(i._playbackRate),i._init=!1}),i.qsPopup=$e(e.dom.playbackRate,{trigger:"click",content:i.dom,container:e.dom.container,"class":i.isMobile?"mudu-popup ".concat(ho):"mudu-popup",getMaxHeight:function(e){var t=e.height;return i.isMobile?t:t-70}}),i.qsPopup.show(),i.dom.addEventListener("click",i.qsPopup.hide),Ne(i.player,l(l(i))).method("setPlaybackRates").method("switchPlaybackRate"),i}return s(t,e),r(t,[{key:"setPlaybackRates",value:function(e){L("array",e)||(e=[]),this.rateList=e,this.playbackRatesLabel=this.player._config.playbackRatesLabel||this.lang.Speed;var t="idle"===this.player.getState();t||(this._init||(this._playbackRate=1,ge.call(this.player,"null"),this.player.setPlaybackRate(this._playbackRate)),this.initPlaybackRates())}},{key:"switchPlaybackRate",value:function(e){var t=this.player.getState();if(!("idle"===t||"error"===t||this.rateList.length<=0)){var n=this.rateList.findIndex(function(t){return e===t.playbackRate});if(n!==-1){var i=this.dom.querySelectorAll('[type="value"]');this.handlePlaybackRate(n,i)}}}},{key:"handlePlaybackRate",value:function(e,t){this._playbackRate=1*this.rateList[e].playbackRate,this.player.setPlaybackRate(this._playbackRate),ge.call(this.player,e),this.player.dom.playbackRate.innerHTML=this.rateList[e].label,this.rateList.map(function(n,i){J(t[i]).remove(Wo),J(t[i]).add(i===e?Wo:"")}),this.qsPopup.hide()}},{key:"createDom",value:function(){var e='<div class="'.concat(this.isMobile?Nr:"",'">\n      <div class="').concat(qo," ").concat(vr," ").concat(Br,'">\n        <div class="').concat(qo," ").concat(jr,'"></div>\n      </div>\n    </div>');this.dom=X(e)}},{key:"initPlaybackRates",value:function(){this.resetState(),this.updateRateItem(),this.updateControlRate(),this.updateSwitchText()}},{key:"resetState",value:function(){this.qsPopup.hide()}},{key:"updateControlRate",value:function(){var e=this.rateList.length,t=de.call(this.player).isLive,n=this.player.dom.container,i=t||e<1||!this.player._provider||!this.player._provider.isPlaybackRateSupported;J(n).remove(Mo),J(n).add(i?ko:So)}},{key:"updateSwitchText",value:function(){var e=this.rateList.filter(function(e){return e.active})[0];e?this.player.dom.playbackRate.innerHTML=e.label:this.player.dom.playbackRate.innerHTML=this.playbackRatesLabel}},{key:"updateRateItem",value:function(){var e=this,t=this.rateList.map(function(t,n){return'<div class="'.concat(qo," ").concat(Ir,'" type="value" value="').concat(n,'" data-content-before=').concat(e.playbackRatesLabel,'>\n          <div class="').concat(qo," ").concat(Lr,'">').concat(t.label,"</div>\n          </div>")}).join("");this.dom.querySelector(".".concat(Br)).innerHTML=t;for(var n=this.dom.querySelectorAll('[type="value"]'),i=this,r=function(e){var t=n[e],r=i.rateList[e].playbackRate;t.onclick=function(){i.handlePlaybackRate(e,n)},J(t).add(r===i._playbackRate?Wo:"")},o=0;o<n.length;o++)r(o)}}]),t}(Qa),Eu=(new $n,function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this,e)),i.config=i.player._config,i.container=i.player.dom.watermark,i.watermarkTimers=[],Ne(i.player,l(l(i))).method("setWatermark").method("clearWatermark"),i.subEvents(),i}return s(t,e),r(t,[{key:"handleResize",value:function(){if(this.player.dom){var e,t=this.player.dom.container,n=this.player.dom.watermark,i={width:t.offsetWidth,height:t.offsetHeight},r={width:n.offsetWidth,height:n.offsetHeight};switch(this.config.stretching){case"contain":e=wt(i,r);break;case"cover":e=bt(i,r);break;case"fill":e=kt(i);break;case"none":e=St(r);break;case"scale-down":e=Tt(i,r)}var o=e.width/r.width,a=e.height/r.height;ue(n,{transform:"scale(".concat(o,", ").concat(a===o?o:a,") translate(-50%, -50%)"),color:"#fff"})}}},{key:"subEvents",value:function(){var e=this;this.removeResizeEventListener=ce(this.player.dom.container,function(){e.handleResize()}),this.onPlayer(Qo,function(){e.clearWatermark(),e.w=e.h=0}),this.onPlayer(Ko,function(){e.player.off(ra,e.outerPlayEventListener),e.outerPlayEventListener=e.player.once(ra,function(){e.cancelEnsureMetrics&&e.cancelEnsureMetrics(),e.cancelEnsureMetrics=xt(e.player,function(t){var n=t.videoWidth,i=t.videoHeight;e.w=n,e.h=i,e.setWatermark()})})})}},{key:"setWatermark",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.watermark;if(this.config.watermark=e,this.w>1&&this.h>1){if(ue(this.container,{width:this.w+"px",height:this.h+"px"}),this.handleResize(),L("function",e))return this.customRender(e);L("object",e)&&(e=[e]),L("array",e)&&(this.clearWatermark(),this.render(e))}}},{key:"render",value:function(e){for(var t=0;t<e.length;t++){var n=this.resolveOptions(e[t]);switch(n.placement){case"top-left":this.genTopLeft(n);break;case"top-right":this.genTopRight(n);break;case"bottom-left":this.genBottomLeft(n);break;case"bottom-right":this.genBottomRight(n);break;case"repeat":this.genRepeat(n);break;case"random":this.genRandom(n)}}}},{key:"customRender",value:function(e){var t=this,n=e();n&&n.then&&n.then(function(e){e&&e instanceof HTMLElement&&(t.clearWatermark(),t.container.appendChild(e))})}},{key:"clearWatermark",value:function(){for(this.container.innerHTML="";this.watermarkTimers.length;)clearInterval(this.watermarkTimers.pop())}},{key:"resolveOptions",value:function(e){e=JSON.parse(JSON.stringify(e));var t=a({},Et(),e),n=this.w/t.designWidth;return t.fontSize*=n,t.marginTop*=n,t.marginRight*=n,t.marginBottom*=n,t.marginLeft*=n,t.cellSize.width*=n,t.cellSize.height*=n,t.imageSize?(L("number",t.imageSize.width)&&(t.imageSize.width*=n),L("number",t.imageSize.height)&&(t.imageSize.height*=n)):t.imageSize={width:"auto",height:"auto"},t}},{key:"genRandom",value:function(e){var t=this,n=this.resolveElement(e),i=function(){ue(n,{top:le(re(0,t.h),0,t.h-n.offsetHeight)+"px",left:le(re(0,t.w),0,t.w-n.offsetWidth)+"px"})},r=function(){if(e.autoRandom>0){var n=setInterval(function(){i()},e.autoRandom);t.watermarkTimers.push(n)}i()};"image"===e.type?n.onload=function(){r()}:r(),this.container.appendChild(n)}},{key:"genTopLeft",value:function(e){var t=this.resolveElement(e);ue(t,{top:e.marginTop+"px",left:e.marginLeft+"px"}),this.container.appendChild(t)}},{key:"genTopRight",value:function(e){var t=this.resolveElement(e);ue(t,{top:e.marginTop+"px",right:e.marginRight+"px"}),this.container.appendChild(t)}},{key:"genBottomLeft",value:function(e){var t=this.resolveElement(e);ue(t,{bottom:e.marginBottom+"px",left:e.marginLeft+"px"}),this.container.appendChild(t)}},{key:"genBottomRight",value:function(e){var t=this.resolveElement(e);ue(t,{bottom:e.marginBottom+"px",right:e.marginRight+"px"}),this.container.appendChild(t)}},{key:"genRepeat",value:function(e){for(var t=e.cellSize.width,n=e.cellSize.height,i=0;i<this.w/t;i++)for(var r=0;r<this.h/n;r++){var o=document.createElement("div");J(o).add("mudu-watermark-cell-wrap");var a=this.resolveElement(e);ue(o,{top:r*n+"px",left:i*t+"px",width:t+"px",height:n+"px",transform:"rotate(".concat(e.rotate,"deg)")}),o.appendChild(a),this.container.appendChild(o)}}},{key:"resolveElement",value:function(e){return"text"===e.type?this.resolveTextElement(e):"image"===e.type?this.resolveImageElement(e):void 0}},{key:"resolveTextElement",value:function(e){var t=document.createElement("span");return t.innerHTML=e.data,ue(t,{fontFamily:e.fontFamily,fontSize:e.fontSize+"px",color:e.color,opacity:e.opacity}),J(t).add("mudu-watermark-text"),t}},{key:"resolveImageElement",value:function(e){var t=document.createElement("img");return t.src=e.data,ue(t,{opacity:e.opacity,width:e.imageSize.width+"px",height:e.imageSize.height+"px"}),J(t).add("mudu-watermark-image"),t}},{key:"remove",value:function(){this.clearWatermark(),this.removeResizeEventListener&&this.removeResizeEventListener()}}]),t}(Qa)),xu={},Pu=function(e){function t(e){var i;return n(this,t),i=f(this,u(t).call(this)),i._container=document.getElementById(e),i.formatState(),i}return s(t,e),r(t,[{key:"formatState",value:function(){this._config={},this._config.containerId=this._container.id,this._status={uniqId:Q(),state:"idle",
focus:!1,isSetuped:!1,flashReady:!1,dragging:!1,index:"",containerFontSize:16},this._provider=null,this._extraProviders={},this.plugin={},this.dom={},this.timer={},this.model={}}},{key:"getUniqId",value:function(){return this._status.uniqId}},{key:"setup",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];en()&&console.log("[setup]",e),this._status&&this._status.isSetuped&&!this._container.querySelector(ki)&&(this.remove(),!n&&console.warn("muduPlayer().setup(): please don`t setup twice")),this.formatState();var i=Me(e),r=Oe(Re(),i);if(this._config=a({},this._config,r),this._config.uniqId&&(this._status.uniqId=this._config.uniqId),Dt.call(this),!n&&this.trigger(Jo),!L("array",this._config.playlist)&&!n)throw new Error("setup(options): you should give me a video url to play, through `options.file` or `options.playlist` array");this._status.lang=he(this._config.language,this._config.localization),this._status.localization=this._config.localization[this._status.lang],this._status.isSetuped=!0,!n&&this.trigger(ea),!n&&this.trigger("setup"),je.call(this),Pt.call(this),Ot.call(this),pe.call(this);var o=this._config.autoplay;return rt.call(this).then(function(){if(at.call(t),o)try{t.play()}catch(e){console.warn(e)}return Promise.resolve()})}},{key:"remove",value:function(){en()&&console.log("[remove]"),this._status&&this._status.isSetuped&&(At.call(this),Ct.call(this),jt.call(this),ot.call(this),Le.call(this),this._config=null,this._status=null,this._provider=null,this.dom=null,this.timer=null,this.model=null,this.trigger("remove"))}},{key:"stop",value:function(){en()&&console.log("[stop]"),ot.call(this)}}]),t}($n),Cu=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r.video_error_report=!1,r.TAG="DashjsProvider",r}return s(t,e),r(t,[{key:"loadFiles",value:function(){var e=new Vo(this.player._config.fileCdnPath+"/dash.js");return e.load()}},{key:"setup",value:function(e){var n=this,i=e.file;d(u(t.prototype),"setup",this).call(this,{file:i}),this.file=i,"auto"===this.player._config.preload?this.loadDash():this.oncePlayer("beforePlay",function(){return n.loadDash()})}},{key:"loadDash",value:function(){this.dashPlayer=window.dashjs.MediaPlayer().create(),this.dashPlayer.initialize(this.video,this.file,!1)}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.dashPlayer&&this.dashPlayer.reset()}}]),t}(ys);Cu.formats={"application/dash+xml":"dash"},Cu.types=["mpd","dash"],Cu.canPlay=function(e){var t=e.type;return Cu.types.indexOf(t)>=0?"maybe":""},Cu.isSupported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i},Cu.isFlash=function(e){return!1},Cu.isHTML5=function(e){return!0},Cu.HlsP2pisPlaybackRateSupported=function(){return!0},Cu.isPlaybackRateSupported=function(){return!0},Cu.version="2.9.0";var Ou=function(e){function t(e,i){var r;return n(this,t),i=i||{},r=f(this,u(t).call(this,e,i)),r.video_error_report=!1,r.TAG="FlvjsProvider",r}return s(t,e),r(t,[{key:"loadFiles",value:function(){var e=new Vo(this.player._config.fileCdnPath+"/flv.js");return e.load()}},{key:"setup",value:function(e){var n=this,i=e.file,r=e.isLive;d(u(t.prototype),"setup",this).call(this,{file:i}),this.onFlvError=function(e,t,i){var r="".concat(e,"_").concat(t);e===window.flvjs.ErrorTypes.NETWORK_ERROR&&(i.code&&(r+="_".concat(i.code)),i.msg&&(r+="_".concat(i.msg))),n.trigger(Va,{message:r,details:t,fatal:!0,data:{type:e,details:t,other:i}})};var o=this.option["flv.js"]||{};this.flvPlayer=window.flvjs.createPlayer({type:"flv",url:i,isLive:!!r},o),this.flvPlayer.attachMediaElement(this.getMediaElement()),this.flvPlayer.on(window.flvjs.Events.ERROR,this.onFlvError),"auto"===this.player._config.preload?this.flvPlayer.load():this.oncePlayer("beforePlay",function(){return n.flvPlayer.load()})}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.flvPlayer&&(this.flvPlayer.off(window.flvjs.Events.ERROR,this.onFlvError),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy())}}]),t}(ys);Ou.formats={"video/flv":"FLV","video/x-flv":"FLV"},Ou.canPlay=function(e){var t=e.type,n=e.isLive;return"flv"===t&&(!n||n&&Ou.isLiveSupported())?"maybe":""},Ou.canPlaySource=function(){},Ou.isSupported=function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},Ou.isLiveSupported=function(){var e=kn(),t=e.browser;try{var n=t.msedge&&(t.version.major>15||15===t.version.major&&t.version.minor>=15048),i=!t.msedge||n;return window.fetch&&window.ReadableStream&&i}catch(r){return!1}},Ou.isFlash=function(e){return!1},Ou.isHTML5=function(e){return!0},Ou.HlsP2pisPlaybackRateSupported=function(){return!0},Ou.isPlaybackRateSupported=function(){return!0},Ou.version="1.4.2";var Au=function(e){function t(e,i){var r;return n(this,t),i=i||{},r=f(this,u(t).call(this,e,i)),r.onHlsError=r.onHlsError.bind(l(l(r))),r.option=i,r.video_error_report=!1,r.onPlayer("buffer",r._onPlayerBuffer.bind(l(l(r)))),r.TAG="HlsjsProvider",r}return s(t,e),r(t,[{key:"loadFiles",value:function(){var e=new Vo(this.player._config.fileCdnPath+"/hls.js");return e.load()}},{key:"setup",value:function(e){var n=this,i=e.file;d(u(t.prototype),"setup",this).call(this,e),this.file=i,"auto"===this.player._config.preload?this.loadHls():this.oncePlayer(ba,function(){return n.loadHls()})}},{key:"play",value:function(){var e=this.player.getState(),n=this.getPosition();return"idle"===e&&n>0&&this.seek(0),d(u(t.prototype),"play",this).call(this)}},{key:"loadHls",value:function(){var e=Lt(),t=e.XHRLoader,n={fLoader:t},i=a({},this.option["hls.js"]||{},n),r=this.hlsPlayer=new window.Hls(i);r.subtitleDisplay=!1,r.loadSource(this.file),r.attachMedia(this.video),r.on(window.Hls.Events.ERROR,this.onHlsError)}},{key:"onHlsError",value:function(e,t){var n=t.type,i=t.details,r=t.fatal,o="".concat(n,"_").concat(i),a=[window.Hls.ErrorDetails.BUFFER_STALLED_ERROR,window.Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL];if(a.indexOf(i)===-1){if(n===window.Hls.ErrorTypes.NETWORK_ERROR){var s=t.networkDetails;s&&(s.status&&(o+="_".concat(s.status)),s.statusText&&(o+="_".concat(s.statusText)))}this.trigger(Va,{message:o,fatal:r,details:i,data:t})}}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.hlsPlayer&&(this.hlsPlayer.off(window.Hls.Events.ERROR,this.onHlsError),this.hlsPlayer.detachMedia(),this.hlsPlayer.destroy())}},{key:"_onPlayerBuffer",value:function(e){var t=e.oldState;if("playing"===t){var n=this.getPosition(),i=this.getDuration();i-n<1&&n>0&&i>2&&(this.pause(),this.trigger("ended"))}}}]),t}(ys);Au.formats={"application/vnd.apple.mpegurl":"hls"},Au.type=["m3u8","hls"],Au.canPlay=function(e){var t=e.type,n=e.isTimeShift;return(!n||!fn())&&Au.type.indexOf(t)>=0},Au.isHlsSupported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i},Au.isSupported=function(){return Au.isHlsSupported()},Au.isFlash=function(e){return!1},Au.isHTML5=function(e){return!0},Au.HlsP2pisPlaybackRateSupported=function(){return!0},Au.isPlaybackRateSupported=function(){return!0},Au.version="0.12.4";var Mu=function(e){function t(e,i){var r;return n(this,t),i=i||{},r=f(this,u(t).call(this,e,i)),r.onHlsError=r.onHlsError.bind(l(l(r))),r.option=i,r.video_error_report=!1,r.onPlayer("buffer",r._onPlayerBuffer.bind(l(l(r)))),r.TAG="HlsPeer5Provider",r}return s(t,e),r(t,[{key:"loadFiles",value:function(){var e=this.option.customID,t=new Vo("https://static.mudu.tv/peer5/peer5.js?id=".concat(e)).load(),n=new Vo("https://static.mudu.tv/peer5/peer5.hlsjs.loader.js").load(),i=new Vo(this.player._config.fileCdnPath+"/hls.js").load();return Promise.all([t,n,i])}},{key:"setup",value:function(e){var n=this,i=e.file;d(u(t.prototype),"setup",this).call(this,e),this.file=i,"auto"===this.player._config.preload?this.loadHls():this.oncePlayer(ba,function(){return n.loadHls()})}},{key:"play",value:function(){var e=this.player.getState(),n=this.getPosition();return"idle"===e&&n>0&&this.seek(0),d(u(t.prototype),"play",this).call(this)}},{key:"loadHls",value:function(){var e={fLoader:window.peer5&&window.peer5.HlsJsFragmentLoader,pLoader:window.peer5&&window.peer5.HlsJsPlaylistLoader},t=a({},this.option["hls.js"]||{},e),n=this.hlsPlayer=new window.Hls(t);n.subtitleDisplay=!1,n.loadSource(this.file),n.attachMedia(this.video),n.on(window.Hls.Events.ERROR,this.onHlsError)}},{key:"onHlsError",value:function(e,t){var n=t.type,i=t.details,r=t.fatal,o="".concat(n,"_").concat(i),a=[window.Hls.ErrorDetails.BUFFER_STALLED_ERROR,window.Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL];if(a.indexOf(i)===-1){if(n===window.Hls.ErrorTypes.NETWORK_ERROR){var s=t.networkDetails;s&&(s.status&&(o+="_".concat(s.status)),s.statusText&&(o+="_".concat(s.statusText)))}this.trigger(Va,{message:o,fatal:r,details:i,data:t})}}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.hlsPlayer&&(this.hlsPlayer.off(window.Hls.Events.ERROR,this.onHlsError),this.hlsPlayer.detachMedia(),this.hlsPlayer.destroy())}},{key:"_onPlayerBuffer",value:function(e){var t=e.oldState;if("playing"===t){var n=this.getPosition(),i=this.getDuration();i-n<1&&n>0&&i>2&&(this.pause(),this.trigger("ended"))}}}]),t}(ys);Mu.formats={"application/vnd.apple.mpegurl":"hls"},Mu.type=["m3u8","hls"],Mu.canPlay=function(e){var t=e.type,n=e.isTimeShift;return(!n||!fn())&&Mu.type.indexOf(t)>=0},Mu.isHlsPeer5Supported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i},Mu.isSupported=function(){return Mu.isHlsPeer5Supported()},Mu.isFlash=function(e){return!1},Mu.isHTML5=function(e){return!0},Mu.HlsP2pisPlaybackRateSupported=function(){return!0},Mu.isPlaybackRateSupported=function(){return!0},Mu.version="0.12.4";var Iu="mudu-player-video-hls-p2p",Ru=function(e){function t(e,i){var r;return n(this,t),i=i||{},r=f(this,u(t).call(this,e,i)),r.onHlsError=r.onHlsError.bind(l(l(r))),r.video_error_report=!1,r.onPlayer("buffer",r._onPlayerBuffer.bind(l(l(r)))),r.TAG="HlsXP2PProvider",r}return s(t,e),r(t,[{key:"loadFiles",value:function(){var e=new Vo(this.player._config.fileCdnPath+"/hlsp2p.min.js").load(),t=new Vo(this.player._config.fileCdnPath+"/hls.js").load();return Promise.all([e,t])}},{key:"setup",value:function(e){var n=this;this.destroyHlsp2p();var i=e.file,r=e.isLive;d(u(t.prototype),"setup",this).call(this,e),this.file=i,this._videoType=r?"LIVE":"VOD","auto"===this.player._config.preload?this.loadHls():this.oncePlayer(ba,function(){return n.loadHls()})}},{key:"play",value:function(){var e=this.player.getState(),n=this.getPosition();return"idle"===e&&n>0&&this.seek(0),d(u(t.prototype),"play",this).call(this)}},{key:"loadHls",value:function(){var e=a({},this.option["hls.js"]||{}),t=this.hlsPlayer=new window.Hls({config:e});t.subtitleDisplay=!1,t.loadSource(this.file),t.attachMedia(this.video),this.video.id=Iu,t.on(window.Hls.Events.ERROR,this.onHlsError),this.initHLSP2P()}},{key:"initHLSP2P",value:function(){var e=this;if(window.HLSP2P.isSupported()){var t=this.option,n=t.xp2pAppId,i=t.cloudAppId,r=t.channelId,o=t.enableMultiArea,a=void 0===o||o,s=/[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+\.?/.exec(this.file)[0],u={videoId:Iu,videoType:this._videoType,url:this.file,channelId:r,domain:s,xp2pAppId:n,cloudAppId:i,enableLocalNetworkShare:!0,enableMultiArea:a,p2pStartDelay:1e3};this.hlsp2p=window.HLSP2P.create(this.hlsPlayer,u),this.hlsp2p.on(window.HLSP2P.Events.Rollback,function(t){var n=t.reason;console.warn("p2p 回退 destroy, reason: ".concat(n)),e.hlsp2p.destroy(),e.player.trigger(Ra,n)}),this.hlsp2p.on("log",function(t){e.player.trigger("hlsp2pMsg",t)})}}},{key:"onHlsError",value:function(e,t){var n=t.type,i=t.details,r=t.fatal,o="".concat(n,"_").concat(i),a=[window.Hls.ErrorDetails.BUFFER_STALLED_ERROR,window.Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL];if(a.indexOf(i)===-1){if(n===window.Hls.ErrorTypes.NETWORK_ERROR){var s=t.networkDetails;s&&(s.status&&(o+="_".concat(s.status)),s.statusText&&(o+="_".concat(s.statusText)))}this.trigger(Va,{message:o,fatal:r,details:i,data:t})}}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.hlsPlayer&&(this.hlsPlayer.off(window.Hls.Events.ERROR,this.onHlsError),this.hlsPlayer.detachMedia(),this.hlsPlayer.destroy(),this.hlsPlayer=null),this.destroyHlsp2p()}},{key:"destroyHlsp2p",value:function(){this.hlsp2p&&(this.hlsp2p.destroy(),this.hlsp2p=null)}},{key:"_onPlayerBuffer",value:function(e){var t=e.oldState;if("playing"===t){var n=this.getPosition(),i=this.getDuration();i-n<1&&n>0&&i>2&&(this.pause(),this.trigger("ended"))}}}]),t}(ys);Ru.formats={"application/vnd.apple.mpegurl":"hls"},Ru.type=["m3u8","hls"],Ru.canPlay=function(e){var t=e.type,n=e.isTimeShift;return(!n||!fn())&&Ru.type.indexOf(t)>=0},Ru.isHlsSupported=function(){var e=window.MediaSource||window.WebKitMediaSource,t=window.SourceBuffer||window.WebKitSourceBuffer,n=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!n&&!!i},Ru.isXP2pSupported=function(){function e(){return!(!window.Array.from||!window.Array.prototype.find)}function t(){return!!window.crypto}function n(){return!(!window.MediaSource||!window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'))}function i(){return r()&&o()&&a()&&s()&&u()}function r(){return!!("WebSocket"in window||"MozWebSocket"in window)}function o(){return!("undefined"==typeof ArrayBuffer||"undefined"==typeof Uint8Array||"undefined"==typeof Uint16Array||"undefined"==typeof Uint32Array||"undefined"==typeof DataView)}function a(){return"URL"in window&&"createObjectURL"in URL}function s(){return!!window.RTCPeerConnection||!!(window.webkitRTCPeerConnection||window.mozRTCPeerConnection||window.msRTCPeerConnection||window.oRTCPeerConnection)}function u(){window.RTCPeerConnection||window.msRTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;return function(){var e=!1;try{var t=new n(null);e="createDataChannel"in t,t.close(),t=null}catch(n){}return e}()}return n()&&i()&&e()&&t()},Ru.isSupported=function(){return Ru.isHlsSupported()&&Ru.isXP2pSupported},Ru.isFlash=function(e){return!1},Ru.isHTML5=function(e){return!0},Ru.HlsP2pisPlaybackRateSupported=function(){return!0},Ru.isPlaybackRateSupported=function(){return!0},Ru.version="0.12.4";var Du=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this)),r.player=e,r.p_player_events=[],r.p_dom_events=[],r.option=i,r}return s(t,e),r(t,[{key:"onPlayer",value:function(e,t){this.player.on(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"oncePlayer",value:function(e,t){this.player.once(e,t),this.p_player_events.push({evt:e,fn:t})}},{key:"onDom",value:function(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];z(e,t,n),i&&this.p_dom_events.push({ele:e,evt:t,fn:n})}},{key:"remove",value:function(){var e=this;this.p_player_events.forEach(function(t){return e.player.off(t.evt,t.fn)}),this.p_dom_events.forEach(function(e){return V(e.ele,e.evt,e.fn)})}}]),t}($n);Du.isSupported=Vn,Du.defaultOptions={};var ju=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r.removeResizeListener=null,r}return s(t,e),r(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new Vo(this.player._config.fileCdnPath+"/danmaku.js");return n.load().then(function(){var n=e.player.dom.container.querySelector(".".concat(Ci)),i=new window.Danmaku(a({container:n},t));Ne(e,i).method("resize").method("show").method("hide").method("destroy").method("clear"),e.danmaku=i;var r=e.getCompaVisibility(),o=function(){L("function",e.resize)&&e.resize()},s=function(){e.danmaku.clear(),e.disableSend=document[r.hidden]};return e.onPlayer("play",function(){i.paused=!1}),e.onPlayer("pause",function(){i.paused=!0}),e.onPlayer("resize",o),e.onDom(window,"resize",o),e.removeResizeListener=ce(n,o),r&&e.onDom(document,r.visibilitychange,s),i})}},{key:"emit",value:function(e){this.disableSend||this.danmaku.emit(e)}},{key:"getCompaVisibility",value:function(){return L("undefined",document.hidden)?L("undefined",document.msHidden)?L("undefined",document.webkitHidden)?void 0:{hidden:"webkitHidden",visibilitychange:"webkitvisibilitychange"}:{hidden:"msHidden",visibilitychange:"msvisibilitychange"}:{hidden:"hidden",visibilitychange:"visibilitychange"}}},{key:"setSpeed",value:function(e){this.danmaku&&(this.danmaku.speed=e)}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.removeResizeListener&&this.removeResizeListener(),L("function",this.destroy)&&this.destroy()}}]),t}(Du);ju.isSupported=function(){var e=kn(),t=e.browser.msie&&8===e.browser.version.major;return!t};var Lu=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r.timer=new hs(a({},i,{gap:r.option.gap||6e4})),r.timer.on("tick",function(e){r.trigger("tick",e)}),r.onPlayer("play",function(){r.timer.start()}),r.onPlayer("pause",function(){r.timer.stop()}),r.onPlayer("idle",function(){r.timer.stop()}),r.onPlayer("complete",function(){r.timer.stop()}),r.onDom(document,"visibilitychange",function(){r.timer.tick()}),r.onDom(window,"pagehide",function(){r.timer.tick()}),r.onDom(window,"unload",function(){r.timer.tick()}),r.onDom(window,"beforeunload",function(){r.timer.tick()}),L("function",r.option.onTick)&&r.on("tick",r.option.onTick),r}return s(t,e),r(t,[{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.timer.stop()}}]),t}(Du);Lu.isSupported=zn;var Bu=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r.removeResizeListener=null,r}return s(t,e),r(t,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("init");var n=new Vo(this.player._config.fileCdnPath+"/danmaku-plugin.min.js");return n.load().then(function(){var n=e.player.dom.container.querySelector(".".concat(Ci)),i=new window.MuduDanmaku(n,t);Ne(e,i).method("resize").method("emit").method("destroy").method("clear").method("setSpeed").method("setRange"),e.danmaku=i;var r=function(){L("function",e.resize)&&e.resize()};return e.onPlayer("resize",r),e.onDom(window,"resize",r),e.removeResizeListener=ce(n,r),i})}},{key:"emit",value:function(e){console.log("emit"),this.danmaku.emit(e)}},{key:"remove",value:function(){d(u(t.prototype),"remove",this).call(this),this.removeResizeListener&&this.removeResizeListener(),L("function",this.destroy)&&this.destroy()}}]),t}(Du);Bu.isSupported=function(){var e=kn(),t=e.browser.msie&&10===e.browser.version.major;return!t};var Nu=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],i=0;i<e.rangeCount;i++)n.push(e.getRangeAt(i));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}},Uu="Copy to clipboard: #{key}, Enter",Fu=Nt,Hu=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r.logs=[],r.errorLogUrl=e._config.errorLogUrl,r.onPlayer(ia,function(e){var t=e.key;"copy-log"===t&&r.copyLog(),"upload-log"===t&&r.uploadLog()}),r.onPlayer("all",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=$();r.logs.push({type:e,time:o,args:n})}),r.onPlayer("error",function(e){var t=r.getOtherInfo();t.errorId=e.errorId,t.error=e,e.message===vs.Error.NotAllowedError&&r.player._provider&&r.player._provider.flash||r.uploadError(t)}),r}return s(t,e),r(t,[{key:"copyLog",value:function(){var e=this.getDebugInfo();Fu(JSON.stringify(e)),this.player.model.bezel["switch"](gi)}},{key:"uploadLog",value:function(){var e=this.errorLogUrl,t=this.getDebugInfo();e&&mt(e,t),this.player.model.bezel["switch"](gi)}},{key:"uploadError",value:function(e){var t=this.errorLogUrl;t&&mt(t,e)}},{key:"filterLog",value:function(){var e=[];return this.logs.forEach(function(t,n,i){var r=i[n-1],o=i[n+1];"time"===t.type&&r&&"time"===r.type&&o&&"time"===o.type||e.push(t)}),this.logs=e,e}},{key:"getDebugInfo",value:function(){var e=this.filterLog(),t=this.getOtherInfo();return t.log=e,t}},{key:"getOtherInfo",value:function(){var e=a({},this.player._status,{localization:""}),t=this.player._config,n=kn(),i={};this.player._provider&&(i.name=this.player._provider.name);var r=U(this.player.plugin),o=document.getElementById(this.player._config.containerId),s=o&&o.outerHTML,u={uniqId:e.uniqId,status:e,config:t,env:n,provider:i,plugins:r,ua:navigator.userAgent,version:"0.39.10",url:window.location.href,documentTitle:document.title,html:s,cookie:document.cookie};return u}}]),t}(Du);Hu.isSupported=zn,Hu.defaultOptions={};var Wu=function(e){function t(e,i){var r;return n(this,t),r=f(this,u(t).call(this,e,i)),r.player=e,r.option=i,r.TAG="vrProvider",r.inited=!1,r.isFullscreen=!1,r}return s(t,e),r(t,[{key:"loadFiles",value:function(){var e=new Vo("https://static.mudu.tv/mudu-vr-player/v0.1.0/mudu-vr-player.umd.js");return e.load()}},{key:"setup",value:function(){this.inited&&this.destroy(),this.initVRPlayer()}},{key:"initVRPlayer",value:function(){var e=this;this.inited=!0,this.containerElem=this.player.dom.videoWrap,this.videoElem=this.player.dom.videoWrap.querySelector("video"),this.containerElem.classList.add(To),this.vrPlayer=new window.muduVRPlayer.VRPlayer(this.containerElem,this.videoElem,a({},this.option,{onSuccess:function(){return e._onVRInitSuccess()}})),this.subEvents()}},{key:"destroy",value:function(){this.vrPlayer.destroy(),this.inited=!1}},{key:"subEvents",value:function(){var e=this;this.onDom(this.containerElem,"click",function(e){e.stopPropagation()}),this.onDom(window,"resize",function(){e.vrPlayer.resize()}),this.onPlayer(ca,function(t){setTimeout(function(){e.vrPlayer.resize(e.containerElem.clientWidth,e.containerElem.clientHeight)},0)}),this.oncePlayer(Qo,function(t){e.destroy()})}},{key:"_onVRInitSuccess",value:function(){this.videoElem.classList.add(Ti),document.body.appendChild(this.videoElem),"function"==typeof this.option.onSuccess&&this.option.onSuccess()}}]),t}(ys);Wu.isSupported=function(){return!0},Wu.defaultOptions={projection:"sphere"},Wu.canPlay=function(e){return"flash"!==e},Wu.isLiveSupported=function(){return!0};var qu=0,Gu={};return Ut.VERSION="0.39.10",Ut.setDefaultOptions=De,Ut.getDefaultOptions=Re,Ut.registerProvider=me,Ut.registerExtraProvider=_e,Ut.getProvider=ke,Ut.getExtraProvider=Se,Ut.getProviders=be,Ut.getExtraProviders=we,Ut.chooseProvider=Pe,Ut.registerPlugin=Mt,Ut.getPlugin=Rt,Ut.getPlugins=It,Ut.utils={formatPlaylist:Ae,Timer:hs,ScriptLoader:Vo,browser:Sn,Cache:it,delegates:Ne},Ut.registerExtraProvider("vr",Wu),Ut.registerProvider("html5",ys),Ut.registerProvider("dash",Cu),Ut.registerProvider("flvjs",Ou),Ut.registerProvider("hlsjs",Au),Ut.registerProvider("hlsPeer5",Mu),Ut.registerProvider("tcPlayerLite",gs),Ut.registerProvider("flash",vs),Ut.registerProvider("hlsXp2p",Ru),Ut.registerPlugin("plugin",Du),Ut.registerPlugin("tick",Lu),Ut.registerPlugin("danmaku",ju),Ut.registerPlugin("muduDanmaku",Bu),Ut.registerPlugin("log",Hu),Ut})}).call(t,function(){return this}())},function(e,t){function n(e,t){return this instanceof n?(this.proto=e,this.target=t,this.methods=[],this.getters=[],this.setters=[],void(this.fluents=[])):new n(e,t)}e.exports=n,n.prototype.method=function(e){var t=this.proto,n=this.target;return this.methods.push(e),t[e]=function(){return this[n][e].apply(this[n],arguments)},this},n.prototype.access=function(e){return this.getter(e).setter(e)},n.prototype.getter=function(e){var t=this.proto,n=this.target;return this.getters.push(e),t.__defineGetter__(e,function(){return this[n][e]}),this},n.prototype.setter=function(e){var t=this.proto,n=this.target;return this.setters.push(e),t.__defineSetter__(e,function(t){return this[n][e]=t}),this},n.prototype.fluent=function(e){var t=this.proto,n=this.target;return this.fluents.push(e),t[e]=function(t){return"undefined"!=typeof t?(this[n][e]=t,this):this[n][e]},this}},function(e,t,n){var i=(n(1),n(2),"https://mudu.tv"),r="https://mudu.tv",o="https://liveapi.mudu.tv",a=[];switch(window.MUDU_SERVER_ENV){case"TEST":i="https://test.mudu.tv",r="https://test.mudu.tv",o="https://testsvc-3.mudu.tv";break;case"UAT":i="https://mdl-live.uat.mudu.tv/",r="https://mdl-live.uat.mudu.tv/",o="https://mdl-liveapi.uat.mudu.tv";break;case"TX_PROD":case"PROD":default:i="https://mudu.tv",r="https://mudu.tv",o="https://liveapi.mudu.tv"}var s=i+"/?c=activity&a=ajaxActBaseInfo",u=i+"/?c=activity&a=ajaxSendPhoneVerify",c=i+"/?c=activity&a=ajaxSaveSignupRecord",l=i+"/?c=activity&a=ajaxGetReplies",f=i+"/?c=activity&a=ajaxGetTopics",h=i+"/?c=activity&a=ajaxCreateTopic",d=i+"/?c=sociallogin&a=sdklogin",p="/?c=sociallogin&a=sdklogin",v=i+"/?c=activity&a=ajaxGetRedpackStatus",y=i+"/?c=activity&a=ajaxGetRedpackRecord",g=i+"/?c=activity&a=ajaxSnatchRedpack",m=i+"/?c=user&a=ajaxGetDonateMessage",_=i+"/activity.php?a=AjaxGiftDetail",b=i+"/user.php?a=donate",w="/user.php?a=donate",k=i+"/user.php?a=ajaxFreePropDonate",S=i+"/?c=document&a=ajaxGetPageImage",T=r+"/user/api/session/start",E=r+"/user/api/user_info/",x=r+"/user/api/login/anonymous",P=r+"/user/api/login_by_other",C=["qq","weibo","weixin","openweixin","mingdao","weimob"],O=/<img src='\/assets\/activity\/images\/face\/(\d+)\.png' width='18' height='18'\/>/g,A=/\[em_([0-9]*)\]/g,M={origin:"原片","480p":"标清","720p":"高清"},I={DOC:9,CHAT:1};e.exports={customForceBookmarkUin:a,API_DOMAIN:i,API_DOMAIN_V2:o,BASE_INFO_URL:s,MENU_TYPE:I,SIGNUP_SENDSMS_URL:u,SIGNUP_SUBMIT_URL:c,TOPIC_GET_REPLY_URL:l,TOPIC_GET_URL:f,TOPIC_CREATE_URL:h,SOCIAL_LOGIN_URL:d,RELATIVE_SOCIAL_LOGIN_URL:p,REDPACK_STATUS_URL:v,REDPACK_RECORD_URL:y,REDPACK_SNATCH_URL:g,CASH_DONATE_DETAIL_URL:m,GIFT_DETAIL_URL:_,DONATE_URL:b,RELATIVE_DONATE_URL:w,FREE_GIFT_DONATE_URL:k,PPT_GET_IMG_BY_PAGE_URL:S,COMMENT_IMAGE_NUM_REG:O,COMMENT_TEXT_REG:A,SOCIAL_LOGIN_TYPE_ARRAY:C,AUTH_DOMAIN:r,USER_AUTH_START_SESSION:T,USER_AUTH_GET_USER_INFO:E,USER_AUTH_ANONYMOUS:x,USER_AUTH_LOGIN_BY_OTHER:P,STREAM_MULTI_RATE:M}},function(e,t,n){!function(){var t=n(119),i=n(120).utf8,r=n(121),o=n(120).bin,a=function(e,n){e.constructor==String?e=n&&"binary"===n.encoding?o.stringToBytes(e):i.stringToBytes(e):r(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var s=t.bytesToWords(e),u=8*e.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[u>>>5]|=128<<u%32,s[(u+64>>>9<<4)+14]=u;for(var p=a._ff,v=a._gg,y=a._hh,g=a._ii,d=0;d<s.length;d+=16){var m=c,_=l,b=f,w=h;c=p(c,l,f,h,s[d+0],7,-680876936),h=p(h,c,l,f,s[d+1],12,-389564586),f=p(f,h,c,l,s[d+2],17,606105819),l=p(l,f,h,c,s[d+3],22,-1044525330),c=p(c,l,f,h,s[d+4],7,-176418897),h=p(h,c,l,f,s[d+5],12,1200080426),f=p(f,h,c,l,s[d+6],17,-1473231341),l=p(l,f,h,c,s[d+7],22,-45705983),c=p(c,l,f,h,s[d+8],7,1770035416),h=p(h,c,l,f,s[d+9],12,-1958414417),f=p(f,h,c,l,s[d+10],17,-42063),l=p(l,f,h,c,s[d+11],22,-1990404162),c=p(c,l,f,h,s[d+12],7,1804603682),h=p(h,c,l,f,s[d+13],12,-40341101),f=p(f,h,c,l,s[d+14],17,-1502002290),l=p(l,f,h,c,s[d+15],22,1236535329),c=v(c,l,f,h,s[d+1],5,-165796510),h=v(h,c,l,f,s[d+6],9,-1069501632),f=v(f,h,c,l,s[d+11],14,643717713),l=v(l,f,h,c,s[d+0],20,-373897302),c=v(c,l,f,h,s[d+5],5,-701558691),h=v(h,c,l,f,s[d+10],9,38016083),f=v(f,h,c,l,s[d+15],14,-660478335),l=v(l,f,h,c,s[d+4],20,-405537848),c=v(c,l,f,h,s[d+9],5,568446438),h=v(h,c,l,f,s[d+14],9,-1019803690),f=v(f,h,c,l,s[d+3],14,-187363961),l=v(l,f,h,c,s[d+8],20,1163531501),c=v(c,l,f,h,s[d+13],5,-1444681467),h=v(h,c,l,f,s[d+2],9,-51403784),f=v(f,h,c,l,s[d+7],14,1735328473),l=v(l,f,h,c,s[d+12],20,-1926607734),c=y(c,l,f,h,s[d+5],4,-378558),h=y(h,c,l,f,s[d+8],11,-2022574463),f=y(f,h,c,l,s[d+11],16,1839030562),l=y(l,f,h,c,s[d+14],23,-35309556),c=y(c,l,f,h,s[d+1],4,-1530992060),h=y(h,c,l,f,s[d+4],11,1272893353),f=y(f,h,c,l,s[d+7],16,-155497632),l=y(l,f,h,c,s[d+10],23,-1094730640),c=y(c,l,f,h,s[d+13],4,681279174),h=y(h,c,l,f,s[d+0],11,-358537222),f=y(f,h,c,l,s[d+3],16,-722521979),l=y(l,f,h,c,s[d+6],23,76029189),c=y(c,l,f,h,s[d+9],4,-640364487),h=y(h,c,l,f,s[d+12],11,-421815835),f=y(f,h,c,l,s[d+15],16,530742520),l=y(l,f,h,c,s[d+2],23,-995338651),c=g(c,l,f,h,s[d+0],6,-198630844),h=g(h,c,l,f,s[d+7],10,1126891415),f=g(f,h,c,l,s[d+14],15,-1416354905),l=g(l,f,h,c,s[d+5],21,-57434055),c=g(c,l,f,h,s[d+12],6,1700485571),h=g(h,c,l,f,s[d+3],10,-1894986606),f=g(f,h,c,l,s[d+10],15,-1051523),l=g(l,f,h,c,s[d+1],21,-2054922799),c=g(c,l,f,h,s[d+8],6,1873313359),h=g(h,c,l,f,s[d+15],10,-30611744),f=g(f,h,c,l,s[d+6],15,-1560198380),l=g(l,f,h,c,s[d+13],21,1309151649),c=g(c,l,f,h,s[d+4],6,-145523070),h=g(h,c,l,f,s[d+11],10,-1120210379),f=g(f,h,c,l,s[d+2],15,718787259),l=g(l,f,h,c,s[d+9],21,-343485551),c=c+m>>>0,l=l+_>>>0,f=f+b>>>0,h=h+w>>>0}return t.endian([c,l,f,h])};a._ff=function(e,t,n,i,r,o,a){var s=e+(t&n|~t&i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._gg=function(e,t,n,i,r,o,a){var s=e+(t&i|n&~i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._hh=function(e,t,n,i,r,o,a){var s=e+(t^n^i)+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._ii=function(e,t,n,i,r,o,a){var s=e+(n^(t|~i))+(r>>>0)+a;return(s<<o|s>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var i=t.wordsToBytes(a(e,n));return n&&n.asBytes?i:n&&n.asString?o.bytesToString(i):t.bytesToHex(i)}}()},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],i=0;i<e.length;i+=3)for(var r=e[i]<<16|e[i+1]<<8|e[i+2],o=0;o<4;o++)8*i+6*o<=8*e.length?n.push(t.charAt(r>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],i=0,r=0;i<e.length;r=++i%4)0!=r&&n.push((t.indexOf(e.charAt(i-1))&Math.pow(2,-2*r+8)-1)<<2*r|t.indexOf(e.charAt(i))>>>6-2*r);return n}};e.exports=n}()},function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));
return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}/*!
	 * Determine if an object is a Buffer
	 *
	 * @author   Feross Aboukhadijeh <https://feross.org>
	 * @license  MIT
	 */
e.exports=function(e){return null!=e&&(n(e)||i(e)||!!e._isBuffer)}},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Timer=n(123)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(103)),o=i(r),a=n(110),s=i(a),u=n(111),c=i(u);e.exports=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Timer.TimePassed",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,s["default"])(this,e),this.param=i,this.task=null,this.topic=n,this.dotTime=(new Date).getTime(),this.uuid=_scope.Utils.Guid(),_scope.MsgBus.On("timer.stop",function(e){"function"==typeof e&&e(t)&&t.stop()})}return(0,c["default"])(e,[{key:"start",value:function(){this.stop(),function(e){e.task=setTimeout(function t(){var n=e._passedTime();n>0&&_scope.MsgBus.Pub(e.topic,(0,o["default"])({},e.param,{duration:n})),e.task=setTimeout(t,e.param.timegap||1e3*_scope.Utils.GetRandomNum(10,60))},e.param.timegap||1e3*_scope.Utils.GetRandomNum(60,10))}(this)}},{key:"stop",value:function(){if(!this.task)return void this._passedTime();clearTimeout(this.task),this.task=null;var e=this._passedTime();e>0&&_scope.MsgBus.Pub(this.topic,(0,o["default"])({},this.param,{duration:e}))}},{key:"_passedTime",value:function(){var e=(new Date).getTime()-this.dotTime;return this.dotTime=(new Date).getTime(),parseInt(e/1e3)}}]),e}()},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.DB=n(125)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(110)),o=i(r),a=n(111),s=i(a),u=function(){function e(){(0,o["default"])(this,e),this.datas={}}return(0,s["default"])(e,[{key:"Set",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={key:e,value:t,expire:i};this.datas[e]=r,i>0&&setTimeout(function(){_scope.MsgBus.Pub("Data.Timeout."+e,r),n.Del(e)},1e3*i),_scope.MsgBus.Pub("Data.Set."+e,r)}},{key:"Get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"undefined"==typeof this.datas[e]?t:this.datas[e].value}},{key:"Del",value:function(e){"undefined"!=typeof this.datas[e]&&(_scope.MsgBus.Pub("Data.Del."+e,this.datas[e]),delete this.datas[e],this.datas[e]=void 0)}}]),e}();e.exports=new u},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Feature=n(127)}).call(t,function(){return this}())},function(e,t,n){n(1),n(2);e.exports={Room:function(e,t){_scope.MsgBus.Sub("SendObj.Room",function(n){e.Room=n,"function"==typeof t&&t(n)})},User:function(e,t){_scope.MsgBus.Sub("SendObj.User",function(n){e.User=n,"function"==typeof t&&t(n)})},Comment:function(e,t){_scope.MsgBus.Sub("SendObj.Comment",function(n){e.Comment=n,"function"==typeof t&&t(n)})},LuckyDraw:function(e,t){_scope.MsgBus.Sub("SendObj.LuckyDraw",function(n){e.LuckyDraw=n,"function"==typeof t&&t(n)})},PPT:function(e,t){_scope.MsgBus.Sub("SendObj.PPT",function(n){e.PPT=n,"function"==typeof t&&t(n)})},Vote:function(e,t){_scope.MsgBus.Sub("SendObj.Vote",function(n){e.Vote=n,"function"==typeof t&&t(n)})},Barrage:function(e,t){_scope.MsgBus.Sub("SendObj.Barrage",function(n){e.Barrage=n,"function"==typeof t&&t(n)})},Signup:function(e,t){_scope.MsgBus.Sub("SendObj.Signup",function(n){e.Signup=n,"function"==typeof t&&t(n)})},Topic:function(e,t){_scope.MsgBus.Sub("SendObj.Topic",function(n){e.Topic=n,"function"==typeof t&&t(n)})},Redpack:function(e,t){_scope.MsgBus.Sub("SendObj.Redpack",function(n){e.Redpack=n,"function"==typeof t&&t(n)})},Reward:function(e,t){_scope.MsgBus.Sub("SendObj.Reward",function(n){e.Reward=n,"function"==typeof t&&t(n)})},Signin:function(e,t){_scope.MsgBus.Sub("SendObj.Signin",function(n){e.Signin=n,"function"==typeof t&&t(n)})},Appointment:function(e,t){_scope.MsgBus.Sub("SendObj.Appointment",function(n){e.Appointment=n,"function"==typeof t&&t(n)})},Notice:function(e,t){_scope.MsgBus.Sub("SendObj.Notice",function(n){e.Notice=n,"function"==typeof t&&t(n)})},EventBus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""!=t&&(t+="."),e.On=function(e,n){return _scope.MsgBus.Sub(t+e,n)},e.Off=function(e){_scope.MsgBus.UnSub(e)},e.Fire=function(e,n){_scope.MsgBus.Pub(t+e,n)}}}},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Room=n(129)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(83)),o=i(r),a=n(104),s=i(a),u=n(130),c=i(u),l=n(135),f=i(l),h=n(103),d=i(h),p=n(139),v=i(p),y=n(110),g=i(y),m=n(111),_=i(m),b=n(141),w=i(b),k=n(142),S=n(144),T=n(117),E=n(145),x=n(118),P={INTRANET_ONLY:1,OVERSEA_ONLY:2,AUTO_SWITCH_BY_IP:3,NULL:0},C="#MDLSDK"+w["default"];e.exports=function(){function e(t){(0,g["default"])(this,e),_scope.Feature.EventBus(this),_scope.Feature.User(this),_scope.Feature.Comment(this),_scope.Feature.LuckyDraw(this),_scope.Feature.PPT(this),_scope.Feature.Barrage(this),_scope.Feature.Vote(this),_scope.Feature.Signup(this),_scope.Feature.Topic(this),_scope.Feature.Redpack(this),_scope.Feature.Reward(this),_scope.Feature.Signin(this),_scope.Feature.Appointment(this),_scope.Feature.Notice(this),this.act_id=t.roomId,this.actHashId=t.roomHashId,this.tracker=E(function(){_scope.MsgBus.Pub("Tracker.Init.Over")}),_scope.DB.Set("Room",this),this._msgbusDestroy(),_scope.MsgBus.OnMultiOnce(["Room.StreamUpdate.Over","Room.TrailerUpdate.Over"],function(){_scope.MsgBus.Pub("Room.Init.Over")}),this.mapStreamToPlaylistItem={},this.mapStreamToTrailerItems={},this.mainStream="",this.allStreams=[],this.originMainStream={}}return(0,_["default"])(e,[{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.Sub("Destroy",function(){_scope.MsgBus.UnSubAll("User.WatchTime"),e.allStreams.forEach(function(e){rop.Remove("stream-event-"+e)}),_scope.MsgBus.UnSubAll("Room.StreamEvent"),_scope.MsgBus.UnSubAll("Room.ViewNumChanged"),_scope.MsgBus.UnSubAll("Room.Init.Error"),_scope.MsgBus.UnSubAll("SendObj.PPT"),_scope.MsgBus.UnSubAll("SendObj.Signup"),_scope.MsgBus.UnSubAll("SendObj.Signin"),_scope.MsgBus.UnSubAll("SendObj.Topic"),_scope.MsgBus.UnSubAll("SendObj.Reward"),_scope.MsgBus.UnSubAll("SendObj.Comment"),_scope.MsgBus.UnSubAll("Room.Init.Over"),_scope.MsgBus.UnSubAll("Room.StreamUpdate.Over"),_scope.MsgBus.UnSubAll("Room.TrailerUpdate.Over"),_scope.MsgBus.UnSubAll("User.Offline"),e._destroy(),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"_startSeesion",value:function(e,t){var n=this,i={project_id:t,screen_resolution:(window.screen.width||0)+"x"+(window.screen.height||0),language:(navigator.language||"").toLowerCase().substr(0,2),from_label:this.tracker.getOrigintype(),from_value:"",location:window.location.href+C,service_provider:"",title:this.name,page:this.tracker.getPage()};Fetcher.Post(T.USER_AUTH_START_SESSION+"?act_id="+e,(0,v["default"])(i),function(t,i){if(403===i)n._login_by_anonymous(e);else{t=JSON.parse(t);var r={session_id:t.session_id,token:t.token,user:t.user};n._updateUserAuth(r),n._updateUserPhone(r)}},(0,d["default"])({"Content-Type":"application/json"},this._tokenHeader))}},{key:"_updateUserAuth",value:function(e){e.token&&(this._tokenHeader={authorization:"Bearer "+e.token}),e.session_id&&(this._sessionHeader={MUDUTVSESSIONID:e.session_id}),_scope.DB.Set("requestHeader",{session:this._sessionHeader,token:this._tokenHeader})}},{key:"_updateUserPhone",value:function(e){var t={act_id:this.actHashId,event:"assign",session_id:e.session_id};Fetcher.Post(T.API_DOMAIN+"/user/api/should_update_useract_phone",(0,v["default"])(t),function(t){var n="";try{var i=JSON.parse(t);1e3===i.errcode&&(n=i.phone)}catch(r){console.error(r)}_scope.MsgBus.Pub("User.StartSeesionSuccess",(0,d["default"])({},e,{user:(0,d["default"])({},e.user,{phone:n})}))},(0,d["default"])({"Content-Type":"application/json"},this._tokenHeader))}},{key:"_login_by_anonymous",value:function(e){var t=this,n=(0,v["default"])({nick:_scope.Utils.GetCookie("user")||"",avatar:_scope.Utils.GetCookie("avatar")||"",session_data:{screen_resolution:(window.screen.width||0)+"x"+(window.screen.height||0),language:(navigator.language||"").toLowerCase().substr(0,2),from_label:this.tracker.getOrigintype(),from_value:"",title:this.name,page:this.tracker.getPage()}});Fetcher.Post(T.USER_AUTH_ANONYMOUS+"?act_id="+e,n,function(e){e=JSON.parse(e);var n={session_id:e.session_id,token:e.token,user:e.user};t._updateUserAuth(n),t._updateUserPhone(n)},{"Content-Type":"application/json"})}},{key:"_subEvent",value:function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=t[n+1];if(i.position<=e&&(!r||r.position>e))return i.url}return""}var t=this,n=this;_scope.MsgBus.Sub("User.Offline",function(){t.restartingSession||(t._startSeesion(t.actHashId,t.projectId),t.restartingSession=!0)}),_scope.MsgBus.Sub("User.WatchTime",function(e){t.WatchTime(e)}),_scope.MsgBus.Sub("Player.pptTimer",function(t){if(n.trailer&&n.trailer.m3u8){var i=t.getPlayFile();if(i.filter(function(e){return e.file.replace("s://","://")===n.trailer.m3u8.replace("s://","://")})[0]){var r=t.getPosition(),o=e(r,n.trailer.ppt_list);o&&o!==n.trailer.currentUrl&&(n.trailer.currentUrl=o,_scope.MsgBus.Pub("PPT.trailer.changed",{currentUrl:o,open:n.trailer.open,player:t.player,position:r}))}}}),_scope.MsgBus.Sub("Room.TrailerUpdate.Over",function(){var e=t.mainStream;t.mainStream||1!==(0,f["default"])(t.mapStreamToTrailerItems).length||(e=(0,f["default"])(t.mapStreamToTrailerItems)[0]),e&&t._getTrailerPPtList(t.mapStreamToTrailerItems[e].video_id)})}},{key:"Init",value:function(){this.platform=function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n="pc",i=0;i<t.length;i++)if(e.indexOf(t[i])>0){n="mobile";break}return n}(),this.InitData()}},{key:"WatchTime",value:function(e){var t=e.duration||0,n="";try{if("function"==typeof e.getPlayer){var i=e.getPlayer();if(i&&"function"==typeof i.getPlaylist){var r=i.getPlaylist();if(r&&r instanceof Array){var o=r.filter(function(e){return e.active})[0];if(o){n=(o.sources||[]).filter(function(e){return e.active})[0].file||"";var a=[].concat((0,c["default"])(this.internal),(0,c["default"])(this.intranet),(0,c["default"])(this.oversea)).map(function(e){return e.address}).indexOf(n)!==-1;if(0===this.live_status&&n&&a)return}}}}}catch(s){}t<0?t=0:t>70&&(t=70),this.tracker&&"function"==typeof this.tracker.triggerEvent&&this.tracker.triggerEvent({category:"video",action:this.live_status?"live_watch_time":"vod_watch_time",value:t||0,label:n})}},{key:"InitData",value:function(){var e=this,t=this.actHashId?"&act_hash_id="+this.actHashId:"&id="+this.act_id,n=T.BASE_INFO_URL+t+"&url="+encodeURIComponent(location.href.replace(location.hash,""));try{Fetcher.Get(n,function(t,n){if(200!=n)_scope.MsgBus.Pub("Room.Init.Over"),_scope.MsgBus.Pub("Room.Init.Error",n);else{var i=JSON.parse(t),r=i.status||"",o=(0,S.parseActErrorCode)(r,i.delayType);_scope.DB.Set("User.Arrears.Status",{code:r,hasLiveErrcode:o.hasLiveErrcode,hasTrailerErrcode:o.hasTrailerErrcode}),e.act_id=i.act.id,e.server_timestamp=i.timestamp,e.name=i.act.name,e.stream=i.act.stream,e.fee_status=i.act.fee_status,e.limit_status=i.act.limit_status,e.live_status=i.act.live_status,e.share_url=i.shareUrl,e.view_num=i.viewNum,e.lastUpdateViewNumAt=Date.now(),e.view_num_basic=i.act.view_num_basic,e.view_num_multiple=i.act.view_num_multiple,e.view_num_type=i.act.view_num_type,e.view_num_type>0&&setTimeout(function(){e.RefreshViewNum()},6e4),e.total_view_num=i.act.analysis.total_visit_num,e.rtmp_play_addr=i.rtmp_play_addr,e.isoversea=0===i.internal,e.privacy_policy=i.privacy_policy,e.has_multi_stream_line=!1,e.isListLiving=!1,e.listLiveAddress="",e.trailer=(0,s["default"])(i.trailer[0]||{draggable:!0,triple_speed:!0,open:!1},{ppt_list:[],currentUrl:""}),e.trailerList={},e.live_img=i.live_img||i.console_setting_image||"https://static.mudu.tv/assets/livecoverimg.jpg",e.banners=i.act.banners||[],e.theme=i.act.theme||"default",e.themes=i.act.themes||[],e.uin=i.act.uin,e.isCustomForceHighlight=T.customForceBookmarkUin.indexOf(e.uin)!==-1,e.countdown=i.countdown,e.actHashId=i.actHashId,e.domain=i.domain?"http://"+i.domain:"http://mudu.tv",e.projectId=i.projectId,"[object Object]"===Object.prototype.toString.call(i.dingdingIsvConfig)&&(e.dingdingIsvConfig=i.dingdingIsvConfig),_scope.DB.Set("socialAuthConfig",{isSetType:{issetQq:i.issetQq,issetWeibo:i.issetWeibo,issetWeixin:i.issetWeixin},oauth2AppIdConfig:i.oauth2AppIdConfig}),e.tracker.setPage(i.actHashId),_scope.MsgBus.Sub("User.AssignLoginByOther",function(t){e._updateUserAuth({token:t.token}),e._startSeesion(i.actHashId,i.projectId)}),e._startSeesion(i.actHashId,i.projectId),_scope.MsgBus.Sub("User.StartSeesionSuccess",function(t){e.restartingSession=!1,e._fetchMenus(),e._setThemeImgUrlAbsolute(),e._setLiveImgAbsolute(),e._subEvent(),e._getVideoTrailerInfo(),e._updateListLiveConfig(!!i.act.list_live_status),(0,k.createIMClient)({userToken:t.token,actHashId:e.actHashId}),e.tracker.updateProperties({name:t.user.nick,third_id:t.user.assign_id,avatar:t.user.avatar,outer_id:t.user.outer_id}),e.PPT&&e.PPT.UnSubPPTTopics(),_scope.MsgBus.Pub("SendObj.PPT",new _scope.PPT({act_id:i.act.id,config:i.act.slides,actHashId:i.actHashId,tracker:e.tracker})),e.Vote&&e.Vote.UnSubVoteTopics(),_scope.MsgBus.Pub("SendObj.Vote",new _scope.Vote({act_id:i.act.id,vote:i.vote,tracker:e.tracker})),e.Signup&&e.Signup.UnSubSignTopics(),_scope.MsgBus.Pub("SendObj.Signup",new _scope.Signup({tracker:e.tracker,actHashId:i.actHashId,privacyUrl:e.privacy_policy})),e.Signin&&e.Signin.UnSubSigninTopic(),_scope.MsgBus.Pub("SendObj.Signin",new _scope.Signin({actHashId:i.actHashId})),e.Topic&&e.Topic.UnSubTopics(),_scope.MsgBus.Pub("SendObj.Topic",new _scope.Topic({act_id:i.act.id,topic_visitor_publish:i.act.topic_visitor_publish,topic_needs_check:i.act.topic_needs_check,topic_allow_reply:i.act.topic_allow_reply,topic_count_num:i.topicNum,tracker:e.tracker})),_scope.MsgBus.Pub("SendObj.Appointment",new _scope.Appointment(i.actHashId)),_scope.MsgBus.Pub("SendObj.Notice",new _scope.Notice(i.actHashId)),e.Reward&&e.Reward.UnSubRewardTopics(),_scope.MsgBus.Pub("SendObj.Reward",new _scope.Reward({jsonObj:i,Room:e})),e.Comment&&e.Comment.UnSubCommentsTopic(),_scope.MsgBus.Pub("SendObj.Comment",new _scope.Comment({jsonObj:i,Room:e})),e._getStreamAddress()})}})}catch(i){_scope.MsgBus.Pub("Room.Init.Over"),_scope.MsgBus.Pub("Room.Init.Error",i)}}},{key:"_updateListLiveConfig",value:function(e){var t=this;this.isListLiving=e,this.listLiveAddress="",this.isListLiving?Fetcher.Get(T.API_DOMAIN+"/activity/v1/watch/"+this.actHashId+"/list_live/addr",function(e){var n=JSON.parse(e);1e3===n.errcode&&(t.listLiveAddress=n.data.address),_scope.DB.Set("listLiveConfig",{isLiving:t.isListLiving,address:t.listLiveAddress}),_scope.MsgBus.Pub("Room.ListLiveConfig",{inUse:t.isListLiving,address:t.listLiveAddress})},this._tokenHeader):(_scope.DB.Set("listLiveConfig",{isLiving:this.isListLiving,address:this.listLiveAddress}),_scope.MsgBus.Pub("Room.ListLiveConfig",{inUse:this.isListLiving,address:this.listLiveAddress}))}},{key:"_setThemeImgUrlAbsolute",value:function(){this.themes=this.themes.map(function(e){return e.banner=_scope.Utils.GetAbsoluteUrl({url:e.banner,domain:"mudu.tv"}),e.cover_img=_scope.Utils.GetAbsoluteUrl({url:e.cover_img,domain:"mudu.tv"}),e})}},{key:"_setLiveImgAbsolute",value:function(){this.live_img=_scope.Utils.GetAbsoluteUrl({url:this.live_img,domain:"mudu.tv"})}},{key:"_destroy",value:function(){clearTimeout(this._refreshViewNumTimer),clearInterval(this._userOnlineTimer),this.tracker.destroy()}},{key:"_getVideoTrailerInfo",value:function(){var e=this,t=this;if(this.actHashId){var n=Date.parse((new Date).toString())/1e3;Fetcher.Get(T.API_DOMAIN+"/videos/view/act/"+this.actHashId+"/playback?timestamp="+n,function(n){var i=JSON.parse(n);if(1e3!==i.errcode)return void(0,s["default"])(t.trailer,{draggable:!0,stream_name:"",triple_speed:!0,video_from:1,videos:[],ppt_list:[]});var r=i.data.playback_list,a=r.map(function(t){var n=1===t.video_from&&Array.isArray(t.videos)&&t.videos.length,i={triple_speed:t.triple_speed,draggable:t.draggable,stream_id:t.stream_name,open:n,video_id:n?t.videos[0].video_id:"",trailer_img:n?t.videos[0].video_thumb:"",resolution:n?t.videos[0].resolution:"",ppt_list:[],bookmarks:[],m3u8:""};return e.mapStreamToTrailerItems[t.stream_name]=i,i});e.trailer=a[0];var u=(0,f["default"])(e.mapStreamToTrailerItems).filter(function(t){return e.mapStreamToTrailerItems[t].open});return u.length?void o["default"].all(u.map(function(t){var n=e.mapStreamToTrailerItems[t];return e._getVideoInfo(n.video_id,n.resolution)})).then(function(t){for(var n in t)e.mapStreamToTrailerItems[u[n]].m3u8=t[n].url||"",e.mapStreamToTrailerItems[u[n]].bookmarks=t[n].bookmarks,e.trailer.stream_id===e.mapStreamToTrailerItems[u[n]].stream_id&&(e.trailer=e.mapStreamToTrailerItems[u[n]]);e.isCustomForceHighlight&&_scope.DB.Set("CUSTOM_FORCE_HIGHLIGHT",e.trailer.bookmarks||[]),_scope.DB.Set("trailerInfo",e.trailer),_scope.MsgBus.Pub("Room.TrailerUpdate.Over")})["catch"](function(){e.trailer.open=!1,_scope.MsgBus.Pub("Room.TrailerUpdate.Over")}):void _scope.MsgBus.Pub("Room.TrailerUpdate.Over")},(0,d["default"])({},this._tokenHeader,{sign:x(this._tokenHeader.authorization.split(" ")[1]+n)}))}}},{key:"_getVideoInfo",value:function(e,t){var n=this;return new o["default"](function(i,r){if(e){var o=Date.parse((new Date).toString())/1e3;return Fetcher.Get(T.API_DOMAIN+"/videos/view/act/"+n.actHashId+"/video?video_id="+e+"&timestamp="+o+"&resolution="+(t||""),function(e){var t=JSON.parse(e);1e3===t.errcode?i(t.data):r("error")},(0,d["default"])({sign:x(n._tokenHeader.authorization.split(" ")[1]+o)},n._tokenHeader))}})}},{key:"_getTrailerPPtList",value:function(e){var t=this;e&&Fetcher.Get(T.API_DOMAIN+"/?c=activity&a=ajaxgetvideoslides&video_id="+e,function(e){var n=JSON.parse(e);"n"!==n.status&&"y"===n.status&&(t.trailer.ppt_list=n.data||[])},this._tokenHeader)}},{key:"_getStreamAddress",value:function(){var e=this,t=T.API_DOMAIN+"/activity/v2/"+this.actHashId+"/videos";Fetcher.Get(t,function(t,n){try{if(t=JSON.parse(t),200!==n)throw new Error(n);if(1e3!==t.errcode)throw new Error(t.errcode);var i=t.data||[];e.allStreams=i.map(function(t){var n=e._formatPlaylistItem(t);return e.mapStreamToPlaylistItem[t.stream]=n,{stream_id:t.stream,name:t.name,live_status:!!t.live_status,is_main:!!t.is_main}}),_scope.DB.Set("liveAddrList",[e.mapStreamToPlaylistItem[e.mainStream]]),_scope.DB.Set("mainStream",e.mainStream),_scope.DB.Set("mapStreamToPlaylistItem",e.mapStreamToPlaylistItem),_scope.MsgBus.Pub("Room.StreamUpdate.Over"),e._subAllStreamStatus(),e._subListLiveStatus()}catch(r){_scope.MsgBus.Pub("Room.Init.Over"),_scope.MsgBus.Pub("Room.Init.Error",r)}},this._tokenHeader)}},{key:"_subAllStreamStatus",value:function(){var e=this;this.allStreams.forEach(function(t,n){rop.On("stream-event-"+t.stream_id,function(t){var i=JSON.parse(t);i.stream===e.mainStream&&(e.live_status=i.event),e.allStreams[n].live_status=!!i.event,_scope.MsgBus.Pub("Room.StreamEvent",t)})})}},{key:"_subListLiveStatus",value:function(){var e=this;rop.On("list-live-"+this.actHashId,function(t){try{var n=JSON.parse(t);e._updateListLiveConfig(!!n.status)}catch(i){console.error(i)}})}},{key:"_formatPlaylistItem",value:function(e){var t={};switch(e.customized_address){case P.INTRANET_ONLY:t=e.intranet;break;case P.OVERSEA_ONLY:t=e.oversea;break;case P.AUTO_SWITCH_BY_IP:t=e.intranet.sign_list.length>0?e.intranet:this.isoversea&&e.oversea.sign_list.length>0?e.oversea:e.internal;break;case P.NULL:default:t=e.internal}var n=[],i="";return t.sign_list.forEach(function(e,t){e.resolutions.forEach(function(r,o){var a=e.line_name||"",s=r.resolution||"";switch(r.resolution){case"origin":s="原画";break;case"fhd":s="1080P";break;case"hd":s="720P";break;case"sd":s="480P"}n.push({file:r.pull_address,label:s,path:a,path_name:a,defaultPlay:0===t&&0===o}),r.pull_address&&!i&&(i=r.pull_address)})}),e.is_main&&(this.mainStream=e.stream,this.hls_play_addr=i,this.originMainStream=t,this.has_multi_stream_line=n.length>1,this.live_status=e.live_status),{isLive:!0,image:this.live_img,is_main:!!e.is_main,title:e.name,sources:n}}},{key:"_refreshChannelPV",value:function(){var e=this,t=T.API_DOMAIN+"/analytics/api/activity/upv?page=/activity/"+this.actHashId+"&time="+Date.now();return new o["default"](function(n,i){e.lastUpdateViewNumAt=Date.now(),Fetcher.Get(t,function(t){var r=JSON.parse(t);if(1e3==r.errcode){var o=e.view_num_multiple<=0?1:e.view_num_multiple;e.view_num=e.view_num_basic+r.pv*o,_scope.MsgBus.Pub("Room.ViewNumChanged",e.view_num),n({view_num:e.view_num})}else i(r)},e._tokenHeader)})}},{key:"_refreshChannelUV",value:function(){var e=this,t=T.API_DOMAIN+"/datareport/api/concurrent?project_id="+this.projectId+"&act_id="+this.actHashId+"&time="+Date.now();return this.lastUpdateViewNumAt=Date.now(),new o["default"](function(n,i){Fetcher.Get(t,function(t){var r=JSON.parse(t);if(1e3==r.errcode){var o=e.view_num_multiple<=0?1:e.view_num_multiple;e.view_num=e.view_num_basic+r.count*o,_scope.MsgBus.Pub("Room.ViewNumChanged",e.view_num),n({view_num:e.view_num})}else i(r)},e._tokenHeader)})}},{key:"GetStreamList",value:function(){return this.allStreams}},{key:"RefreshViewNum",value:function(){var e=this;if(Date.now()-this.lastUpdateViewNumAt<5e3)return o["default"].resolve({view_num:this.view_num});switch(clearTimeout(this._refreshViewNumTimer),this.view_num_type>0&&(this._refreshViewNumTimer=setTimeout(function(){e.RefreshViewNum()},6e4)),this.view_num_type){case 1:return this._refreshChannelPV();case 2:return this._refreshChannelUV();case 0:return o["default"].resolve({view_num:0});default:return o["default"].resolve({view_num:this.view_num})}}},{key:"GetViewNum",value:function(){return Date.now()-this.lastUpdateViewNumAt>=3e4&&this.RefreshViewNum(),this.view_num}},{key:"GetName",value:function(){return this.name}},{key:"GetStream",value:function(){return this.stream}},{key:"GetShareUrl",value:function(){return this.share_url}},{key:"GetLiveImage",value:function(){return this.live_img}},{key:"GetId",value:function(){return this.act_id}},{key:"GetLiveStatus",value:function(){return this.live_status}},{key:"GetMenus",value:function(){return this.menus}},{key:"_fetchMenuVideo",value:function(e,t){var n=this,i=T.API_DOMAIN_V2+"/v2/micro-act/view/menu/videos?act_id="+this.actHashId+"&menu_id="+e;Fetcher.Get(i,function(i){i=JSON.parse(i),1e3===i.errcode&&(n.menus=t.map(function(t){if(t.menu_id==e){var n=i.data?i.data.videos:[];t.videos=n}return t}))},(0,d["default"])({"Content-Type":"application/json"},n._sessionHeader,self._tokenHeader))}},{key:"_fetchMenus",value:function(){var e=this,t=T.API_DOMAIN_V2+"/v2/micro-act/view/menus?act_id="+this.actHashId;Fetcher.Get(t,function(t){t=JSON.parse(t),1e3===t.errcode?(e.menus=t.menus,t.menus&&t.menus.map(function(n){3==n.type&&e._fetchMenuVideo(n.menu_id,t.menus)})):e.menus=[]},(0,d["default"])({"Content-Type":"application/json"},e._sessionHeader,self._tokenHeader))}},{key:"GetBanners",value:function(){return this.banners}},{key:"GetActiveTheme",value:function(){return this.theme}},{key:"GetThemes",value:function(){return this.themes}},{key:"GetCountdown",value:function(){return this.countdown?(0,d["default"])({},this.countdown,{server_timestamp:this.server_timestamp}):{server_timestamp:this.server_timestamp}}},{key:"GetListLiveConfig",value:function(){return{inUse:this.isListLiving,address:this.listLiveAddress}}},{key:"GetPlayAddr",value:function(){return this.hls_play_addr}},{key:"GetPlayAddrList",value:function(e){if(e){var t=this.mapStreamToPlaylistItem[e];if(t)return[t]}return[this.mapStreamToPlaylistItem[this.mainStream]]}},{key:"HasMultiStreamLine",value:function(){return this.has_multi_stream_line}},{key:"GetPlayList",value:function(){return this.originMainStream}},{key:"GetOverseaPlayList",value:function(){return[this.mapStreamToPlaylistItem[this.mainStream]]}},{key:"GetTrailer",value:function(e){var t=this.trailer||{},n=e||this.mainStream;return n&&(t=this.mapStreamToTrailerItems[n]||this.mapStreamToTrailerItems[this.mainStream]||{}),(0,d["default"])({},t,{m3u8:t.m3u8||"",open:!!t.open,trailer_img:t.trailer_img||"",draggable:t.draggable||!1,triple_speed:t.triple_speed||!1,resolution:t.resolution||""})}},{key:"GetVideoInfo",value:function(e){return this._getVideoInfo(e)}},{key:"GetRoomAddrList",value:function(){return{}}}]),e}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(131),o=i(r);t["default"]=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o["default"])(e)}},function(e,t,n){e.exports={"default":n(132),__esModule:!0}},function(e,t,n){n(75),n(133),e.exports=n(42).Array.from},function(e,t,n){"use strict";var i=n(43),r=n(40),o=n(74),a=n(89),s=n(90),u=n(63),c=n(134),l=n(82);r(r.S+r.F*!n(100)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,f,h=o(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,y=void 0!==v,g=0,m=l(h);if(y&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==m||d==Array&&s(m))for(t=u(h.length),n=new d(t);t>g;g++)c(n,g,y?v(h[g],g):h[g]);else for(f=m.call(h),n=new d;!(r=f.next()).done;g++)c(n,g,y?a(f,v,[r.value,g],!0):r.value);return n.length=g,n}})},function(e,t,n){"use strict";var i=n(46),r=n(54);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){e.exports={"default":n(136),__esModule:!0}},function(e,t,n){n(137),e.exports=n(42).Object.keys},function(e,t,n){var i=n(74),r=n(60);n(138)("keys",function(){return function(e){return r(i(e))}})},function(e,t,n){var i=n(40),r=n(42),o=n(51);e.exports=function(e,t){var n=(r.Object||{})[e]||Object[e],a={};a[e]=t(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={"default":n(140),__esModule:!0}},function(e,t,n){var i=n(42),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},function(e,t,n){n(1),n(2);e.exports="1.26.8"},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=e.userToken,n=e.actHashId,i={host:window.IM_SERVER,accessToken:"Token="+t,roomId:n,connectType:"auth_go_im",maxReconnectTimes:20,reconnectDelay:5e3,heartbeatInterval:3e4,connectWhenManual:!0};if(window.imClient&&window.imClient&&"function"==typeof window.imClient.close)try{imClient.close()}catch(r){}window.imClient=new a["default"](i),this.imClient.onClient("ready",function(){return console.log("im client: ready")}),this.imClient.onClient("connect",function(){return console.log("im client: connect")}),this.imClient.onClient("error",function(e){return console.error("im client error:",e)}),this.imClient.onClient("close",function(e){return console.warn("im client close:",e)})}n(1),n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createIMClient=r;var o=n(143),a=i(o)},function(e,t,n){!function(e,n){n(t)}(this,function(e){"use strict";function t(t){this.nextSubId=1,this.clientEventSubs=new Map,this.eventSubs=new Map,this.sidMap=new Map,this.textEncoder=new TextEncoder,this.textDecoder=new TextDecoder,this.destroyed=!1,this.config={host:t.host,accessToken:t.accessToken,roomId:t.roomId,maxReconnectTimes:+t.maxReconnectTimes||10,platform:t.platform||"pc",reconnectDelay:+t.reconnectDelay||2e3,heartbeatInterval:+t.heartbeatInterval||3e4,extra:t.extra||"",connectWhenManual:!!t.connectWhenManual,connectType:t.connectType||e.ConnectType.GO_IM},this.lastReconnectTimes=this.config.maxReconnectTimes,this.validateConfig()&&!this.config.connectWhenManual&&this.connect()}function n(e){this.initClient(e)}function i(t){this.nextSubId=1,this.status=e.Status.UNREADY,this.heartbeatTimeout=1e3,this.clientEventSubs=new Map,this.eventSubs=new Map,this.sidMap=new Map,this.destroyed=!1,this.config={host:t.host,maxReconnectTimes:+t.maxReconnectTimes||10,reconnectDelay:+t.reconnectDelay||2e3,heartbeatInterval:+t.heartbeatInterval||3e4,connectWhenManual:!!t.connectWhenManual,connectType:e.ConnectType.NATS},this.lastReconnectTimes=this.config.maxReconnectTimes,this.validateConfig()&&!this.config.connectWhenManual&&this.connect()}var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};e.ClientEvent=void 0,(c=e.ClientEvent||(e.ClientEvent={})).connect="connect",c.ready="ready",c.error="error",c.heartbeat="heartbeat",c.close="close",c.reconnecting="reconnecting",e.Status=void 0,(c=e.Status||(e.Status={})).UNREADY="UNREADY",c.READY="READY",c.CLOSED="CLOSED",e.ConnectType=void 0,(c=e.ConnectType||(e.ConnectType={})).NATS="nats",c.GO_IM="go_im",c.AUTH_GO_IM="auth_go_im";var o,a=16,s=(t.prototype.validateConfig=function(){return this.config.host?this.config.roomId?!(!this.config.accessToken&&this.config.connectType===e.ConnectType.AUTH_GO_IM&&(console.error("MDIMCLient error: Param 'accessToken' is missing"),1)):(console.error("MDIMCLient error: Param 'roomId' is missing"),!1):(console.error("MDIMCLient error: Param 'host' is missing"),!1)},t.prototype.connect=function(){try{this.socket=new WebSocket(this.config.host),this.socket.binaryType="arraybuffer"}catch(e){console.error("MDIMCLient error:",e)}this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onclose=this.onClose.bind(this),this.socket.onerror=this.onError.bind(this)},t.prototype.onOpen=function(t){this.pubClientEvent(e.ClientEvent.connect,t),this.auth()},t.prototype.onClose=function(t){var n=this;this.destroyed||(this.pubClientEvent(e.ClientEvent.close,t),clearTimeout(this.hearbeatTimer),(0<this.lastReconnectTimes||-1===this.config.maxReconnectTimes)&&(this.reconnectTimer=window.setTimeout(function(){n.pubClientEvent(e.ClientEvent.reconnecting),n.connect(),n.lastReconnectTimes--},this.config.reconnectDelay)))},t.prototype.onError=function(t){this.pubClientEvent(e.ClientEvent.error,t),this.socket.close()},t.prototype.auth=function(){var e={access_token:this.config.accessToken,room_id:this.config.roomId,events:[],platform:this.config.platform,name:this.config.name||"",avatar:this.config.avatar||"",extra:this.config.extra||""},t=new ArrayBuffer(a),n=new DataView(t,0),e=this.textEncoder.encode(JSON.stringify(e));n.setInt32(0,a+e.byteLength),n.setInt16(4,a),n.setInt16(6,1),n.setInt32(8,7),n.setInt32(12,1),this.socket.send(this.mergeArrayBuffer(t,e))},t.prototype.onMessage=function(t){var n,i=this,r=t.data,o=new DataView(r,0);switch(o.getInt32(0),o.getInt16(4),o.getInt16(6),t=o.getInt32(8),o.getInt32(12),t){case 8:this.status=e.Status.READY,this.startHeartBeat(),this.sidMap.forEach(function(e,t){i.subscribe(t,e)}),this.pubClientEvent(e.ClientEvent.ready),this.lastReconnectTimes=this.config.maxReconnectTimes;break;case 3:this.pubClientEvent(e.ClientEvent.heartbeat);break;case 9:for(var s=a;s<r.byteLength;){var u=o.getInt32(s),c=o.getInt16(s+4),c=(o.getInt16(s+6),o.getInt32(s+8),o.getInt32(s+12),this.textDecoder.decode(r.slice(s+c,s+u)));try{var l=null===(n=JSON.parse(c))||void 0===n?void 0:n.event;Date.now(),this.pubEvent(l,c)}catch(t){console.error("parse message error:",c)}s+=u}}},t.prototype.pubEvent=function(e,t){Object.values(this.eventSubs.get(e)||{}).forEach(function(e){"function"==typeof e&&e(t)})},t.prototype.startHeartBeat=function(){var t=this;this.status!==e.Status.CLOSED&&(this.heartBeat(),this.hearbeatTimer=window.setTimeout(function(){t.startHeartBeat()},this.config.heartbeatInterval))},t.prototype.heartBeat=function(){var e=new ArrayBuffer(a),t=new DataView(e,0);t.setInt32(0,a),t.setInt16(4,a),t.setInt16(6,1),t.setInt32(8,2),t.setInt32(12,1),this.socket.send(e)},t.prototype.subscribe=function(t,n){var i;this.sidMap.has(t)||this.sidMap.set(t,n),this.status===e.Status.READY&&(i=JSON.stringify({access_token:this.config.accessToken,
room_id:this.config.roomId,events:[t]}),n=new ArrayBuffer(a),t=new DataView(n,0),i=this.textEncoder.encode(i),t.setInt32(0,a+i.byteLength),t.setInt16(4,a),t.setInt16(6,1),t.setInt32(8,18),t.setInt32(12,1),this.socket.send(this.mergeArrayBuffer(n,i)))},t.prototype.unsubEvent=function(e,t){delete this.eventSubs.get(e)[t],null!==(t=Object.keys(this.eventSubs.get(e)))&&void 0!==t&&t.length||(this.sidMap.get(e),this.sidMap["delete"](e))},t.prototype.mergeArrayBuffer=function(e,t){var n=new Uint8Array(e),i=new Uint8Array(t),t=new Uint8Array(e.byteLength+t.byteLength);return t.set(n,0),t.set(i,e.byteLength),t.buffer},t.prototype.pubClientEvent=function(e,t){Object.values(this.clientEventSubs.get(e)||{}).forEach(function(e){"function"==typeof e&&e(t)})},t.prototype.manualConnect=function(){this.config.connectWhenManual&&!this.socket&&this.connect()},t.prototype.on=function(e,t){var n,i=this,r=this.nextSubId++;return this.eventSubs.has(e)?this.eventSubs.get(e)[r]=t:(this.eventSubs.set(e,((n={})[r]=t,n)),this.subscribe(e,r)),function(){i.unsubEvent(e,r)}},t.prototype.onClient=function(e,t){var n=String(Date.now());this.clientEventSubs.has(e)?this.clientEventSubs.get(e)[n]=t:this.clientEventSubs.set(e,((e={})[n]=t,e))},t.prototype.removeEvent=function(e){this.eventSubs.has(e)&&this.eventSubs["delete"](e)},t.prototype.close=function(){this.destroyed=!0,clearTimeout(this.reconnectTimer),clearTimeout(this.hearbeatTimer),this.socket.close()},t.prototype.getStatus=function(){return this.socket.CLOSED?e.Status.CLOSED:this.status},t);(c=o=o||{}).PING="PING",c.CONNECT="CONNECT",c.SUB="SUB",c.PONG="PONG",c.MSG="MSG",c.ERR="-ERR",c.INFO="INFO",c.UNSUB="UNSUB",c.UNKNOWN="unknown";var u=(i.prototype.validateConfig=function(){return!!this.config.host||(console.error("MDIMCLient error: Param 'host' is missing"),!1)},i.prototype.connect=function(){try{this.socket=new WebSocket(this.config.host),this.socket.binaryType="blob"}catch(e){console.error("MDIMCLient error:",e)}this.socket.onopen=this.onOpen.bind(this),this.socket.onmessage=this.onMessage.bind(this),this.socket.onclose=this.onClose.bind(this),this.socket.onerror=this.onError.bind(this)},i.prototype.onOpen=function(t){var n=this;this.pubClientEvent(e.ClientEvent.connect,t),this.socket.send("CONNECT ".concat(JSON.stringify({lang:"node",version:"0.6.8",verbose:!1,pedantic:!1})," \r\n")),setTimeout(function(){n.startHeartBeat()},200)},i.prototype.onClose=function(t){this.destroyed||(this.pubClientEvent(e.ClientEvent.close,t),this.status=e.Status.CLOSED,this.reconnect())},i.prototype.onError=function(t){this.pubClientEvent(e.ClientEvent.error,t);try{this.reconnect(),this.socket.close()}catch(t){this.status=e.Status.CLOSED}},i.prototype.reconnect=function(){var t=this;clearTimeout(this.heartbeatTimer),this.reconnectTimer||(0<this.lastReconnectTimes||-1===this.config.maxReconnectTimes)&&(this.reconnectTimer=window.setTimeout(function(){t.reconnectTimer=0,t.pubClientEvent(e.ClientEvent.reconnecting),t.status=e.Status.UNREADY,t.connect(),t.lastReconnectTimes--},this.config.reconnectDelay))},i.prototype.onMessage=function(t){t.data;var n=this.parseMessage(t),t=n.eventType,i=n.eventName,r=n.msg;switch(t){case o.PONG:clearTimeout(this.heartbearTimeoutTimer),this.pubClientEvent(e.ClientEvent.heartbeat),this.status!==e.Status.READY&&(this.status=e.Status.READY,this.pubClientEvent(e.ClientEvent.ready),this.batchSub(this.sidMap));break;case o.MSG:this.pubEvent(i,r)}},i.prototype.parseMessage=function(e){var t=e.data.split(" "),n=Object.values(o).find(function(e){return e===t[0].replace(/\r\n/g,"")})||o.UNKNOWN,e=e.data.replace(/^.*\r\n/g,"").trim();return{eventType:n,eventName:(null==t?void 0:t[1])||"",msg:e}},i.prototype.startHeartBeat=function(){var t=this;this.status!==e.Status.CLOSED&&(this.heartBeat(),this.heartbeatTimer=window.setTimeout(function(){t.startHeartBeat()},this.config.heartbeatInterval))},i.prototype.heartBeat=function(){var t=this;try{this.socket.send("PING\r\n")}catch(t){}this.heartbearTimeoutTimer=window.setTimeout(function(){t.socket.close(),t.status=e.Status.CLOSED,t.reconnect()},this.heartbeatTimeout)},i.prototype.subscribe=function(t,n){this.sidMap.set(t,n),this.status===e.Status.READY&&this.socket.send("".concat(o.SUB," ").concat(t," ").concat(n," \r\n"))},i.prototype.batchSub=function(t){var n=this,i="";t.forEach(function(t,r){n.sidMap.set(r,t),n.status===e.Status.READY&&(i+="".concat(o.SUB," ").concat(r," ").concat(t," \r\n"))}),this.status===e.Status.READY&&this.socket.send(i)},i.prototype.pubClientEvent=function(e,t){Object.values(this.clientEventSubs.get(e)||{}).forEach(function(e){"function"==typeof e&&e(t)})},i.prototype.pubEvent=function(e,t){Object.values(this.eventSubs.get(e)||{}).forEach(function(e){"function"==typeof e&&e(t)})},i.prototype.unsubEvent=function(e,t){"number"==typeof t&&delete this.eventSubs.get(e)[t],"boolean"==typeof t&&t&&this.eventSubs["delete"](e),null!==(t=Object.keys(this.eventSubs.get(e)))&&void 0!==t&&t.length||(t=this.sidMap.get(e),this.socket.send("".concat(o.UNSUB," ").concat(t,"\r\n")),this.sidMap["delete"](e),this.eventSubs["delete"](e))},i.prototype.manualConnect=function(){this.config.connectWhenManual&&!this.socket&&this.connect()},i.prototype.on=function(e,t){var n,i=this,r=this.nextSubId++;return this.eventSubs.has(e)?this.eventSubs.get(e)[r]=t:(this.eventSubs.set(e,((n={})[r]=t,n)),this.subscribe(e,r)),/\.$|\.\./.test(e)&&console.warn("不合法的订阅topic，可能会引起socket连接异常close(1006):",e),function(){i.unsubEvent(e,r)}},i.prototype.onClient=function(e,t){var n=String(Date.now());this.clientEventSubs.has(e)?this.clientEventSubs.get(e)[n]=t:this.clientEventSubs.set(e,((e={})[n]=t,e))},i.prototype.removeEvent=function(e){this.unsubEvent(e,!0)},i.prototype.close=function(){this.destroyed=!0,clearTimeout(this.reconnectTimer),clearTimeout(this.heartbeatTimer),this.socket.close()},i.prototype.getStatus=function(){return this.socket.CLOSED?e.Status.CLOSED:this.status},i),c=(n.prototype.initClient=function(t){if(!t||!t.host)throw"MDIMCLient error: Param 'host' is missing!";switch(t.connectType){case e.ConnectType.AUTH_GO_IM:case e.ConnectType.GO_IM:this.client=new s(t);break;case e.ConnectType.NATS:this.client=new u(t);break;default:this.client=new u(r(r({},t),{connectType:e.ConnectType.NATS}))}},n.prototype.manualConnect=function(){this.client.manualConnect()},n.prototype.onClient=function(e,t){this.client.onClient(e,t)},n.prototype.on=function(e,t){return this.client.on(e,t)},n.prototype.removeEvent=function(e){this.client.removeEvent(e)},n.prototype.close=function(){this.client.close()},n.prototype.getStatus=function(){return this.client.getStatus()},n);e["default"]=c,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,n){function i(e,t){var n=e.split(",").filter(function(e){return!!e}).map(function(e){return+e}),i=!1,o=!1,c=!1;n.length&&n.forEach(function(e){a.includes(e)&&(i=!0),s.includes(e)&&(c=!0),u.includes(e)&&(o=!0)});var l=!1;switch(t){case r.LOW_DELAY:l=o;break;case r.NORMAL:default:l=i}return{hasLiveErrcode:l,hasTrailerErrcode:c}}n(1),n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.parseActErrorCode=i;var r={NORMAL:1,LOW_DELAY:2},o={BILL_NOT_PAID:101,TRIAL_USER_CONCURRENT_ERROR:102,USER_CONCURRENT_ERROR:103,ACT_OVER_BUDGET:104,WATCH_TIME_OVER_BUDGET:105,USER_NOT_EXIST:106,DATA_FLOW_OVER_BUDGET:107,LOW_DELAY_SOURCE_RUN_OUT:108},a=[o.BILL_NOT_PAID,o.TRIAL_USER_CONCURRENT_ERROR,o.USER_CONCURRENT_ERROR,o.ACT_OVER_BUDGET,o.WATCH_TIME_OVER_BUDGET,o.USER_NOT_EXIST,o.DATA_FLOW_OVER_BUDGET],s=[o.BILL_NOT_PAID,o.TRIAL_USER_CONCURRENT_ERROR,o.USER_CONCURRENT_ERROR,o.ACT_OVER_BUDGET,o.WATCH_TIME_OVER_BUDGET,o.USER_NOT_EXIST,o.DATA_FLOW_OVER_BUDGET],u=[o.TRIAL_USER_CONCURRENT_ERROR,o.USER_CONCURRENT_ERROR,o.ACT_OVER_BUDGET,o.USER_NOT_EXIST,o.LOW_DELAY_SOURCE_RUN_OUT]},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e){function t(e){p(R+"?act_id="+k,{method:"PUT",data:e})}function n(e,t){p(D,{method:"POST",data:{project_id:+e.project_id,location:window.location.href,title:document.title,page:""+e.page},async:!t||"undefined"===t.async||t.async,success:function(e){try{var n=JSON.parse(e);1e3===n.errcode&&(C=n.page_view_id)}catch(i){}"function"==typeof t&&t(e),t&&"function"==typeof t.success&&t.success(e)}})}function i(e){x.push(e),E||(E=!0,n({project_id:y,page:m},{async:!1,success:function(){for(var e=0;e<x.length;e++){var t=x[e];"function"==typeof t&&t()}x=[],E=!1}}))}function r(e,t){("undefined"==typeof window.navigator.onLine||window.navigator.onLine)&&p(j+"?act_id="+k,{method:"POST",data:{name:e.name,visitor_id:e.visitor_id,avator:e.avator,device:e.device,page:e.page,session_id:e.session_id},async:t,success:function(e){try{"string"==typeof e&&(e=JSON.parse(e))}catch(t){e=e||""}switch(e.errcode){case 1e3:break;case 6403:"undefined"!=typeof window.navigator.onLine&&window.navigator.onLine&&(clearTimeout(_),_scope.MsgBus.Pub("User.Offline",{errcode:e.errcode}))}}})}function o(e){p(L+"?act_id="+k,{method:"POST",data:e,async:!1})}function s(e,t){p(B+"?act_id="+k,{method:"POST",data:{page:""+e.page,category:""+e.category,action:""+e.action,label:""+e.label,value:+e.value,from_value:"",session_id:e.session_id},success:function(n){try{"string"==typeof n&&(n=JSON.parse(n))}catch(r){n=n||""}return 1634===n.errcode?void i(function(){s(e,t)}):void("function"==typeof t.success&&t.success())},async:t.async})}function c(){var e=document.referrer,t=(e.split("/")[2]||"").split(":")[0],n=window.location.host,i=f(),r=navigator.userAgent.toLowerCase();r.indexOf("dingtalk")!==-1&&(t="dingding");var o=i.from||"",a=i.channel||"";return""===o&&(o=t.indexOf("weibo.com")!==-1?"weibo":t.indexOf("qq.com")!==-1?"qq":t.indexOf("dingding")!==-1?"dingding":t===n?"direct":t?t:"direct"),"invite_card"===a&&(o="invite_card"),o}function f(){var e={},t=window.location.search.replace(/^\?/,"").split("&").filter(function(e){if(""!==e&&e.indexOf("="))return!0});return t.forEach(function(t){var n=t.indexOf("="),i=t.substring(0,n),r=t.substring(n+1);e[i]=r}),e}function h(e,t,n){window.addEventListener?h=function(e,t,n){e.addEventListener(t,n,!1)}:window.attachEvent&&(h=function(e,t,n){e.attachEvent("on"+t,n)}),h(e,t,n)}function d(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null}function p(e,t){"POST"==t.method?Fetcher.Post(e,(0,u["default"])(t.data),function(e){try{"function"==typeof t.success&&t.success(e)}catch(n){"function"==typeof t.fail&&t.fail(e)}"function"==typeof t.complete&&t.complete(e)},(0,a["default"])({"User-Agent":navigator.userAgent,Referer:document.referrer,"Content-Type":"application/json"},_scope.DB.Get("requestHeader").token)):"PUT"==t.method&&Fetcher.Put(e,(0,u["default"])(t.data),function(e){try{"function"==typeof t.success&&t.success(e)}catch(n){"function"==typeof t.fail&&t.fail(e)}"function"==typeof t.complete&&t.complete(e)},(0,a["default"])({"User-Agent":navigator.userAgent,Referer:document.referrer,"Content-Type":"application/json"},_scope.DB.Get("requestHeader").token))}function v(){return/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent)}var y,g,m,_,b,w,k,S=!1,T=[],E=!1,x=[],P={},C=0,O="",A=v()?"mobile":"pc",M="",I="",R=l["default"].API_DOMAIN+"/m/api/visitor-event-tracking/v1/activity/visitor/properties",D=l["default"].API_DOMAIN+"/analytics/api/on_page_view",j=l["default"].API_DOMAIN+"/m/api/visitor-event-tracking/v1/activity/visitor/page_online",L=l["default"].API_DOMAIN+"/user/api/logout",B=l["default"].API_DOMAIN+"/m/api/visitor-event-tracking/v1/activity/visitor/page_event";return{keepOnlineTimeGap:2e4,init:function(t,n,i,r){this.setProjectId(t),this.setVisitorId(n),this.setPage(i),k=r,"function"==typeof e&&e()},setProjectId:function(e){y=+e},getProjectId:function(){return y},setSessionId:function(e){I=e},getSessionId:function(){return I},setProperties:function(e){P=e},getProperties:function(){return P},setPage:function(e){var t="/activity/";0===e.indexOf(t)?m=e:(m=t+e,console&&console.warn&&console.warn('data tracker needs page param as "/activity/${actHashId}"'))},getPage:function(){return m},setVisitorId:function(e){g=""+e},getVisitorId:function(){return g},startDataTracker:function(e,t){var n=this;e=e?e:{},this.setSessionId(t),this.setProperties(e),this.updateProperties(e),this.keepOnlineTimer(),[{target:window,event:"beforeunload",cb:function(){n.triggerOnLeaveEvent(),n.keepOnline(!0),n.leavePage()}},{target:window,event:"unload",cb:function(){n.triggerOnLeaveEvent(),n.keepOnline(!0),n.leavePage()}},{target:window,event:"pagehide",cb:function(){console.log("hide: 心跳一次"),n.keepOnline()}},{target:document,event:"visibilitychange",cb:function(){console.log("visibilitychange: 心跳一次"),n.keepOnline()}}].forEach(function(e){h(e.target,e.event,e.cb)}),w=!0,n.updateUserPhone(e.phone);var i=f().referVisitorId||"";i&&n.triggerEvent({category:"interact",action:"share",label:c(),value:f().referVisitorId||"",session_id:t})},getParams:f,getOrigintype:c,get_cookie:d,updateProperties:function(e){var n=this;e=e?e:{},e.name&&(O=e.name),e.avatar&&(M=e.avatar),t({properties:e,session_id:n.getSessionId()})},updateUserPhone:function(e){e&&this.triggerEvent({category:"interact",action:"phone",label:(0,u["default"])({phone:e,is_verified:!1}),session_id:this.getSessionId()})},keepOnlineTimer:function(){var e=this;clearTimeout(_),_=setTimeout(function(){!b&&e.keepOnline(),e.keepOnlineTimer()},e.keepOnlineTimeGap)},keepOnline:function(e){var t=this,n={project_id:+t.getProjectId(),page:""+t.getPage(),visitor_id:""+t.getVisitorId(),name:""+O,avator:""+M,device:""+A,session_id:t.getSessionId()};!b&&r(n,!e)},triggerOnLeaveEvent:function(){if(!S){for(var e=0;e<T.length;e++)"function"==typeof T[e]&&T[e]();S=!0}},onLeave:function(e){if("function"==typeof e)T.push(e);else if(e instanceof Array)for(var t=0;t<e.length;t++)"function"==typeof e[t]&&T.push(e[t])},onLeaveCancel:function(e){T=T.filter(function(t){return t!==e})},leavePage:function(){if(!b){var e=this,t={page:""+e.getPage(),page_view_id:C,session_id:e.getSessionId()};o(t),b=!0}},triggerEvent:function(e,t){var n="function"==typeof t?t:t&&"function"==typeof t.success?t.success:void 0,i=!t||"undefined"==typeof t.async||t.async;if(w&&!b){var r=this,o="undefined"==typeof e.project_id?r.getProjectId():e.project_id,a="undefined"==typeof e.page?r.getPage():e.page,u="undefined"==typeof e.value?1:e.value,c="undefined"==typeof e.session_id?this.getSessionId():e.session_id;s({project_id:o,page:a,category:e.category,action:e.action,label:e.label||"",value:u,session_id:c},{async:i,success:n})}},destroy:function(){_&&clearInterval(_);var e=this;e.triggerOnLeaveEvent(),e.keepOnline(),e.leavePage()}}}var o=(n(1),n(2),n(103)),a=i(o),s=n(139),u=i(s),c=n(117),l=i(c);e.exports=function(e){return new r(e)}},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.User=n(147)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(103)),o=i(r),a=n(139),s=i(a),u=n(148),c=i(u),l=n(110),f=i(l),h=n(111),d=i(h),p=n(117),v=n(15),y=n(164),g=function(){function e(){(0,f["default"])(this,e),_scope.Feature.EventBus(this),_scope.Feature.Room(this),this._listenStartSessionSuccess(),this._listenUpdateUserInfo(),this._msgbusDestroy()}return(0,d["default"])(e,[{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){_scope.MsgBus.UnSubAll("User.Registered"),_scope.MsgBus.UnSubAll("User.Assigned"),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"_listenUpdateUserInfo",value:function(){var e=this;_scope.MsgBus.Sub("User.Update",function(){e._getUserInfo(function(t){e.Room.tracker.updateProperties({name:t.user.nick,third_id:t.user.assign_id,avatar:t.user.avatar,outer_id:t.user.outer_id}),_scope.MsgBus.Pub("User.Update.Over",t)})})}},{key:"_listenStartSessionSuccess",value:function(){var e=this;_scope.MsgBus.Sub("User.StartSeesionSuccess",function(t){e._dealUserInfo(t,function(t){var n=e.Room,i=n.actHashId,r=n.projectId;e.Room.tracker.init(r,t.user.id,i,i),e.Room.tracker.startDataTracker({name:t.user.nick,third_id:t.user.assign_id,avatar:t.user.avatar,outer_id:t.user.outer_id,phone:t.user.phone},t.session_id),e._PubInitUserOver()})})}},{key:"_PubInitUserOver",value:function(){_scope.MsgBus.Pub("User.Init.Over")}},{key:"_getUserInfo",value:function(e){var t=this,n=p.USER_AUTH_GET_USER_INFO+this.Room.actHashId;Fetcher.Get(n,function(n){try{t._dealUserInfo(JSON.parse(n),e)}catch(i){_scope.MsgBus.Pub("User.Init.Error",i),_scope.MsgBus.Pub("Room.Init.Error",i)}})}},{key:"_dealUserInfo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if("object"===("undefined"==typeof e?"undefined":(0,c["default"])(e)))try{this.user=e.user,this.avatar=e.user.avatar,this.id=e.user.id,_scope.DB.Set("UserInfo",e.user),_scope.DB.Set("User",this),_scope.MsgBus.Pub("User.Assigned",this),"function"==typeof t&&t(e)}catch(n){console.warn("user info err",n)}}},{key:"Assign",value:function(e,t,n,i){this._Assign({name:e||"",avatar:t||"",assignId:n||Date.now(),type:"assign"},i)}},{key:"AssignInfo",value:function(e,t){this._Assign({name:e.name||"",avatar:e.avatar||"",assignId:e.assignId||Date.now(),phone:e.phone||"",type:"assign"},t)}},{key:"_Assign",value:function(e,t){return this.id?void this.Regist(e.name,e.avatar,e.assignId,e.type,t,e.phone):void console.warn(" fetch userinfo not completed ")}},{key:"Regist",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"assign",r=arguments[4],a=arguments[5],u=this,c=this.Room.uin;this.Room&&Fetcher.Post(p.API_DOMAIN+"/user/api/logout?act_id="+u.Room.actHashId,(0,s["default"])({session_id:u.Room.tracker.getSessionId()}),function(){var l=p.USER_AUTH_LOGIN_BY_OTHER;Fetcher.Post(l,(0,s["default"])({act_id:u.Room.actHashId,type:i,user_id:c+"_"+n,avatar:t,nick:e,phone:a}),function(e){e=JSON.parse(e);var t={},n=1e3===e.errcode;if(t.status=n?"y":"n",t.info=e.msg,n){_scope.MsgBus.Pub("User.Registered",(0,s["default"])(t)),_scope.MsgBus.Pub("User.AssignLoginByOther",(0,o["default"])({},t,{token:e.token}));var i=!1;_scope.MsgBus.Sub("User.StartSeesionSuccess",function(e){u.Room.tracker.updateProperties({name:e.user.nick,third_id:e.user.assign_id,avatar:e.user.avatar,outer_id:e.user.outer_id}),i||(i=!0,"function"==typeof r&&r(e))})}},{"User-Agent":navigator.userAgent,Referer:document.referrer,"Content-Type":"application/json"})},{"User-Agent":navigator.userAgent,Referer:document.referrer,"Content-Type":"application/json"})}},{key:"GetUser",value:function(){var e=_scope.DB.Get("UserInfo");return{name:e.nick,avatar:e.avatar,phone:e.phone,id:e.id,assign_id:e.assign_id,hash_id:e.hash_id,outer_id:e.outer_id}}},{key:"SocialLogin",value:function(e){var t=_scope.DB.Get("socialAuthConfig");if(t){var n=t.isSetType,i=n.issetQq,r=n.issetWeibo,o=t.oauth2AppIdConfig,a=o.qq_appid,s=o.weibo_appid,u=o.weixin_mp_appid,c=_scope.DB.Get("UserInfo"),l=c.wx_union_id,f=c.qq_open_id,h=c.wb_open_id;if(e=_scope.Utils.GetPrimarySocialLoginType(e),!("weixin"==e&&l||"qq"==e&&f||"weibo"==e&&h)){var d="";"weixin"==e?d=u:"qq"==e&&i?d=a:"weibo"==e&&r&&(d=s);var v=encodeURIComponent(window.location.href),y=p.AUTH_DOMAIN+"/user/api/sociallogin/"+e+"/"+d+"?referer="+v;window.location.href=y}}}},{key:"WechatLogin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(_scope.DB.Get("UserInfo").wx_union_id&&!e)return!1;if(!v.isWechat())return!1;var t=encodeURIComponent(window.location.href),n=this.Room.domain+p.RELATIVE_SOCIAL_LOGIN_URL+"&loginType=weixin&referer="+t;window.location.href=n}},{key:"IsWechatLogined",value:function(){return v.isWechat()&&!!_scope.DB.Get("UserInfo").wx_union_id}},{key:"DingdingLogin",value:function(){var e=this;return!!this.Room.dingdingIsvConfig&&(!_scope.DB.Get("UserInfo").dingding_open_id&&(!!v.isDingding()&&("undefined"!=typeof dd&&void y.init(this.Room.dingdingIsvConfig,function(){return y.login(e.Room.dingdingIsvConfig.corpId,function(t){var n=t.id,i=t.user,r=t.avatar;e._Assign(i,r,n,"dingding")})}))))}}]),e}();e.exports=g},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var r=n(149),o=i(r),a=n(152),s=i(a),u="function"==typeof s["default"]&&"symbol"==typeof o["default"]?function(e){return typeof e}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":typeof e};t["default"]="function"==typeof s["default"]&&"symbol"===u(o["default"])?function(e){return"undefined"==typeof e?"undefined":u(e)}:function(e){return e&&"function"==typeof s["default"]&&e.constructor===s["default"]&&e!==s["default"].prototype?"symbol":"undefined"==typeof e?"undefined":u(e)}},function(e,t,n){e.exports={"default":n(150),__esModule:!0}},function(e,t,n){n(75),n(29),e.exports=n(151).f("iterator")},function(e,t,n){t.f=n(72)},function(e,t,n){e.exports={"default":n(153),__esModule:!0}},function(e,t,n){n(154),n(85),n(162),n(163),e.exports=n(42).Symbol},function(e,t,n){"use strict";var i=n(41),r=n(56),o=n(50),a=n(40),s=n(55),u=n(155).KEY,c=n(51),l=n(67),f=n(71),h=n(68),d=n(72),p=n(151),v=n(156),y=n(157),g=n(158),m=n(47),_=n(34),b=n(53),w=n(54),k=n(58),S=n(159),T=n(161),E=n(46),x=n(60),P=T.f,C=E.f,O=S.f,A=i.Symbol,M=i.JSON,I=M&&M.stringify,R="prototype",D=d("_hidden"),j=d("toPrimitive"),L={}.propertyIsEnumerable,B=l("symbol-registry"),N=l("symbols"),U=l("op-symbols"),F=Object[R],H="function"==typeof A,W=i.QObject,q=!W||!W[R]||!W[R].findChild,G=o&&c(function(){return 7!=k(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=P(F,t);i&&delete F[t],C(e,t,n),i&&e!==F&&C(F,t,i)}:C,z=function(e){var t=N[e]=k(A[R]);return t._k=e,t},V=H&&"symbol"==typeof A.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof A},J=function(e,t,n){return e===F&&J(U,t,n),m(e),t=b(t,!0),m(n),r(N,t)?(n.enumerable?(r(e,D)&&e[D][t]&&(e[D][t]=!1),n=k(n,{enumerable:w(0,!1)})):(r(e,D)||C(e,D,w(1,{})),e[D][t]=!0),G(e,t,n)):C(e,t,n)},X=function(e,t){m(e);for(var n,i=y(t=_(t)),r=0,o=i.length;o>r;)J(e,n=i[r++],t[n]);return e},Y=function(e,t){return void 0===t?k(e):X(k(e),t)},$=function(e){var t=L.call(this,e=b(e,!0));return!(this===F&&r(N,e)&&!r(U,e))&&(!(t||!r(this,e)||!r(N,e)||r(this,D)&&this[D][e])||t)},K=function(e,t){if(e=_(e),t=b(t,!0),e!==F||!r(N,t)||r(U,t)){var n=P(e,t);return!n||!r(N,t)||r(e,D)&&e[D][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=O(_(e)),i=[],o=0;n.length>o;)r(N,t=n[o++])||t==D||t==u||i.push(t);return i},Z=function(e){for(var t,n=e===F,i=O(n?U:_(e)),o=[],a=0;i.length>a;)!r(N,t=i[a++])||n&&!r(F,t)||o.push(N[t]);return o};H||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===F&&t.call(U,n),r(this,D)&&r(this[D],e)&&(this[D][e]=!1),G(this,e,w(1,n))};return o&&q&&G(F,e,{configurable:!0,set:t}),z(e)},s(A[R],"toString",function(){return this._k}),T.f=K,E.f=J,n(160).f=S.f=Q,n(109).f=$,n(108).f=Z,o&&!n(39)&&s(F,"propertyIsEnumerable",$,!0),p.f=function(e){return z(d(e))}),a(a.G+a.W+a.F*!H,{Symbol:A});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)d(ee[te++]);for(var ne=x(d.store),ie=0;ne.length>ie;)v(ne[ie++]);a(a.S+a.F*!H,"Symbol",{"for":function(e){return r(B,e+="")?B[e]:B[e]=A(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!H,"Object",{create:Y,defineProperty:J,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),M&&a(a.S+a.F*(!H||c(function(){var e=A();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(n=t),!n&&g(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),i[1]=t,I.apply(M,i)}}}),A[R][j]||n(45)(A[R],j,A[R].valueOf),f(A,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},function(e,t,n){var i=n(68)("meta"),r=n(48),o=n(56),a=n(46).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(51)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[i].i},h=function(e,t){if(!o(e,i)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[i].w},d=function(e){return c&&p.NEED&&u(e)&&!o(e,i)&&l(e),e},p=e.exports={KEY:i,NEED:!1,fastKey:f,getWeak:h,onFreeze:d}},function(e,t,n){var i=n(41),r=n(42),o=n(39),a=n(151),s=n(46).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var i=n(60),r=n(108),o=n(109);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var i=n(36);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(34),r=n(160).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(t){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):r(i(e))}},function(e,t,n){var i=n(61),r=n(69).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(109),r=n(54),o=n(34),a=n(53),s=n(56),u=n(49),c=Object.getOwnPropertyDescriptor;t.f=n(50)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(n){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){n(156)("asyncIterator")},function(e,t,n){n(156)("observable")},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){f.ready(function(){f.runtime.permission.requestAuthCode({corpId:e,onSuccess:function(e){t(e.code)},onFail:function(e){console.warn(e)}})})}var o=(n(1),n(2),n(148)),a=i(o),s=n(15),u=s.isDingding()&&"object"==("undefined"==typeof dd?"undefined":(0,a["default"])(dd)),c=["device.notification","biz.contact.choose","biz.contact.complexChoose","biz.user.get","biz.util.openLink","biz.navigation","biz.alipay.pay"],l={status:"n",flag:101,info:"未引入dingding sdk"},f=window.dd,h="http://mudu.tv/dingding.php?a=ajaxGetUserInfo";t.init=function(e,t){return u?(f.config({agentId:e.agentId,corpId:e.corpId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:c}),f.ready(function(){"function"==typeof t&&t()}),void f.error(function(e){console.warn(e)})):l},t.login=function(e,t){r(e,function(n){var i={code:n,corpId:e};Fetcher.PostForm(h,i,function(e){if(e=JSON.parse(e),"y"==e.status){var n=e.data.detail||{};"function"==typeof t&&t({id:n.userid,user:n.name,avatar:n.avatar})}})})}},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Comment=n(166)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(139)),o=i(r),a=n(103),s=i(a),u=n(110),c=i(u),l=n(111),f=i(l),h=n(117),d={1e3:[100,"发送成功"],4920:[101,"管理员关闭聊天功能"],4923:[102,"该用户被禁言"],4921:[104,"不允许匿名聊天"],4915:[105,"聊天消息长度错误"],4906:[106,"频繁发送"],4907:[107,"发送聊天内容中包含敏感词"],4935:[135,"系统不允许观众使用匿名身份"],4936:[136,"昵称中包含敏感词"],103:[103,"其他错误，发送失败"]},p={allowed:!1,inUse:!1,nickname:"匿名观众",avatar:"https://static.mudu.tv/assets/anonymized-user-avatar.png"},v=function(){function e(t){var n=this,i=t.jsonObj,r=t.Room;(0,c["default"])(this,e),this.act_id=i.act.id,this.actHashId=i.actHashId,this.Room=r,this.anonymousCommentConfig=p,this.initComment(),this._msgbusDestroy(),_scope.MsgBus.OnMultiOnce(["Comment.GetConfig.Over","Comment.GetCount.Over"],function(){n.initCommentOver()})}return(0,f["default"])(e,[{key:"initComment",value:function(){var e=this,t=h.API_DOMAIN+"/comments/api/activities/"+this.actHashId+"/config",n=h.API_DOMAIN+"/comments/api/activities/"+this.actHashId+"/comments/count?reviewed=1",i=_scope.DB.Get("requestHeader");Fetcher.Get(t,function(t){try{if(t=JSON.parse(t),1e3!==t.errcode)throw new Error(t.errcode);var n=t.data;e.allow_publish=n["public"],e.allow_anonymous=n.allow_anonymous,e.needs_check=n.comment_review,e.auto_push=!n.danmu_review,e.anonymous_users_enabled=n.anonymous_users_enabled,e.anonymousCommentConfig.allowed=n.anonymous_users_enabled,_scope.MsgBus.Pub("Comment.GetConfig.Over")}catch(i){_scope.MsgBus.Pub("Comment.Init.Over"),_scope.MsgBus.Pub("Comment.Init.Error",i),_scope.MsgBus.Pub("Room.Init.Error",i)}},(0,s["default"])({"Content-Type":"application/json"},i.token)),Fetcher.Get(n,function(t){try{var n=JSON.parse(t);if(1e3!==n.errcode)throw new Error(n.errcode);e.SetCount(n.total),_scope.MsgBus.Pub("Comment.GetCount.Over")}catch(i){_scope.MsgBus.Pub("Comment.Init.Over"),_scope.MsgBus.Pub("Comment.Init.Error",i),_scope.MsgBus.Pub("Room.Init.Error",i)}},(0,s["default"])({"Content-Type":"application/json"},i.token))}},{key:"initCommentOver",value:function(){this._ropOnVisitorMute(),this._ropMsg(),_scope.MsgBus.Pub("Comment.Init.Over")}},{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){_scope.MsgBus.UnSubAll("User.Mute"),_scope.MsgBus.UnSubAll("Comment.Top"),_scope.MsgBus.UnSubAll("Comment.New"),_scope.MsgBus.UnSubAll("Comment.Delete"),_scope.MsgBus.UnSubAll("Comment.AllowPublish"),_scope.MsgBus.UnSubAll("Barrage.New"),_scope.MsgBus.UnSub("Destroy",e.destroyKey),e.UnSubCommentsTopic()})}},{key:"UnSubCommentsTopic",value:function(){this.unsubAct&&this.unsubAct(),this.unsubComment&&this.unsubComment()}},{key:"_ropMsg",value:function(){var e=this;this.unsubComment=nats.on("mudu.comments."+this.actHashId,function(t){var n=JSON.parse(t);n.action?e._parseMsgWithAction(n):n.type&&e._parseMsgWithType(n)})}},{key:"_parseMsgWithAction",value:function(e){var t=e.action.split(",");if(t){var n=e.content;if(t.indexOf("danmu")!==-1&&(this.hasNewEmotion(n.message)||this._updateDealDanmu(e)),t.indexOf("highlight")!==-1&&this._updateDealDanmu(e,!0),t.indexOf("comment")!==-1){if(n&&(10===n.msg_type||11===n.msg_type)&&0===n.priority)return;this._updateNewCmt(n)}}}},{key:"_parseMsgWithType",value:function(e){var t=e.data,n=e.type;switch(n){case"config":this._updateConfig(t);break;case"top":case"canceltop":this._updateNewTop(t);break;case"top_new":this._updateNewCmt(t),this._updateNewTop(t);break;case"delete":this._handleDelete(t);break;case"reply":this._updateNewReply(t);break;case"deletereply":this._handleDeleteReply(t)}}},{key:"hasNewEmotion",value:function(e){var t=new RegExp(/\[em_new_gif_([^]+)\]/g),n=new RegExp(/\[em_new_png_([^]+)\]/g);return t.test(e)||n.test(e)}},{key:"_ropOnVisitorMute",value:function(){this.unsubAct=nats.on("mudu.activities."+this.actHashId,function(e){e=JSON.parse(e);var t=e.type;if("ban"===t||"remban"===t){e=e.data;var n={};n.visitorId=e.user_id,n.isSelf=e.user_id==_scope.DB.Get("UserInfo").hash_id,n.user=e.username,n.mute="ban"===t,_scope.MsgBus.Pub("User.Mute",n)}})}},{key:"_resolveMsg",value:function(e,t){if(50===t)e='<div class="comment-img"><img src="'+e+'" /></div>';else if(42===t){var n=JSON.parse(e).amount;e='<span style="color: red">打赏 '+n+"元</span>"}else if(41===t||40===t){var i=JSON.parse(e),r=i.src,o=i.number;e="<span style='color: red'>送出 <img class='gift_img' style='width: 2rem;height: 2rem;vertical-align: middle;' src='"+r+"'/> 发生的，数量 "+o+"</span>"}else if(22===t){var a=JSON.parse(e),s=a.id;e='<div data-id="'+s+'" data-name="参与竞答领取红包！" class="rop-qa-redpack"><img src="https://static.mudu.tv/assets/redpack/qa-envelope.png"/><p>参与竞答领取红包！</p><span>点击答题</span></div>'}else if(21===t){var u=JSON.parse(e),c=u.id,l=u.name,f=u.type;e='<div data-id="'+c+'" data-name="官方" data-type="'+f+'" class="rop-word-redpack"><img src="//mudu.tv/assets/img/console/envelope.png"/><p>'+l+"</p></div>";
}else if(20===t){var h=JSON.parse(e),d=h.id,p=h.name,v=h.type;e='<div data-id="'+d+'" data-type="'+v+'" data-name="官方" data-wishes="'+p+'" class="envelope-rop-wrap"><img src="//mudu.tv/assets/img/console/envelope.png"/><p>'+p+"</p><span>查看红包</span></div>"}return e}},{key:"_resolveCmt",value:function(e){var t=(0,s["default"])({},e);try{var n=t.dateline;"string"==typeof n&&(t.dateline=parseInt(new Date(n).getTime()/1e3))}catch(i){}var r={id:t.id,visitor_id:t.user_id,username:t.username,title:t.title,is_admin:t.is_admin?1:0,dateline:t.dateline,checked:0!==t.priority?1:0,pushed:t.is_pushed?1:0,avatar:"/assets/img/avatar.png"===t.avatar?"https://static.mudu.tv/index/avatar.png":t.avatar,top:t.priority>=100?1:0,priority:t.priority,message:t.message,msg_type:t.msg_type,reply_count:t.reply_count||0,replies:t.replys||[],replys:t.replys||[]};return r}},{key:"GetAllowPublish",value:function(){return this.allow_publish}},{key:"GetNeedsCheck",value:function(){return this.needs_check}},{key:"GetAllowAnonymous",value:function(){return this.allow_anonymous}},{key:"GetAutoPush",value:function(){return this.auto_push}},{key:"Send",value:function(e,t){var n=this,i=h.API_DOMAIN+"/comments/api/activities/"+this.actHashId+"/comment",r={message:e};this.anonymousCommentConfig.allowed&&this.anonymousCommentConfig.inUse&&(r.avatar=this.anonymousCommentConfig.avatar||p.avatar,r.msg_type=11,r.username=this.anonymousCommentConfig.nickname||p.nickname);var a=_scope.DB.Get("requestHeader"),u=function(i){i=JSON.parse(i);var r={};r.status=1e3===i.errcode?"y":"n";var a=d[i.errcode]||[103,"发送失败!"];r.flag=a[0],r.info=a[1],r.hasBadWord=4907===i.errcode,"function"==typeof t&&t((0,o["default"])(r));var s=n.Room.tracker;s&&"function"==typeof s.triggerEvent&&s.triggerEvent({category:"interact",action:"comment",label:e})};Fetcher.Post(i,(0,o["default"])(r),u,(0,s["default"])({"Content-Type":"application/json"},a.token,a.session))}},{key:"Get",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=this;if(e>this.page||e<0||"number"!=typeof e)return void console.warn("page index err");0==e&&(e=this.page);var i=_scope.DB.Get("requestHeader"),r=h.API_DOMAIN+"/comments/api/activities/"+this.actHashId+"/comments?page_index="+e,a=function(i){i=JSON.parse(i);var r=i.data,a={};a=1e3===i.errcode?{status:"y",info:"评论获取成功",data:{page:+e,comments:r.map(function(e){return n._resolveCmt(e)})}}:{status:"n",info:"没有更多评论！",data:{comments:[]}},"function"==typeof t&&t((0,o["default"])(a))};Fetcher.Get(r,a,i.token)}},{key:"SetCount",value:function(e){this.count=e,this.page=Math.ceil(e/20)}},{key:"GetPage",value:function(){return this.page}},{key:"GetAnonymousCommentConfig",value:function(){return this.anonymousCommentConfig}},{key:"SetAnonymousCommentConfig",value:function(e,t){var n=this,i=(0,s["default"])({},this.anonymousCommentConfig,e),r=function(e,t){try{"function"==typeof t&&t(e)}catch(n){console.error()}};return i.nickname.length>60?void r((0,o["default"])({status:"n",errcode:1406}),t):this.anonymous_users_enabled?void this._checkSensitiveWords(i.nickname,function(e){e.sensitive?r((0,o["default"])({status:"n",errcode:4936}),t):(n.anonymousCommentConfig=i,r((0,o["default"])({status:"y",errcode:1e3}),t))}):void r((0,o["default"])({status:"n",errcode:4935}),t)}},{key:"_checkSensitiveWords",value:function(e,t){var n=_scope.DB.Get("requestHeader");Fetcher.Post(h.API_DOMAIN+"/senswords/api/users/"+this.Room.uin+"/nick/sensword",(0,o["default"])({word:e}),function(e){var n=JSON.parse(e);t(n)},(0,s["default"])({"Content-Type":"application/json"},n.token))}},{key:"_updateConfig",value:function(e){var t=e.allow_anonymous,n=e.comment_review,i=e.danmu_review;this.allow_anonymous=t,this.needs_check=n,this.auto_push=!i,this.allow_publish=e["public"],this.anonymous_users_enabled=e.anonymous_users_enabled,this.anonymousCommentConfig.allowed=e.anonymous_users_enabled,_scope.MsgBus.Pub("Comment.config",e)}},{key:"_updateDealDanmu",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.content,i={visitor_id:n.user_id,text:n.message,msg_type:n.msg_type,stime:(new Date).getTime(),high:t?"1":"0"};_scope.MsgBus.Pub("Barrage.New",(0,o["default"])(i))}},{key:"_updateNewCmt",value:function(e){var t=this._resolveCmt(e);_scope.MsgBus.Pub("Comment.New",(0,o["default"])(t))}},{key:"_updateNewTop",value:function(e){var t=this._resolveCmt(e);_scope.MsgBus.Pub("Comment.Top",(0,o["default"])(t))}},{key:"_handleDelete",value:function(e){var t=this._resolveCmt(e);_scope.MsgBus.Pub("Comment.Delete",(0,o["default"])(t))}},{key:"_updateNewReply",value:function(e){_scope.MsgBus.Pub("Comment.Reply.New",(0,o["default"])(e))}},{key:"_handleDeleteReply",value:function(e){_scope.MsgBus.Pub("Comment.Reply.Delete",(0,o["default"])(e))}}]),e}();e.exports=v},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.LuckyDraw=n(168)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(139)),o=i(r),a=n(110),s=i(a),u=n(111),c=i(u),l=n(117),f=i(l),h=function(){function e(){var t=this;(0,s["default"])(this,e),_scope.Feature.EventBus(this),_scope.Feature.Room(this),_scope.MsgBus.On("Room.Init.Over",function(){t._sub()}),this._msgbusDestroy()}return(0,c["default"])(e,[{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){_scope.MsgBus.UnSubAll("LuckyDraw.Open"),_scope.MsgBus.UnSub("Destroy",e.destroyKey),e.unsubEvents()})}},{key:"Get",value:function(e){var t=this.Room.GetId(),n=f["default"].API_DOMAIN+("/activity/"+t+"/getLuckyDrawInfo"),i=function(t){t=JSON.parse(t);var n={};n.status=t.status,n.flag=t.flag,n.info=t.msg,n.data=t.data,"function"==typeof e&&e((0,o["default"])(n))};Fetcher.Post(n,{},i,{"Content-Type":"application/json"})}},{key:"SignUp",value:function(e,t){var n=this,i=this.Room.GetId(),r=f["default"].API_DOMAIN+("/activity/"+i+"/setLuckyDrawSignUp"),a={uname:e.userName,phone_voucher:e.voucher,custom_voucher:e.custom_voucher,custom_field:e.custom_field},s=function(i){i=JSON.parse(i);var r={};r.status=i.status,r.info=i.msg,r.flag=i.flag,"function"==typeof t&&t((0,o["default"])(r));var a=n.Room.tracker;if(a&&"function"==typeof a.triggerEvent&&"y"===i.status){a.triggerEvent({category:"interact",action:"lucky_draw"});var s=e.voucher;s&&/^[0-9-+]+$/.test(s)&&a.triggerEvent({category:"interact",action:"phone",label:(0,o["default"])({phone:s,is_verified:!1})})}};Fetcher.Post(r,(0,o["default"])(a),s,{"Content-Type":"application/json"})}},{key:"Result",value:function(e){var t=this,n=this.Room.GetId(),i=f["default"].API_DOMAIN+("/activity/"+n+"/getLuckyDrawResult/v2"),r=function(n){n=JSON.parse(n);var i={};i.status=n.status,i.flag=n.flag,i.info=n.msg;try{var r="y"===n.status&&n.data.length>0?n.data[0]:{};r.uptime_timestamp=r.uptime_timestamp||0,r.service_timestamp=r.service_timestamp||0,r.disable_edit_time=r.uptime_timestamp+(Math.round(Date.now()/1e3)-r.service_timestamp)+1800,r.remark=r.award_name,delete r.award_name,i.data=r,t._GetLuckyDrawLuckyInfo(i.data.ld_record_id,function(t){t=JSON.parse(t),i.data.luckers=t.data||[],i.data.luckers.map(function(e){return e.voucher=e.phone_voucher,e.remark=i.data.remark||"",e}),"function"==typeof e&&e((0,o["default"])(i))})}catch(a){i.data={},"function"==typeof e&&e((0,o["default"])(i))}};Fetcher.Get(i,r)}},{key:"GetAllResult",value:function(e){var t=this,n=this.Room.GetId(),i=f["default"].API_DOMAIN+("/activity/"+n+"/getLuckyDrawResult/v2"),r=function(n){n=JSON.parse(n);var i={};try{i.status=n.status,i.flag=n.flag,i.info=n.msg,i.data=n.data||[];var r=Math.round(Date.now()/1e3),a="";i.data.map(function(e){return e.uptime=t._formatTime(e.uptime_timestamp),e.disable_edit_time=e.uptime_timestamp+(r-e.service_timestamp)+1800,e.remark=e.award_name,delete e.award_name,e.list=[],a=a+e.ld_record_id+",",e}),a.length>1?(a=a.substring(0,a.length-1),t._GetLuckyDrawLuckyInfoList(a,function(t){t=JSON.parse(t),i.data.map(function(e){return e.list=t.data&&t.data[e.ld_record_id]||[],e.list.map(function(e){return e.voucher=e.phone_voucher,e}),e}),"function"==typeof e&&e((0,o["default"])(i))})):"function"==typeof e&&e((0,o["default"])(i))}catch(s){i.data=[],"function"==typeof e&&e((0,o["default"])(i))}};Fetcher.Get(i,r)}},{key:"GetAddress",value:function(e,t){var n=this.Room.GetId(),i=f["default"].API_DOMAIN+("/activity/"+n+"/getLuckyDrawAddress?ld_record_id="+e),r=function(e){e=JSON.parse(e);var n={};n.status=e.status,n.flag=e.flag,n.info=e.msg,n.data=e.data,"function"==typeof t&&t((0,o["default"])(n))};Fetcher.Get(i,r)}},{key:"SetAddress",value:function(e,t,n){var i=this.Room.GetId(),r=f["default"].API_DOMAIN+("/activity/"+i+"/setLuckyDrawAddress"),a={ld_record_id:t,address:e},s=function(e){e=JSON.parse(e);var t={};t.status=e.status,t.flag=e.flag,t.info=e.msg,"function"==typeof n&&n((0,o["default"])(t))};Fetcher.Post(r,(0,o["default"])(a),s,{"Content-Type":"application/json"})}},{key:"_sub",value:function(){var e=this,t=this.Room.GetId();this.unsubEvents=nats.on("lucky_draw_"+t,function(t){var n=JSON.parse(t);switch(n.type){case"open_lucky_draw":e.Result(function(e){_scope.MsgBus.Pub("LuckyDraw.Open",e)});break;case"lucky_draw_save":console.log("lucky draw change:",t),_scope.MsgBus.Pub("LuckyDraw.ConfigChange",t);break;default:console.log("有一个抽奖事件")}})}},{key:"_GetLuckyDrawLuckyInfo",value:function(e,t){var n=this.Room.GetId(),i=f["default"].API_DOMAIN+("/activity/"+n+"/getLuckyDrawLuckyInfo?ld_record_id="+e),r=function(e){e=JSON.parse(e);var n={};n.status=e.status,n.flag=e.flag,n.info=e.msg,n.data=e.data||[],"function"==typeof t&&t((0,o["default"])(n))};Fetcher.Get(i,r)}},{key:"_GetLuckyDrawLuckyInfoList",value:function(e,t){var n=this.Room.GetId(),i=f["default"].API_DOMAIN+("/activity/"+n+"/getLuckyDrawLuckyInfoList?ld_record_ids="+e),r=function(e){e=JSON.parse(e);var n={};n.status=e.status,n.flag=e.flag,n.info=e.msg,n.data=e.data||{},"function"==typeof t&&t((0,o["default"])(n))};Fetcher.Get(i,r)}},{key:"_formatTime",value:function(e){var t=new Date(1e3*e),n=t.getFullYear(),i=(t.getMonth()+1).toString().padStart(2,"0"),r=t.getDate().toString().padStart(2,"0"),o=t.getHours().toString().padStart(2,"0"),a=t.getMinutes().toString().padStart(2,"0"),s=t.getSeconds().toString().padStart(2,"0");return n+"-"+i+"-"+r+" "+o+":"+a+":"+s}},{key:"_formatResult",value:function(e){var t=[],n=null;return e.map(function(e){n&&e.uptime===n.uptime?n.list.push({uname:e.uname,voucher:e.phone_voucher,custom_voucher:e.custom_voucher}):(n={remark:e.remark,uptime:e.uptime,list:[{uname:e.uname,voucher:e.phone_voucher,custom_voucher:e.custom_voucher}]},t.push(n))}),t}}]),e}();e.exports=h},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.PPT=n(170)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(104)),o=i(r),a=n(139),s=i(a),u=n(110),c=i(u),l=n(111),f=i(l),h=n(117);e.exports=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,c["default"])(this,e),_scope.Feature.EventBus(this),t.config=t.config||{},this.id=t.act_id,this.config={current_doc:"",current_page:0,is_turn_page:!1,name:"",open:!1,url:"",total_page:0,images:[]},this.actHashId=t.actHashId,this.isPptInfoInited=!1,this.isPptConfigInited=!1,this.isPptInited=!1,this._fetchInitPptData(this._listenInitOver.bind(this,"isPptInfoInited")),this._fetchPptSwitcher(),this._fetchConfigPptData(this._listenInitOver.bind(this,"isPptConfigInited")),this._ropPptChange(),this._msgbusDestroy()}return(0,f["default"])(e,[{key:"_listenInitOver",value:function(e){"isPptInfoInited"!==e&&"isPptConfigInited"!==e||(this[e]=!0,this.isPptInfoInited&&this.isPptConfigInited&&(this.isPptInited=!0,_scope.MsgBus.Pub("PPT.Inited.Over")))}},{key:"_fetchInitPptData",value:function(e){var t=this,n=this.actHashId,i=h.API_DOMAIN+"/docs/api/activities/"+n+"/documents/now?time="+(new Date).getTime();Fetcher.Get(i,function(n,i){try{if(n=JSON.parse(n),200!==i)throw console.log("fetch ppt info failed."),new Error(i);if(1e3!==n.errcode)throw console.log("something wrong with ppt info."),new Error(n.errcode);t.config.current_doc=n.doc_id,t.config.current_page=n.index,t.config.url=(n.images[n.index]?n.images[n.index].url:"")||"",t.config.total_page=n.images.length,t.config.images=n.images,"function"==typeof e&&e()}catch(r){"function"==typeof e&&e(),_scope.MsgBus.Pub("PPT.Init.Error",r),_scope.MsgBus.Pub("Room.Init.Error",r)}})}},{key:"_fetchPptSwitcher",value:function(){var e=this,t=this.actHashId,n=h.API_DOMAIN_V2+"/v2/micro-act/view/module_switch?module_id="+h.MENU_TYPE.DOC+"&act_id="+t;Fetcher.Get(n,function(t,n){try{if(t=JSON.parse(t),200!==n)throw console.log("fetch ppt switcher failed."),new Error(n);if(1e3!==t.errcode)throw console.log("something wrong with ppt switcher."),new Error(t.errcode);e.config.open=t.is_open}catch(i){_scope.MsgBus.Pub("PPT.Init.Error",i)}},_scope.DB.Get("requestHeader").session)}},{key:"_fetchConfigPptData",value:function(e){var t=this,n=this.actHashId,i=h.API_DOMAIN+"/docs/api/activities/"+n+"/config";Fetcher.Get(i,function(n,i){try{if(n=JSON.parse(n),200!==i)throw console.log("fetch ppt config failed."),new Error(i);if(1e3!==n.errcode)throw console.log("something wrong with ppt config."),new Error(n.errcode);t.config.name=n.name,t.config.is_turn_page=n.turn,"function"==typeof e&&e()}catch(r){"function"==typeof e&&e(),_scope.MsgBus.Pub("PPT.Init.Error",r),_scope.MsgBus.Pub("Room.Init.Error",r)}})}},{key:"_ropPptChange",value:function(){var e=this,t=this.actHashId;rop.On("app.mududoc.sync."+t,function(t){t=JSON.parse(t),"config"===t.type?e._handleConfigChange(t):"doc"===t.type&&e._handleDocChange(t)}),rop.On("mudu.menu."+t,function(t){if(t=JSON.parse(t),"menu.switch"===t.type)switch(t.data.menu_type){case h.MENU_TYPE.DOC:e.config.open=t.data.is_turn_on;var n={open:t.data.is_turn_on?1:0};1===n.open&&(n.page=e.config.current_page+1,n.total_page=e.config.total_page,n.url=e.config.url),_scope.MsgBus.Pub("PPT.IsOpen",(0,s["default"])(n))}})}},{key:"UnSubPPTTopics",value:function(){rop.Remove("app.mududoc.sync."+this.actHashId),rop.Remove("mudu.menu."+this.actHashId)}},{key:"_handleDocChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=this.config;if(e.url)if(e.docid===this.config.current_doc){this.config.current_page=e.index,this.config.url=e.url;var i={page:e.index+1,url:e.url,total_page:n.total_page};_scope.MsgBus.Pub("PPT.Changed",(0,s["default"])(i))}else this._fetchInitPptData(function(){var e=t.config,n={page:e.current_page+1,url:e.url,total_page:e.total_page};_scope.MsgBus.Pub("PPT.Changed",(0,s["default"])(n))});else this.config=(0,o["default"])({},n,{current_doc:"",current_page:0,name:"",url:"",total_page:0,images:[]}),_scope.MsgBus.Pub("PPT.Doc.delete")}},{key:"_handleConfigChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.config.name=e.name;var t=this.config;if(e.turn!==t.is_turn_page){this.config.is_turn_page=e.turn;var n={is_turn_page:e.turn?1:0,current_page:t.current_page+1,total_page:t.total_page,url:t.url};_scope.MsgBus.Pub("PPT.AllowTurnPage",(0,s["default"])(n))}}},{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){rop.Remove("app.mududoc.sync."+e.actHashId),rop.Remove("mudu.menu."+e.actHashId),_scope.MsgBus.UnSubAll("PPT.Changed"),_scope.MsgBus.UnSubAll("PPT.Doc.delete"),_scope.MsgBus.UnSubAll("PPT.IsOpen"),_scope.MsgBus.UnSubAll("PPT.AllowTurnPage"),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"GetUrl",value:function(){return this.config.url}},{key:"IsOpen",value:function(){return this.config.open}},{key:"GetName",value:function(){return this.config.name||""}},{key:"GetAllowTurnPage",value:function(){return this.config.is_turn_page}},{key:"GetCurrentPage",value:function(){return this.config.current_page+1}},{key:"GetTotalPage",value:function(){return this.config.total_page}},{key:"GetPageImgUrl",value:function(e,t){var n=+e-1,i=this.config.images[n],r=(i?i.url:"")||"";"function"==typeof t&&t(r)}}]),e}()},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Barrage=n(172)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(110)),o=i(r),a=n(111),s=i(a);e.exports=function(){function e(){(0,o["default"])(this,e),_scope.Feature.EventBus(this)}return(0,s["default"])(e,[{key:"Placeholder",value:function(){}}]),e}()},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Vote=n(174)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(139)),o=i(r),a=n(110),s=i(a),u=n(111),c=i(u),l=n(117),f=i(l);e.exports=function(){function e(t){var n=this;(0,s["default"])(this,e),_scope.Feature.EventBus(this),this.act_id=t.act_id,this.vote=t.vote,this.tracker=t.tracker,t.vote&&(this.vote_id=t.vote.id),rop.On("vote_"+this.act_id,function(e){var t=JSON.parse(e);return n.vote_id=t.vote_id,n.vote=t,0===t.type?void _scope.MsgBus.Pub("Vote.Changed",(0,o["default"])({status:"n",info:"无投票信息",flag:101})):void n.Get(function(e){_scope.MsgBus.Pub("Vote.Changed",e)})}),this._msgbusDestroy()}return(0,c["default"])(e,[{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){rop.Remove("vote_"+e.act_id),_scope.MsgBus.UnSubAll("Vote.Changed"),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"UnSubVoteTopics",value:function(){rop.Remove("vote_"+this.act_id)}},{key:"Get",value:function(e){var t=f["default"].API_DOMAIN+"/?c=activity&a=ajaxGetActVote",n={vote_id:this.vote_id};if(!this.vote_id)return void e((0,o["default"])({status:"n",info:"无投票信息",flag:101}));var i=function(t){t=JSON.parse(t);var n={};n.status=t.status,n.data=t.vote,n.info="获取成功","function"==typeof e&&e((0,o["default"])(n))};Fetcher.PostForm(t,n,i)}},{key:"Vote",value:function(e,t){var n=this,i=f["default"].API_DOMAIN+"/?c=activity&a=ajaxVote",r={vote:(0,o["default"])(e),act_id:this.act_id},a=function(e){e=JSON.parse(e);var i={};i.status=e.status,i.flag=e.Flag,i.info=e.msg,"function"==typeof t&&t((0,o["default"])(i));var r=n.tracker;"y"===e.status&&r&&"function"==typeof r.triggerEvent&&r.triggerEvent({category:"interact",action:"vote"})};Fetcher.PostForm(i,r,a)}}]),e}()},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Signup=n(176)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(139)),o=i(r),a=n(110),s=i(a),u=n(111),c=i(u),l=n(117),f=n(177),h=n(15),d=function(){function e(t){var n=t.actHashId,i=t.tracker,r=t.privacyUrl;(0,s["default"])(this,e),_scope.Feature.EventBus(this),this.actHashId=n,this.tracker=i,this.smsTimer=null,this.privacyUrl=r,this.config=null,this._rop(),this._msgbusDestroy()}return(0,c["default"])(e,[{key:"_rop",value:function(){rop.On("mudu.questionnaire.live."+this.actHashId,function(e){var t=JSON.parse(e),n=t.type,i=t.data;switch(n){case"question.status":_scope.MsgBus.Pub("Signup.Status.Change",(0,o["default"])(i))}})}},{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.Sub("Destroy",function(){rop.Remove("mudu.questionnaire.live."+e.actHashId),_scope.MsgBus.UnSubAll("Signup.Status.Change"),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"UnSubSignTopics",value:function(){rop.Remove("mudu.questionnaire.live."+this.actHashId)}},{key:"GetUsingSignup",value:function(e){var t=this;Fetcher.Get(l.API_DOMAIN+"/questionnaire/api/v1/activities/"+this.actHashId+"/source/live/question",function(n){n=JSON.parse(n),1e3===n.errcode&&(n.page_before=t._formatSignupArr(n.page_before),n.page_in=t._formatSignupArr(n.page_in),n.page_before&&(n.page_before=n.page_before.map(function(e){return e.privacy_url=t.privacyUrl,e})),n.page_in&&(n.page_in=n.page_in.map(function(e){return e.privacy_url=t.privacyUrl,e}))),"function"==typeof e&&e((0,o["default"])(n))},{"Content-Type":"application/json"})}},{key:"SubmitSingup",value:function(e,t){var n=e.signupId,i=e.code,r=e.columns;if("string"!=typeof n&&!n)return void console.warn("SubmitSingup 传入的参数 signupId 不是有效string值");if(!r||"[object Array]"!==Object.prototype.toString.call(r)||0===r.length)return void console.warn("SubmitSingup 传入的参数 columns 不是有效值");var a=this,s="",u="";r=r.map(function(e){return"phone"===e.type?s=e.text:"nickname"===e.type&&(u=e.text),"question"===e.type|"questionAnswer"===e.type?{type:e.type,name:e.name,value:(e.selects||[]).join(",")+"||"+(e.text||"")}:{type:e.type,name:e.name,value:e.text}}),Fetcher.Post(l.API_DOMAIN+"/questionnaire/api/v1/activities/"+this.actHashId+"/source/live/"+n,(0,o["default"])({columns:r,verify_code:i||""}),function(e){"function"==typeof t&&t(e);var n=a.tracker;e=JSON.parse(e),1e3===e.errcode&&n&&"function"==typeof n.triggerEvent&&(n.triggerEvent({category:"interact",action:"sign_up"}),s&&n.triggerEvent({category:"interact",action:"phone",label:(0,o["default"])({phone:s,is_verified:!1})}),u&&_scope.MsgBus.Pub("User.Update"))},{"Content-Type":"application/json"})}},{key:"InitCaptcha",value:function(e){var t=e.isH5,n=e.width,i=e.height,r=e.success,o=e.fail,a=e.renderTo;if("boolean"!=typeof t&&"undefined"!=typeof t)return console.warn("resetCaptcha 传入的参数 isH5 不是boolean值"),void(o&&o());if("number"!=typeof n||"number"!=typeof i)return console.warn("resetCaptcha 传入的参数 width或height 不是number值"),void(o&&o());if("function"!=typeof r)return console.warn("resetCaptcha 传入的参数 success 不是function"),void(o&&o());if("string"!=typeof a&&/^#/.test(a))return console.warn("resetCaptcha 传入的参数 renderTo 不正确，应当形如：#yourDomId"),void(o&&o());t="undefined"==typeof t?h.isMobile:t;var s=this;(0,f.initCaptcha)(e,function(e){s.ResetCaptcha=e})}},{key:"ResetCaptcha",value:function(){console.warn("ResetCaptcha 调用出错，请先调用InitCaptcha")}},{key:"_formatConfig",value:function(){this._hasBeenRemovedLog("_formatConfig")}},{key:"_formatSignupArr",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)?e.map(function(e){return 0!=e.pic.indexOf("http")&&(e.pic="//mudu.tv"+e.pic),e}):e}},{key:"_startTimer",value:function(){var e=this;this.smsTimer=setTimeout(function(){e._clearTimer()},5e4)}},{key:"_clearTimer",value:function(){clearTimeout(this.smsTimer),this.smsTimer=null}},{key:"GetConfig",value:function(){return this._hasBeenRemovedLog("GetConfig"),this.config}},{key:"SendSmsRequest",value:function(e,t){var n=e.signupId,i=e.sig,r=e.sessionId,a=e.token,s=e.phone_number,u=e.isH5;if("string"!=typeof n&&!n)return void console.warn("SendSmsRequest 传入的参数 signupId 不能为空");if(!(i&&r&&a)||"boolean"!=typeof u&&"undefined"!=typeof u)return void console.warn("SendSmsRequest 传入的参数 sig、sessionId、token、isH5 不能为空或类型不匹配");if(!s||"string"!=typeof s)return void console.warn("SendSmsRequest 传入的参数 phone_number 不能为空或类型不匹配");this.timer&&"function"==typeof t&&t({errcode:5699,msg:"短信发送频率过高"}),u="undefined"==typeof u?h.isMobile:u;var c=this;Fetcher.Post(l.API_DOMAIN+"/questionnaire/api/v1/activities/"+this.actHashId+"/source/live/"+n+"/auth_code",(0,o["default"])({sig:i,sessionId:r,token:a,phone_number:s,scene:u?"ic_message_h5":"ic_message"}),function(e){console.log("----->",e),1e3!==e.errcode&&c._clearTimer(),"function"==typeof t&&t(e)},{"Content-Type":"application/json"})}},{key:"SendSms",value:function(){this._hasBeenRemovedLog("SendSms")}},{key:"Submit",value:function(){this._hasBeenRemovedLog("Submit")}},{key:"_hasBeenRemovedLog",value:function(e){console.warn("您当前使用的"+(e||"")+"方法已经被移除，详情参见：http://mudu.tv/api/v1/WEB_SDK/COMPONENT/SIGNUP.html")}}]),e}();e.exports=d},function(e,t,n){function i(e,t){var n=document.createElement("script");n.type="text/javascript",n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}function r(e,t){var n=e.length;if(0===n)return void("function"==typeof t&&t());var r=0;e.map(function(e){i(e,function(){++r===n&&"function"==typeof t&&t()})})}function o(e,t){var n=[];e&&n.push("//g.alicdn.com/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"),n.push("//g.alicdn.com/sd/smartCaptcha/0.0.4/index.js","//g.alicdn.com/sd/nvc/1.1.112/guide.js","//g.alicdn.com/sd/quizCaptcha/0.0.1/index.js"),r(n,t)}function a(e,t){var n=e.isH5,i=e.width,r=e.height,a=e.success,s=e.fail,u=e.renderTo;window.NVC_Opt={appkey:"FFFF0N000000000076F1",scene:n?"ic_message_h5":"ic_message",renderTo:u,elements:["//img.alicdn.com/tfs/TB17cwllsLJ8KJjy0FnXXcFDpXa-50-74.png","//img.alicdn.com/tfs/TB17cwllsLJ8KJjy0FnXXcFDpXa-50-74.png"],bg_back_prepared:"//img.alicdn.com/tps/TB1skE5SFXXXXb3XXXXXXXXXXXX-100-80.png",bg_front:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABQCAMAAADY1yDdAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAADUExURefk5w+ruswAAAAfSURBVFjD7cExAQAAAMKg9U9tCU+gAAAAAAAAAIC3AR+QAAFPlUGoAAAAAElFTkSuQmCC",obj_ok:"//img.alicdn.com/tfs/TB1rmyTltfJ8KJjy0FeXXXKEXXa-50-74.png",bg_back_pass:"//img.alicdn.com/tfs/TB1KDxCSVXXXXasXFXXXXXXXXXX-100-80.png",obj_error:"//img.alicdn.com/tfs/TB1q9yTltfJ8KJjy0FeXXXKEXXa-50-74.png",bg_back_fail:"//img.alicdn.com/tfs/TB1w2oOSFXXXXb4XpXXXXXXXXXX-100-80.png",upLang:{cn:{_ggk_guide:"请摁住鼠标左键，刮出两面盾牌",_ggk_success:"恭喜您成功刮出盾牌<br/>继续下一步操作吧",_ggk_loading:"加载中",_ggk_fail:["呀，盾牌不见了<br/>请","javascript:noCaptcha.reset()","再来一次","或","http://survey.taobao.com/survey/QgzQDdDd?token=%TOKEN","反馈问题"],_ggk_action_timeout:["我等得太久啦<br/>请","javascript:noCaptcha.reset()","再来一次","或","http://survey.taobao.com/survey/QgzQDdDd?token=%TOKEN","反馈问题"],_ggk_net_err:["网络实在不给力<br/>请","javascript:noCaptcha.reset()","再来一次","或","http://survey.taobao.com/survey/QgzQDdDd?token=%TOKEN","反馈问题"],_ggk_too_fast:["您刮得太快啦<br/>请","javascript:noCaptcha.reset()","再来一次","或","http://survey.taobao.com/survey/QgzQDdDd?token=%TOKEN","反馈问题"]}}},o(n,function(){var e=new smartCaptcha({renderTo:u,width:i,height:r,default_txt:"点击按钮开始智能验证",success_txt:"验证成功",fail_txt:"验证失败，请在此点击按钮刷新",scaning_txt:"智能检测中",success:function(e){a&&a({token:window.NVC_Opt.token,sessionId:e.sessionId,sig:e.sig})},fail:function(){s&&s()}});e.init(),"function"==typeof t&&t(e.reset.bind(e))})}n(1),n(2);e.exports={initCaptcha:a}},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Signin=n(179)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(103)),o=i(r),a=n(139),s=i(a),u=n(110),c=i(u),l=n(111),f=i(l),h=n(117),d=n(11),p=i(d),v=function(){function e(t){var n=t.actHashId;(0,c["default"])(this,e),_scope.Feature.EventBus(this),this.actHashId=n,this._rop(),this._msgbusDestroy()}return(0,f["default"])(e,[{key:"_rop",value:function(){var e=this;this.unsubComment=nats.on("mudu.comments."+this.actHashId,function(t){var n=JSON.parse(t),i=n.action,r=n.service_type,o=n.content;if("sign"===r)if("config"===i)e.Get();else if("close"===i){var a=o.hash_id,u=o.is_open,c=o.is_forced,l=o.start_at,f=o.end_at,h=o.now_time,d={id:a,is_open:u,is_forced:c,is_sign:u,start_time:l,end_time:f,server_time:h},p={errcode:1e3,msg:"ok",data:d};_scope.MsgBus.Pub("Signin.Close",(0,s["default"])(p))}})}},{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.Sub("Destroy",function(){e.unsubComment(),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"UnSubSigninTopic",value:function(){this.unsubComment()}},{key:"Get",value:function(e){try{var t=h.API_DOMAIN_V2+"/v2/watch/"+this.actHashId+"/interact/signup/view/config";Fetcher.Get(t,function(t){if(t=JSON.parse(t),1e3===t.errcode){var n=(0,o["default"])({},t.data,{is_sign:t.is_sign}),i={errcode:t.errcode,msg:t.msg,data:n};_scope.MsgBus.Pub("Signin.Config",(0,s["default"])(i)),e&&e((0,s["default"])(i))}},_scope.DB.Get("requestHeader").session)}catch(n){var i={errcode:-1,msg:"获取签到配置,稍后再试!"};e&&e((0,s["default"])(i))}}},{key:"Send",value:function(e,t){try{var n=h.API_DOMAIN_V2+"/v2/watch/"+this.actHashId+"/interact/signup/watch/sign?id="+e;Fetcher.Post(n,{},function(e){return e=JSON.parse(e),1e3===e.errcode?(_scope.MsgBus.Pub("Signin.Result",(0,s["default"])(e)),void(t&&t((0,s["default"])(e)))):void _scope.MsgBus.Pub("Signin.Result",(0,s["default"])(e))},(0,o["default"])({"Content-Type":"application/x-www-form-urlencoded"},_scope.DB.Get("requestHeader").session))}catch(i){var r={errcode:-1,msg:"签到失败,稍后再试!"};t&&t((0,s["default"])(r))}}},{key:"Assign",value:function(){(0,p["default"])("#assign-username-btn").on("click",function(){})}}]),e}();e.exports=v},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Topic=n(181)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(104)),o=i(r),a=n(148),s=i(a),u=n(139),c=i(u),l=n(110),f=i(l),h=n(111),d=i(h),p=n(117),v={100:"发送成功",102:"管理员禁止发布话题",103:"该用户被禁言",104:"不允许匿名发表话题",105:"内容和图片不能同时为空",106:"管理员禁止回复"},y={topicType:"1"},g=10,m=function(){function e(t){var n=t.act_id,i=t.topic_visitor_publish,r=t.topic_needs_check,o=t.topic_allow_reply,a=t.topic_count_num,s=t.tracker;(0,f["default"])(this,e),_scope.Feature.EventBus(this),this.topic_visitor_publish=!!i,this.topic_needs_check=!!r,this.topic_allow_reply=!!o,this.act_id=n,this.tracker=s,this.SetCount(a||0),this._rop(),this._msgbusDestroy()}return(0,d["default"])(e,[{key:"_rop",value:function(){var e=this;rop.On("topic-"+this.act_id,function(t){_scope.MsgBus.Pub("Topic.New",(0,c["default"])(e._filterTopicReplies(JSON.parse(t))))}),rop.On("topic_set_top_"+this.act_id,function(t){_scope.MsgBus.Pub("Topic.Top",(0,c["default"])(e._filterTopicReplies(JSON.parse(t))))}),rop.On("topic_allow_reply_"+this.act_id,function(t){var n=JSON.parse(t).status;e.topic_allow_reply=!!n,_scope.MsgBus.Pub("Topic.AllowReply",e.topic_allow_reply)}),rop.On("topic_visitor_publish_"+this.act_id,function(t){var n=JSON.parse(t).status;e.topic_visitor_publish=!!n,_scope.MsgBus.Pub("Topic.AllowPublish",e.topic_visitor_publish)}),rop.On("topic_needs_check_"+this.act_id,function(t){var n=JSON.parse(t).status;e.topic_needs_check=!!n,_scope.MsgBus.Pub("Topic.NeedsCheck",e.topic_needs_check)}),rop.On("topic-reply-"+this.act_id,function(e){_scope.MsgBus.Pub("Topic.Reply.New",e)}),rop.On("topic_del_"+this.act_id,function(e){_scope.MsgBus.Pub("Topic.Delete",e)})}},{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){rop.Remove("topic-"+e.act_id),_scope.MsgBus.UnSubAll("Topic.New"),rop.Remove("topic_set_top_"+e.act_id),_scope.MsgBus.UnSubAll("Topic.Top"),rop.Remove("topic_allow_reply_"+e.act_id),_scope.MsgBus.UnSubAll("Topic.AllowReply"),rop.Remove("topic_visitor_publish_"+e.act_id),_scope.MsgBus.UnSubAll("Topic.AllowPublish"),rop.Remove("topic_needs_check_"+e.act_id),_scope.MsgBus.UnSubAll("Topic.NeedsCheck"),rop.Remove("topic-reply-"+e.act_id),_scope.MsgBus.UnSubAll("Topic.Reply.New"),rop.Remove("topic_del_"+e.act_id),_scope.MsgBus.UnSubAll("Topic.Delete"),_scope.MsgBus.UnSub("Destroy",e.destroyKey)})}},{key:"UnSubTopics",value:function(){rop.Remove("topic-"+this.act_id),rop.Remove("topic_set_top_"+this.act_id),rop.Remove("topic_allow_reply_"+this.act_id),rop.Remove("topic_visitor_publish_"+this.act_id),rop.Remove("topic_needs_check_"+this.act_id),rop.Remove("topic-reply-"+this.act_id),rop.Remove("topic_del_"+this.act_id)}},{key:"_filterTopicReplies",value:function(e){var t=_scope.DB.Get("UserInfo").id;return e.replies=(e.replies||[]).filter(function(e){return!(!e.checked&&t!=e.visitor_id)}),e}},{key:"SendTopic",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];if(t.msg||t.images&&t.images.length){t.msg=t.msg||"",t.images=t.images||[];var i=p.API_DOMAIN+"/activity/"+this.act_id+"/setTopic",r={images:t.images.join(","),message:t.msg},o=function(t){var i=JSON.parse(t);"function"==typeof n&&n((0,c["default"])({status:i.status,flag:i.flag,info:v[i.flag]||"",hasBadWord:i.hasBadWord,word:i.word,
topicNeedsChecked:i.topicNeedsChecked}));var r=e.tracker;r&&"function"==typeof r.triggerEvent&&100==i.flag&&r.triggerEvent({category:"interact",action:"topic"})};Fetcher.Post(i,(0,c["default"])(r),o,{"Content-Type":"application/json"})}}},{key:"SendReply",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];if(t.topicId&&t.msg){var i=p.API_DOMAIN+"/activity/"+this.act_id+"/setTopic",r={belong_to:+t.topicId,message:t.msg},o=function(t){var i=JSON.parse(t);"function"==typeof n&&n((0,c["default"])({status:i.status,flag:i.flag,info:v[i.flag]||"",hasBadWord:i.hasBadWord,word:i.word,topicNeedsChecked:i.topicNeedsChecked}));var r=e.tracker;r&&"function"==typeof r.triggerEvent&&100==i.flag&&r.triggerEvent({category:"interact",action:"topic"})};Fetcher.Post(i,(0,c["default"])(r),o,{"Content-Type":"application/json"})}}},{key:"Get",value:function(e,t,n){n="function"==typeof t?t:n,t="object"===("undefined"==typeof t?"undefined":(0,s["default"])(t))?(0,o["default"])({},y,t):y,this._get(e,t,n)}},{key:"_get",value:function(e,t,n){var i=this;if(+e){var r=p.API_DOMAIN+"/activity/"+this.act_id+"/getTopic",o={topicType:t.topicType,pageSize:g,pageIndex:+e||1},a=function(e){var t=JSON.parse(e);"[object Array]"===Object.prototype.toString.call(t.topics)&&(t.topics=t.topics.map(function(e){return i._filterTopicReplies(e)})),"function"==typeof n&&n((0,c["default"])(t))};Fetcher.Post(r,(0,c["default"])(o),a,{"Content-Type":"application/json"})}}},{key:"GetAllowReply",value:function(){return this.topic_allow_reply}},{key:"GetAllowPublish",value:function(){return this.topic_visitor_publish}},{key:"GetNeedsCheck",value:function(){return this.topic_needs_check}},{key:"SetCount",value:function(e){this.count=e,this.page=Math.ceil(e/g)}},{key:"GetPage",value:function(){return this.page}}]),e}();e.exports=m},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Redpack=n(183)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(139)),o=i(r),a=n(110),s=i(a),u=n(111),c=i(u),l=n(117),f=n(15),h=function(){function e(){(0,s["default"])(this,e),_scope.Feature.Room(this),_scope.Feature.EventBus(this)}return(0,c["default"])(e,[{key:"_canSnatch",value:function(e){return 1==e?f.isMobileWechat()?_scope.Utils.GetCookie("openId")?{status:"y",flag:100,info:"当前红包可抢"}:{status:"n",flag:102,info:"当前红包为微信红包，需要先进行微信登录才能抢红包"}:{status:"n",flag:101,info:"当前红包为微信红包，只有在手机微信中才能抢红包"}:2==e?f.isDingding()?_scope.Utils.GetCookie("openId")?{status:"y",flag:100,info:"当前红包可抢"}:{status:"n",flag:104,info:"当前红包为钉钉红包，需要先进行钉钉登录才能抢红包"}:{status:"n",flag:103,info:"当前红包为钉钉红包，只有在钉钉中才能抢红包"}:{status:"n",flag:105,info:"红包类型未知"}}},{key:"GetRedpackStatus",value:function(e,t){var n=_scope.Utils.GetCookie("openId"),i={openId:n,redpackHashid:e},r=function(e){e=JSON.parse(e);var n={status:e.status,flag:e.flag,info:e.msg,data:{amount:e.amount,snatched:e.snatched}};"function"==typeof t&&t((0,o["default"])(n))};Fetcher.PostForm(l.REDPACK_STATUS_URL,i,r)}},{key:"GetRedpackRecord",value:function(e,t){var n={redpackHashid:e},i=function(e){e=JSON.parse(e);var n={status:e.status,flag:e.flag,info:e.msg,data:{redpack:e.redpack,snatch_list:e.data}};"function"==typeof t&&t((0,o["default"])(n))};Fetcher.PostForm(l.REDPACK_RECORD_URL,n,i)}},{key:"SnatchRedpack",value:function(e,t){var n={redpackHashid:e,snatcherOpenId:_scope.Utils.GetCookie("openId"),snatcherAvatar:_scope.Utils.GetCookie("avatar"),snatcherName:_scope.Utils.GetCookie("user")},i=function(e){e=JSON.parse(e);var n={status:e.status,flag:e.flag,info:e.msg,data:{amount:e.amount,redpack_id:e.redpack_id}};"function"==typeof t&&t((0,o["default"])(n))};Fetcher.PostForm(l.REDPACK_SNATCH_URL,n,i)}},{key:"ParseRedpackComment",value:function(e){var t=document.createElement("div");t.innerHTML=e.message;var n=t.getElementsByTagName("div")[0];if(!n)return{status:"n",flag:101,info:"当前评论不是红包评论"};var i=n.getAttribute("data-id"),r=+n.getAttribute("data-type"),o=n.getAttribute("data-wishes"),a=n.getAttribute("data-name");if(!i)return{status:"n",flag:102,info:"找不到红包hashid"};var s=this._canSnatch(r);return{status:"y",flag:100,info:"解析红包信息成功",data:{redpack:{type:r,wishes:o,name:a,hashid:i},can_snatch:s}}}}]),e}();e.exports=h},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Reward=n(185)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(103)),o=i(r),a=n(139),s=i(a),u=n(110),c=i(u),l=n(111),f=i(l),h=n(15),d=n(117),p=function(){function e(t){var n=t.jsonObj,i=t.Room;(0,c["default"])(this,e),this.donateTimes=+n.donateTimes||0,this.cash_donate_id=n.act.cash_donate_id,this.donate_type=n.act.donate_type,this.reward_config=n.act.gift_config,this.gifts=n.act.gifts||[],this.cash_config={id:this.cash_donate_id},this.cash_record_list=[],this.act_id=n.act.id,this.freeGiftLock=!1,this.Room=i,this.isSetType=[],n.issetNetbank&&this.isSetType.push("netbank"),n.issetAlipay&&this.isSetType.push("alipay"),n.issetWeixinPay&&this.isSetType.push("weixin"),this._getCashConfig(),this._ropOnCashDonateMessage(),this._ropOnGiftDonateMessage(),this._ropOnGiftSend(),this._msgbusDestroy()}return(0,f["default"])(e,[{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){_scope.MsgBus.UnSubAll("Reward.CashConfig.Changed"),_scope.MsgBus.UnSubAll("Reward.CashRecord.Changed"),rop.Remove("cash_donate_"+e.cash_donate_id),_scope.MsgBus.UnSubAll("Reward.CashPay.Result"),rop.Remove("cash_PropPay_"+e.act_id),_scope.MsgBus.UnSubAll("Reward.GiftPay.Result"),e.gifts.map(function(e){rop.Remove("act_gift_send_"+e.id)}),_scope.MsgBus.UnSubAll("Reward.Gift.Sended"),_scope.MsgBus.UnSubAll("Reward.GiftFree.Result"),_scope.MsgBus.UnSub(e.destroyKey)})}},{key:"_objToArray",value:function(e){var t=[];if(!e)return t;for(var n in e)t.push(e[n]);return t}},{key:"_getCashConfig",value:function(){var e=this;if(this.cash_donate_id){var t={donateId:this.cash_donate_id};Fetcher.PostForm(d.CASH_DONATE_DETAIL_URL,t,function(t){t=JSON.parse(t),e.cash_config.accounce_image=t.accounce_image,e.cash_config.accounce_word=t.accounce_word,e.cash_config.lowest=t.lowest,e.cash_config.showAmount=t.showAmount,e.cash_config.totalSum=t.totalSum,e.cash_config.userNum=t.userNum,e.cash_record_list=e._objToArray(t.detail),_scope.MsgBus.Pub("Reward.CashConfig.Changed",JSON.parse((0,s["default"])(e.cash_config))),_scope.MsgBus.Pub("Reward.CashRecord.Changed",JSON.parse((0,s["default"])(e.cash_record_list)))})}}},{key:"_ropOnCashDonateMessage",value:function(){var e=this;this.cash_donate_id&&rop.On("cash_donate_"+this.cash_donate_id,function(t){t=JSON.parse(t),t.tradeId&&t.visitorId==_scope.DB.Get("UserInfo").id&&_scope.MsgBus.Pub("Reward.CashPay.Result",{status:"y",flag:100,info:"支付成功"}),e._getCashConfig()})}},{key:"_ropOnGiftDonateMessage",value:function(){rop.On("cash_PropPay_"+this.act_id,function(e){e=JSON.parse(e),e.tradeId&&e.visitorId==_scope.DB.Get("UserInfo").id&&_scope.MsgBus.Pub("Reward.GiftPay.Result",{status:"y",flag:100,info:"支付成功"})})}},{key:"_ropOnGiftSend",value:function(){var e=this;this.gifts.map(function(t,n){rop.On("act_gift_send_"+t.id,function(i){i=JSON.parse(i),e.donateTimes++,e.gifts[n].recv_times++,e.gifts[n].recv_num=+e.gifts[n].recv_num+ +i.num,_scope.MsgBus.Pub("Reward.Gift.Sended",{gift_id:t.id,num:+i.num})})})}},{key:"_getCashDonateUrl",value:function(e){var t=this.Room.domain+d.RELATIVE_DONATE_URL+"&channel="+e.payType+"&donate_id="+e.donate_id+"&donate_num="+e.donate_num+"&act_id="+this.act_id+("&t="+(new Date).getTime());return"weixin"==e.payType&&!h.isMobile()&&(t+="&payType=native"),t+="&phone="+(e.phone||"")}},{key:"_getGiftDonateUrl",value:function(e){var t=this.Room.domain+d.RELATIVE_DONATE_URL+"&channel="+e.payType+"&gift_id="+e.gift_id+"&num="+e.num+"&act_id="+this.act_id+("&t="+(new Date).getTime()+"&referer="+encodeURIComponent(window.location.href));return"weixin"==e.payType&&!h.isMobile()&&(t+="&payType=native"),t+="&phone="+(e.phone||"")}},{key:"_resolvePayUrl",value:function(e,t,n){return h.isMobile()?("weixin"==t&&h.isWechat()&&(_scope.Utils.GetCookie("openId")?this._resolveWeixinPay(e,n):_scope.MsgBus.Pub(n,{status:"n",flag:101,info:"微信支付找不到openId, 请先进行微信登录或者使用扫码支付替代",data:{url:e+"&payType=native"}})),"alipay"==t&&(h.isDingding()?this._resolveDingdingAlipay(e,n):window.open(e))):"weixin"==t||window.open(e),e}},{key:"_resolveDingdingAlipay",value:function(e,t){Fetcher.Get(e+"&payType=native&type=mobile",function(e){dd.biz.alipay.pay({data:e,onSuccess:function(){_scope.MsgBus.Pub(t,{status:"y",flag:100,info:"支付成功"})},onFail:function(e){_scope.MsgBus.Pub(t,{status:"n",flag:103,info:"钉钉支付宝原生支付失败",data:{error:e}})}})})}},{key:"_resolveWeixinPay",value:function(e,t){var n=this;Fetcher.Get(e,function(i){if(i=JSON.parse(i),"undefined"==typeof WeixinJSBridge){var r=function(){return n._resolveWeixinPaySdk(i,e,t)};document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r,!1):(document.attachEvent("WeixinJSBridgeReady",r),document.attachEvent("onWeixinJSBridgeReady",r))}else n._resolveWeixinPaySdk(i,e,t)})}},{key:"_resolveWeixinPaySdk",value:function(e,t,n){WeixinJSBridge.invoke("getBrandWCPayRequest",(0,o["default"])({},e,{timeStamp:e.timeStamp+""}),function(e){"get_brand_wcpay_request:ok"==e.err_msg?_scope.MsgBus.Pub(n,{status:"y",flag:100,info:"支付成功"}):_scope.MsgBus.Pub(n,{status:"n",flag:102,info:"微信支付失败，您可以使用二维码进行微信支付",data:{url:t,error:e}})})}},{key:"_findGiftById",value:function(e){var t=null;return this.gifts.map(function(n){n.id==e&&(t=n)}),t}},{key:"UnSubRewardTopics",value:function(){rop.Remove("cash_PropPay_"+this.act_id),rop.Remove("cash_donate_"+this.cash_donate_id)}},{key:"GetAvailablePayTypes",value:function(){return h.isMobileWechat()?this.isSetType.indexOf("weixin")?["weixin"]:[]:h.isMobile()?this.isSetType.indexOf("alipay")?["alipay"]:[]:h.isWechat()?this.isSetType.indexOf("weixin")?["weixin"]:[]:this.isSetType}},{key:"GetRewardType",value:function(){return this.donate_type}},{key:"GetRewardConfig",value:function(){return this.reward_config}},{key:"GetCashConfig",value:function(){return this.cash_config}},{key:"GetGiftConfig",value:function(){return{gifts:this.gifts}}},{key:"GetCashRecords",value:function(){return this.cash_record_list}},{key:"GetGiftRankList",value:function(e,t){if(+e){var n=d.GIFT_DETAIL_URL+"&num=50&gift_id="+e;Fetcher.Get(n,function(e){e=JSON.parse(e),t(e.data)})}}},{key:"CashReward",value:function(e){e=e||{};var t=+e.num||0,n=e.payType,i=e.phone,r=e.donate_id||this.cash_donate_id,o=+this.cash_config.lowest||.01;if(1==this.donate_type)return{status:"n",flag:101,info:"当前打赏配置为道具打赏"};if(this.GetAvailablePayTypes().indexOf(n)<0)return{status:"n",flag:103,info:"当前支付方式不可用"};if(t<o)return{status:"n",flag:102,info:"打赏金额不能小于"+o};var a=this._getCashDonateUrl({payType:n,donate_id:r,donate_num:t,phone:i});return this._resolvePayUrl(a,n,"Reward.CashPay.Result"),"weixin"!=n||h.isMobile()?{status:"y",flag:100,info:"支付中，请等待结果",data:{eventKey:"Reward.CashPay.Result"}}:{status:"y",flag:100,info:"微信打赏中，请显示图片",data:{url:a,eventKey:"Reward.CashPay.Result"}}}},{key:"GiftReward",value:function(e){var t=this;e=e||{};var n=+e.gift_id||0,i=e.payType,r=e.phone||"",o=Math.round(e.num)||1,a=this._findGiftById(n);if(2==this.donate_type)return{status:"n",flag:101,info:"当前打赏配置为现金打赏"};if(!n)return{status:"n",flag:102,info:"gift_id不能为空"};if(!a)return{status:"n",flag:104,info:"找不到gift_id为"+n+"的道具"};if(this.GetAvailablePayTypes().indexOf(i)<0&&+a.price>0)return{status:"n",flag:103,info:"当前支付方式不可用"};if(0==+a.price)return this.freeGiftLock?{status:"n",flag:105,info:"免费打赏频率过高"}:(this.freeGiftLock=!0,setTimeout(function(){return t.freeGiftLock=!1},3e3),this._freeGiftReward({num:o,gift_id:n,phone:r}),{status:"y",flag:100,info:"免费打赏中",data:{eventKey:"Reward.GiftFree.Result"}});var s=this._getGiftDonateUrl({payType:i,gift_id:n,phone:r,num:o});return this._resolvePayUrl(s,i,"Reward.GiftPay.Result"),"weixin"!=i||h.isMobile()?{status:"y",flag:100,info:"支付中，请等待结果",data:{eventKey:"Reward.GiftPay.Result"}}:{status:"y",flag:100,info:"微信打赏中，请显示图片",data:{url:s,eventKey:"Reward.GiftPay.Result"}}}},{key:"_freeGiftReward",value:function(e){var t={act_id:this.act_id,num:e.num,gift_id:e.gift_id,name:_scope.Utils.GetCookie("user"),avatar:_scope.Utils.GetCookie("avatar"),phone:e.phone};Fetcher.PostForm(d.FREE_GIFT_DONATE_URL,t,function(e){e=JSON.parse(e),_scope.MsgBus.Pub("Reward.GiftFree.Result",(0,s["default"])({status:e.status,flag:e.flag,info:e.msg}))})}}]),e}();e.exports=p},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Appointment=n(187)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(139)),o=i(r),a=n(103),s=i(a),u=n(110),c=i(u),l=n(111),f=i(l),h=n(117),d=n(177),p=n(15),v=function(){function e(t){(0,c["default"])(this,e),this.actHashId=t,this.renderTo="",this.captchaData={token:"",session_id:"",sig:""},this.hasSubIMMsg=!1}return(0,f["default"])(e,[{key:"_subAppointmentChange",value:function(){imClient.manualConnect(),imClient.on("appointment",function(e){_scope.MsgBus.Pub("Appointment.Change",e)})}},{key:"AddAppointmentChangeListening",value:function(e){this.hasSubIMMsg||(this._subAppointmentChange(),this.hasSubIMMsg=!0),_scope.MsgBus.On("Appointment.Change",function(t){var n=JSON.parse(t);"function"==typeof e&&e(n)})}},{key:"InitCaptcha",value:function(e,t,n){var i=this;if(this._isSingleCaptcha(e)){var r={width:t,height:n,renderTo:e,isH5:(0,p.isMobile)(),success:function(e){e=e||{},i.captchaData.sig=e.sig||"",i.captchaData.token=e.token||"",i.captchaData.session_id=e.sessionId||"",console.log("阿里人机验证获取到的数据:",i.captchaData)},fail:function(){i._resetCaptchaData()}};(0,d.initCaptcha)(r,function(e){i.ResetCaptcha=e})}}},{key:"SubmitAppointmentInfo",value:function(e,t,n){var i=this;if(!this.captchaData.session_id||!this.captchaData.token||!this.captchaData.sig)return void console.warn("没有通过人机验证，请先人机验证通过后再发起预约");var r=h.API_DOMAIN_V2+("/v2/watch/"+this.actHashId+"/micro-act/view/appointment/point"),a=(0,s["default"])({phone:t,appointment_id:Number(e),scene:(0,p.isMobile)()?"ic_message_h5":"ic_message"},this.captchaData);console.log("点击预约发送的参数:",a);var u=function(e){i.ResetCaptcha(),i._resetCaptchaData();var t=JSON.parse(e);"function"==typeof n&&n(t)};Fetcher.Post(r,(0,o["default"])(a),u,(0,s["default"])({"Content-Type":"application/json"},_scope.DB.Get("requestHeader").session))}},{key:"GetAppointmentInfo",value:function(e){var t=h.API_DOMAIN_V2+"/v2/watch/"+this.actHashId+"/micro-act/view/appointment/info";Fetcher.Get(t,function(t){var n=JSON.parse(t);"function"==typeof e&&e(n)},_scope.DB.Get("requestHeader").session)}},{key:"ResetCaptcha",value:function(){console.warn("ResetCaptcha 调用出错，请先调用InitCaptcha")}},{key:"_resetCaptchaData",value:function(){this.captchaData.sig="",this.captchaData.token="",this.captchaData.session_id=""}},{key:"_isSingleCaptcha",value:function(e){return this.renderTo&&this.renderTo!==e?(console.warn("同一个环境目前只允许初始化一个人机验证"),!0):(this.renderTo=e,!0)}}]),e}();e.exports=v},function(e,t,n){(function(t){t._scope||(t._scope={}),e.exports=t._scope.Notice=n(189)}).call(t,function(){return this}())},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}var r=(n(1),n(2),n(110)),o=i(r),a=n(111),s=i(a),u=n(117),c=function(){function e(t){(0,o["default"])(this,e),this.actHashId=t,this._Sub(),this._msgbusDestroy()}return(0,s["default"])(e,[{key:"Get",value:function(e){Fetcher.Get(u.API_DOMAIN_V2+"/v2/micro-act/view/announcement?act_id="+this.actHashId,function(t){var n=JSON.parse(t);"function"==typeof e&&e(n)})}},{key:"_Sub",value:function(){this.unsubNotice=nats.on("mudu.activities."+this.actHashId,function(e){var t=JSON.parse(e);t.type&&"activities.Announcement"===t.type&&_scope.MsgBus.Pub("Notice.Change",t.data)})}},{key:"_msgbusDestroy",value:function(){var e=this;this.destroyKey=_scope.MsgBus.On("Destroy",function(){_scope.MsgBus.UnSub("Destroy",e.destroyKey),e.unsubNotice()})}}]),e}();e.exports=c},function(e,t,n){function i(e){return e&&e.__esModule?e:{"default":e}}function r(){var e={host:window.NAT_SERVERS[0],connectType:"nats",maxReconnectTimes:20,reconnectDelay:5e3,heartbeatInterval:2e4};if(window.nats&&window.nats.close&&"function"==typeof window.nats.close)try{nats.close()}catch(t){}window.nats=new a["default"](e),this.nats.onClient("ready",function(){return console.log("nats client: ready")}),this.nats.onClient("connect",function(){return console.log("nats client: connect")}),this.nats.onClient("error",function(e){return console.error("nats client error:",e)}),this.nats.onClient("close",function(e){return console.warn("nats client close:",e)})}n(1),n(2);Object.defineProperty(t,"__esModule",{value:!0}),t.createNatsClient=r;var o=n(143),a=i(o)},function(e,t,n){(function(t){e.exports=t.rop=n(192)}).call(t,function(){return this}())},function(e,t,n){e.exports=n(193)},function(e,t,n){(function(t,n){!function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=(n(1),n(2),n(3));window.messager||(window.messager=new i),e.exports=window.messager},function(e,t,n){var i,r;!function(o,a){"use strict";i=a,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(this,function(){var e,t,n=Array,i=n.prototype,r=Object,o=r.prototype,a=Function,s=a.prototype,u=String,c=u.prototype,l=Number,f=l.prototype,h=i.slice,d=i.splice,p=i.push,v=i.unshift,y=i.concat,g=i.join,m=s.call,_=s.apply,b=Math.max,w=Math.min,k=o.toString,S="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,T=Function.prototype.toString,E=/^\s*class /,x=function(e){try{var t=T.call(e),n=t.replace(/\/\/.*\n/g,""),i=n.replace(/\/\*[.\s\S]*\*\//g,""),r=i.replace(/\n/gm," ").replace(/ {2}/g," ");return E.test(r)}catch(o){return!1}},P=function(e){try{return!x(e)&&(T.call(e),!0)}catch(t){return!1}},C="[object Function]",O="[object GeneratorFunction]",e=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(S)return P(e);if(x(e))return!1;var t=k.call(e);return t===C||t===O},A=RegExp.prototype.exec,M=function(e){try{return A.call(e),!0}catch(t){return!1}},I="[object RegExp]";t=function(e){return"object"==typeof e&&(S?M(e):k.call(e)===I)};var R,D=String.prototype.valueOf,j=function(e){try{return D.call(e),!0}catch(t){return!1}},L="[object String]";R=function(e){return"string"==typeof e||"object"==typeof e&&(S?j(e):k.call(e)===L)};var B=r.defineProperty&&function(){try{var e={};r.defineProperty(e,"x",{enumerable:!1,value:e});for(var t in e)return!1;return e.x===e}catch(n){return!1}}(),N=function(e){var t;return t=B?function(e,t,n,i){!i&&t in e||r.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:n})}:function(e,t,n,i){!i&&t in e||(e[t]=n)},function(n,i,r){for(var o in i)e.call(i,o)&&t(n,o,i[o],r)}}(o.hasOwnProperty),U=function(e){var t=typeof e;return null===e||"object"!==t&&"function"!==t},F=l.isNaN||function(e){return e!==e},H={ToInteger:function(e){var t=+e;return F(t)?t=0:0!==t&&t!==1/0&&t!==-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t},ToPrimitive:function(t){var n,i,r;if(U(t))return t;if(i=t.valueOf,e(i)&&(n=i.call(t),U(n)))return n;if(r=t.toString,e(r)&&(n=r.call(t),U(n)))return n;throw new TypeError},ToObject:function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return r(e)},ToUint32:function(e){return e>>>0}},W=function(){};N(s,{bind:function(t){var n=this;if(!e(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i,o=h.call(arguments,1),s=function(){if(this instanceof i){var e=_.call(n,this,y.call(o,h.call(arguments)));return r(e)===e?e:this}return _.call(n,t,y.call(o,h.call(arguments)))},u=b(0,n.length-o.length),c=[],l=0;l<u;l++)p.call(c,"$"+l);return i=a("binder","return function ("+g.call(c,",")+"){ return binder.apply(this, arguments); }")(s),n.prototype&&(W.prototype=n.prototype,i.prototype=new W,W.prototype=null),i}});var q=m.bind(o.hasOwnProperty),G=m.bind(o.toString),z=m.bind(h),V=_.bind(h),J=m.bind(c.slice),X=m.bind(c.split),Y=m.bind(c.indexOf),$=m.bind(p),K=m.bind(o.propertyIsEnumerable),Q=m.bind(i.sort),Z=n.isArray||function(e){return"[object Array]"===G(e)},ee=1!==[].unshift(0);N(i,{unshift:function(){return v.apply(this,arguments),this.length}},ee),N(n,{isArray:Z});var te=r("a"),ne="a"!==te[0]||!(0 in te),ie=function(e){var t=!0,n=!0,i=!1;if(e)try{e.call("foo",function(e,n,i){"object"!=typeof i&&(t=!1)}),e.call([1],function(){"use strict";n="string"==typeof this},"x")}catch(r){i=!0}return!!e&&!i&&t&&n};N(i,{forEach:function(t){var n,i=H.ToObject(this),r=ne&&R(this)?X(this,""):i,o=-1,a=H.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.forEach callback must be a function");for(;++o<a;)o in r&&("undefined"==typeof n?t(r[o],o,i):t.call(n,r[o],o,i))}},!ie(i.forEach)),N(i,{map:function(t){var i,r=H.ToObject(this),o=ne&&R(this)?X(this,""):r,a=H.ToUint32(o.length),s=n(a);if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.map callback must be a function");for(var u=0;u<a;u++)u in o&&("undefined"==typeof i?s[u]=t(o[u],u,r):s[u]=t.call(i,o[u],u,r));return s}},!ie(i.map)),N(i,{filter:function(t){var n,i,r=H.ToObject(this),o=ne&&R(this)?X(this,""):r,a=H.ToUint32(o.length),s=[];if(arguments.length>1&&(i=arguments[1]),!e(t))throw new TypeError("Array.prototype.filter callback must be a function");for(var u=0;u<a;u++)u in o&&(n=o[u],("undefined"==typeof i?t(n,u,r):t.call(i,n,u,r))&&$(s,n));return s}},!ie(i.filter)),N(i,{every:function(t){var n,i=H.ToObject(this),r=ne&&R(this)?X(this,""):i,o=H.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.every callback must be a function");for(var a=0;a<o;a++)if(a in r&&!("undefined"==typeof n?t(r[a],a,i):t.call(n,r[a],a,i)))return!1;return!0}},!ie(i.every)),N(i,{some:function(t){var n,i=H.ToObject(this),r=ne&&R(this)?X(this,""):i,o=H.ToUint32(r.length);if(arguments.length>1&&(n=arguments[1]),!e(t))throw new TypeError("Array.prototype.some callback must be a function");for(var a=0;a<o;a++)if(a in r&&("undefined"==typeof n?t(r[a],a,i):t.call(n,r[a],a,i)))return!0;return!1}},!ie(i.some));var re=!1;i.reduce&&(re="object"==typeof i.reduce.call("es5",function(e,t,n,i){return i})),N(i,{reduce:function(t){var n=H.ToObject(this),i=ne&&R(this)?X(this,""):n,r=H.ToUint32(i.length);if(!e(t))throw new TypeError("Array.prototype.reduce callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduce of empty array with no initial value");var o,a=0;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in i){o=i[a++];break}if(++a>=r)throw new TypeError("reduce of empty array with no initial value")}for(;a<r;a++)a in i&&(o=t(o,i[a],a,n));return o}},!re);var oe=!1;i.reduceRight&&(oe="object"==typeof i.reduceRight.call("es5",function(e,t,n,i){return i})),N(i,{reduceRight:function(t){var n=H.ToObject(this),i=ne&&R(this)?X(this,""):n,r=H.ToUint32(i.length);if(!e(t))throw new TypeError("Array.prototype.reduceRight callback must be a function");if(0===r&&1===arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var o,a=r-1;if(arguments.length>=2)o=arguments[1];else for(;;){if(a in i){o=i[a--];break}if(--a<0)throw new TypeError("reduceRight of empty array with no initial value")}if(a<0)return o;do a in i&&(o=t(o,i[a],a,n));while(a--);return o}},!oe);var ae=i.indexOf&&[0,1].indexOf(1,2)!==-1;N(i,{indexOf:function(e){var t=ne&&R(this)?X(this,""):H.ToObject(this),n=H.ToUint32(t.length);if(0===n)return-1;var i=0;for(arguments.length>1&&(i=H.ToInteger(arguments[1])),i=i>=0?i:b(0,n+i);i<n;i++)if(i in t&&t[i]===e)return i;return-1}},ae);var se=i.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;N(i,{lastIndexOf:function(e){var t=ne&&R(this)?X(this,""):H.ToObject(this),n=H.ToUint32(t.length);if(0===n)return-1;var i=n-1;for(arguments.length>1&&(i=w(i,H.ToInteger(arguments[1]))),i=i>=0?i:n-Math.abs(i);i>=0;i--)if(i in t&&e===t[i])return i;return-1}},se);var ue=function(){var e=[1,2],t=e.splice();return 2===e.length&&Z(t)&&0===t.length}();N(i,{splice:function(e,t){return 0===arguments.length?[]:d.apply(this,arguments)}},!ue);var ce=function(){var e={};return i.splice.call(e,0,0,1),1===e.length}();N(i,{splice:function(e,t){if(0===arguments.length)return[];var n=arguments;return this.length=b(H.ToInteger(this.length),0),arguments.length>0&&"number"!=typeof t&&(n=z(arguments),n.length<2?$(n,this.length-e):n[1]=H.ToInteger(t)),d.apply(this,n)}},!ce);var le=function(){var e=new n(1e5);return e[8]="x",e.splice(1,1),7===e.indexOf("x")}(),fe=function(){var e=256,t=[];return t[e]="a",t.splice(e+1,0,"b"),"a"===t[e]}();N(i,{splice:function(e,t){for(var n,i=H.ToObject(this),r=[],o=H.ToUint32(i.length),a=H.ToInteger(e),s=a<0?b(o+a,0):w(a,o),c=w(b(H.ToInteger(t),0),o-s),l=0;l<c;)n=u(s+l),q(i,n)&&(r[l]=i[n]),l+=1;var f,h=z(arguments,2),d=h.length;if(d<c){l=s;for(var p=o-c;l<p;)n=u(l+c),f=u(l+d),q(i,n)?i[f]=i[n]:delete i[f],l+=1;l=o;for(var v=o-c+d;l>v;)delete i[l-1],l-=1}else if(d>c)for(l=o-c;l>s;)n=u(l+c-1),f=u(l+d-1),q(i,n)?i[f]=i[n]:delete i[f],l-=1;l=s;for(var y=0;y<h.length;++y)i[l]=h[y],l+=1;return i.length=o-c+d,r}},!le||!fe);var he,de=i.join;try{he="1,2,3"!==Array.prototype.join.call("123",",")}catch(pe){he=!0}he&&N(i,{join:function(e){var t="undefined"==typeof e?",":e;return de.call(R(this)?X(this,""):this,t)}},he);var ve="1,2"!==[1,2].join(void 0);ve&&N(i,{join:function(e){var t="undefined"==typeof e?",":e;return de.call(this,t)}},ve);var ye=function(e){for(var t=H.ToObject(this),n=H.ToUint32(t.length),i=0;i<arguments.length;)t[n+i]=arguments[i],i+=1;return t.length=n+i,n+i},ge=function(){var e={},t=Array.prototype.push.call(e,void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!q(e,0)}();N(i,{push:function(e){return Z(this)?p.apply(this,arguments):ye.apply(this,arguments)}},ge);var me=function(){var e=[],t=e.push(void 0);return 1!==t||1!==e.length||"undefined"!=typeof e[0]||!q(e,0)}();N(i,{push:ye},me),N(i,{slice:function(e,t){var n=R(this)?X(this,""):this;return V(n,arguments)}},ne);var _e=function(){try{return[1,2].sort(null),[1,2].sort({}),!0}catch(e){}return!1}(),be=function(){try{return[1,2].sort(/a/),!1}catch(e){}return!0}(),we=function(){try{return[1,2].sort(void 0),!0}catch(e){}return!1}();N(i,{sort:function(t){if("undefined"==typeof t)return Q(this);if(!e(t))throw new TypeError("Array.prototype.sort callback must be a function");return Q(this,t)}},_e||!we||!be);var ke=!K({toString:null},"toString"),Se=K(function(){},"prototype"),Te=!q("x","0"),Ee=function(e){var t=e.constructor;return t&&t.prototype===e},xe={$window:!0,$console:!0,$parent:!0,$self:!0,$frame:!0,$frames:!0,$frameElement:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$external:!0},Pe=function(){if("undefined"==typeof window)return!1;for(var e in window)try{!xe["$"+e]&&q(window,e)&&null!==window[e]&&"object"==typeof window[e]&&Ee(window[e])}catch(t){return!0}return!1}(),Ce=function(e){if("undefined"==typeof window||!Pe)return Ee(e);try{return Ee(e)}catch(t){return!1}},Oe=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ae=Oe.length,Me=function(e){return"[object Arguments]"===G(e)},Ie=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&!Z(t)&&e(t.callee)},Re=Me(arguments)?Me:Ie;N(r,{keys:function(t){var n=e(t),i=Re(t),r=null!==t&&"object"==typeof t,o=r&&R(t);if(!r&&!n&&!i)throw new TypeError("Object.keys called on a non-object");var a=[],s=Se&&n;if(o&&Te||i)for(var c=0;c<t.length;++c)$(a,u(c));if(!i)for(var l in t)s&&"prototype"===l||!q(t,l)||$(a,u(l));if(ke)for(var f=Ce(t),h=0;h<Ae;h++){var d=Oe[h];f&&"constructor"===d||!q(t,d)||$(a,d)}return a}});var De=r.keys&&function(){return 2===r.keys(arguments).length}(1,2),je=r.keys&&function(){var e=r.keys(arguments);return 1!==arguments.length||1!==e.length||1!==e[0]}(1),Le=r.keys;N(r,{keys:function(e){return Le(Re(e)?z(e):e)}},!De||je);var Be,Ne,Ue=0!==new Date((-0xc782b5b342b24)).getUTCMonth(),Fe=new Date((-0x55d318d56a724)),He=new Date(14496624e5),We="Mon, 01 Jan -45875 11:59:59 GMT"!==Fe.toUTCString(),qe=Fe.getTimezoneOffset();qe<-720?(Be="Tue Jan 02 -45875"!==Fe.toDateString(),Ne=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(He.toString())):(Be="Mon Jan 01 -45875"!==Fe.toDateString(),Ne=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-\+]\d\d\d\d(?: |$)/.test(He.toString()));var Ge=m.bind(Date.prototype.getFullYear),ze=m.bind(Date.prototype.getMonth),Ve=m.bind(Date.prototype.getDate),Je=m.bind(Date.prototype.getUTCFullYear),Xe=m.bind(Date.prototype.getUTCMonth),Ye=m.bind(Date.prototype.getUTCDate),$e=m.bind(Date.prototype.getUTCDay),Ke=m.bind(Date.prototype.getUTCHours),Qe=m.bind(Date.prototype.getUTCMinutes),Ze=m.bind(Date.prototype.getUTCSeconds),et=m.bind(Date.prototype.getUTCMilliseconds),tt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],it=function(e,t){return Ve(new Date(t,e,0))};N(Date.prototype,{getFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this);return e<0&&ze(this)>11?e+1:e},getMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this),t=ze(this);return e<0&&t>11?0:t},getDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Ge(this),t=ze(this),n=Ve(this);if(e<0&&t>11){if(12===t)return n;var i=it(0,e+1);return i-n+1}return n},getUTCFullYear:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this);return e<0&&Xe(this)>11?e+1:e},getUTCMonth:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this),t=Xe(this);return e<0&&t>11?0:t},getUTCDate:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=Je(this),t=Xe(this),n=Ye(this);if(e<0&&t>11){if(12===t)return n;var i=it(0,e+1);return i-n+1}return n}},Ue),N(Date.prototype,{toUTCString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=$e(this),t=Ye(this),n=Xe(this),i=Je(this),r=Ke(this),o=Qe(this),a=Ze(this);return tt[e]+", "+(t<10?"0"+t:t)+" "+nt[n]+" "+i+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"}},Ue||We),N(Date.prototype,{toDateString:function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear();return tt[e]+" "+nt[n]+" "+(t<10?"0"+t:t)+" "+i}},Ue||Be),(Ue||Ne)&&(Date.prototype.toString=function(){if(!(this&&this instanceof Date))throw new TypeError("this is not a Date object.");var e=this.getDay(),t=this.getDate(),n=this.getMonth(),i=this.getFullYear(),r=this.getHours(),o=this.getMinutes(),a=this.getSeconds(),s=this.getTimezoneOffset(),u=Math.floor(Math.abs(s)/60),c=Math.floor(Math.abs(s)%60);return tt[e]+" "+nt[n]+" "+(t<10?"0"+t:t)+" "+i+" "+(r<10?"0"+r:r)+":"+(o<10?"0"+o:o)+":"+(a<10?"0"+a:a)+" GMT"+(s>0?"-":"+")+(u<10?"0"+u:u)+(c<10?"0"+c:c)},B&&r.defineProperty(Date.prototype,"toString",{configurable:!0,enumerable:!1,writable:!0}));var rt=-621987552e5,ot="-000001",at=Date.prototype.toISOString&&new Date(rt).toISOString().indexOf(ot)===-1,st=Date.prototype.toISOString&&"1969-12-31T23:59:59.999Z"!==new Date((-1)).toISOString(),ut=m.bind(Date.prototype.getTime);N(Date.prototype,{toISOString:function(){if(!isFinite(this)||!isFinite(ut(this)))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var e=Je(this),t=Xe(this);e+=Math.floor(t/12),t=(t%12+12)%12;var n=[t+1,Ye(this),Ke(this),Qe(this),Ze(this)];
e=(e<0?"-":e>9999?"+":"")+J("00000"+Math.abs(e),0<=e&&e<=9999?-4:-6);for(var i=0;i<n.length;++i)n[i]=J("00"+n[i],-2);return e+"-"+z(n,0,2).join("-")+"T"+z(n,2).join(":")+"."+J("000"+et(this),-3)+"Z"}},at||st);var ct=function(){try{return Date.prototype.toJSON&&null===new Date(NaN).toJSON()&&new Date(rt).toJSON().indexOf(ot)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(e){return!1}}();ct||(Date.prototype.toJSON=function(t){var n=r(this),i=H.ToPrimitive(n);if("number"==typeof i&&!isFinite(i))return null;var o=n.toISOString;if(!e(o))throw new TypeError("toISOString property is not callable");return o.call(n)});var lt=1e15===Date.parse("+033658-09-27T01:46:40.000Z"),ft=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z")),ht=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(ht||ft||!lt){var dt=Math.pow(2,31)-1,pt=F(new Date(1970,0,1,0,0,0,dt+1).getTime());Date=function(e){var t=function(n,i,r,o,a,s,c){var l,f=arguments.length;if(this instanceof e){var h=s,d=c;if(pt&&f>=7&&c>dt){var p=Math.floor(c/dt)*dt,v=Math.floor(p/1e3);h+=v,d-=1e3*v}l=1===f&&u(n)===n?new e(t.parse(n)):f>=7?new e(n,i,r,o,a,h,d):f>=6?new e(n,i,r,o,a,h):f>=5?new e(n,i,r,o,a):f>=4?new e(n,i,r,o):f>=3?new e(n,i,r):f>=2?new e(n,i):f>=1?new e(n instanceof e?+n:n):new e}else l=e.apply(this,arguments);return U(l)||N(l,{constructor:t},!0),l},n=new RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),i=[0,31,59,90,120,151,181,212,243,273,304,334,365],r=function(e,t){var n=t>1?1:0;return i[t]+Math.floor((e-1969+n)/4)-Math.floor((e-1901+n)/100)+Math.floor((e-1601+n)/400)+365*(e-1970)},o=function(t){var n=0,i=t;if(pt&&i>dt){var r=Math.floor(i/dt)*dt,o=Math.floor(r/1e3);n+=o,i-=1e3*o}return l(new e(1970,0,1,0,0,n,i))};for(var a in e)q(e,a)&&(t[a]=e[a]);N(t,{now:e.now,UTC:e.UTC},!0),t.prototype=e.prototype,N(t.prototype,{constructor:t},!0);var s=function(t){var i=n.exec(t);if(i){var a,s=l(i[1]),u=l(i[2]||1)-1,c=l(i[3]||1)-1,f=l(i[4]||0),h=l(i[5]||0),d=l(i[6]||0),p=Math.floor(1e3*l(i[7]||0)),v=Boolean(i[4]&&!i[8]),y="-"===i[9]?1:-1,g=l(i[10]||0),m=l(i[11]||0),_=h>0||d>0||p>0;return f<(_?24:25)&&h<60&&d<60&&p<1e3&&u>-1&&u<12&&g<24&&m<60&&c>-1&&c<r(s,u+1)-r(s,u)&&(a=60*(24*(r(s,u)+c)+f+g*y),a=1e3*(60*(a+h+m*y)+d)+p,v&&(a=o(a)),-864e13<=a&&a<=864e13)?a:NaN}return e.parse.apply(this,arguments)};return N(t,{parse:s}),t}(Date)}Date.now||(Date.now=function(){return(new Date).getTime()});var vt=f.toFixed&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0)),yt={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function(e,t){for(var n=-1,i=t;++n<yt.size;)i+=e*yt.data[n],yt.data[n]=i%yt.base,i=Math.floor(i/yt.base)},divide:function(e){for(var t=yt.size,n=0;--t>=0;)n+=yt.data[t],yt.data[t]=Math.floor(n/e),n=n%e*yt.base},numToString:function(){for(var e=yt.size,t="";--e>=0;)if(""!==t||0===e||0!==yt.data[e]){var n=u(yt.data[e]);""===t?t=n:t+=J("0000000",0,7-n.length)+n}return t},pow:function Lt(e,t,n){return 0===t?n:t%2===1?Lt(e,t-1,n*e):Lt(e*e,t/2,n)},log:function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}},gt=function(e){var t,n,i,r,o,a,s,c;if(t=l(e),t=F(t)?0:Math.floor(t),t<0||t>20)throw new RangeError("Number.toFixed called with invalid number of decimals");if(n=l(this),F(n))return"NaN";if(n<=-1e21||n>=1e21)return u(n);if(i="",n<0&&(i="-",n=-n),r="0",n>1e-21)if(o=yt.log(n*yt.pow(2,69,1))-69,a=o<0?n*yt.pow(2,-o,1):n/yt.pow(2,o,1),a*=4503599627370496,o=52-o,o>0){for(yt.multiply(0,a),s=t;s>=7;)yt.multiply(1e7,0),s-=7;for(yt.multiply(yt.pow(10,s,1),0),s=o-1;s>=23;)yt.divide(1<<23),s-=23;yt.divide(1<<s),yt.multiply(1,1),yt.divide(2),r=yt.numToString()}else yt.multiply(0,a),yt.multiply(1<<-o,0),r=yt.numToString()+J("0.00000000000000000000",2,2+t);return t>0?(c=r.length,r=c<=t?i+J("0.0000000000000000000",0,t-c+2)+r:i+J(r,0,c-t)+"."+J(r,c-t)):r=i+r,r};N(f,{toFixed:gt},vt);var mt=function(){try{return"1"===1..toPrecision(void 0)}catch(e){return!0}}(),_t=f.toPrecision;N(f,{toPrecision:function(e){return"undefined"==typeof e?_t.call(this):_t.call(this,e)}},mt),2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?!function(){var e="undefined"==typeof/()??/.exec("")[1],n=Math.pow(2,32)-1;c.split=function(i,r){var o=String(this);if("undefined"==typeof i&&0===r)return[];if(!t(i))return X(this,i,r);var a,s,u,c,l=[],f=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(i.sticky?"y":""),h=0,d=new RegExp(i.source,f+"g");e||(a=new RegExp("^"+d.source+"$(?!\\s)",f));var v="undefined"==typeof r?n:H.ToUint32(r);for(s=d.exec(o);s&&(u=s.index+s[0].length,!(u>h&&($(l,J(o,h,s.index)),!e&&s.length>1&&s[0].replace(a,function(){for(var e=1;e<arguments.length-2;e++)"undefined"==typeof arguments[e]&&(s[e]=void 0)}),s.length>1&&s.index<o.length&&p.apply(l,z(s,1)),c=s[0].length,h=u,l.length>=v)));)d.lastIndex===s.index&&d.lastIndex++,s=d.exec(o);return h===o.length?!c&&d.test("")||$(l,""):$(l,J(o,h)),l.length>v?z(l,0,v):l}}():"0".split(void 0,0).length&&(c.split=function(e,t){return"undefined"==typeof e&&0===t?[]:X(this,e,t)});var bt=c.replace,wt=function(){var e=[];return"x".replace(/x(.)?/g,function(t,n){$(e,n)}),1===e.length&&"undefined"==typeof e[0]}();wt||(c.replace=function(n,i){var r=e(i),o=t(n)&&/\)[*?]/.test(n.source);if(r&&o){var a=function(e){var t=arguments.length,r=n.lastIndex;n.lastIndex=0;var o=n.exec(e)||[];return n.lastIndex=r,$(o,arguments[t-2],arguments[t-1]),i.apply(this,o)};return bt.call(this,n,a)}return bt.call(this,n,i)});var kt=c.substr,St="".substr&&"b"!=="0b".substr(-1);N(c,{substr:function(e,t){var n=e;return e<0&&(n=b(this.length+e,0)),kt.call(this,n,t)}},St);var Tt="\t\n\x0B\f\r   ᠎             　\u2028\u2029\ufeff",Et="​",xt="["+Tt+"]",Pt=new RegExp("^"+xt+xt+"*"),Ct=new RegExp(xt+xt+"*$"),Ot=c.trim&&(Tt.trim()||!Et.trim());N(c,{trim:function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");return u(this).replace(Pt,"").replace(Ct,"")}},Ot);var At=m.bind(String.prototype.trim),Mt=c.lastIndexOf&&"abcあい".lastIndexOf("あい",2)!==-1;N(c,{lastIndexOf:function(e){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");for(var t=u(this),n=u(e),i=arguments.length>1?l(arguments[1]):NaN,r=F(i)?1/0:H.ToInteger(i),o=w(b(r,0),t.length),a=n.length,s=o+a;s>0;){s=b(0,s-a);var c=Y(J(t,s,o+a),n);if(c!==-1)return s+c}return-1}},Mt);var It=c.lastIndexOf;if(N(c,{lastIndexOf:function(e){return It.apply(this,arguments)}},1!==c.lastIndexOf.length),8===parseInt(Tt+"08")&&22===parseInt(Tt+"0x16")||(parseInt=function(e){var t=/^[\-+]?0[xX]/;return function(n,i){var r=At(String(n)),o=l(i)||(t.test(r)?16:10);return e(r,o)}}(parseInt)),1/parseFloat("-0")!==-(1/0)&&(parseFloat=function(e){return function(t){var n=At(String(t)),i=e(n);return 0===i&&"-"===J(n,0,1)?-0:i}}(parseFloat)),"RangeError: test"!==String(new RangeError("test"))){var Rt=function(){if("undefined"==typeof this||null===this)throw new TypeError("can't convert "+this+" to object");var e=this.name;"undefined"==typeof e?e="Error":"string"!=typeof e&&(e=u(e));var t=this.message;return"undefined"==typeof t?t="":"string"!=typeof t&&(t=u(t)),e?t?e+": "+t:e:t};Error.prototype.toString=Rt}if(B){var Dt=function(e,t){if(K(e,t)){var n=Object.getOwnPropertyDescriptor(e,t);n.configurable&&(n.enumerable=!1,Object.defineProperty(e,t,n))}};Dt(Error.prototype,"message"),""!==Error.prototype.message&&(Error.prototype.message=""),Dt(Error.prototype,"name")}if("/a/gim"!==String(/a/gim)){var jt=function(){var e="/"+this.source+"/";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),e};RegExp.prototype.toString=jt}})},function(e,t,n){var i,r;!function(o,a){"use strict";i=a,r="function"==typeof i?i.call(t,n,t,e):i,!(void 0!==r&&(e.exports=r))}(this,function(){var e,t,n,i,r=Function.call,o=Object.prototype,a=r.bind(o.hasOwnProperty),s=r.bind(o.propertyIsEnumerable),u=r.bind(o.toString),c=a(o,"__defineGetter__");c&&(e=r.bind(o.__defineGetter__),t=r.bind(o.__defineSetter__),n=r.bind(o.__lookupGetter__),i=r.bind(o.__lookupSetter__));var l=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e};Object.getPrototypeOf||(Object.getPrototypeOf=function(e){var t=e.__proto__;return t||null===t?t:"[object Function]"===u(e.constructor)?e.constructor.prototype:e instanceof Object?o:null});var f=function(e){try{return e.sentinel=0,0===Object.getOwnPropertyDescriptor(e,"sentinel").value}catch(t){return!1}};if(Object.defineProperty){var h=f({}),d="undefined"==typeof document||f(document.createElement("div"));if(!d||!h)var p=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||p){var v="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(e,t){if(l(e))throw new TypeError(v+e);if(p)try{return p.call(Object,e,t)}catch(r){}var u;if(!a(e,t))return u;if(u={enumerable:s(e,t),configurable:!0},c){var f=e.__proto__,h=e!==o;h&&(e.__proto__=o);var d=n(e,t),y=i(e,t);if(h&&(e.__proto__=f),d||y)return d&&(u.get=d),y&&(u.set=y),u}return u.value=e[t],u.writable=!0,u}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var y,g=!({__proto__:null}instanceof Object),m=function(){if(!document.domain)return!1;try{return!!new ActiveXObject("htmlfile")}catch(e){return!1}},_=function(){var e,t;t=new ActiveXObject("htmlfile");var n="script";return t.write("<"+n+"></"+n+">"),t.close(),e=t.parentWindow.Object.prototype,t=null,e},b=function(){var e,t=document.createElement("iframe"),n=document.body||document.documentElement;return t.style.display="none",n.appendChild(t),t.src="javascript:",e=t.contentWindow.Object.prototype,n.removeChild(t),t=null,e};y=g||"undefined"==typeof document?function(){return{__proto__:null}}:function(){var e=m()?_():b();delete e.constructor,delete e.hasOwnProperty,delete e.propertyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf;var t=function(){};return t.prototype=e,y=function(){return new t},new t},Object.create=function(e,t){var n,i=function(){};if(null===e)n=y();else{if(null!==e&&l(e))throw new TypeError("Object prototype may only be an Object or null");i.prototype=e,n=new i,n.__proto__=e}return void 0!==t&&Object.defineProperties(n,t),n}}var w=function(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(t){return!1}};if(Object.defineProperty){var k=w({}),S="undefined"==typeof document||w(document.createElement("div"));if(!k||!S)var T=Object.defineProperty,E=Object.defineProperties}if(!Object.defineProperty||T){var x="Property description must be an object: ",P="Object.defineProperty called on non-object: ",C="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(r,a,s){if(l(r))throw new TypeError(P+r);if(l(s))throw new TypeError(x+s);if(T)try{return T.call(Object,r,a,s)}catch(u){}if("value"in s)if(c&&(n(r,a)||i(r,a))){var f=r.__proto__;r.__proto__=o,delete r[a],r[a]=s.value,r.__proto__=f}else r[a]=s.value;else{var h="get"in s,d="set"in s;if(!c&&(h||d))throw new TypeError(C);h&&e(r,a,s.get),d&&t(r,a,s.set)}return r}}Object.defineProperties&&!E||(Object.defineProperties=function(e,t){if(E)try{return E.call(Object,e,t)}catch(n){}return Object.keys(t).forEach(function(n){"__proto__"!==n&&Object.defineProperty(e,n,t[n])}),e}),Object.seal||(Object.seal=function(e){if(Object(e)!==e)throw new TypeError("Object.seal can only be called on Objects.");return e}),Object.freeze||(Object.freeze=function(e){if(Object(e)!==e)throw new TypeError("Object.freeze can only be called on Objects.");return e});try{Object.freeze(function(){})}catch(O){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(e){if(Object(e)!==e)throw new TypeError("Object.preventExtensions can only be called on Objects.");return e}),Object.isSealed||(Object.isSealed=function(e){if(Object(e)!==e)throw new TypeError("Object.isSealed can only be called on Objects.");return!1}),Object.isFrozen||(Object.isFrozen=function(e){if(Object(e)!==e)throw new TypeError("Object.isFrozen can only be called on Objects.");return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)!==e)throw new TypeError("Object.isExtensible can only be called on Objects.");for(var t="";a(e,t);)t+="?";e[t]=!0;var n=a(e,t);return delete e[t],n})})},function(e,t,n){function i(e,t){var n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[];if(t=t||i.length,e)for(n=0;n<e;n++)r[n]=i[0|Math.random()*t];else{var o;for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;n<36;n++)r[n]||(o=0|16*Math.random(),r[n]=i[19==n?3&o|8:o])}return r.join("")}n(1),n(2),"undefined"==typeof window.WEB_SOCKET_DEBUG&&(window.WEB_SOCKET_DEBUG=!0),"undefined"==typeof window.WEB_SOCKET_SWF_LOCATION&&(window.WEB_SOCKET_SWF_LOCATION="https://static.mudu.tv/fetcher/WebSocketMainInsecure.swf"),"undefined"==typeof window.crypto&&(window.crypto=n(4)),window.crypto.randomBytes=function(e){return i(e,16)},window.WebSocket||window.MozWebSocket?window.WS_FEATURE="inner":(window.swfobject=n(65),n(66),window.WS_FEATURE="outer"),window.NATS=n(67),e.exports=n(80)},function(e,t,n){(function(i){function r(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function o(e,t){for(var n in e)t(e[n],n)}var a=n(9);t.createHash=n(11),t.createHmac=n(24),t.randomBytes=function(e,t){if(!t||!t.call)return new i(a(e));try{t.call(this,void 0,new i(a(e)))}catch(n){t(n)}},t.getHashes=function(){return["sha1","sha256","sha512","md5","rmd160"]};var s=n(25)(t);t.pbkdf2=s.pbkdf2,t.pbkdf2Sync=s.pbkdf2Sync,n(27)(t,e.exports),o(["createCredentials","createSign","createVerify","createDiffieHellman"],function(e){t[e]=function(){r("sorry,",e,"is not implemented yet")}})}).call(t,n(5).Buffer)},function(e,t,n){(function(e){/*!
		 * The buffer module from node.js, for the browser.
		 *
		 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
		 * @license  MIT
		 */
"use strict";function i(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function r(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(this,e)}return s(this,e,t,n)}function s(e,t,n,i){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,i):"string"==typeof t?f(e,t,n):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,i){return u(t),t<=0?o(e,t):void 0!==n?"string"==typeof i?o(e,t).fill(n,i):o(e,t).fill(n):o(e,t)}function l(e,t){if(u(t),e=o(e,t<0?0:0|v(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|g(t,n);e=o(e,i);var r=e.write(t,n);return r!==i&&(e=e.slice(0,r)),e}function h(e,t){var n=t.length<0?0:0|v(t.length);e=o(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function d(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=h(e,t),e}function p(e,t){if(a.isBuffer(t)){var n=0|v(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&Z(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function y(e){return+e!=e&&(e=0),a.alloc(+e)}function g(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(e).length;default:if(i)return z(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return I(this,t,n);case"base64":return C(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function _(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function b(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=a.from(t,i)),a.isBuffer(t))return 0===t.length?-1:w(e,t,n,i,r);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,i,r){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(r){var l=-1;for(c=n;c<s;c++)if(o(e,c)===o(t,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*a}else l!==-1&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){f=!1;break}if(f)return c}return-1}function k(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function S(e,t,n,i){return Y(z(t,e.length-n),e,n,i)}function T(e,t,n,i){return Y(V(t),e,n,i)}function E(e,t,n,i){return T(e,t,n,i)}function x(e,t,n,i){return Y(X(t),e,n,i)}function P(e,t,n,i){return Y(J(t,e.length-n),e,n,i)}function C(e,t,n){return 0===t&&n===e.length?K.fromByteArray(e):K.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var i=[],r=t;r<n;){var o=e[r],a=null,s=o>239?4:o>223?3:o>191?2:1;if(r+s<=n){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[r+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(a=f));break;case 3:u=e[r+1],c=e[r+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:u=e[r+1],c=e[r+2],l=e[r+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=s}return A(i)}function A(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",i=0;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=ee));return n}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function I(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function R(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=t;o<n;++o)r+=G(e[o]);return r}function D(e,t,n){for(var i=e.slice(t,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,i,r,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<o)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function B(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,o=Math.min(e.length-n,2);r<o;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function N(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,o=Math.min(e.length-n,4);r<o;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function U(e,t,n,i,r,o){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,i,r){return r||U(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,r){return r||U(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,i,52,8),n+8}function W(e){if(e=q(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function q(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var n,i=e.length,r=null,o=[],a=0;a<i;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(t-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),r=n;continue}n=(r-55296<<10|n-56320)+65536}else r&&(t-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function J(e,t){for(var n,i,r,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i);return o}function X(e){return K.toByteArray(W(e))}function Y(e,t,n,i){for(var r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function $(e){return e!==e}var K=n(6),Q=n(7),Z=n(8);t.Buffer=a,t.SlowBuffer=y,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:i(),t.kMaxLength=r(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return s(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return c(null,e,t,n)},a.allocUnsafe=function(e){return l(null,e)},a.allocUnsafeSlow=function(e){return l(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,o=Math.min(n,i);r<o;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=a.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):m.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,i,r){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,r>>>=0,this===e)return 0;for(var o=r-i,s=n-t,u=Math.min(o,s),c=this.slice(i,r),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1},a.prototype.indexOf=function(e,t,n){return b(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return b(this,e,t,n,!1)},a.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return E(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);var i;if(a.TYPED_ARRAY_SUPPORT)i=this.subarray(e,t),i.__proto__=a.prototype;else{var r=t-e;i=new a(r,(void 0));for(var o=0;o<r;++o)i[o]=this[o+e]}return i},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return i},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var i=this[e+--t],r=1;t>0&&(r*=256);)i+=this[e+--t]*r;return i},a.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var i=this[e],r=1,o=0;++o<t&&(r*=256);)i+=this[e+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var i=t,r=1,o=this[e+--i];i>0&&(r*=256);)o+=this[e+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},a.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),Q.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),Q.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),Q.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),Q.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;L(this,e,t,n,r,0)}var o=1,a=0;for(this[t]=255&e;++a<n&&(o*=256);)this[t+a]=e/o&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;L(this,e,t,n,r,0)}var o=n-1,a=1;for(this[t+o]=255&e;--o>=0&&(a*=256);)this[t+o]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,o=i-n;if(this===e&&n<t&&t<i)for(r=o-1;r>=0;--r)e[r+t]=this[r+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!a.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:z(new a(e,i).toString()),u=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,function(){return this}())},function(e,t){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function r(e){var t,i,r,o,a,s=e.length;o=n(e),a=new l(3*s/4-o),i=o>0?s-4:s;var u=0;for(t=0;t<i;t+=4)r=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[u++]=r>>16&255,a[u++]=r>>8&255,a[u++]=255&r;return 2===o?(r=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[u++]=255&r):1===o&&(r=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[u++]=r>>8&255,a[u++]=255&r),a}function o(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function a(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16)+(e[a+1]<<8)+e[a+2],r.push(o(i));return r.join("")}function s(e){for(var t,n=e.length,i=n%3,r="",o=[],s=16383,c=0,l=n-i;c<l;c+=s)o.push(a(e,c,c+s>l?l:c+s));return 1===i?(t=e[n-1],r+=u[t>>2],r+=u[t<<4&63],r+="=="):2===i&&(t=(e[n-2]<<8)+e[n-1],r+=u[t>>10],r+=u[t>>4&63],r+=u[t<<2&63],r+="="),o.push(r),o.join("")}t.byteLength=i,t.toByteArray=r,t.fromByteArray=s;for(var u=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,d=f.length;h<d;++h)u[h]=f[h],c[f.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?r-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=i;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(d?-1:1)*(1/0);a+=Math.pow(2,i),o-=c}return(d?-1:1)*a*Math.pow(2,o-i)},t.write=function(e,t,n,i,r,o){var a,s,u,c=8*o-r-1,l=(1<<c)-1,f=l>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,r),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,r),a=0));r>=8;e[n+d]=255&s,d+=p,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t,i){!function(){var r=("undefined"==typeof window?t:window)||{};_crypto=r.crypto||r.msCrypto||n(10),e.exports=function(e){if(_crypto.getRandomValues){var t=new i(e);return _crypto.getRandomValues(t),t}if(_crypto.randomBytes)return _crypto.randomBytes(e);throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}}()}).call(t,function(){return this}(),n(5).Buffer)},function(e,t){},function(e,t,n){(function(t){function i(e){return function(){var n=[],i={update:function(e,i){return t.isBuffer(e)||(e=new t(e,i)),n.push(e),this},digest:function(i){var r=t.concat(n),o=e(r);return n=null,i?o.toString(i):o}};return i}}var r=n(12),o=i(n(21)),a=i(n(23));e.exports=function(e){return"md5"===e?new o:"rmd160"===e?new a:r(e)}}).call(t,n(5).Buffer)},function(e,t,n){var t=e.exports=function(e){var n=t[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n},i=n(5).Buffer,r=n(13)(i);t.sha1=n(14)(i,r),t.sha256=n(19)(i,r),t.sha512=n(20)(i,r)},function(e,t){e.exports=function(e){function t(t,n){this._block=new e(t),this._finalSize=n,this._blockSize=t,this._len=0,this._s=0}return t.prototype.init=function(){this._s=0,this._len=0},t.prototype.update=function(t,n){"string"==typeof t&&(n=n||"utf8",t=new e(t,n));for(var i=this._len+=t.length,r=this._s=this._s||0,o=0,a=this._block;r<i;){for(var s=Math.min(t.length,o+this._blockSize-r%this._blockSize),u=s-o,c=0;c<u;c++)a[r%this._blockSize+c]=t[c+o];r+=u,o+=u,r%this._blockSize===0&&this._update(a)}return this._s=r,this},t.prototype.digest=function(e){var t=8*this._len;this._block[this._len%this._blockSize]=128,this._block.fill(0,this._len%this._blockSize+1),t%(8*this._blockSize)>=8*this._finalSize&&(this._update(this._block),this._block.fill(0)),this._block.writeInt32BE(t,this._blockSize-4);var n=this._update(this._block)||this._hash();return e?n.toString(e):n},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t}},function(e,t,n){var i=n(15).inherits;e.exports=function(e,t){function n(){return p.length?p.pop().init():this instanceof n?(this._w=d,t.call(this,64,56),this._h=null,void this.init()):new n}function r(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function o(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}function a(e,t){return e+t|0}function s(e,t){return e<<t|e>>>32-t}var u=0,c=4,l=8,f=12,h=16,d=new("undefined"==typeof Int32Array?Array:Int32Array)(80),p=[];return i(n,t),n.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,t.prototype.init.call(this),this},n.prototype._POOL=p,n.prototype._update=function(e){var t,n,i,u,c,l,f,h,d,p;t=l=this._a,n=f=this._b,i=h=this._c,u=d=this._d,c=p=this._e;for(var v=this._w,y=0;y<80;y++){var g=v[y]=y<16?e.readInt32BE(4*y):s(v[y-3]^v[y-8]^v[y-14]^v[y-16],1),m=a(a(s(t,5),r(y,n,i,u)),a(a(c,g),o(y)));c=u,u=i,i=s(n,30),n=t,t=m}this._a=a(t,l),this._b=a(n,f),this._c=a(i,h),this._d=a(u,d),this._e=a(c,p)},n.prototype._hash=function(){p.length<100&&p.push(this);var t=new e(20);return t.writeInt32BE(0|this._a,u),t.writeInt32BE(0|this._b,c),t.writeInt32BE(0|this._c,l),t.writeInt32BE(0|this._d,f),t.writeInt32BE(0|this._e,h),t},n}},function(e,t,n){(function(e,i){function r(e,n){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),v(n)?i.showHidden=n:n&&t._extend(i,n),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=o),u(i,e,i.depth)}function o(e,t){var n=r.styles[t];return n?"["+r.colors[n][0]+"m"+e+"["+r.colors[n][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function u(e,n,i){if(e.customInspect&&n&&x(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var r=n.inspect(i,e);return _(r)||(r=u(e,r,i)),r}var o=c(e,n);if(o)return o;var a=Object.keys(n),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(x(n)){var y=n.name?": "+n.name:"";return e.stylize("[Function"+y+"]","special")}if(k(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return l(n)}var g="",m=!1,b=["{","}"];if(p(n)&&(m=!0,b=["[","]"]),x(n)){var w=n.name?": "+n.name:"";g=" [Function"+w+"]"}if(k(n)&&(g=" "+RegExp.prototype.toString.call(n)),T(n)&&(g=" "+Date.prototype.toUTCString.call(n)),E(n)&&(g=" "+l(n)),0===a.length&&(!m||0==n.length))return b[0]+g+b[1];if(i<0)return k(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var S;return S=m?f(e,n,i,v,a):a.map(function(t){return h(e,n,i,v,t,m)}),e.seen.pop(),d(S,g,b)}function c(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return m(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,i,r){for(var o=[],a=0,s=t.length;a<s;++a)M(t,String(a))?o.push(h(e,t,n,i,String(a),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(h(e,t,n,i,r,!0))}),o}function h(e,t,n,i,r,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),M(i,r)||(a="["+r+"]"),s||(e.seen.indexOf(c.value)<0?(s=y(n)?u(e,c.value,null):u(e,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(o&&r.match(/^\d+$/))return s;a=JSON.stringify(""+r),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,n){var i=0,r=e.reduce(function(e,t){return i++,t.indexOf("\n")>=0&&i++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return null==e}function m(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==typeof e}function w(e){return void 0===e}function k(e){return S(e)&&"[object RegExp]"===C(e)}function S(e){return"object"==typeof e&&null!==e}function T(e){return S(e)&&"[object Date]"===C(e)}function E(e){return S(e)&&("[object Error]"===C(e)||e instanceof Error)}function x(e){return"function"==typeof e}function P(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function C(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}function A(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),j[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var I=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(r(arguments[n]));return t.join(" ")}for(var n=1,i=arguments,o=i.length,a=String(e).replace(I,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}}),s=i[n];n<o;s=i[++n])a+=y(s)||!S(s)?" "+s:" "+r(s);return a},t.deprecate=function(n,r){function o(){if(!a){if(i.throwDeprecation)throw new Error(r);i.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,r).apply(this,arguments)};if(i.noDeprecation===!0)return n;var a=!1;return o};var R,D={};t.debuglog=function(e){if(w(R)&&(R=i.env.NODE_DEBUG||""),e=e.toUpperCase(),!D[e])if(new RegExp("\\b"+e+"\\b","i").test(R)){var n=i.pid;D[e]=function(){var i=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,i)}}else D[e]=function(){};return D[e]},t.inspect=r,r.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},r.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=g,t.isNumber=m,t.isString=_,t.isSymbol=b,t.isUndefined=w,t.isRegExp=k,t.isObject=S,t.isDate=T,t.isError=E,t.isFunction=x,t.isPrimitive=P,t.isBuffer=n(17);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n(18),t._extend=function(e,t){if(!t||!S(t))return e;for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}}).call(t,function(){return this}(),n(16))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0);
}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?p=d.concat(p):y=-1,p.length&&s())}function s(){if(!v){var e=r(a);v=!0;for(var t=p.length;t;){for(d=p,p=[];++y<t;)d&&d[y].run();y=-1,t=p.length}d=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,p=[],v=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){var i=n(15).inherits;e.exports=function(e,t){function n(){this.init(),this._w=d,t.call(this,64,56)}function r(e,t){return e>>>t|e<<32-t}function o(e,t){return e>>>t}function a(e,t,n){return e&t^~e&n}function s(e,t,n){return e&t^e&n^t&n}function u(e){return r(e,2)^r(e,13)^r(e,22)}function c(e){return r(e,6)^r(e,11)^r(e,25)}function l(e){return r(e,7)^r(e,18)^o(e,3)}function f(e){return r(e,17)^r(e,19)^o(e,10)}var h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=new Array(64);return i(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,i,r,o,d,p,v,y,g,m=this._w;t=0|this._a,n=0|this._b,i=0|this._c,r=0|this._d,o=0|this._e,d=0|this._f,p=0|this._g,v=0|this._h;for(var _=0;_<64;_++){var b=m[_]=_<16?e.readInt32BE(4*_):f(m[_-2])+m[_-7]+l(m[_-15])+m[_-16];y=v+c(o)+a(o,d,p)+h[_]+b,g=u(t)+s(t,n,i),v=p,p=d,d=o,o=r+y,r=i,i=n,n=t,t=y+g}this._a=t+this._a|0,this._b=n+this._b|0,this._c=i+this._c|0,this._d=r+this._d|0,this._e=o+this._e|0,this._f=d+this._f|0,this._g=p+this._g|0,this._h=v+this._h|0},n.prototype._hash=function(){var t=new e(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},n}},function(e,t,n){var i=n(15).inherits;e.exports=function(e,t){function n(){this.init(),this._w=u,t.call(this,128,112)}function r(e,t,n){return e>>>n|t<<32-n}function o(e,t,n){return e&t^~e&n}function a(e,t,n){return e&t^e&n^t&n}var s=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],u=new Array(160);return i(n,t),n.prototype.init=function(){return this._a=1779033703,this._b=-1150833019,this._c=1013904242,this._d=-1521486534,this._e=1359893119,this._f=-1694144372,this._g=528734635,this._h=1541459225,this._al=-205731576,this._bl=-2067093701,this._cl=-23791573,this._dl=1595750129,this._el=-1377402159,this._fl=725511199,this._gl=-79577749,this._hl=327033209,this._len=this._s=0,this},n.prototype._update=function(e){var t,n,i,u,c,l,f,h,d,p,v,y,g,m,_,b,w=this._w;t=0|this._a,n=0|this._b,i=0|this._c,u=0|this._d,c=0|this._e,l=0|this._f,f=0|this._g,h=0|this._h,d=0|this._al,p=0|this._bl,v=0|this._cl,y=0|this._dl,g=0|this._el,m=0|this._fl,_=0|this._gl,b=0|this._hl;for(var k=0;k<80;k++){var S,T,E=2*k;if(k<16)S=w[E]=e.readInt32BE(4*E),T=w[E+1]=e.readInt32BE(4*E+4);else{var x=w[E-30],P=w[E-30+1],C=r(x,P,1)^r(x,P,8)^x>>>7,O=r(P,x,1)^r(P,x,8)^r(P,x,7);x=w[E-4],P=w[E-4+1];var A=r(x,P,19)^r(P,x,29)^x>>>6,M=r(P,x,19)^r(x,P,29)^r(P,x,6),I=w[E-14],R=w[E-14+1],D=w[E-32],j=w[E-32+1];T=O+R,S=C+I+(T>>>0<O>>>0?1:0),T+=M,S=S+A+(T>>>0<M>>>0?1:0),T+=j,S=S+D+(T>>>0<j>>>0?1:0),w[E]=S,w[E+1]=T}var L=a(t,n,i),B=a(d,p,v),N=r(t,d,28)^r(d,t,2)^r(d,t,7),U=r(d,t,28)^r(t,d,2)^r(t,d,7),F=r(c,g,14)^r(c,g,18)^r(g,c,9),H=r(g,c,14)^r(g,c,18)^r(c,g,9),W=s[E],q=s[E+1],G=o(c,l,f),z=o(g,m,_),V=b+H,J=h+F+(V>>>0<b>>>0?1:0);V+=z,J=J+G+(V>>>0<z>>>0?1:0),V+=q,J=J+W+(V>>>0<q>>>0?1:0),V+=T,J=J+S+(V>>>0<T>>>0?1:0);var X=U+B,Y=N+L+(X>>>0<U>>>0?1:0);h=f,b=_,f=l,_=m,l=c,m=g,g=y+V|0,c=u+J+(g>>>0<y>>>0?1:0)|0,u=i,y=v,i=n,v=p,n=t,p=d,d=V+X|0,t=J+Y+(d>>>0<V>>>0?1:0)|0}this._al=this._al+d|0,this._bl=this._bl+p|0,this._cl=this._cl+v|0,this._dl=this._dl+y|0,this._el=this._el+g|0,this._fl=this._fl+m|0,this._gl=this._gl+_|0,this._hl=this._hl+b|0,this._a=this._a+t+(this._al>>>0<d>>>0?1:0)|0,this._b=this._b+n+(this._bl>>>0<p>>>0?1:0)|0,this._c=this._c+i+(this._cl>>>0<v>>>0?1:0)|0,this._d=this._d+u+(this._dl>>>0<y>>>0?1:0)|0,this._e=this._e+c+(this._el>>>0<g>>>0?1:0)|0,this._f=this._f+l+(this._fl>>>0<m>>>0?1:0)|0,this._g=this._g+f+(this._gl>>>0<_>>>0?1:0)|0,this._h=this._h+h+(this._hl>>>0<b>>>0?1:0)|0},n.prototype._hash=function(){function t(e,t,i){n.writeInt32BE(e,i),n.writeInt32BE(t,i+4)}var n=new e(64);return t(this._a,this._al,0),t(this._b,this._bl,8),t(this._c,this._cl,16),t(this._d,this._dl,24),t(this._e,this._el,32),t(this._f,this._fl,40),t(this._g,this._gl,48),t(this._h,this._hl,56),n},n}},function(e,t,n){function i(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,i=-271733879,r=-1732584194,l=271733878,f=0;f<e.length;f+=16){var h=n,d=i,p=r,v=l;n=o(n,i,r,l,e[f+0],7,-680876936),l=o(l,n,i,r,e[f+1],12,-389564586),r=o(r,l,n,i,e[f+2],17,606105819),i=o(i,r,l,n,e[f+3],22,-1044525330),n=o(n,i,r,l,e[f+4],7,-176418897),l=o(l,n,i,r,e[f+5],12,1200080426),r=o(r,l,n,i,e[f+6],17,-1473231341),i=o(i,r,l,n,e[f+7],22,-45705983),n=o(n,i,r,l,e[f+8],7,1770035416),l=o(l,n,i,r,e[f+9],12,-1958414417),r=o(r,l,n,i,e[f+10],17,-42063),i=o(i,r,l,n,e[f+11],22,-1990404162),n=o(n,i,r,l,e[f+12],7,1804603682),l=o(l,n,i,r,e[f+13],12,-40341101),r=o(r,l,n,i,e[f+14],17,-1502002290),i=o(i,r,l,n,e[f+15],22,1236535329),n=a(n,i,r,l,e[f+1],5,-165796510),l=a(l,n,i,r,e[f+6],9,-1069501632),r=a(r,l,n,i,e[f+11],14,643717713),i=a(i,r,l,n,e[f+0],20,-373897302),n=a(n,i,r,l,e[f+5],5,-701558691),l=a(l,n,i,r,e[f+10],9,38016083),r=a(r,l,n,i,e[f+15],14,-660478335),i=a(i,r,l,n,e[f+4],20,-405537848),n=a(n,i,r,l,e[f+9],5,568446438),l=a(l,n,i,r,e[f+14],9,-1019803690),r=a(r,l,n,i,e[f+3],14,-187363961),i=a(i,r,l,n,e[f+8],20,1163531501),n=a(n,i,r,l,e[f+13],5,-1444681467),l=a(l,n,i,r,e[f+2],9,-51403784),r=a(r,l,n,i,e[f+7],14,1735328473),i=a(i,r,l,n,e[f+12],20,-1926607734),n=s(n,i,r,l,e[f+5],4,-378558),l=s(l,n,i,r,e[f+8],11,-2022574463),r=s(r,l,n,i,e[f+11],16,1839030562),i=s(i,r,l,n,e[f+14],23,-35309556),n=s(n,i,r,l,e[f+1],4,-1530992060),l=s(l,n,i,r,e[f+4],11,1272893353),r=s(r,l,n,i,e[f+7],16,-155497632),i=s(i,r,l,n,e[f+10],23,-1094730640),n=s(n,i,r,l,e[f+13],4,681279174),l=s(l,n,i,r,e[f+0],11,-358537222),r=s(r,l,n,i,e[f+3],16,-722521979),i=s(i,r,l,n,e[f+6],23,76029189),n=s(n,i,r,l,e[f+9],4,-640364487),l=s(l,n,i,r,e[f+12],11,-421815835),r=s(r,l,n,i,e[f+15],16,530742520),i=s(i,r,l,n,e[f+2],23,-995338651),n=u(n,i,r,l,e[f+0],6,-198630844),l=u(l,n,i,r,e[f+7],10,1126891415),r=u(r,l,n,i,e[f+14],15,-1416354905),i=u(i,r,l,n,e[f+5],21,-57434055),n=u(n,i,r,l,e[f+12],6,1700485571),l=u(l,n,i,r,e[f+3],10,-1894986606),r=u(r,l,n,i,e[f+10],15,-1051523),i=u(i,r,l,n,e[f+1],21,-2054922799),n=u(n,i,r,l,e[f+8],6,1873313359),l=u(l,n,i,r,e[f+15],10,-30611744),r=u(r,l,n,i,e[f+6],15,-1560198380),i=u(i,r,l,n,e[f+13],21,1309151649),n=u(n,i,r,l,e[f+4],6,-145523070),l=u(l,n,i,r,e[f+11],10,-1120210379),r=u(r,l,n,i,e[f+2],15,718787259),i=u(i,r,l,n,e[f+9],21,-343485551),n=c(n,h),i=c(i,d),r=c(r,p),l=c(l,v)}return Array(n,i,r,l)}function r(e,t,n,i,r,o){return c(l(c(c(t,e),c(i,o)),r),n)}function o(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function a(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function u(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}function c(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function l(e,t){return e<<t|e>>>32-t}var f=n(22);e.exports=function(e){return f.hash(e,i,16)}},function(e,t,n){(function(t){function n(e,n){if(e.length%o!==0){var i=e.length+(o-e.length%o);e=t.concat([e,a],i)}for(var r=[],s=n?e.readInt32BE:e.readInt32LE,u=0;u<e.length;u+=o)r.push(s.call(e,u));return r}function i(e,n,i){for(var r=new t(n),o=i?r.writeInt32BE:r.writeInt32LE,a=0;a<e.length;a++)o.call(r,e[a],4*a,!0);return r}function r(e,r,o,a){t.isBuffer(e)||(e=new t(e));var u=r(n(e,a),e.length*s);return i(u,o,a)}var o=4,a=new t(o);a.fill(0);var s=8;e.exports={hash:r}}).call(t,n(5).Buffer)},function(e,t,n){(function(t){function n(e,t,n){return e^t^n}function i(e,t,n){return e&t|~e&n}function r(e,t,n){return(e|~t)^n}function o(e,t,n){return e&n|t&~n}function a(e,t,n){return e^(t|~n)}function s(e,t){return e<<t|e>>>32-t}function u(e){var n=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof e&&(e=new t(e,"utf8"));var i=v(e),r=8*e.length,o=8*e.length;i[r>>>5]|=128<<24-r%32,i[(r+64>>>9<<4)+14]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8);for(var a=0;a<i.length;a+=16)g(n,i,a);for(var a=0;a<5;a++){var s=n[a];n[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}var u=y(n);return new t(u)}e.exports=u;/** @preserve
		(c) 2012 by Cédric Mesnil. All rights reserved.
		
		Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
		
		    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
		    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
		
		THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
		*/
var c=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],l=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],d=[0,1518500249,1859775393,2400959708,2840853838],p=[1352829926,1548603684,1836072691,2053994217,0],v=function(e){for(var t=[],n=0,i=0;n<e.length;n++,i+=8)t[i>>>5]|=e[n]<<24-i%32;return t},y=function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},g=function(e,t,u){for(var v=0;v<16;v++){var y=u+v,g=t[y];t[y]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}var m,_,b,w,k,S,T,E,x,P;S=m=e[0],T=_=e[1],E=b=e[2],x=w=e[3],P=k=e[4];for(var C,v=0;v<80;v+=1)C=m+t[u+c[v]]|0,C+=v<16?n(_,b,w)+d[0]:v<32?i(_,b,w)+d[1]:v<48?r(_,b,w)+d[2]:v<64?o(_,b,w)+d[3]:a(_,b,w)+d[4],C|=0,C=s(C,f[v]),C=C+k|0,m=k,k=w,w=s(b,10),b=_,_=C,C=S+t[u+l[v]]|0,C+=v<16?a(T,E,x)+p[0]:v<32?o(T,E,x)+p[1]:v<48?r(T,E,x)+p[2]:v<64?i(T,E,x)+p[3]:n(T,E,x)+p[4],C|=0,C=s(C,h[v]),C=C+P|0,S=P,P=x,x=s(E,10),E=T,T=C;C=e[1]+b+x|0,e[1]=e[2]+w+P|0,e[2]=e[3]+k+S|0,e[3]=e[4]+m+T|0,e[4]=e[0]+_+E|0,e[0]=C}}).call(t,n(5).Buffer)},function(e,t,n){(function(t){function i(e,n){if(!(this instanceof i))return new i(e,n);this._opad=u,this._alg=e;var a="sha512"===e?128:64;n=this._key=t.isBuffer(n)?n:new t(n),n.length>a?n=r(e).update(n).digest():n.length<a&&(n=t.concat([n,o],a));for(var s=this._ipad=new t(a),u=this._opad=new t(a),c=0;c<a;c++)s[c]=54^n[c],u[c]=92^n[c];this._hash=r(e).update(s)}var r=n(11),o=new t(128);o.fill(0),e.exports=i,i.prototype.update=function(e,t){return this._hash.update(e,t),this},i.prototype.digest=function(e){var t=this._hash.digest();return r(this._alg).update(this._opad).update(t).digest(e)}}).call(t,n(5).Buffer)},function(e,t,n){var i=n(26);e.exports=function(e,t){t=t||{};var n=i(e);return t.pbkdf2=n.pbkdf2,t.pbkdf2Sync=n.pbkdf2Sync,t}},function(e,t,n){(function(t){e.exports=function(e){function n(e,t,n,r,o,a){if("function"==typeof o&&(a=o,o=void 0),"function"!=typeof a)throw new Error("No callback provided to pbkdf2");setTimeout(function(){var s;try{s=i(e,t,n,r,o)}catch(u){return a(u)}a(void 0,s)})}function i(n,i,r,o,a){if("number"!=typeof r)throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if("number"!=typeof o)throw new TypeError("Key length not a number");if(o<0)throw new TypeError("Bad key length");a=a||"sha1",t.isBuffer(n)||(n=new t(n)),t.isBuffer(i)||(i=new t(i));var s,u,c,l=1,f=new t(o),h=new t(i.length+4);i.copy(h,0,0,i.length);for(var d=1;d<=l;d++){h.writeUInt32BE(d,i.length);var p=e.createHmac(a,n).update(h).digest();if(!s&&(s=p.length,c=new t(s),l=Math.ceil(o/s),u=o-(l-1)*s,o>(Math.pow(2,32)-1)*s))throw new TypeError("keylen exceeds maximum length");p.copy(c,0,0,s);for(var v=1;v<r;v++){p=e.createHmac(a,n).update(p).digest();for(var y=0;y<s;y++)c[y]^=p[y]}var g=(d-1)*s,m=d==l?u:s;c.copy(f,g,0,m)}return f}return{pbkdf2:n,pbkdf2Sync:i}}}).call(t,n(5).Buffer)},function(e,t,n){e.exports=function(e,t){function i(){return Object.keys(a)}t=t||{};var r=n(28)(e);t.createCipher=r.createCipher,t.createCipheriv=r.createCipheriv;var o=n(64)(e);t.createDecipher=o.createDecipher,t.createDecipheriv=o.createDecipheriv;var a=n(55);t.listCiphers=i}},function(e,t,n){(function(t){function i(e,n,s){return this instanceof i?(a.call(this),this._cache=new r,this._cipher=new o.AES(n),this._prev=new t(s.length),s.copy(this._prev),void(this._mode=e)):new i(e,n,s)}function r(){return this instanceof r?void(this.cache=new t("")):new r}var o=n(29),a=n(30),s=n(33),u=n(55),c=n(56),l=n(57);s(i,a),i.prototype._transform=function(e,t,n){this._cache.add(e);for(var i,r;i=this._cache.get();)r=this._mode.encrypt(this,i),this.push(r);n()},i.prototype._flush=function(e){var t=this._cache.flush();this.push(this._mode.encrypt(this,t)),this._cipher.scrub(),e()},r.prototype.add=function(e){this.cache=t.concat([this.cache,e])},r.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},r.prototype.flush=function(){for(var e=16-this.cache.length,n=new t(e),i=-1;++i<e;)n.writeUInt8(e,i);var r=t.concat([this.cache,n]);return r};var f={ECB:n(58),CBC:n(59),CFB:n(61),OFB:n(62),CTR:n(63)};e.exports=function(e){function n(e,n,r){var o=u[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=new t(r)),"string"==typeof n&&(n=new t(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(r.length!==o.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===o.type?new l(f[o.mode],n,r):new i(f[o.mode],n,r)}function r(t,i){var r=u[t];if(!r)throw new TypeError("invalid suite type");var o=c(e,i,r.key,r.iv);return n(t,o.key,o.iv)}return{createCipher:r,createCipheriv:n}}}).call(t,n(5).Buffer)},function(e,t,n){(function(e){function n(e){var t,n;return t=e>s||e<0?(n=Math.abs(e)%s,e<0?s-n:n):e}function i(e){var t,n,i;for(t=n=0,i=e.length;0<=i?n<i:n>i;t=0<=i?++n:--n)e[t]=0;return!1}function r(){var e;this.SBOX=[],this.INV_SBOX=[],this.SUB_MIX=function(){var t,n;for(n=[],e=t=0;t<4;e=++t)n.push([]);return n}(),this.INV_SUB_MIX=function(){var t,n;for(n=[],e=t=0;t<4;e=++t)n.push([]);return n}(),this.init(),this.RCON=[0,1,2,4,8,16,32,64,128,27,54]}function o(e){for(var t=e.length/4,n=new Array(t),i=-1;++i<t;)n[i]=e.readUInt32BE(4*i);return n}function a(e){this._key=o(e),this._doReset()}var s=Math.pow(2,32);r.prototype.init=function(){var e,t,n,i,r,o,a,s,u,c;for(e=function(){var e,n;for(n=[],t=e=0;e<256;t=++e)t<128?n.push(t<<1):n.push(t<<1^283);return n}(),r=0,u=0,t=c=0;c<256;t=++c)n=u^u<<1^u<<2^u<<3^u<<4,n=n>>>8^255&n^99,this.SBOX[r]=n,this.INV_SBOX[n]=r,o=e[r],a=e[o],s=e[a],i=257*e[n]^16843008*n,this.SUB_MIX[0][r]=i<<24|i>>>8,this.SUB_MIX[1][r]=i<<16|i>>>16,this.SUB_MIX[2][r]=i<<8|i>>>24,this.SUB_MIX[3][r]=i,i=16843009*s^65537*a^257*o^16843008*r,this.INV_SUB_MIX[0][n]=i<<24|i>>>8,this.INV_SUB_MIX[1][n]=i<<16|i>>>16,this.INV_SUB_MIX[2][n]=i<<8|i>>>24,this.INV_SUB_MIX[3][n]=i,0===r?r=u=1:(r=o^e[e[e[s^o]]],u^=e[e[u]]);return!0};var u=new r;a.blockSize=16,a.prototype.blockSize=a.blockSize,a.keySize=32,a.prototype.keySize=a.keySize,a.ivSize=a.blockSize,a.prototype.ivSize=a.ivSize,a.prototype._doReset=function(){var e,t,n,i,r,o,a,s;for(n=this._key,t=n.length,this._nRounds=t+6,r=4*(this._nRounds+1),this._keySchedule=[],i=a=0;0<=r?a<r:a>r;i=0<=r?++a:--a)this._keySchedule[i]=i<t?n[i]:(o=this._keySchedule[i-1],i%t===0?(o=o<<8|o>>>24,o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o],o^=u.RCON[i/t|0]<<24):t>6&&i%t===4?o=u.SBOX[o>>>24]<<24|u.SBOX[o>>>16&255]<<16|u.SBOX[o>>>8&255]<<8|u.SBOX[255&o]:void 0,this._keySchedule[i-t]^o);for(this._invKeySchedule=[],e=s=0;0<=r?s<r:s>r;e=0<=r?++s:--s)i=r-e,o=this._keySchedule[i-(e%4?0:4)],this._invKeySchedule[e]=e<4||i<=4?o:u.INV_SUB_MIX[0][u.SBOX[o>>>24]]^u.INV_SUB_MIX[1][u.SBOX[o>>>16&255]]^u.INV_SUB_MIX[2][u.SBOX[o>>>8&255]]^u.INV_SUB_MIX[3][u.SBOX[255&o]];return!0},a.prototype.encryptBlock=function(t){t=o(new e(t));var n=this._doCryptBlock(t,this._keySchedule,u.SUB_MIX,u.SBOX),i=new e(16);return i.writeUInt32BE(n[0],0),i.writeUInt32BE(n[1],4),i.writeUInt32BE(n[2],8),i.writeUInt32BE(n[3],12),i},a.prototype.decryptBlock=function(t){t=o(new e(t));var n=[t[3],t[1]];t[1]=n[0],t[3]=n[1];var i=this._doCryptBlock(t,this._invKeySchedule,u.INV_SUB_MIX,u.INV_SBOX),r=new e(16);return r.writeUInt32BE(i[0],0),r.writeUInt32BE(i[3],4),r.writeUInt32BE(i[2],8),r.writeUInt32BE(i[1],12),r},a.prototype.scrub=function(){i(this._keySchedule),i(this._invKeySchedule),i(this._key)},a.prototype._doCryptBlock=function(e,t,i,r){var o,a,s,u,c,l,f,h,d,p,v,y;for(s=e[0]^t[0],u=e[1]^t[1],c=e[2]^t[2],l=e[3]^t[3],o=4,a=v=1,y=this._nRounds;1<=y?v<y:v>y;a=1<=y?++v:--v)f=i[0][s>>>24]^i[1][u>>>16&255]^i[2][c>>>8&255]^i[3][255&l]^t[o++],h=i[0][u>>>24]^i[1][c>>>16&255]^i[2][l>>>8&255]^i[3][255&s]^t[o++],d=i[0][c>>>24]^i[1][l>>>16&255]^i[2][s>>>8&255]^i[3][255&u]^t[o++],p=i[0][l>>>24]^i[1][s>>>16&255]^i[2][u>>>8&255]^i[3][255&c]^t[o++],s=f,u=h,c=d,l=p;return f=(r[s>>>24]<<24|r[u>>>16&255]<<16|r[c>>>8&255]<<8|r[255&l])^t[o++],h=(r[u>>>24]<<24|r[c>>>16&255]<<16|r[l>>>8&255]<<8|r[255&s])^t[o++],d=(r[c>>>24]<<24|r[l>>>16&255]<<16|r[s>>>8&255]<<8|r[255&u])^t[o++],p=(r[l>>>24]<<24|r[s>>>16&255]<<16|r[u>>>8&255]<<8|r[255&c])^t[o++],[n(f),n(h),n(d),n(p)]},t.AES=a}).call(t,n(5).Buffer)},function(e,t,n){(function(t){function i(){r.call(this)}var r=n(31).Transform,o=n(33);e.exports=i,o(i,r),i.prototype.update=function(e,n,i){this.write(e,n);for(var r,o=new t("");r=this.read();)o=t.concat([o,r]);return i&&(o=o.toString(i)),o},i.prototype["final"]=function(e){this.end();for(var n,i=new t("");n=this.read();)i=t.concat([i,n]);return e&&(i=i.toString(e)),i}}).call(t,n(5).Buffer)},function(e,t,n){function i(){r.call(this)}e.exports=i;var r=n(32).EventEmitter,o=n(33);o(i,r),i.Readable=n(34),i.Writable=n(51),i.Duplex=n(52),i.Transform=n(53),i.PassThrough=n(54),i.Stream=i,i.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function i(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function a(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===r.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",n),e.removeListener("drain",i),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),e.on("error",s),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!r(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,r,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(n=this._events[e],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(o(n))for(s=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,s);return!0},n.prototype.addListener=function(e,t){var r;if(!i(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,i(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(r=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!i(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,r,a,s;if(!i(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,r=-1,n===t||i(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],i(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?i(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(i(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){t=e.exports=n(35),t.Stream=t,t.Readable=t,t.Writable=n(43),t.Duplex=n(42),t.Transform=n(49),t.PassThrough=n(50)},function(e,t,n){(function(t){"use strict";function i(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?A(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function r(e,t){C=C||n(42),e=e||{},this.objectMode=!!e.objectMode,t instanceof C&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.buffer=new N,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(B||(B=n(47).StringDecoder),this.decoder=new B(e.encoding),this.encoding=e.encoding)}function o(e){return C=C||n(42),this instanceof o?(this._readableState=new r(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),void I.call(this)):new o(e)}function a(e,t,n,i,r){var o=l(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,f(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!r){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&r){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var c;!t.decoder||r||i||(n=t.decoder.write(n),c=!t.objectMode&&0===n.length),r||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e))),p(e,t)}else r||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=F?e=F:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function l(e,t){var n=null;return R.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(L("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?O(d,e):d(e))}function d(e){L("emit readable"),e.emit("readable"),b(e)}function p(e,t){t.readingMore||(t.readingMore=!0,O(v,e,t))}function v(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(L("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function y(e){return function(){var t=e._readableState;L("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&M(e,"data")&&(t.flowing=!0,b(e))}}function g(e){L("readable nexttick read 0"),e.read(0)}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,O(_,e,t))}function _(e,t){t.reading||(L("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),b(e),t.flowing&&!t.reading&&e.read(0)}function b(e){var t=e._readableState;for(L("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=k(e,t.buffer,t.decoder),n}function k(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?S(e,t):T(e,t),i}function S(e,t){var n=t.head,i=1,r=n.data;for(e-=r.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(r+=a===o.length?o:o.slice(0,e),e-=a,0===e){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function T(e,t){var n=R.allocUnsafe(e),i=t.head,r=1;for(i.data.copy(n),e-=i.data.length;i=i.next;){var o=i.data,a=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,a),e-=a,0===e){a===o.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=o.slice(a));break}++r}return t.length-=r,n}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,O(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function P(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}e.exports=o;var C,O=n(36),A=n(8);o.ReadableState=r;var M=(n(32).EventEmitter,function(e,t){return e.listeners(t).length}),I=n(37),R=n(38).Buffer,D=n(39);D.inherits=n(33);var j=n(40),L=void 0;L=j&&j.debuglog?j.debuglog("stream"):function(){};var B,N=n(41);D.inherits(o,I);var U=["error","close","destroy","pause","resume"];o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=R.from(e,t),t="")),a(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return a(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(e){return B||(B=n(47).StringDecoder),this._readableState.decoder=new B(e),this._readableState.encoding=e,this};var F=8388608;o.prototype.read=function(e){L("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return L("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):h(this),null;if(e=c(e,t),0===e&&t.ended)return 0===t.length&&E(this),null;var i=t.needReadable;L("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,L("length less than watermark",i)),t.ended||t.reading?(i=!1,L("reading or ended",i)):i&&(L("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(n,t)));var r;return r=e>0?w(e,t):null,null===r?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&E(this)),null!==r&&this.emit("data",r),r},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,n){function r(e){L("onunpipe"),e===h&&a()}function o(){L("onend"),e.end()}function a(){L("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",r),h.removeListener("end",o),h.removeListener("end",f),h.removeListener("data",s),m=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){L("ondata"),_=!1;var n=e.write(t);!1!==n||_||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&P(d.pipes,e)!==-1)&&!m&&(L("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,_=!0),h.pause())}function u(t){L("onerror",t),f(),e.removeListener("error",u),0===M(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){L("onfinish"),e.removeListener("close",c),f()}function f(){L("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,L("pipe count=%d opts=%j",d.pipesCount,n);var p=(!n||n.end!==!1)&&e!==t.stdout&&e!==t.stderr,v=p?o:f;d.endEmitted?O(v):h.once("end",v),e.on("unpipe",r);var g=y(h);e.on("drain",g);var m=!1,_=!1;return h.on("data",s),i(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),d.flowing||(L("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var r=0;r<i;r++)n[r].emit("unpipe",this);return this}var o=P(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=I.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&h(this,i):O(g,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(L("resume"),e.flowing=!0,m(this,e)),this},o.prototype.pause=function(){return L("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(L("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,i=this;e.on("end",function(){if(L("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&i.push(e)}i.push(null)}),e.on("data",function(r){if(L("wrapped data"),t.decoder&&(r=t.decoder.write(r)),(!t.objectMode||null!==r&&void 0!==r)&&(t.objectMode||r&&r.length)){var o=i.push(r);o||(n=!0,e.pause())}});for(var r in e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<U.length;o++)e.on(U[o],i.emit.bind(i,U[o]));return i._read=function(t){L("wrapped _read",t),n&&(n=!1,e.resume())},i},o._fromList=w}).call(t,n(16))},function(e,t,n){(function(t){"use strict";function n(e,n,i,r){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,i)});case 4:return t.nextTick(function(){e.call(null,n,i,r)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(16))},function(e,t,n){e.exports=n(32).EventEmitter},function(e,t,n){e.exports=n(5)},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===y(e)}function i(e){return"boolean"==typeof e}function r(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===y(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===y(e)}function d(e){return"[object Error]"===y(e)||e instanceof Error}function p(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function y(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=i,t.isNull=r,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=u,t.isUndefined=c,t.isRegExp=l,t.isObject=f,t.isDate=h,t.isError=d,t.isFunction=p,t.isPrimitive=v,t.isBuffer=e.isBuffer}).call(t,n(5).Buffer)},function(e,t){},function(e,t,n){"use strict";function i(){this.head=null,this.tail=null,this.length=0}var r=n(38).Buffer;e.exports=i,i.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},i.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},i.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},i.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t}},function(e,t,n){"use strict";function i(e){return this instanceof i?(c.call(this,e),l.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new i(e)}function r(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=i;var s=n(36),u=n(39);u.inherits=n(33);var c=n(35),l=n(43);u.inherits(i,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var d=f[h];i.prototype[d]||(i.prototype[d]=l.prototype[d])}},function(e,t,n){(function(t,i){"use strict";function r(){}function o(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function a(e,t){T=T||n(42),e=e||{},this.objectMode=!!e.objectMode,t instanceof T&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,r=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){v(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new S(this)}function s(e){return T=T||n(42),M.call(s,this)||this instanceof T?(this._writableState=new a(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),void O.call(this)):new s(e)}function u(e,t){var n=new Error("write after end");e.emit("error",n),E(t,n)}function c(e,t,n,i){var r=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),E(i,o),r=!1),r}function l(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=A.from(t,n)),t}function f(e,t,n,i,r,a){n||(i=l(t,i,r),A.isBuffer(i)&&(r="buffer"));var s=t.objectMode?1:i.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest=new o(i,r,a),c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,s,i,r,a);return u}function h(e,t,n,i,r,o,a){t.writelen=i,t.writecb=a,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,o,t.onwrite),t.sync=!1}function d(e,t,n,i,r){--t.pendingcb,n?E(r,i):r(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function p(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function v(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(p(n),t)d(e,n,i,t,r);else{var o=_(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||m(e,n),i?x(y,e,n,o,r):y(e,n,o,r)}}function y(e,t,n,i){n||g(e,t),t.pendingcb--,i(),w(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var a=0;n;)r[a]=n,n=n.next,a+=1;h(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new S(t)}else{for(;n;){var s=n.chunk,u=n.encoding,c=n.callback,l=t.objectMode?1:s.length;if(h(e,t,!1,l,s,u,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function _(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function w(e,t){var n=_(t);return n&&(0===t.pendingcb?(b(e,t),t.finished=!0,e.emit("finish")):b(e,t)),n}function k(e,t,n){t.ending=!0,w(e,t),n&&(t.finished?E(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function S(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(n),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=s;var T,E=n(36),x=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:E;s.WritableState=a;var P=n(39);P.inherits=n(33);var C={deprecate:n(46)},O=n(37),A=n(38).Buffer;P.inherits(s,O),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:C.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var M;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(M=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!M.call(this,e)||e&&e._writableState instanceof a}})):M=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){
var i=this._writableState,o=!1,a=A.isBuffer(e);return"function"==typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?u(this,n):(a||c(this,i,e,n))&&(i.pendingcb++,o=f(this,i,a,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var i=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||k(this,i,n)}}).call(t,n(16),n(44).setImmediate)},function(e,i,r){function o(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;i.setTimeout=function(){return new o(a.call(setTimeout,window,arguments),clearTimeout)},i.setInterval=function(){return new o(a.call(setInterval,window,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(45),i.setImmediate=t,i.clearImmediate=n},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return v[p]=i,d(p),p++}function r(e){delete v[e]}function o(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function a(e){if(y)setTimeout(a,0,e);else{var t=v[e];if(t){y=!0;try{o(t)}finally{r(e),y=!1}}}}function s(){d=function(e){t.nextTick(function(){a(e)})}}function u(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),d=function(n){e.postMessage(t+n,"*")}}function l(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;a(t)},d=function(t){e.port2.postMessage(t)}}function f(){var e=g.documentElement;d=function(t){var n=g.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function h(){d=function(e){setTimeout(a,0,e)}}if(!e.setImmediate){var d,p=1,v={},y=!1,g=e.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,"[object process]"==={}.toString.call(e.process)?s():u()?c():e.MessageChannel?l():g&&"onreadystatechange"in g.createElement("script")?f():h(),m.setImmediate=i,m.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(16))},function(e,t){(function(t){function n(e,t){function n(){if(!r){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}if(i("noDeprecation"))return e;var r=!1;return n}function i(e){try{if(!t.localStorage)return!1}catch(n){return!1}var i=t.localStorage[e];return null!=i&&"true"===String(i).toLowerCase()}e.exports=n}).call(t,function(){return this}())},function(e,t,n){"use strict";function i(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function r(e){var t=i(e);if("string"!=typeof t&&(m.isEncoding===_||!_(e)))throw new Error("Unknown encoding: "+e);return t||e}function o(e){this.encoding=r(e);var t;switch(this.encoding){case"utf16le":this.text=h,this.end=d,t=4;break;case"utf8":this.fillLast=c,t=4;break;case"base64":this.text=p,this.end=v,t=3;break;default:return this.write=y,void(this.end=g)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function a(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:-1}function s(e,t,n){var i=t.length-1;if(i<n)return 0;var r=a(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n?0:(r=a(t[i]),r>=0?(r>0&&(e.lastNeed=r-2),r):--i<n?0:(r=a(t[i]),r>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0))}function u(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"�".repeat(n);if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"�".repeat(n+1);if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"�".repeat(n+2)}}function c(e){var t=this.lastTotal-this.lastNeed,n=u(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var n=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t}function h(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function d(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function p(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var m=n(48).Buffer,_=m.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};t.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=f,o.prototype.text=l,o.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),void(this.lastNeed-=e.length))}},function(e,t,n){function i(e,t){for(var n in e)t[n]=e[n]}function r(e,t,n){return a(e,t,n)}var o=n(5),a=o.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?e.exports=o:(i(o,t),t.Buffer=r),i(a,r),r.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,n)},r.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=a(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},r.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},r.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o.SlowBuffer(e)}},function(e,t,n){"use strict";function i(e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e,t,n){var i=e._transformState;i.transforming=!1;var r=i.writecb;if(!r)return e.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!==n&&void 0!==n&&e.push(n),r(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new i(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){a(t,e,n)}):a(t)})}function a(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var i=e._writableState,r=e._transformState;if(i.length)throw new Error("Calling transform done when ws.length != 0");if(r.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var s=n(42),u=n(39);u.inherits=n(33),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,n){"use strict";function i(e){return this instanceof i?void r.call(this,e):new i(e)}e.exports=i;var r=n(49),o=n(39);o.inherits=n(33),o.inherits(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(43)},function(e,t,n){e.exports=n(42)},function(e,t,n){e.exports=n(34).Transform},function(e,t,n){e.exports=n(34).PassThrough},function(e,t){t["aes-128-ecb"]={cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},t["aes-192-ecb"]={cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},t["aes-256-ecb"]={cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},t["aes-128-cbc"]={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},t["aes-192-cbc"]={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},t["aes-256-cbc"]={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},t.aes128=t["aes-128-cbc"],t.aes192=t["aes-192-cbc"],t.aes256=t["aes-256-cbc"],t["aes-128-cfb"]={cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},t["aes-192-cfb"]={cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},t["aes-256-cfb"]={cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},t["aes-128-ofb"]={cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},t["aes-192-ofb"]={cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},t["aes-256-ofb"]={cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},t["aes-128-ctr"]={cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},t["aes-192-ctr"]={cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},t["aes-256-ctr"]={cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"}},function(e,t,n){(function(t){e.exports=function(e,n,i,r){i/=8,r=r||0;for(var o,a,s,u=0,c=0,l=new t(i),f=new t(r),h=0;;){if(o=e.createHash("md5"),h++>0&&o.update(a),o.update(n),a=o.digest(),s=0,i>0)for(;0!==i&&s!==a.length;)l[u++]=a[s],i--,s++;if(r>0&&s!==a.length)for(;0!==r&&s!==a.length;)f[c++]=a[s],r--,s++;if(0===i&&0===r)break}for(s=0;s<a.length;s++)a[s]=0;return{key:l,iv:f}}}).call(t,n(5).Buffer)},function(e,t,n){(function(t){function i(e,n,a,s){return this instanceof i?(o.call(this),this._cipher=new r.AES(n),this._prev=new t(a.length),this._cache=new t(""),this._secCache=new t(""),this._decrypt=s,a.copy(this._prev),void(this._mode=e)):new i(e,n,a)}var r=n(29),o=n(30),a=n(33);a(i,o),e.exports=i,i.prototype._transform=function(e,t,n){n(null,this._mode.encrypt(this,e,this._decrypt))},i.prototype._flush=function(e){this._cipher.scrub(),e()}}).call(t,n(5).Buffer)},function(e,t){t.encrypt=function(e,t){return e._cipher.encryptBlock(t)},t.decrypt=function(e,t){return e._cipher.decryptBlock(t)}},function(e,t,n){var i=n(60);t.encrypt=function(e,t){var n=i(t,e._prev);return e._prev=e._cipher.encryptBlock(n),e._prev},t.decrypt=function(e,t){var n=e._prev;e._prev=t;var r=e._cipher.decryptBlock(t);return i(r,n)}},function(e,t,n){(function(t){function n(e,n){for(var i=Math.min(e.length,n.length),r=new t(i),o=-1;++o<i;)r.writeUInt8(e[o]^n[o],o);return r}e.exports=n}).call(t,n(5).Buffer)},function(e,t,n){(function(e){function i(t,n,i){var o=n.length,a=r(n,t._cache);return t._cache=t._cache.slice(o),t._prev=e.concat([t._prev,i?n:a]),a}var r=n(60);t.encrypt=function(t,n,r){for(var o,a=new e("");n.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=new e("")),!(t._cache.length<=n.length)){a=e.concat([a,i(t,n,r)]);break}o=t._cache.length,a=e.concat([a,i(t,n.slice(0,o),r)]),n=n.slice(o)}return a}}).call(t,n(5).Buffer)},function(e,t,n){(function(e){function i(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}var r=n(60);t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,i(t)]);var o=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),r(n,o)}}).call(t,n(5).Buffer)},function(e,t,n){(function(e){function i(e){var t=e._cipher.encryptBlock(e._prev);return r(e._prev),t}function r(e){for(var t,n=e.length;n--;){if(t=e.readUInt8(n),255!==t){t++,e.writeUInt8(t,n);break}e.writeUInt8(0,n)}}var o=n(60);t.encrypt=function(t,n){for(;t._cache.length<n.length;)t._cache=e.concat([t._cache,i(t)]);var r=t._cache.slice(0,n.length);return t._cache=t._cache.slice(n.length),o(n,r)}}).call(t,n(5).Buffer)},function(e,t,n){(function(t){function i(e,n,o){return this instanceof i?(s.call(this),this._cache=new r,this._last=void 0,this._cipher=new a.AES(n),this._prev=new t(o.length),o.copy(this._prev),void(this._mode=e)):new i(e,n,o)}function r(){return this instanceof r?void(this.cache=new t("")):new r}function o(e){var t=e[15];if(16!==t)return e.slice(0,16-t)}var a=n(29),s=n(30),u=n(33),c=n(55),l=n(57),f=n(56);u(i,s),i.prototype._transform=function(e,t,n){this._cache.add(e);for(var i,r;i=this._cache.get();)r=this._mode.decrypt(this,i),this.push(r);n()},i.prototype._flush=function(e){var t=this._cache.flush();return t?(this.push(o(this._mode.decrypt(this,t))),void e()):e},r.prototype.add=function(e){this.cache=t.concat([this.cache,e])},r.prototype.get=function(){if(this.cache.length>16){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},r.prototype.flush=function(){if(this.cache.length)return this.cache};var h={ECB:n(58),CBC:n(59),CFB:n(61),OFB:n(62),CTR:n(63)};e.exports=function(e){function n(e,n,r){var o=c[e];if(!o)throw new TypeError("invalid suite type");if("string"==typeof r&&(r=new t(r)),"string"==typeof n&&(n=new t(n)),n.length!==o.key/8)throw new TypeError("invalid key length "+n.length);if(r.length!==o.iv)throw new TypeError("invalid iv length "+r.length);return"stream"===o.type?new l(h[o.mode],n,r,(!0)):new i(h[o.mode],n,r)}function r(t,i){var r=c[t];if(!r)throw new TypeError("invalid suite type");var o=f(e,i,r.key,r.iv);return n(t,o.key,o.iv)}return{createDecipher:r,createDecipheriv:n}}}).call(t,n(5).Buffer)},function(e,t){var n=function(){function e(){if(!G){try{var e=B.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}G=!0;for(var n=F.length,i=0;i<n;i++)F[i]()}}function t(e){G?e():F[F.length]=e}function i(e){if(typeof L.addEventListener!=O)L.addEventListener("load",e,!1);else if(typeof B.addEventListener!=O)B.addEventListener("load",e,!1);else if(typeof L.attachEvent!=O)m(L,"onload",e);else if("function"==typeof L.onload){var t=L.onload;L.onload=function(){t(),e()}}else L.onload=e}function r(){U?o():a()}function o(){var e=B.getElementsByTagName("body")[0],t=g(A);t.setAttribute("type",R);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=O){var r=n.GetVariable("$version");r&&(r=r.split(" ")[1].split(","),J.pv=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,a()}()}else a()}function a(){var e=H.length;if(e>0)for(var t=0;t<e;t++){var n=H[t].id,i=H[t].callbackFn,r={success:!1,id:n};if(J.pv[0]>0){var o=y(n);if(o)if(!_(H[t].swfVersion)||J.wk&&J.wk<312)if(H[t].expressInstall&&u()){var a={};a.data=H[t].expressInstall,a.width=o.getAttribute("width")||"0",a.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(a.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(a.align=o.getAttribute("align"));for(var f={},h=o.getElementsByTagName("param"),d=h.length,p=0;p<d;p++)"movie"!=h[p].getAttribute("name").toLowerCase()&&(f[h[p].getAttribute("name")]=h[p].getAttribute("value"));c(a,f,n,i)}else l(o),i&&i(r);else w(n,!0),i&&(r.success=!0,r.ref=s(n),i(r))}else if(w(n,!0),i){var v=s(n);v&&typeof v.SetVariable!=O&&(r.success=!0,r.ref=v),i(r)}}}function s(e){var t=null,n=y(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=O)t=n;else{var i=n.getElementsByTagName(A)[0];i&&(t=i)}return t}function u(){return!z&&_("6.0.65")&&(J.win||J.mac)&&!(J.wk&&J.wk<312)}function c(e,t,n,i){z=!0,E=i||null,x={success:!1,id:n};var r=y(n);if(r){"OBJECT"==r.nodeName?(S=f(r),T=null):(S=r,T=n),e.id=D,(typeof e.width==O||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==O||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),B.title=B.title.slice(0,47)+" - Flash Player Installation";var o=J.ie&&J.win?["Active"].concat("").join("X"):"PlugIn",a="MMredirectURL="+L.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+B.title;if(typeof t.flashvars!=O?t.flashvars+="&"+a:t.flashvars=a,J.ie&&J.win&&4!=r.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}h(e,t,n)}}function l(e){if(J.ie&&J.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(f(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(f(e),e)}function f(e){var t=g("div");if(J.win&&J.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(A)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,o=0;o<r;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function h(e,t,n){var i,r=y(n);if(J.wk&&J.wk<312)return i;if(r)if(typeof e.id==O&&(e.id=n),J.ie&&J.win){var o="";for(var a in e)e[a]!=Object.prototype[a]&&("data"==a.toLowerCase()?t.movie=e[a]:"styleclass"==a.toLowerCase()?o+=' class="'+e[a]+'"':"classid"!=a.toLowerCase()&&(o+=" "+a+'="'+e[a]+'"'));var s="";for(var u in t)t[u]!=Object.prototype[u]&&(s+='<param name="'+u+'" value="'+t[u]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+s+"</object>",W[W.length]=e.id,i=y(e.id)}else{var c=g(A);c.setAttribute("type",R);for(var l in e)e[l]!=Object.prototype[l]&&("styleclass"==l.toLowerCase()?c.setAttribute("class",e[l]):"classid"!=l.toLowerCase()&&c.setAttribute(l,e[l]));for(var f in t)t[f]!=Object.prototype[f]&&"movie"!=f.toLowerCase()&&d(c,f,t[f]);r.parentNode.replaceChild(c,r),i=c}return i}function d(e,t,n){var i=g("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=y(e);t&&"OBJECT"==t.nodeName&&(J.ie&&J.win?(t.style.display="none",function(){4==t.readyState?v(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function v(e){var t=y(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=B.getElementById(e)}catch(n){}return t}function g(e){return B.createElement(e)}function m(e,t,n){e.attachEvent(t,n),q[q.length]=[e,t,n]}function _(e){var t=J.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function b(e,t,n,i){if(!J.ie||!J.mac){var r=B.getElementsByTagName("head")[0];if(r){var o=n&&"string"==typeof n?n:"screen";if(i&&(P=null,C=null),!P||C!=o){var a=g("style");a.setAttribute("type","text/css"),a.setAttribute("media",o),P=r.appendChild(a),J.ie&&J.win&&typeof B.styleSheets!=O&&B.styleSheets.length>0&&(P=B.styleSheets[B.styleSheets.length-1]),C=o}J.ie&&J.win?P&&typeof P.addRule==A&&P.addRule(e,t):P&&typeof B.createTextNode!=O&&P.appendChild(B.createTextNode(e+" {"+t+"}"))}}}function w(e,t){if(V){var n=t?"visible":"hidden";G&&y(e)?y(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function k(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=O?encodeURIComponent(e):e}var S,T,E,x,P,C,O="undefined",A="object",M="Shockwave Flash",I="ShockwaveFlash.ShockwaveFlash",R="application/x-shockwave-flash",D="SWFObjectExprInst",j="onreadystatechange",L=window,B=document,N=navigator,U=!1,F=[r],H=[],W=[],q=[],G=!1,z=!1,V=!0,J=function(){var e=typeof B.getElementById!=O&&typeof B.getElementsByTagName!=O&&typeof B.createElement!=O,t=N.userAgent.toLowerCase(),n=N.platform.toLowerCase(),i=n?/win/.test(n):/win/.test(t),r=n?/mac/.test(n):/mac/.test(t),o=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),a=!1,s=[0,0,0],u=null;if(typeof N.plugins!=O&&typeof N.plugins[M]==A)u=N.plugins[M].description,!u||typeof N.mimeTypes!=O&&N.mimeTypes[R]&&!N.mimeTypes[R].enabledPlugin||(U=!0,a=!1,u=u.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(u.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(u.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(u)?parseInt(u.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof L[["Active"].concat("Object").join("X")]!=O)try{var c=new(window[["Active"].concat("Object").join("X")])(I);c&&(u=c.GetVariable("$version"),u&&(a=!0,u=u.split(" ")[1].split(","),s=[parseInt(u[0],10),parseInt(u[1],10),parseInt(u[2],10)]))}catch(l){}return{w3:e,pv:s,wk:o,ie:a,win:i,mac:r}}();return function(){J.w3&&((typeof B.readyState!=O&&"complete"==B.readyState||typeof B.readyState==O&&(B.getElementsByTagName("body")[0]||B.body))&&e(),G||(typeof B.addEventListener!=O&&B.addEventListener("DOMContentLoaded",e,!1),J.ie&&J.win&&(B.attachEvent(j,function(){"complete"==B.readyState&&(B.detachEvent(j,arguments.callee),e())}),L==top&&!function(){if(!G){try{B.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),J.wk&&!function(){if(!G)return/loaded|complete/.test(B.readyState)?void e():void setTimeout(arguments.callee,0)}(),i(e)))}(),function(){J.ie&&J.win&&window.attachEvent("onunload",function(){for(var e=q.length,t=0;t<e;t++)q[t][0].detachEvent(q[t][1],q[t][2]);for(var i=W.length,r=0;r<i;r++)p(W[r]);for(var o in J)J[o]=null;J=null;for(var a in n)n[a]=null;n=null})}(),{registerObject:function(e,t,n,i){if(J.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,H[H.length]=r,w(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(J.w3)return s(e)},embedSWF:function(e,n,i,r,o,a,s,l,f,d){var p={success:!1,id:n};J.w3&&!(J.wk&&J.wk<312)&&e&&n&&i&&r&&o?(w(n,!1),t(function(){i+="",r+="";var t={};if(f&&typeof f===A)for(var v in f)t[v]=f[v];t.data=e,t.width=i,t.height=r;var y={};if(l&&typeof l===A)for(var g in l)y[g]=l[g];if(s&&typeof s===A)for(var m in s)typeof y.flashvars!=O?y.flashvars+="&"+m+"="+s[m]:y.flashvars=m+"="+s[m];if(_(o)){var b=h(t,y,n);t.id==n&&w(n,!0),p.success=!0,p.ref=b}else{if(a&&u())return t.data=a,void c(t,y,n,d);w(n,!0)}d&&d(p)})):d&&d(p)},switchOffAutoHideShow:function(){V=!1},ua:J,getFlashPlayerVersion:function(){return{major:J.pv[0],minor:J.pv[1],release:J.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(e,t,n){return J.w3?h(e,t,n):void 0},showExpressInstall:function(e,t,n,i){J.w3&&u()&&c(e,t,n,i)},removeSWF:function(e){J.w3&&p(e)},createCSS:function(e,t,n,i){J.w3&&b(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=B.location.search||B.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return k(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=y(D);e&&S&&(e.parentNode.replaceChild(S,e),T&&(w(T,!0),J.ie&&J.win&&(S.style.display="block")),E&&E(x)),z=!1}}}}();e.exports=n},function(e,t,n){n(1),n(2),!function(){if(window.WEB_SOCKET_FORCE_FLASH);else{if(window.WebSocket)return;if(window.MozWebSocket)return void(window.WebSocket=MozWebSocket)}var e;return e=window.WEB_SOCKET_LOGGER?WEB_SOCKET_LOGGER:window.console&&window.console.log&&window.console.error?window.console:{log:function(){},error:function(){}},10>swfobject.getFlashPlayerVersion().major?void e.error("Flash Player >= 10.0.0 is required."):("file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),window.WebSocket=function(e,t,n,i,r){var o=this;o.__id=WebSocket.__nextId++,WebSocket.__instances[o.__id]=o,o.readyState=WebSocket.CONNECTING,o.bufferedAmount=0,o.__events={},t?"string"==typeof t&&(t=[t]):t=[],o.__createTask=setTimeout(function(){WebSocket.__addTask(function(){o.__createTask=null,WebSocket.__flash.create(o.__id,e,t,n||null,i||0,r||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return 0>t||(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){return this.__createTask?(clearTimeout(this.__createTask),this.__createTask=null,void(this.readyState=WebSocket.CLOSED)):void(this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id)))},WebSocket.prototype.addEventListener=function(e,t){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t){if(e in this.__events)for(var n=this.__events[e],i=n.length-1;i>=0;--i)if(n[i]===t){n.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],n=0;t.length>n;++n)t[n](e);var i=this["on"+e.type];i&&i.apply(this,[e])},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if("open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close"),t.wasClean=!!e.wasClean,t.code=e.code,t.reason=e.reason;else{if("message"!=e.type)throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__isFlashImplementation=!0,WebSocket.__initialized=!1,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__initialized){if(WebSocket.__initialized=!0,WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");if(!window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&!WEB_SOCKET_SWF_LOCATION.match(/(^|\/)WebSocketMainInsecure\.swf(\?.*)?$/)&&WEB_SOCKET_SWF_LOCATION.match(/^\w+:\/\/([^\/]+)/)){var t=RegExp.$1;location.host!=t&&e.error("[WebSocket] You must host HTML and WebSocketMain.swf in the same host ('"+location.host+"' != '"+t+"'). See also 'How to host HTML file and SWF file in different domains' section in README.md. If you use WebSocketMainInsecure.swf, you can suppress this message by WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR = true;")}var n=document.createElement("div");n.id="webSocketContainer",n.style.position="absolute",WebSocket.__isFlashLite()?(n.style.left="0px",n.style.top="0px"):(n.style.left="-100px",n.style.top="-100px");var i=document.createElement("div");i.id="webSocketFlash",n.appendChild(i),document.body.appendChild(n),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;WebSocket.__tasks.length>e;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var t=WebSocket.__flash.receiveEvents(),n=0;t.length>n;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(i){e.error(i)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return!!(e&&e.enabledPlugin&&e.enabledPlugin.filename)&&!!e.enabledPlugin.filename.match(/flashlite/i)},void(window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||swfobject.addDomLoadEvent(function(){WebSocket.__initialize()})))}()},function(e,t,n){e.exports=n(68)},function(e,t,n){(function(e,i){/*!
		 * Nats
		 * Copyright(c) 2012-2016 Apcera Inc. All rights reserved.
		 * Copyright(c) 2011-2014 Derek Collison (derek.collison@gmail.com)
		 * MIT Licensed
		 */
"use strict";function r(e){f.EventEmitter.call(this),this.parseOptions(e),this.initState(),this.createConnection()}function o(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e}function a(e){this.url=e,this.didConnect=!1,this.reconnects=0}var s=n(69),u=n(70),c=n(71),l=n(15),f=n(32),h=n(78),d="0.6.8",p=4222,v="nats://localhost:",y=v+p,g=512,m=0,_=1,b=2e3,w=10,k=/^MSG\s+([^\s\r\n]+)\s+([^\s\r\n]+)\s+(([^\s\r\n]+)[^\S\r\n]+)?(\d+)\r\n/i,S=/^\+OK\s*\r\n/i,T=/^-ERR\s+('.+')?\r\n/i,E=/^PING\r\n/i,x=/^PONG\r\n/i,P=/^INFO\s+([^\r\n]+)\r\n/i,C=/^SUB\s+([^\r\n]+)\r\n/i,O="\r\n",A=O.length,M="",I=" ",R="SUB",D="UNSUB",j="CONNECT",L="PING"+O,B="PONG"+O,N="Subject must be supplied",U="Message can't be a function",F="Reply can't be a function",H="Connection closed",W="Message should be a JSON object",q="User and Token can not both be provided",G=65536;t.version=d;var z=t.createInbox=function(){return"_INBOX."+h.next()};t.connect=function(e){return new r(e)},l.inherits(r,f.EventEmitter),r.prototype.createInbox=z,r.prototype.assignOption=function(e,t,n){void 0===n&&(n=t),void 0!==e[t]&&(this.options[n]=e[t])},r.prototype.parseOptions=function(t){var n=this.options={verbose:!1,pedantic:!1,reconnect:!0,maxReconnectAttempts:w,reconnectTimeWait:b,encoding:"utf8",tls:!1,waitOnFirstConnect:!1};void 0===t?n.url=y:"number"==typeof t?n.url=v+t:"string"==typeof t?n.url=t:"object"==typeof t&&(void 0!==t.port&&(n.url=v+t.port),this.assignOption(t,"url"),this.assignOption(t,"uri","url"),this.assignOption(t,"user"),this.assignOption(t,"pass"),this.assignOption(t,"token"),this.assignOption(t,"password","pass"),this.assignOption(t,"verbose"),this.assignOption(t,"pedantic"),this.assignOption(t,"reconnect"),this.assignOption(t,"maxReconnectAttempts"),this.assignOption(t,"reconnectTimeWait"),this.assignOption(t,"servers"),this.assignOption(t,"urls","servers"),this.assignOption(t,"noRandomize"),this.assignOption(t,"NoRandomize","noRandomize"),this.assignOption(t,"dontRandomize","noRandomize"),this.assignOption(t,"encoding"),this.assignOption(t,"tls"),this.assignOption(t,"secure","tls"),this.assignOption(t,"name"),this.assignOption(t,"client","name"),this.assignOption(t,"yieldTime"),this.assignOption(t,"waitOnFirstConnect"),this.assignOption(t,"json"));var i=this;if(i.user=n.user,i.pass=n.pass,i.token=n.token,i.user&&i.token)throw new Error(q);if(!e.isEncoding(n.encoding))throw new Error("Invalid Encoding:"+n.encoding);i.encoding=n.encoding,i.servers=[],Array.isArray(n.servers)?n.servers.forEach(function(e){i.servers.push(new a(c.parse(e)))}):(void 0===n.url&&(n.url=y),i.servers.push(new a(c.parse(n.url)))),n.noRandomize!==!0&&o(i.servers)},r.prototype.selectServer=function(){var e=this,t=e.servers.shift();if(e.currentServer=t,e.url=t.url,"auth"in t.url&&t.url.auth){var n=t.url.auth.split(":");1!==n.length?(void 0===e.options.user&&(e.user=n[0]),void 0===e.options.pass&&(e.pass=n[1])):void 0===e.options.token&&(e.token=n[0])}e.servers.push(t)},r.prototype.checkTLSMismatch=function(){return this.info.tls_required===!0&&this.options.tls===!1?(this.emit("error","Server requires a secure connection."),this.closeStream(),!0):this.info.tls_required===!1&&this.options.tls!==!1?(this.emit("error","Server does not support a secure connection."),this.closeStream(),!0):this.info.tls_verify===!0&&void 0===this.options.tls.cert&&(this.emit("error","Server requires a client certificate."),this.closeStream(),!0)},r.prototype.connectCB=function(){var e=this.reconnecting,t=e===!0?"reconnect":"connect";this.reconnecting=!1,this.reconnects=0,this.wasConnected=!0,this.currentServer.didConnect=!0,this.emit(t,this),this.flushPending()},r.prototype.setupHandlers=function(){var t=this,n=t.stream;void 0!==n&&(n.on("connect",function(){t.connected=!0}),n.on("close",function(e){t.closeStream(),t.emit("disconnect"),t.closed===!0||t.options.reconnect===!1||t.reconnects>=t.options.maxReconnectAttempts&&t.options.maxReconnectAttempts!==-1?t.emit("close"):t.scheduleReconnect()}),n.on("error",function(e){t.wasConnected===!0&&t.currentServer.didConnect===!0||(t.wasConnected===!1&&t.currentServer.didConnect===!1&&(t.options.waitOnFirstConnect?t.currentServer.didConnect=!0:t.servers.splice(t.servers.length-1,1)),t.wasConnected===!1&&0===t.servers.length&&t.emit("error","Could not connect to server: "+e),t.closeStream())}),n.on("data",function(n){t.inbound?t.inbound=e.concat([t.inbound,n]):t.inbound=n,t.processInbound()}))},r.prototype.sendConnect=function(){var e={lang:"node",version:d,verbose:this.options.verbose,pedantic:this.options.pedantic};void 0!==this.user&&(e.user=this.user,e.pass=this.pass),void 0!==this.token&&(e.auth_token=this.token),void 0!==this.options.name&&(e.name=this.options.name),this.stream.write(j+I+JSON.stringify(e)+O)},r.prototype.createConnection=function(){var t=[],n=[],i=0,r=this;if(null!==r.pending){var o=0;r.pending.forEach(function(a){var s=e.isBuffer(a)?a.length:e.byteLength(a);if(a===L&&null!==r.pongs&&o<r.pongs.length){var u=r.pongs[o++];void 0!==u&&(n.push(a),i+=s,t.push(u))}else a.length>3&&"P"==a[0]&&"U"==a[1]&&"B"==a[2]&&(n.push(a),i+=s)})}this.pongs=t,this.pending=n,this.pSize=i,this.pstate=m,this.info=null,this.infoReceived=!1,this.selectServer(),this.stream=s.createConnection(this.url),this.setupHandlers()},r.prototype.initState=function(){this.ssid=1,this.subs={},this.reconnects=0,this.connected=!1,this.wasConnected=!1,this.reconnecting=!1,this.server=null,this.pending=[]},r.prototype.close=function(){this.closed=!0,this.removeAllListeners(),this.closeStream(),this.ssid=-1,this.subs=null,this.pstate=-1,this.pongs=null,this.pending=null,this.pSize=0},r.prototype.closeStream=function(){null!==this.stream&&(this.stream.end(),this.stream.destroy(),this.stream=null),this.connected!==!0&&this.closed!==!0||(this.pongs=null,this.pending=null,this.pSize=0,this.connected=!1),this.inbound=null},r.prototype.flushPending=function(){if(this.connected!==!1&&null!==this.pending&&0!==this.pending.length&&this.infoReceived===!0){var t=this,n=function(e){return t.pending=[],t.pSize=0,t.stream.write(e)};if(this.pBufs){for(var i=!0,r=0;r<this.pending.length;r++)if(!e.isBuffer(this.pending[r])){i=!1;break}if(i)return n(e.concat(this.pending,this.pSize));var o=this.pending;this.pending=[],this.pSize=0;var a=!0;for(r=0;r<o.length;r++)a=this.stream.write(o[r])&&a;return a}return n(this.pending.join(M))}},r.prototype.stripPendingSubs=function(){var e=this.pending;this.pending=[],this.pSize=0;for(var t=0;t<e.length;t++)C.test(e[t])||this.sendCommand(e[t])},r.prototype.sendCommand=function(t){if(!this.closed&&null!==this.pending&&(this.pending.push(t),e.isBuffer(t)?(this.pSize+=t.length,this.pBufs=!0):this.pSize+=e.byteLength(t),this.connected===!0))if(1===this.pending.length){var n=this;i(function(){n.flushPending()})}else this.pSize>G&&this.flushPending()},r.prototype.sendSubscriptions=function(){var e="";for(var t in this.subs)if(this.subs.hasOwnProperty(t)){var n,i=this.subs[t];n=i.qgroup?[R,i.subject,i.qgroup,t+O]:[R,i.subject,t+O],e+=n.join(I)}e.length>0&&this.stream.write(e)},r.prototype.processInbound=function(){var t,n,r=this;for(r.stream.resume(),void 0!==r.options.yieldTime&&(n=Date.now());!r.closed&&r.inbound&&r.inbound.length>0;){switch(r.pstate){case m:var o=r.inbound.toString("binary",0,g);if(null!==(t=k.exec(o)))r.payload={subj:t[1],sid:parseInt(t[2],10),reply:t[4],size:parseInt(t[5],10)},r.payload.psize=r.payload.size+A,r.pstate=_;else if(null!==(t=S.exec(o)));else if(null!==(t=T.exec(o)))r.emit("error",t[1]);else if(null!==(t=x.exec(o))){var a=r.pongs&&r.pongs.shift();a&&a()}else if(null!==(t=E.exec(o)))r.sendCommand(B);else{if(null===(t=P.exec(o)))return;if(r.info=JSON.parse(t[1]),r.checkTLSMismatch()===!0)return;if(r.infoReceived===!1){if(r.options.tls!==!1&&r.stream.encrypted!==!0){var s={socket:r.stream};if("object"==typeof r.options.tls)for(var c in r.options.tls)s[c]=r.options.tls[c];r.stream=u.connect(s,function(){r.flushPending()}),r.setupHandlers()}r.sendConnect(),r.sendSubscriptions(),r.pongs.unshift(function(){r.connectCB()}),r.stream.write(L),r.infoReceived=!0,r.stripPendingSubs(),r.flushPending()}}break;case _:if(r.inbound.length<r.payload.psize)return void 0===r.payload.chunks&&(r.payload.chunks=[]),r.payload.chunks.push(r.inbound),r.payload.psize-=r.inbound.length,void(r.inbound=null);if(r.payload.chunks){r.payload.chunks.push(r.inbound.slice(0,r.payload.psize));var l=e.concat(r.payload.chunks,r.payload.size+A);r.payload.msg=l.toString(r.encoding,0,r.payload.size)}else r.payload.msg=r.inbound.toString(r.encoding,0,r.payload.size);if(r.inbound.length===r.payload.psize?r.inbound=null:r.inbound=r.inbound.slice(r.payload.psize),r.processMsg(),r.pstate=m,r.payload=null,void 0!==n&&Date.now()-n>r.options.yieldTime)return r.stream.pause(),void i(r.processInbound.bind(this))}if(t&&!this.closed){var f=t[0].length;f>=r.inbound.length?r.inbound=null:r.inbound=r.inbound.slice(f)}t=null}},r.prototype.processMsg=function(){var t=this.subs[this.payload.sid];if(void 0!==t&&(t.received+=1,t.timeout&&t.received>=t.expected&&(clearTimeout(t.timeout),t.timeout=null),void 0!==t.max&&(t.received===t.max?(delete this.subs[this.payload.sid],this.emit("unsubscribe",this.payload.sid,t.subject)):t.received>t.max&&(this.unsubscribe(this.payload.sid),t.callback=null)),t.callback)){var n=this.payload.msg;if(this.options.json)try{n=JSON.parse(new e(this.payload.msg,this.options.encoding).toString())}catch(i){n=i}t.callback(n,this.payload.reply,this.payload.subj,this.payload.sid)}},r.prototype.addServer=function(e){this.servers.push(new a(c.parse(e))),this.options.noRandomize!==!0&&o(this.servers)},r.prototype.flush=function(e){if(this.closed){if("function"==typeof e)return void e(new Error(H));throw new Error(H)}this.pongs&&(this.pongs.push(e),this.sendCommand(L),this.flushPending())},r.prototype.publish=function(t,n,i,r){if("function"==typeof t&&(r=t,t=void 0),n||(n=M),!t){if(!r)throw new Error(N);r(new Error(N))}if("function"==typeof n){if(r||i)return void r(new Error(U));r=n,n=M,i=void 0}if("function"==typeof i){if(r)return void r(new Error(F));r=i,i=void 0}var o;if(o=void 0===i?"PUB "+t+I:"PUB "+t+I+i+I,"ArrayBuffer"in window&&ArrayBuffer.isView(n)&&(n=e.from(n)),e.isBuffer(n)){var a=new e(o.length+n.length+2*A+n.length.toString().length),s=a.write(o+n.length+O);n.copy(a,s),a.write(O,s+n.length),this.sendCommand(a)}else{var u=n;if(this.options.json){if("object"!=typeof n||Array.isArray(n))throw new Error(W);try{u=JSON.stringify(n)}catch(c){throw new Error(W)}}this.sendCommand(o+e.byteLength(u)+O+u+O)}if(void 0!==r)this.flush(r);else if(this.closed)throw new Error(H)},r.prototype.subscribe=function(e,t,n){if(this.closed)throw new Error(H);var i,r;"function"==typeof t?(n=t,t=void 0):t&&"object"==typeof t&&(i=t.queue,r=t.max),this.ssid+=1,this.subs[this.ssid]={subject:e,callback:n,received:0};var o;return"string"==typeof i?(this.subs[this.ssid].qgroup=i,o=[R,e,i,this.ssid+O]):o=[R,e,this.ssid+O],this.sendCommand(o.join(I)),this.emit("subscribe",this.ssid,e,t),r&&this.unsubscribe(this.ssid,r),this.ssid},r.prototype.unsubscribe=function(e,t){if(e&&!this.closed){var n;n=t?[D,e,t+O]:[D,e+O],this.sendCommand(n.join(I));var i=this.subs[e];void 0!==i&&(i.max=t,(void 0===i.max||i.received>=i.max)&&(delete this.subs[e],this.emit("unsubscribe",e,i.subject)))}},r.prototype.timeout=function(e,t,n,i){if(e){var r=this.subs[e];null!==r&&(r.expected=n,r.timeout=setTimeout(function(){i(e)},t))}},r.prototype.request=function(e,t,n,i){"function"==typeof t&&(i=t,t=M,n=null),"function"==typeof n&&(i=n,n=null);var r=z(),o=this.subscribe(r,n,function(e,t){i(e,t)});return this.publish(e,t,r),o},r.prototype.numSubscriptions=function(){return Object.keys(this.subs).length},r.prototype.reconnect=function(){this.closed||(this.reconnects+=1,this.createConnection(),this.currentServer.didConnect===!0&&this.emit("reconnecting"))},r.prototype.scheduleReconnect=function(){var e=this;if(0!==e.servers.length){e.wasConnected===!0&&(e.reconnecting=!0);var t=0;e.servers[0].didConnect===!0&&(t=this.options.reconnectTimeWait),setTimeout(function(){e.reconnect()},t)}}}).call(t,n(5).Buffer,n(44).setImmediate)},function(e,t,n){(function(e){"use strict";function i(t){var n=this;o.call(this),this.sock=new WebSocket(t),this.sock.addEventListener("open",function(e){n.emit("connect")}),this.sock.addEventListener("message",function(t){n.emit("data",new e(t.data))}),this.sock.addEventListener("error",function(e){n.emit("error",e)}),this.sock.addEventListener("close",function(e){n.emit("close")})}var r=n(15),o=n(32).EventEmitter;r.inherits(i,o),i.prototype.end=function(){this.destroy()},i.prototype.destroy=function(){this.sock.readyState!==WebSocket.CONNECTING&&this.sock.readyState!==WebSocket.OPEN||this.sock.close()},i.prototype.write=function(e){this.sock.readyState===WebSocket.OPEN&&this.sock.send(e)},i.prototype.pause=function(){console.warn("WebSocketProxy stream pause/resume is not supported yet.")},i.prototype.resume=function(){},t.createConnection=function(e){return new i(e.format({protocol:e.protocol,slashes:e.slashes,host:e.host,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search,path:e.path,query:e.query,hash:e.hash}))}}).call(t,n(5).Buffer)},function(e,t){t.connect=function(e,t){throw"TLS is not supported in the browser. Use WSS instead."}},function(e,t,n){"use strict";function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function r(e,t,n){if(e&&c.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}function o(e){return c.isString(e)&&(e=r(e)),e instanceof i?e.format():i.prototype.format.call(e)}function a(e,t){return r(e,!1,!0).resolve(t)}function s(e,t){return e?r(e,!1,!0).resolveObject(t):t}var u=n(72),c=n(74);t.parse=r,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=i;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,d=["<",">",'"',"`"," ","\r","\n","\t"],p=["{","}","|","\\","^","`"].concat(d),v=["'"].concat(p),y=["%","/","?",";","#"].concat(v),g=["/","?","#"],m=255,_=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},k={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},T=n(75);i.prototype.parse=function(e,t,n){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),r=i!==-1&&i<e.indexOf("#")?"?":"#",o=e.split(r),a=/\\/g;o[0]=o[0].replace(a,"/"),e=o.join(r);var s=e;if(s=s.trim(),!n&&1===e.split("#").length){var f=h.exec(s);if(f)return this.path=s,this.href=s,this.pathname=f[1],f[2]?(this.search=f[2],t?this.query=T.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var d=l.exec(s);if(d){d=d[0];var p=d.toLowerCase();this.protocol=p,s=s.substr(d.length)}if(n||d||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===s.substr(0,2);!E||d&&k[d]||(s=s.substr(2),this.slashes=!0)}if(!k[d]&&(E||d&&!S[d])){for(var x=-1,P=0;P<g.length;P++){var C=s.indexOf(g[P]);C!==-1&&(x===-1||C<x)&&(x=C)}var O,A;A=x===-1?s.lastIndexOf("@"):s.lastIndexOf("@",x),A!==-1&&(O=s.slice(0,A),s=s.slice(A+1),this.auth=decodeURIComponent(O)),x=-1;for(var P=0;P<y.length;P++){var C=s.indexOf(y[P]);C!==-1&&(x===-1||C<x)&&(x=C)}x===-1&&(x=s.length),this.host=s.slice(0,x),s=s.slice(x),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var I=this.hostname.split(/\./),P=0,R=I.length;P<R;P++){var D=I[P];if(D&&!D.match(_)){for(var j="",L=0,B=D.length;L<B;L++)j+=D.charCodeAt(L)>127?"x":D[L];if(!j.match(_)){var N=I.slice(0,P),U=I.slice(P+1),F=D.match(b);F&&(N.push(F[1]),U.unshift(F[2])),U.length&&(s="/"+U.join(".")+s),this.hostname=N.join(".");break}}}this.hostname.length>m?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=u.toASCII(this.hostname));var H=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+H,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!w[p])for(var P=0,R=v.length;P<R;P++){var q=v[P];if(s.indexOf(q)!==-1){var G=encodeURIComponent(q);G===q&&(G=escape(q)),s=s.split(q).join(G)}}var z=s.indexOf("#");z!==-1&&(this.hash=s.substr(z),s=s.slice(0,z));var V=s.indexOf("?");if(V!==-1?(this.search=s.substr(V),this.query=s.substr(V+1),t&&(this.query=T.parse(this.query)),s=s.slice(0,V)):t&&(this.search="",this.query={}),s&&(this.pathname=s),S[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var H=this.pathname||"",J=this.search||"";this.path=H+J}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,o="";this.host?r=e+this.host:this.hostname&&(r=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=T.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||S[t])&&r!==!1?(r="//"+(r||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):r||(r=""),i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+r+n+a+i},i.prototype.resolve=function(e){return this.resolveObject(r(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(c.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),o=0;o<r.length;o++){var a=r[o];n[a]=this[a]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(n[l]=e[l])}return S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!S[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var d=f[h];n[d]=e[d]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||k[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=m||g||n.host&&e.pathname,b=_,w=n.pathname&&n.pathname.split("/")||[],p=e.pathname&&e.pathname.split("/")||[],T=n.protocol&&!S[n.protocol];if(T&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),_=_&&(""===p[0]||""===w[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=e.search,n.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(T){n.hostname=n.host=w.shift();var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return n.search=e.search,n.query=e.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=w.slice(-1)[0],P=(n.host||e.host||w.length>1)&&("."===x||".."===x)||""===x,C=0,O=w.length;O>=0;O--)x=w[O],"."===x?w.splice(O,1):".."===x?(w.splice(O,1),C++):C&&(w.splice(O,1),C--);if(!_&&!b)for(;C--;C)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),P&&"/"!==w.join("/").substr(-1)&&w.push("");var A=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(T){n.hostname=n.host=A?"":w.length?w.shift():"";var E=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");E&&(n.auth=E.shift(),n.host=n.hostname=E.shift())}return _=_||n.host&&w.length,_&&!A&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){var i;(function(e,r){!function(o){function a(e){throw RangeError(I[e])}function s(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function u(e,t){var n=e.split("@"),i="";n.length>1&&(i=n[0]+"@",e=n[1]),e=e.replace(M,".");var r=e.split("."),o=s(r,t).join(".");return i+o}function c(e){for(var t,n,i=[],r=0,o=e.length;r<o;)t=e.charCodeAt(r++),t>=55296&&t<=56319&&r<o?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=j(e>>>10&1023|55296),e=56320|1023&e),t+=j(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:w}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function d(e,t,n){var i=0;for(e=n?D(e/E):e>>1,e+=D(e/t);e>R*S>>1;i+=w)e=D(e/R);return D(i+(R+1)*e/(e+T))}function p(e){var t,n,i,r,o,s,u,c,h,p,v=[],y=e.length,g=0,m=P,_=x;for(n=e.lastIndexOf(C),n<0&&(n=0),i=0;i<n;++i)e.charCodeAt(i)>=128&&a("not-basic"),v.push(e.charCodeAt(i));for(r=n>0?n+1:0;r<y;){for(o=g,s=1,u=w;r>=y&&a("invalid-input"),c=f(e.charCodeAt(r++)),(c>=w||c>D((b-g)/s))&&a("overflow"),g+=c*s,h=u<=_?k:u>=_+S?S:u-_,!(c<h);u+=w)p=w-h,s>D(b/p)&&a("overflow"),s*=p;t=v.length+1,_=d(g-o,t,0==o),D(g/t)>b-m&&a("overflow"),m+=D(g/t),g%=t,v.splice(g++,0,m)}return l(v)}function v(e){var t,n,i,r,o,s,u,l,f,p,v,y,g,m,_,T=[];for(e=c(e),y=e.length,t=P,n=0,o=x,s=0;s<y;++s)v=e[s],v<128&&T.push(j(v));for(i=r=T.length,r&&T.push(C);i<y;){for(u=b,s=0;s<y;++s)v=e[s],v>=t&&v<u&&(u=v);for(g=i+1,u-t>D((b-n)/g)&&a("overflow"),n+=(u-t)*g,t=u,s=0;s<y;++s)if(v=e[s],v<t&&++n>b&&a("overflow"),v==t){for(l=n,f=w;p=f<=o?k:f>=o+S?S:f-o,!(l<p);f+=w)_=l-p,m=w-p,T.push(j(h(p+_%m,0))),l=D(_/m);T.push(j(h(l,0))),o=d(n,g,i==r),n=0,++i}++n,++t}return T.join("")}function y(e){return u(e,function(e){return O.test(e)?p(e.slice(4).toLowerCase()):e})}function g(e){return u(e,function(e){return A.test(e)?"xn--"+v(e):e})}var m=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof r&&r);m.global!==m&&m.window!==m&&m.self!==m||(o=m);var _,b=2147483647,w=36,k=1,S=26,T=38,E=700,x=72,P=128,C="-",O=/^xn--/,A=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=w-k,D=Math.floor,j=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:c,encode:l},decode:p,encode:v,toASCII:g,toUnicode:y},i=function(){return _}.call(t,n,t,e),!(void 0!==i&&(e.exports=i))}(this)}).call(t,n(73)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){"use strict";t.decode=t.parse=n(76),t.encode=t.stringify=n(77)},function(e,t){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,r){t=t||"&",i=i||"=";var o={};if("string"!=typeof e||0===e.length)return o;var a=/\+/g;e=e.split(t);var s=1e3;r&&"number"==typeof r.maxKeys&&(s=r.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,f,h,d,p=e[c].replace(a,"%20"),v=p.indexOf(i);v>=0?(l=p.substr(0,v),f=p.substr(v+1)):(l=p,f=""),h=decodeURIComponent(l),d=decodeURIComponent(f),n(o,h)?Array.isArray(o[h])?o[h].push(d):o[h]=[o[h],d]:o[h]=d}return o}},function(e,t){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,i,r){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(r){var o=encodeURIComponent(n(r))+i;return Array.isArray(e[r])?e[r].map(function(e){return o+encodeURIComponent(n(e))}).join(t):o+encodeURIComponent(n(e[r]))}).join(t):r?encodeURIComponent(n(r))+i+encodeURIComponent(n(e)):""}},function(e,t,n){e.exports=n(79)},function(e,t,n){(function(e){/*!
		 * Nats
		 * Copyright(c) 2016 Apcera Inc. All rights reserved.
		 * MIT Licensed
		 */
"use strict";function i(){this.buf=new e(d),this.init()}var r=n(4),o="0.6.8",a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=36,u=12,c=10,l=0xcfd41b9100000,f=33,h=333,d=u+c;t.version=o,i.prototype.init=function(){this.setPre(),this.initSeqAndInc(),this.fillSeq()},i.prototype.initSeqAndInc=function(){this.seq=Math.floor(Math.random()*l),this.inc=Math.floor(Math.random()*(h-f)+f)},i.prototype.setPre=function(){for(var e=r.randomBytes(u),t=0;t<u;t++){var n=e[t]%s;this.buf[t]=a.charCodeAt(n)}},i.prototype.fillSeq=function(){for(var e=this.seq,t=d-1;t>=u;t--)this.buf[t]=a.charCodeAt(e%s),e=Math.floor(e/s)},i.prototype.next=function(){return this.seq+=this.inc,this.seq>l&&this.setPre(),this.initSeqAndInc(),this.fillSeq(),this.buf.toString("ascii")};var p=new i;t.reset=function(){p.init()},t.next=function(){return p.next()},t._global=p}).call(t,n(5).Buffer)},function(e,t,n){function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=(n(1),n(2),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}());n(81);var o=n(67),a=function(){function e(){i(this,e),"undefined"==typeof window.NAT_SERVERS&&(window.NAT_SERVERS=["wss://rop.mudu.tv:4224"]),this.servers=window.NAT_SERVERS,this.nc=o.connect({servers:this.servers,reconnectTimeWait:0,maxReconnectAttempts:1/0}),this.commentCB=null,this.commentStreamCB=null,this.streamEventCB=null,this.topic_sid_map={},this.hasrun=!1}return r(e,[{key:"Init",value:function(){}},{key:"On",value:function(e,t){"undefined"==typeof this.topic_sid_map[e]&&(this.topic_sid_map[e]=[]),this.topic_sid_map[e].push(this.nc.subscribe(e,t))}},{key:"Remove",value:function(e){if("undefined"!=typeof this.topic_sid_map[e])for(var t;t=this.topic_sid_map[e].pop();)this.nc.unsubscribe(t)}},{key:"Send",value:function(e,t){this.nc.publish(e,t)}},{key:"SetCommentCallBack",value:function(e){this.commentCB=e}},{key:"SetCommentStreamCallBack",value:function(e){this.commentStreamCB=e}},{key:"SetStreamEventCallBack",value:function(e){this.streamEventCB=e}},{key:"Run",value:function(e){var t=this;this.hasrun||(this.hasrun=!0,this.On("comment-"+e,function(e){if(null!=t.commentCB){var n=JSON.parse(e);t.commentCB(n)}}),this.On("stream-event",function(e){if(null!=t.streamEventCB){var n=JSON.parse(e);t.streamEventCB(n)}}),this.On("comment-stream-"+e,function(e){if(null!=t.commentStreamCB){var n=JSON.parse(e);t.commentStreamCB(n)}}))}}]),e}();e.exports=a},function(e,t,n){var i;(function(e,r){(function(){function o(e,t){function n(e){if(n[e]!==y)return n[e];var o;if("bug-string-char-index"==e)o="a"!="a"[0];else if("json"==e)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=t.stringify,l="function"==typeof c&&_;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===c(0)&&"0"===c(new i)&&'""'==c(new r)&&c(m)===y&&c(y)===y&&c()===y&&"1"===c(a)&&"[1]"==c([a])&&"[null]"==c([y])&&"null"==c(null)&&"[null,null,null]"==c([y,m,null])&&c({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,a)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u((-864e13)))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u((-621987552e5)))&&'"1969-12-31T23:59:59.999Z"'==c(new u((-1)))}catch(f){l=!1}}o=l}if("json-parse"==e){var h=t.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){a=h(s);var d=5==a.a.length&&1===a.a[0];if(d){try{d=!h('"\t"')}catch(f){}if(d)try{d=1!==h("01")}catch(f){}if(d)try{d=1!==h("1.")}catch(f){}}}}catch(f){d=!1}o=d}}return n[e]=!!o}e||(e=c.Object()),t||(t=c.Object());var i=e.Number||c.Number,r=e.String||c.String,a=e.Object||c.Object,u=e.Date||c.Date,l=e.SyntaxError||c.SyntaxError,f=e.TypeError||c.TypeError,h=e.Math||c.Math,d=e.JSON||c.JSON;"object"==typeof d&&d&&(t.stringify=d.stringify,t.parse=d.parse);var p,v,y,g=a.prototype,m=g.toString,_=new u((-0xc782b5b800cec));try{_=_.getUTCFullYear()==-109252&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(b){}if(!n("json")){var w="[object Function]",k="[object Date]",S="[object Number]",T="[object String]",E="[object Array]",x="[object Boolean]",P=n("bug-string-char-index");if(!_)var C=h.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],A=function(e,t){return O[t]+365*(e-1970)+C((e-1969+(t=+(t>1)))/4)-C((e-1901+t)/100)+C((e-1601+t)/400)};if((p=g.hasOwnProperty)||(p=function(e){var t,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=m?p=function(e){var t=this.__proto__,n=e in(this.__proto__=null,this);return this.__proto__=t,n}:(t=n.constructor,p=function(e){var n=(this.constructor||t).prototype;return e in this&&!(e in n&&this[e]===n[e])}),n=null,p.call(this,e)}),v=function(e,t){var n,i,r,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,i=new n;for(r in i)p.call(i,r)&&o++;return n=i=null,o?v=2==o?function(e,t){var n,i={},r=m.call(e)==w;for(n in e)r&&"prototype"==n||p.call(i,n)||!(i[n]=1)||!p.call(e,n)||t(n)}:function(e,t){var n,i,r=m.call(e)==w;for(n in e)r&&"prototype"==n||!p.call(e,n)||(i="constructor"===n)||t(n);(i||p.call(e,n="constructor"))&&t(n)}:(i=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],v=function(e,t){var n,r,o=m.call(e)==w,a=!o&&"function"!=typeof e.constructor&&s[typeof e.hasOwnProperty]&&e.hasOwnProperty||p;for(n in e)o&&"prototype"==n||!a.call(e,n)||t(n);for(r=i.length;n=i[--r];a.call(e,n)&&t(n));}),v(e,t)},!n("json-stringify")){var M={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},I="000000",R=function(e,t){return(I+(t||0)).slice(-e)},D="\\u00",j=function(e){for(var t='"',n=0,i=e.length,r=!P||i>10,o=r&&(P?e.split(""):e);n<i;n++){var a=e.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=M[a];break;default:if(a<32){t+=D+R(2,a.toString(16));break}t+=r?o[n]:e.charAt(n)}}return t+'"'},L=function(e,t,n,i,r,o,a){var s,u,c,l,h,d,g,_,b,w,P,O,M,I,D,B;try{s=t[e]}catch(N){}if("object"==typeof s&&s)if(u=m.call(s),u!=k||p.call(s,"toJSON"))"function"==typeof s.toJSON&&(u!=S&&u!=T&&u!=E||p.call(s,"toJSON"))&&(s=s.toJSON(e));else if(s>-1/0&&s<1/0){if(A){for(h=C(s/864e5),c=C(h/365.2425)+1970-1;A(c+1,0)<=h;c++);for(l=C((h-A(c,0))/30.42);A(c,l+1)<=h;l++);h=1+h-A(c,l),d=(s%864e5+864e5)%864e5,g=C(d/36e5)%24,_=C(d/6e4)%60,b=C(d/1e3)%60,w=d%1e3}else c=s.getUTCFullYear(),l=s.getUTCMonth(),h=s.getUTCDate(),g=s.getUTCHours(),_=s.getUTCMinutes(),b=s.getUTCSeconds(),w=s.getUTCMilliseconds();s=(c<=0||c>=1e4?(c<0?"-":"+")+R(6,c<0?-c:c):R(4,c))+"-"+R(2,l+1)+"-"+R(2,h)+"T"+R(2,g)+":"+R(2,_)+":"+R(2,b)+"."+R(3,w)+"Z"}else s=null;if(n&&(s=n.call(t,e,s)),null===s)return"null";if(u=m.call(s),u==x)return""+s;if(u==S)return s>-1/0&&s<1/0?""+s:"null";if(u==T)return j(""+s);if("object"==typeof s){for(I=a.length;I--;)if(a[I]===s)throw f();if(a.push(s),P=[],D=o,o+=r,u==E){for(M=0,I=s.length;M<I;M++)O=L(M,s,n,i,r,o,a),P.push(O===y?"null":O);B=P.length?r?"[\n"+o+P.join(",\n"+o)+"\n"+D+"]":"["+P.join(",")+"]":"[]"}else v(i||s,function(e){var t=L(e,s,n,i,r,o,a);t!==y&&P.push(j(e)+":"+(r?" ":"")+t)}),B=P.length?r?"{\n"+o+P.join(",\n"+o)+"\n"+D+"}":"{"+P.join(",")+"}":"{}";return a.pop(),B}};t.stringify=function(e,t,n){var i,r,o,a;if(s[typeof t]&&t)if((a=m.call(t))==w)r=t;else if(a==E){o={};for(var u,c=0,l=t.length;c<l;u=t[c++],a=m.call(u),(a==T||a==S)&&(o[u]=1));}if(n)if((a=m.call(n))==S){if((n-=n%1)>0)for(i="",n>10&&(n=10);i.length<n;i+=" ");}else a==T&&(i=n.length<=10?n:n.slice(0,10));return L("",(u={},u[""]=e,u),r,o,i,"",[])}}if(!n("json-parse")){var B,N,U=r.fromCharCode,F={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},H=function(){throw B=N=null,l()},W=function(){for(var e,t,n,i,r,o=N,a=o.length;B<a;)switch(r=o.charCodeAt(B)){case 9:case 10:case 13:case 32:B++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=P?o.charAt(B):o[B],B++,e;case 34:for(e="@",B++;B<a;)if(r=o.charCodeAt(B),r<32)H();else if(92==r)switch(r=o.charCodeAt(++B)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=F[r],B++;break;case 117:for(t=++B,n=B+4;B<n;B++)r=o.charCodeAt(B),r>=48&&r<=57||r>=97&&r<=102||r>=65&&r<=70||H();e+=U("0x"+o.slice(t,B));break;default:H()}else{if(34==r)break;for(r=o.charCodeAt(B),t=B;r>=32&&92!=r&&34!=r;)r=o.charCodeAt(++B);e+=o.slice(t,B)}if(34==o.charCodeAt(B))return B++,e;H();default:if(t=B,45==r&&(i=!0,r=o.charCodeAt(++B)),r>=48&&r<=57){for(48==r&&(r=o.charCodeAt(B+1),r>=48&&r<=57)&&H(),i=!1;B<a&&(r=o.charCodeAt(B),r>=48&&r<=57);B++);if(46==o.charCodeAt(B)){for(n=++B;n<a&&(r=o.charCodeAt(n),r>=48&&r<=57);n++);n==B&&H(),B=n}if(r=o.charCodeAt(B),101==r||69==r){for(r=o.charCodeAt(++B),43!=r&&45!=r||B++,n=B;n<a&&(r=o.charCodeAt(n),r>=48&&r<=57);n++);n==B&&H(),B=n}return+o.slice(t,B)}if(i&&H(),"true"==o.slice(B,B+4))return B+=4,!0;if("false"==o.slice(B,B+5))return B+=5,!1;if("null"==o.slice(B,B+4))return B+=4,null;H()}return"$"},q=function(e){var t,n;if("$"==e&&H(),"string"==typeof e){if("@"==(P?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=W(),"]"!=e;n||(n=!0))n&&(","==e?(e=W(),"]"==e&&H()):H()),","==e&&H(),t.push(q(e));return t}if("{"==e){for(t={};e=W(),"}"!=e;n||(n=!0))n&&(","==e?(e=W(),"}"==e&&H()):H()),","!=e&&"string"==typeof e&&"@"==(P?e.charAt(0):e[0])&&":"==W()||H(),t[e.slice(1)]=q(W());return t}H()}return e},G=function(e,t,n){var i=z(e,t,n);i===y?delete e[t]:e[t]=i},z=function(e,t,n){var i,r=e[t];if("object"==typeof r&&r)if(m.call(r)==E)for(i=r.length;i--;)G(r,i,n);else v(r,function(e){G(r,e,n)});return n.call(e,t,r)};t.parse=function(e,t){var n,i;return B=0,N=""+e,n=q(W()),"$"!=W()&&H(),B=N=null,t&&m.call(t)==w?z((i={},i[""]=n,i),"",t):n}}}return t.runInContext=o,t}var a=n(82),s={"function":!0,object:!0},u=s[typeof t]&&t&&!t.nodeType&&t,c=s[typeof window]&&window||this,l=u&&s[typeof e]&&e&&!e.nodeType&&"object"==typeof r&&r;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(c=l),u&&!a)o(c,u);else{var f=c.JSON,h=c.JSON3,d=!1,p=o(c,c.JSON3={noConflict:function(){return d||(d=!0,c.JSON=f,c.JSON3=h,f=h=null),p}});c.JSON={parse:p.parse,stringify:p.stringify}}a&&(i=function(){return p}.call(t,n,t,e),!(void 0!==i&&(e.exports=i)))}).call(this)}).call(t,n(73)(e),function(){return this}())},function(e,t){(function(t){e.exports=t}).call(t,{})}]),e.exports=messager}).call(t,n(194).setImmediate,n(194).clearImmediate)},function(e,t,n){(function(e,i){function r(e,t){this._id=e,this._clearFn=t}var o=n(195).nextTick,a=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=c++,i=!(arguments.length<2)&&s.call(arguments,1);return u[n]=!0,o(function(){u[n]&&(i?e.apply(null,i):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof i?i:function(e){delete u[e]}}).call(t,n(194).setImmediate,n(194).clearImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&d&&(v=!1,d.length?p=d.concat(p):y=-1,p.length&&s())}function s(){if(!v){var e=r(a);v=!0;for(var t=p.length;t;){for(d=p,p=[];++y<t;)d&&d[y].run();y=-1,t=p.length}d=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var d,p=[],v=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||r(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(e){return[]},h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}}]);
//# sourceMappingURL=sdk.js.map