(window.webpackJsonp=window.webpackJsonp||[]).push([[242],{753:function(t,s,a){"use strict";a.r(s);var e=a(49),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"图片理解-api-文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片理解-api-文档"}},[t._v("#")]),t._v(" 图片理解 API 文档")]),t._v(" "),s("h2",{attrs:{id:"服务说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#服务说明"}},[t._v("#")]),t._v(" 服务说明")]),t._v(" "),s("p",[s("strong",[t._v("本服务是星火大模型训练的视觉模型，支持用于基于上传的图片内容进行理解、推理和问答。")]),t._v(" "),s("strong",[t._v("近期，整体效果全面升级，在万物识别方面重点提升识别准确性，增强推理能力")])]),t._v(" "),s("h2",{attrs:{id:"调用示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#调用示例"}},[t._v("#")]),t._v(" 调用示例")]),t._v(" "),s("ul",[s("li",[t._v("部分开发语言demo如下，其他开发语言请参照文档进行开发，也欢迎热心的开发者到 "),s("a",{attrs:{href:"https://developer.xfyun.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("讯飞开放平台社区"),s("OutboundLink")],1),t._v(" 分享你们的demo。技术咨询可直接提交"),s("a",{attrs:{href:"https://console.xfyun.cn/workorder/commit",target:"_blank",rel:"noopener noreferrer"}},[t._v("工单"),s("OutboundLink")],1),s("br")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://openres.xfyun.cn/xfyundoc/2025-03-07/aef8da51-5070-4615-a2c7-94f22eba34fb/1741332295712/ImageUnderstanding_Python.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片理解 demo python语言"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://openres.xfyun.cn/xfyundoc/2025-03-07/5998033f-e87e-47a3-832c-bb5b6d9c9887/1741332960490/Image_Understanding_java.zip",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片理解 demo java语言"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://openres.xfyun.cn/xfyundoc/2025-03-07/261cba42-d641-4cdc-bde1-78fd9825de27/1741333418869/image_Understanding_Golang.go",target:"_blank",rel:"noopener noreferrer"}},[t._v("图片理解 demo go语言"),s("OutboundLink")],1),s("br")]),t._v(" "),s("h2",{attrs:{id:"接口要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接口要求"}},[t._v("#")]),t._v(" 接口要求")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("内容")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("传输方式")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("ws[s] (为提高安全性，强烈推荐wss)")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("请求地址")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("wss://spark-api.cn-huabei-1.xf-yun.com/v2.1/image"),s("br"),t._v(" "),s("em",[t._v("注：服务器IP不固定，为保证您的接口稳定，请勿通过指定IP的方式调用接口，使用域名方式调用")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Content-Type")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("application/json;charset=UTF-8")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("接口鉴权")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("签名机制，详情请参照"),s("a",{attrs:{href:"https://www.xfyun.cn/doc/spark/general_url_authentication.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("签名生成"),s("OutboundLink")],1)])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("字符编码")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("UTF-8")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("响应格式")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("统一采用JSON格式")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("开发语言")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("任意，只要可以向讯飞云服务发起HTTP请求的均可")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("适用范围")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("任意操作系统，但因不支持跨域不适用于浏览器")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("图片格式")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v(".jpg、.jpeg、.png")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("图片大小")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("4M")])])])]),t._v(" "),s("h2",{attrs:{id:"鉴权说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#鉴权说明"}},[t._v("#")]),t._v(" 鉴权说明")]),t._v(" "),s("p",[t._v("在调用业务接口时，请求方需要对请求进行签名，服务端通过签名来校验请求的合法性。")]),t._v(" "),s("h4",{attrs:{id:"鉴权方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#鉴权方法"}},[t._v("#")]),t._v(" 鉴权方法")]),t._v(" "),s("p",[t._v("详情请参照下方"),s("a",{attrs:{href:"https://www.xfyun.cn/doc/spark/general_url_authentication.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("签名生成"),s("OutboundLink")],1)]),t._v(" "),s("h4",{attrs:{id:"鉴权结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#鉴权结果"}},[t._v("#")]),t._v(" 鉴权结果")]),t._v(" "),s("p",[t._v("如果鉴权失败，则根据不同错误类型返回不同HTTP Code状态码，同时携带错误描述信息，详细错误说明如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("HTTP Code")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("错误描述信息")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("解决方法")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("401")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("缺少authorization参数")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v('{"message":"Unauthorized"}')]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("检查是否有authorization参数，详情见"),s("a",{attrs:{href:"#%E9%89%B4%E6%9D%83%E6%96%B9%E6%B3%95"}},[t._v("authorization参数详细生成规则")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("401")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("签名参数解析失败")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("{“message”:”HMAC signature cannot be verified”}")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("检查签名的各个参数是否有缺失是否正确，特别确认下复制的"),s("strong",[t._v("api_key")]),t._v("是否正确")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("401")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("签名校验失败")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("{“message”:”HMAC signature does not match”}")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("签名验证失败，可能原因有很多。"),s("br"),t._v("1. 检查api_key,api_secret 是否正确。"),s("br"),t._v("2.检查计算签名的参数host，date，request-line是否按照协议要求拼接。"),s("br"),t._v("3. 检查signature签名的base64长度是否正常(正常44个字节)。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("403")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("时钟偏移校验失败")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("{“message”:”HMAC signature cannot be verified, a valid date or x-date header is required for HMAC Authentication”}")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("检查服务器时间是否标准，相差5分钟以上会报此错误")])])])]),t._v(" "),s("p",[t._v("时钟偏移校验失败示例：")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[t._v("HTTP/"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),t._v(" Forbidden\nDate"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Mon"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" May "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2023")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("05")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("44")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("14")]),t._v(" GMT\nContent-Length"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("116")]),t._v("\nContent-Type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" text/plain; charset=utf"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("-8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HMAC signature does not match, a valid date or x-date header is required for HMAC Authentication"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"请求参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求参数"}},[t._v("#")]),t._v(" 请求参数")]),t._v(" "),s("p",[t._v("在调用业务接口时，都需要在 Http Request Body 中配置以下参数，请求数据均为json字符串。"),s("br"),t._v(" "),s("strong",[t._v("请求参数示例：")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"header"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"app_id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"123456"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"uid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"39769795890"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"parameter"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"chat"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"domain"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"imagev3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"temperature"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"top_k"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"max_tokens"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2028")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payload"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"base64"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"这张图片是什么内容"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("请求参数说明：")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数名")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("必传")]),t._v(" "),s("th",[t._v("可选值")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("header.app_id")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("控制台创建应用后获取appid")]),t._v(" "),s("td",[t._v("最大长度：8")])]),t._v(" "),s("tr",[s("td",[t._v("header.uid")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("非必传字段，用于后续扩展")]),t._v(" "),s("td",[t._v("最大长度：32")])]),t._v(" "),s("tr",[s("td",[t._v("parameter.chat")]),t._v(" "),s("td",[t._v("object")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("业务参数")]),t._v(" "),s("td",[t._v("用于上传对话的参数信息")])]),t._v(" "),s("tr",[s("td",[t._v("parameter.chat.domain")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("general (基础版)、imagev3(高级版)")]),t._v(" "),s("td",[t._v("模型版本"),s("br"),t._v("1、高级版本效果更优；"),s("br"),t._v("2、针对相同图片token计量不同，高级版token为动态计量，图片内容越复杂，token消耗越高。"),s("br"),t._v("请根据业务选择")])]),t._v(" "),s("tr",[s("td",[t._v("parameter.chat.temperature")]),t._v(" "),s("td",[t._v("float")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("取值范围 (0，1]")]),t._v(" "),s("td",[t._v("核采样阈值,向上调整可以增加结果的随机程度 ，默认值0.5")])]),t._v(" "),s("tr",[s("td",[t._v("parameter.chat.top_k")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("整数值：1~6，默认值4")]),t._v(" "),s("td",[t._v("从k个中随机选择一个(非等概率)")])]),t._v(" "),s("tr",[s("td",[t._v("parameter.chat.max_tokens")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("最小值是1, 最大值是8192，默认值2048")]),t._v(" "),s("td",[t._v("回答的tokens的最大长度")])]),t._v(" "),s("tr",[s("td",[t._v("parameter.chat.chat_id")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("否")]),t._v(" "),s("td",[t._v("非必传字段，用于后续扩展")]),t._v(" "),s("td",[t._v("用于关联会话chat ，需要保障用户下唯一")])]),t._v(" "),s("tr",[s("td",[t._v("payload.message.text")]),t._v(" "),s("td",[t._v("json/object/array")]),t._v(" "),s("td",[t._v("是")]),t._v(" "),s("td",[t._v("用户输入的图片、文本等数据")]),t._v(" "),s("td",[t._v("受Token限制，有效内容不能超过8192Token")])])])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("单轮交互示例说明：")]),t._v("\n单轮交互只需要传递一个user角色的数据")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用户的提问")]),t._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 首个必须是图片")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"你会做什么？"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("ul",[s("li",[s("strong",[t._v("多轮交互的格式示例：")]),t._v("\n多轮交互需要将之前的交互历史按照user(image)->user->assistant->user->assistant规则进行拼接，保证最后一条是user的当前问题")])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拼接对话历史信息:")]),t._v("\n  \t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 首个必须是图片")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"图片里面有几个人"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用户第一个问题   role是user,表示是用户的提问")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"assistant"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"有三个人"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// AI的第一个回复  role是assistant，表示是AI的回复")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用户最新的提问")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"几条腿？"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("字段参数说明：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("含义")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("数据类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("取值范围")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("role")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("角色")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("user,  assistant")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[s("strong",[t._v("user表示是用户的问题，assistant表示AI的回复")])])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("content")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("文本内容")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("--")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("该角色的对话内容")])])])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("图片数据")])])]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"base64"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"image"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("字段参数说明：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("字段")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("含义")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("数据类型")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("取值范围")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("默认值")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("role")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("角色")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("user")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("多模的数据上传使用user")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("content")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("图片的base64数据")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("--")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}}),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("模型自动判断格式，直接传二进制数据即可")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("content_type")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("数据的类型")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("string")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("image、text")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("text")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("图片上传的时候固定使用image")])])])]),t._v(" "),s("h2",{attrs:{id:"返回结果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回结果"}},[t._v("#")]),t._v(" 返回结果")]),t._v(" "),s("p",[s("strong",[t._v("返回参数示例：")]),s("br"),t._v("\n成功")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"header"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Success"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cht000704fa@dx16ade44e4d87a1c802"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"payload"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"choices"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"seq"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"这是AI的回复文本"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  \t            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      \t            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"content_meta"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \t            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"desc"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        \t            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    \t\t            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"index"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"role"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"assistant"')]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"usage"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"completion_tokens"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"question_tokens"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prompt_tokens"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"total_tokens"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("异常")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"header"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10110")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("     \n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"message"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"sid"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cht00120013@dx181c8172afb0001102"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("返回参数说明:")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("header.code")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("服务错误码  ， 0表示正常，非0表示出错")])]),t._v(" "),s("tr",[s("td",[t._v("header.sid")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("会话的sid")])]),t._v(" "),s("tr",[s("td",[t._v("header.status")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("会话的状态，取值[0，1，2]，  其中0表示第一个结果, 1表示中间结果, 2表示最后一个结果")])]),t._v(" "),s("tr",[s("td",[t._v("header.message")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("返回消息描述 ，错误码的描述信息")])]),t._v(" "),s("tr",[s("td",[t._v("payload.choices.status")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("数据状态 ，0:开始, 1:开始, 2:结束（表示文本响应结束）")])]),t._v(" "),s("tr",[s("td",[t._v("payload.choices.seq")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("数据序号，最小值:0, 最大值:9999999")])]),t._v(" "),s("tr",[s("td",[t._v("payload.choices.text")]),t._v(" "),s("td",[t._v("json object array")]),t._v(" "),s("td",[t._v("文本结果 ，是一个json 数组")])]),t._v(" "),s("tr",[s("td",[t._v("payload.usage")]),t._v(" "),s("td",[t._v("object")]),t._v(" "),s("td",[t._v("token消耗响应，最后一个结果时，才会有该字段")])]),t._v(" "),s("tr",[s("td",[t._v("payload.usage.text")]),t._v(" "),s("td",[t._v("json / object")]),t._v(" "),s("td",[t._v("文本数据")])]),t._v(" "),s("tr",[s("td",[t._v("payload.usage.text.completion_tokens")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("回答tokens大小")])]),t._v(" "),s("tr",[s("td",[t._v("payload.usage.text.question_tokens")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("问题不带历史的tokens大小 ，单轮情况下，此数值会略小于prompt_tokens")])]),t._v(" "),s("tr",[s("td",[t._v("payload.usage.text.prompt_tokens")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("问题总tokens大小")])]),t._v(" "),s("tr",[s("td",[t._v("payload.usage.text.total_tokens")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("问题和回答的tokens大小")])])])]),t._v(" "),s("p",[s("strong",[t._v("choices字段参数说明")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("参数")]),t._v(" "),s("th",[t._v("类型")]),t._v(" "),s("th",[t._v("含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("content")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("回答的结果")])]),t._v(" "),s("tr",[s("td",[t._v("content_type")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("数据的类型")])]),t._v(" "),s("tr",[s("td",[t._v("index")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("结果序号，在多候选中使用")])]),t._v(" "),s("tr",[s("td",[t._v("role")]),t._v(" "),s("td",[t._v("string")]),t._v(" "),s("td",[t._v("角色，assistant说明这是AI的回复")])])])]),t._v(" "),s("h2",{attrs:{id:"结果格式补充说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#结果格式补充说明"}},[t._v("#")]),t._v(" 结果格式补充说明")]),t._v(" "),s("p",[t._v("模型结果除了普通文本类型，为了满足排版需求，会出现以下的标记语言，建议集成方进行适配：")]),t._v(" "),s("ul",[s("li",[t._v("markdown（表格、列表等）")]),t._v(" "),s("li",[t._v("latex（数学公式）")])]),t._v(" "),s("h3",{attrs:{id:"错误码描述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#错误码描述"}},[t._v("#")]),t._v(" 错误码描述")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("错误码")]),t._v(" "),s("th",[t._v("错误信息")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("0")]),t._v(" "),s("td",[t._v("成功")])]),t._v(" "),s("tr",[s("td",[t._v("10003")]),t._v(" "),s("td",[t._v("用户的消息格式有错误")])]),t._v(" "),s("tr",[s("td",[t._v("10004")]),t._v(" "),s("td",[t._v("用户数据的schema错误")])]),t._v(" "),s("tr",[s("td",[t._v("10005")]),t._v(" "),s("td",[t._v("用户参数值有错误")])]),t._v(" "),s("tr",[s("td",[t._v("10006")]),t._v(" "),s("td",[t._v("用户并发错误：当前用户已连接，同一用户不能多处同时连接。")])]),t._v(" "),s("tr",[s("td",[t._v("10013")]),t._v(" "),s("td",[t._v("用户问题涉及敏感信息，审核不通过，拒绝处理此次请求。")])]),t._v(" "),s("tr",[s("td",[t._v("10022")]),t._v(" "),s("td",[t._v("模型生产的图片涉及敏感信息，审核不通过")])]),t._v(" "),s("tr",[s("td",[t._v("10029")]),t._v(" "),s("td",[t._v("图片任何一边的长度超过12800，请检查图片")])]),t._v(" "),s("tr",[s("td",[t._v("10041")]),t._v(" "),s("td",[t._v("图片分辨率不符合要求，50×50 < 图片总像素值 < 6000×6000。")])]),t._v(" "),s("tr",[s("td",[t._v("10907")]),t._v(" "),s("td",[t._v("token数量超过上限。对话历史+问题的字数太多，需要精简输入。")])])])]),t._v(" "),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),s("h4",{attrs:{id:"图片理解的主要功能是什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片理解的主要功能是什么"}},[t._v("#")]),t._v(" 图片理解的主要功能是什么？")]),t._v(" "),s("blockquote",[s("p",[t._v("答：用户输入一张图片和问题，从而识别出图片中的对象、场景等信息回答用户的问题。")])]),t._v(" "),s("h4",{attrs:{id:"图片理解支持什么应用平台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片理解支持什么应用平台"}},[t._v("#")]),t._v(" 图片理解支持什么应用平台？")]),t._v(" "),s("blockquote",[s("p",[t._v("答：目前支持Web API应用平台。")])]),t._v(" "),s("h4",{attrs:{id:"图片理解的文本大小限制多少"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#图片理解的文本大小限制多少"}},[t._v("#")]),t._v(" 图片理解的文本大小限制多少？")]),t._v(" "),s("blockquote",[s("p",[t._v("答：有效内容不能超过8192Token。")])])])}),[],!1,null,null,null);s.default=n.exports}}]);